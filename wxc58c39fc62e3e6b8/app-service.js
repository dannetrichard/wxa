	var __wxAppData = {}; 	var __wxRoute; 	var __wxRouteBegin; 	var __wxAppCode__ = {};	var global = {};	var __wxAppCurrentFile__; 	var Component = Component || function(){};	var Behavior = Behavior || function(){};
		define("common/app.config.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={shopId:"1172uvda",sellerUserId:"19xrp0q",ttid:"1302422539@dianpuapp_wxxcx_1.0",appKey:"100082",marketType:"market_mogujie",appId:"wxc58c39fc62e3e6b8",sceneType:"bigEye_global",appName:"大眼睛买买买全球店",platform:"70",shopIdNum:1302422539,tabbarParams:{"/pages/shop/home/index":"","/pages/cart/index":"","/pages/personal/index":""}}; 
 			}); 
		define("common/base/Events.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("../lib")([7],[],[5]); 
 			}); 
		define("common/base/PageFactory.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("../lib")([6],{16:function(t,e,n){function o(t,e){function n(){i=Object.create(null),c=[]}function o(){r.default.debug("batchedSetData"),r.default.debug("buffer length",JSON.stringify(i).length);var o=function(){for(var t=0,e=s.length;t<e;t++)try{s[t]()}catch(t){r.default.error("uncaught exception in setData callback",t.stack)}};Object(a.apply)(t,e,[i,u&&o]);var s=c;n(),u||o()}var i,c,s=null,u=t.length>1;return n(),function(t,e){r.default.time("setData"),clearTimeout(s),t&&Object(a.merge)(i,t),"function"==typeof e&&c.push(e);for(var n in t)t.hasOwnProperty(n)&&Object(a.setAt)(n,this.data,t[n]);s=setTimeout(o,0),r.default.timeEnd("setData")}}Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"LIFECYCLE",function(){return c});var r=n(6),a=n(0),c=["onLoad","onShow","onReady","onHide","onUnload"],s=n(2),u=function(t){function e(e,n){var o=this;if(!n)throw new Error("component should have parent node");return(o=t.call(this)||this)._validate(e),o.$parent=n,o._methods={},o._setName(e.name),o._setData(e.data),o._setChildren(e.components),o._setMixins(e.mixins),o._addMethods(e.methods),o._setRest(e),o._setLifecycleListener(),o._mount(),o}return s.a(e,t),e.getComponentClass=function(){return this},Object.defineProperty(e.prototype,"data",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"components",{get:function(){return this._components},set:function(t){this._components=t,this._setChildren(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$root",{get:function(){return this.$parent.$root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$id",{get:function(){return this.$parent.$id+"."+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$scope",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$components",{get:function(){return this.$children},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,e){},e.prototype.$log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];"string"==typeof t?e.unshift("["+this.$id+"] "+t):e.unshift("["+this.$id+"]",t),Object(a.apply)(r.default.log,r.default,e)},e.prototype.$dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=[t].concat(e),i=this._events[t],c=!0;if(i)for(var s=0,u=i.length;s<u;s++)try{!1===Object(a.apply)(i[s],this,e)&&(c=!1)}catch(e){r.default.error("fail to execute event handler of",t,e.stack)}c&&this.$parent&&this.$parent.$dispatch&&Object(a.apply)(this.$parent.$dispatch,this.$parent,o)},e.prototype.$broadcast=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Object(a.apply)(this.$emit,this,t);for(var n=0,o=this.$children.length;n<o;n++){var i=this.$children[n];Object(a.apply)(i.$broadcast,i,t)}},e.prototype.$kill=function(){for(var t=0,e=this.$children.length;t<e;t++)try{this.$children[t].$kill()}catch(e){r.default.error(this.$id,"Fail to kill child",this.$children[t].$scope,e.stack)}this._unmount(),this.$children=null,this.$parent=null},e.prototype._validate=function(t){if(!t)throw new Error("options is undefined")},e.prototype._setName=function(t){},e.prototype._setData=function(t){},e.prototype._addMethods=function(t){var e=this;t&&Object.keys(t).forEach(function(n){"function"==typeof t[n]&&(e._methods[n]=t[n])})},e.prototype._setChildren=function(t){var e=this;void 0===t&&(t={});var n=this.constructor.getComponentClass();return this.$children=Object.keys(t).map(function(o){var i=Object.assign({},t[o],{name:o});return new n(i,e)}),this.$children},e.prototype._setMixins=function(t){void 0===t&&(t=[]),(this._mixins=t).forEach(this._mix,this)},e.prototype._setRest=function(t){Object.assign(this,Object(a.omit)(t,"name","data","components","mixins","methods"))},e.prototype._setLifecycleListener=function(){var t=this;c.forEach(function(e){var n="wx:"+e;t.$on(n,t._lifecycleHandler.bind(t,e))})},e.prototype._mix=function(t){"function"==typeof t.data&&this.setData(t.data()),this._addMethods(t.methods),Object.assign(this,Object(a.omit)(t,"data","methods","components",c))},e.prototype._mount=function(){},e.prototype._unmount=function(){},e.prototype._lifecycleHandler=function(t){var e=this,n=Object(a.toArray)(arguments,1);if(this._mixins.forEach(function(o){if(o[t])try{Object(a.apply)(o[t],e,n)}catch(n){r.default.error(e.$id,"fail to execute mixin lifecycle method",t,n.stack)}}),this[t])try{Object(a.apply)(this[t],this,n)}catch(e){r.default.error(this.$id,"fail to execute lifecycle method",t,e.stack)}},e}(n(5).default),p=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o._addMethods(e.methods),Object.assign(o,o._methods),o}return s.a(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.$parent.data[this.name]},set:function(t){t=Object(a.merge)(t,this.data),this.$root.setData((e={},e[this.$scope]=t,e));var e},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,e){if(this.$parent){var n=this.data,o={};for(var i in t)t.hasOwnProperty(i)&&(o[this.$scope+"."+i]=t[i],Object(a.setAt)(i,n,t[i]));this.$root.setData(o,e)}},Object.defineProperty(e.prototype,"$scope",{get:function(){return this._scope||(this._scope=[this.$parent.$scope,this.name].filter(Boolean).join(".")),this._scope},enumerable:!0,configurable:!0}),e.prototype._validate=function(e){if(t.prototype._validate.call(this,e),!e.name)throw new Error("component name is required");if(e.data&&"function"!=typeof e.data)throw new Error("component data must be function")},e.prototype._setName=function(t){this.name="$"+t},e.prototype._setData=function(t){this.data=Object.assign(t?t():{},{$scope:this.$scope,_pid:this.$parent.data._pid})},e.prototype._mount=function(){var e=this;t.prototype._mount.call(this),this.$parent[this.name]=this;var n=this._methods;if(n){var o=this.$root,i=this.$scope;Object.keys(n).forEach(function(t){"function"==typeof n[t]&&Object.defineProperty(o,i+"."+t,{value:n[t].bind(e),configurable:!0,writable:!0})})}},e.prototype._unmount=function(){t.prototype._unmount.call(this);var e=this._methods;if(e){var n=this.$root,o=this.$scope;Object.keys(e).forEach(function(t){"function"==typeof e[t]&&delete n[o+"."+t]})}},e}(u),h=function(t){function e(e,n){var o=t.call(this,e,n)||this;return Object.assign(o,o._methods),o}return s.a(e,t),e.addGlobalComponent=function(t,e){this.globalComponents[t]=e},e.getComponentClass=function(){return p},Object.defineProperty(e.prototype,"name",{get:function(){return this._name?this._name:this.$root?this._name="@"+this.route.replace(/^pages\/(.+)\/index$/,"$1").replace(/\//g,"_"):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.$root.data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"route",{get:function(){return this.$root.route||this.$root.__route__},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"query",{get:function(){return this.$root.options||this.$root.query},enumerable:!0,configurable:!0}),e.prototype.setData=function(t,e){this.$root&&this.$root.setData(t,e)},Object.defineProperty(e.prototype,"$id",{get:function(){return this.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$root",{get:function(){return this.$parent},enumerable:!0,configurable:!0}),e.prototype._setData=function(){this.data&&(this.data._pid=this.$parent.__wxWebviewId__)},e.prototype._addMethods=function(t){var e=this;t&&Object.keys(t).forEach(function(n){"function"==typeof t[n]&&(e[n]=t[n])})},e.prototype._setChildren=function(n){return void 0===n&&(n={}),Object.assign(n,e.globalComponents),t.prototype._setChildren.call(this,n)},e.prototype._mount=function(){var e=this;t.prototype._mount.call(this);var n=this.$root;this.$children.forEach(function(t){Object.defineProperty(n,t.name,{value:t,configurable:!0})}),Object.keys(Object(a.omit)(this,c)).forEach(function(t){"function"==typeof e[t]&&Object.defineProperty(n,t,{value:e[t].bind(e),configurable:!0})}),this._mixins.forEach(function(t){var e=Object(a.omit)(t,"data","methods",c);Object.keys(e).forEach(function(t){Object.defineProperty(n,t,{value:e[t],configurable:!0})})})},e.prototype._unmount=function(){var e=this;t.prototype._unmount.call(this);var n=this.$root;this.$children.forEach(function(t){delete n[t.name]}),Object.keys(Object(a.omit)(this,c)).forEach(function(t){"function"==typeof e[t]&&delete n[t]}),this._mixins.forEach(function(t){var e=Object(a.omit)(t,"data","methods",c);Object.keys(e).forEach(function(t){delete n[t]})})},e.globalComponents={},e}(u);n.d(e,"constants",function(){return i}),n.d(e,"MNode",function(){return u}),n.d(e,"MComponent",function(){return p}),n.d(e,"MPage",function(){return h});for(var f=c,l={onLoad:function(t){this.query=t;try{Object.defineProperty(this,"setData",{value:o(this.setData,this)})}catch(t){r.default.warn("Can not override Page#setData")}this.$page=this.$getFactory().createMPage(this),this.$page.$broadcast("wx:onLoad",t)},onUnload:function(){this.$page.$broadcast("wx:onUnload"),this.$page.$kill(),this.$page=null}},d=0,y=f.length;d<y;d++){var b=f[d];l[b]||(l[b]=function(t){return function(){this.$page.$broadcast("wx:"+t)}}(b))}var m=function(){function t(e){var n=this;e.mixins||(e.mixins=[]),(o=e.mixins).push.apply(o,t.defaultMixins),e.$getFactory=function(){return n},this.lifecycle=Object(a.pick)(e,f),this.options=Object(a.omit)(e,f);var o}return t.addDefaultMixin=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.defaultMixins;t.forEach(function(t){n.indexOf(t)<0&&n.push(t)})},t.addGlobalComponent=function(t,e){h.addGlobalComponent(t,e)},t.createPage=function(e){return new t(e).create()},t.prototype.create=function(){var t=Object.assign({},this.options,l);return Page(t)},t.prototype.createMPage=function(t){return new h(Object.assign({},this.options,this.lifecycle),t)},t.defaultMixins=[],t}();e.default=m}},[16]); 
 			}); 
		define("common/base/createPage.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("./PageFactory")),i=require("../../mixins/logger/index"),t=e(require("../../mixins/share")),a=e(require("../../mixins/navigation"));r.default.addDefaultMixin(i.Logger,t.default,a.default),exports.default=r.default.createPage; 
 			}); 
		define("common/im/conv.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function n(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function n(n,t){var e=[],r=!0,i=!1,u=void 0;try{for(var a,o=n[Symbol.iterator]();!(r=(a=o.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(n){i=!0,u=n}finally{try{!r&&o.return&&o.return()}finally{if(i)throw u}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=n(require("./sdk/api")),r=n(require("./user")),i=n(require("./group")),u=n(require("./msgformat")),a=n(require("./util")),o=n(require("./sdk/promise")),s=[],c=[],f=!1,d=0,l=200,v=e.default.now(),p=null;e.default.on("message",function(n){var t=n.data;if(p&&t&&t.message){var e=t.message;_(e).then(function(n){p({list:n})}).catch(function(n){console.log(n)})}}),e.default.on("msgReaded",function(n){if(p){var t=n.data.conversation_id;c.map(function(n){n.conversation_id===t&&(n.unread_count=0)}),p({list:c})}}),e.default.on("convUpdated",function(n){if(p){var t=n.data.conversation;if(t){var e=c.findIndex(function(n){return n.conversation_id===t.conversation_id});if(!(e<0)){var r=m(t.conversation_status);if(r.isDelete)c.splice(e,1);else if(r.isTop){var i=c[e];i.isTop=!0,c.splice(e,1),c.unshift(i)}else c[e]=Object.assign(c[e],t,{isTop:!1});p({list:c})}}}});var g=function(){return s.length>0?o.default.resolve(s):e.default.send("getConvList",{maxTime:""+v,minTime:"0",count:l}).then(function(n){if(s=[],n.conversation){var t=n.conversation,e=[],r=[];(t=t.sort(function(n,t){return parseInt(t.update_time)-parseInt(n.update_time)})).map(function(n){var t=n,i=t.update_time,u=t.conversation_id,o=t.conversation_status;if(!(r.indexOf(u)>-1)){r.push(u);var c=m(o);n=Object.assign(n,c),c.isDelete||(i&&(n.updateTime=a.default.dayTime(parseInt(i),!0)),c.isTop?e.push(n):s.push(n))}}),s=e.concat(s),l=s.length}return s})},h=function(){var n=[],t=[],e=[],r=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(i){var u=i.conversation_id,a=i.entity_id,o=i.entity_type;1===o||3===o?n.push(a):2===o&&t.push(a),e.push(u),r.push(i)}),{convs:e,users:n,groups:t,list:r}},_=function(n){var t=n.conversation_id||null,e=c.find(function(n){return n.conversation_id===t});return e?(e.unread_count?e.unread_count+=1:e.unread_count=1,n=Object.assign({},n),e.last_message=n,e.lastMsg=u.default.formatLastMsg(n),n.timestamp&&(e.update_time=n.timestamp,e.updateTime=a.default.dayTime(parseInt(n.timestamp),!0)),C(e,c),o.default.resolve(c)):I([t]).then(function(){return c})},m=function(n){return n=n.toString(2).split("").reverse(),{isTop:parseInt(n[0],10),isForbid:parseInt(n[1],10),isMute:parseInt(n[2],10),isDelete:parseInt(n[31],10)}},y=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=h(n),c=s.convs,f=s.users,d=s.groups,l=s.list,v=[];if(c.length<=0)return o.default.resolve([]);var p=a.withoutLastMsg,g=a.withoutUnread;return v.push(r.default.getUsers(f)),v.push(i.default.getGroups(d)),p||v.push(e.default.send("getLastMsg",{conversation_id:c}).then(function(n){if(n&&0===n.result&&n.last_message){var t={};return n.last_message.map(function(n){var e=n.conversation_id;t[e]={last_message:n.message,lastMsg:u.default.formatLastMsg(n.message)}}),t}return{}})),g||v.push(e.default.send("getUnreadCnt",{conversation_id:c}).then(function(n){if(n&&0===n.result&&n.unread_count){var t={};return n.unread_count.map(function(n){var e=n.conversation_id;t[e]={unread_count:n.unread_count}}),t}return{}})),o.default.all(v).then(function(n){var e=t(n,4),r=e[0],i=e[1],u=e[2],a=e[3];return l.map(function(n){var t=n.entity_id,e=n.conversation_id,o=r?r[t]:{},s=i?i[t]:{},c=u?u[e]:{},f=a?a[e]:{};return Object.assign(n,o,s,c,f)})})},I=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.default.send("fetchConv",{conversation_id:n}).then(function(n){var e=n.conversation;return e=e.map(function(n){var t=n,e=t.update_time,r=t.conversation_status,i=m(r);if(!(n=Object.assign(n,i)).isDelete)return e&&(n.updateTime=a.default.dayTime(parseInt(e),!0)),n}),y(e,t).then(function(n){return C(n,c),n})})},T=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.default.send("createConv",{entity:[{entity_type:t,entity_id:n}]}).then(function(n){var t=n.conversation;return y(t,r).then(function(n){var t=n[0]||{};return C(t,c),t})})},C=function n(t,e){if(t instanceof Array)t.map(function(t){e=n(t,e)});else{var r=e.findIndex(function(n){return t.conversation_id===n.conversation_id});if(r>-1&&e.splice(r,1),t.isTop)e.unshift(t);else{var i=e.findIndex(function(n){return!n.isTop});e.splice(i,0,t)}}return e},b=function(n,t){var e=a.default.url2id(n),r=a.default.url2id(t);return e>r?a.default.mixUint32(r,e):a.default.mixUint32(e,r)},x=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=c.find(function(t){return t.conversation_id===n});return e?o.default.resolve(e):I([n],t).then(function(n){return n&&n.length>0?n[0]:n})};exports.default={getConvList:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.refresh&&(s=[],c=[],l=200,v=e.default.now(),f=!1,d=0),g().then(function(t){var e=n.count||20,r=t.slice(d,d+e);return y(r,n).then(function(n){return c=c.concat(n),(d+=e)>=l&&(f=!0),{list:c,end:f}})})},clearUnread:function(n){return e.default.send("msgRead",{conversation_id:n}).then(function(){for(var t in c){var e=c[t];if(n===e.conversation_id){c[t].unread_count=0;break}}return{list:c}})},onConvChange:function(n){p=n},offConvChage:function(){p=null},getConvByConvId:x,createConv:T,getConvs:I,getConvId:b,getConvByUserId:function(n,t){var e=s.find(function(t){return t.entity_id===n&&1===t.entity_type});return e?o.default.resolve([e]).then(y).then(function(n){return n&&n.length>0?n[0]:{}}):r.default.getLoginUserId().then(function(e){var r=b(n,e);return x(r,t).then(function(e){return console.log(e),e||!0!==t.create?e:T(n,1,t)})})}}; 
 			}); 
		define("common/im/emoji.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../m")),r=e(require("./util")),u=e(require("./sdk/promise")),i=r.default.getCache("__emoji")||{};setTimeout(function(e){var o=6===e?19:0;return i&&i[o]?u.default.resolve(i[o]):t.default.MWP.request("mwp.imgolf.listEmoticon",1,{groupId:o}).then(function(e){var u=t.default.MWP.filterResult(e)||[];return i[o]={},u.map(function(e){var t=e.tag;i[o][t]=e}),r.default.setCache("__emoji",i),i[o]})}),exports.default=function(e){var t=6===e?19:0;return i?i[t]:{}}; 
 			}); 
		define("common/im/goods.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("../m")),t=e(require("./sdk/promise")),n={};exports.default=function(e,o,u,a){var d={goodsId:e,clientType:"pc"};o&&(d.channelId=o),u&&(d.fromType=u),a&&(d.activityId=a);var i=[e,o,u,a].join("_");return n[i]?t.default.resolve(n[i]):r.default.MWP.request("mwp.imcenter.currentGoods","1",d).then(function(e){if(!e.data)throw new Error("系统找不到该商品信息");var r=e.data;return n[i]=r,r})}; 
 			}); 
		define("common/im/group.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./sdk/api")),r=e(require("./sdk/promise")),u=e(require("./util")),n=Object.assign,a={},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length<=0)return r.default.resolve({});var i=u.default.objPick(a,e),o=i.leftKeys,l=i.pickObj;return o.length<=0?r.default.resolve(l):t.default.send("getGroupSimple",{group_id:o}).then(function(e){var t={};return e.group.map(function(e){var r=e.group_id;t[r]=n(e,{entity_id:r,entity_type:2,avatar:"https://imapi.mogujie.com/mtalk/avatar?url="+e.group_avatar,name:e.group_name})}),a=n(a,t),n(l,t)})};exports.default={getGroups:i,getGroup:function(e){return i([e]).then(function(t){return t&&t[e]?t[e]:null})}}; 
 			}); 
		define("common/im/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(n){return n&&n.__esModule?n:{default:n}}(require("../m")),t=n.default.MWP,e=n.default.MCE,r=null,u=null,o=function(){return r?Promise.resolve(r):u||(u=e.get({pid:74894}).then(function(n){var e=t.TTID,u=n.list;if(!(r=u.find(function(n){return e===n.TTID})))throw new Error("您的小程序添加IM配置,请联系@天吴!");return console.warn("im config:",r),r}).catch(function(n){wx.showModal({content:n.message||"",showCancel:!1,confirmColor:"#ff4422"})}))};setTimeout(function(){o()}),exports.default={setApp:o,getAppConfig:function(){return o()},getAppNum:function(){return o().then(function(n){return n.appNum})},getNotify:function(){return o().then(function(n){return"1"===n.notify})},getAppId:function(){return o().then(function(n){return n.appId})},getAppTitle:function(){return o().then(function(n){return n.appTitle})},getPlatform:function(){return o().then(function(n){return n.pf})},getisMin:function(){return o().then(function(n){return n.isMin})}}; 
 			}); 
		define("common/im/init.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,r){var t=[],n=!0,i=!1,u=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){i=!0,u=e}finally{try{!n&&o.return&&o.return()}finally{if(i)throw u}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=e(require("../service/user")),n=require("../m"),i=e(n),u=e(require("./sdk/api")),a=e(require("./index")),o={app_version:"300",noce:"0",online_state:1};exports.default=function(){return 3===u.default.getState()?Promise.resolve("已经建联切登录"):Promise.all([t.default.ensure(),a.default.getAppConfig()]).then(function(e){var d=r(e,2),s=(d[0],d[1].appId),f=t.default.userInfo,l=t.default.sign,c=n.System.getSync("deviceId")||i.default.MWP.getDeviceID(),p=f.uid;if(!p||!l)throw new Error("no userId");var v={app_id:""+s,device_id:c,sign:l,signature:l,timestamp:"0",token:l,user_id:p};return v=Object.assign(o,v),u.default.open({debug:!0,pf:a.default.getPlatform(),data:v})})}; 
 			}); 
		define("common/im/msg.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){var n=[],r=!0,s=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(s)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=e(require("./sdk/api")),r=e(require("./util")),s=e(require("./msgformat")),i=e(require("./sdk/promise")),a=e(require("./user")),o=e(require("./conv")),u=e(require("./p2pmsg")),d={},c={},f={},l={},m={};n.default.on("message",function(e){var t=e.data;if(t&&t.message){var n=t.message,r=g([n])[0]||n,s=r.conversation_id;m[s]&&m[s](r)}else console.error(e)});var g=function(e){return(e=e.sort(function(e,t){return parseInt(e.timestamp,10)-parseInt(t.timestamp,10)})).map(function(e){return s.default.parseMsg(e)})},_=function(e,n){var r=[];return e.map(function(e){var t=e.sender_id;t&&r.indexOf(t)<0&&r.push(t)}),i.default.all([a.default.getUsers(r),o.default.getConvByConvId(n),a.default.getLoginUserId()]).then(function(n){var r=t(n,3),s=r[0],i=r[1],a=r[2];return e.map(function(e){var t=e.sender_id;return i&&1===i.entity_type?(t!==a?e.sender=i:t&&s[t]&&(e.sender=s[t]),e.owner=t===a?"me":"other"):(t&&s[t]&&(e.sender=s[t]),e.owner=t===a?"me":"other"),e})})},v=function(e){var t=[],n=0;return e.map(function(e){e.timestamp-n>=6e4&&t.push({conversation_id:e.conversation_id,client_message_id:e.client_message_id+".1",conversation_message_id:e.conversation_message_id+".1",message_content:r.default.dayTime(e.timestamp),message_type:511,user:{},timestamp:n}),n=e.timestamp,t.push(e)}),t},p=function(e,t){var n=d[e]||"18446744073709551615",r=c[e];return t.map(function(e){var t=e.client_message_id,s=e.conversation_message_id,i=parseInt(s,10);Math.abs(n)>i&&(n=""+i,r=t)}),h(e,r),d[e]=n,t},h=function(e,t){return c[e]=t,t};exports.default={diffTime:6e4,setScrollMsgId:h,getHistory:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;if(!t&&!0===l[e])return i.default.resolve({list:f[e],end:l[e]||!1,msgId:"msg"+c[e]});var s={conversation_id:""+e,min_conversation_message_id:"0",count:r},a=c[e];return!t&&d[e]&&(s.max_conversation_message_id=d[e]),t&&(d[e]=null),n.default.send("getHistoryMsg",s).then(function(t){var n=t.message||[];return 0===n.length&&(l[e]=!0),p(e,n),n}).then(g).then(function(t){return _(t,e)}).then(function(n){var r=f[e]||[];if(t){n.length&&(a=""+n[n.length-1].client_message_id);var s=u.default.getP2PMsg(e);r=s&&s.length>0?n.concat(s):n}else r=n.concat(r);return f[e]=r,r}).then(v).then(function(t){return{list:t,end:l[e]||!1,msgId:"msg"+a}})},getSender:_,pushMsg:function(e){var t=e.conversation_id,n=e.request_id,r=e.client_message_id;if(t)if(f[t]){var s=f[t],i=!1;f[t]=s.map(function(t){return n&&t.request_id===n||r&&t.client_message_id===r?(i=!0,Object.assign(t,e)):t}),i||f[t].push(e)}else f[t]=[e]},onMsg:function(e,t){m[e]=t},offMsg:function(e){m[e]&&delete m[e]},getMsg:function(e,t){return a.default.getLoginUserId().then(function(r){var s=t.message_content;return{conversation_id:e,sender_id:r,push_name:"",client_message_id:n.default.getClientMsgId(),server_message_id:"0",message_type:t.message_type,message_content:s,timestamp:""+n.default.now(),client_type:11}})},sendMsg:function(e,t){return e=r.default.clone(e),e=s.default.formatMsg(e),n.default.send("sendMsg",{message:e,allocate_type:parseInt(t)||1}).then(function(e){e.conversation_id;return e})}}; 
 			}); 
		define("common/im/msgformat.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./emoji")),s=require("../service/route"),a=e(require("../utils/imgUrlTool")),r=/&\$#@~\^@\[{:(.*?(?!&\$#@~\^@\[{:)):}]&\$~@#@/i,n=/^https?:\/\/.*(jpg|png|gif)$/i,i=/(\[[a-zA-Z0-9_\u4e00-\u9fa5]*\])/gi,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.url?"&$#@~^@[{:"+e.url+":}]&$~@#@":""},c=function(e){var t=JSON.parse(e)||{};return JSON.stringify({emotionGroup:t.groupId,emotionTag:t.tag,url:t.url})},u=function(){var e="";return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){switch(t.itemtype){case 1:return void(e+=t.text);case 2:return void(e+="&$#@~^@[{:"+t.url+":}]&$~@#@");case 3:var s=t.url||"https://imapi.mogujie.com/phiz/index?groupId="+t.groupid+"&tag="+t.tag;return void(e+="&$#@~^@[{:"+s+":}]&$~@#@");default:return}}),e},m=function(e){e.type=7;try{return JSON.stringify(e)}catch(t){return console.warn(t),e}},g=function(e){var t=/(https?:\/\/[\d\w\.\/\-\?\=\&\#]*)/gi,a=[];return((e=e.replace(/\[\&.*\&\].*$/,"")).split(t)||[]).map(function(e){t.test(e)?(e=(0,s.transform)(e),/^\/pages.*/.test(e)?a.push({itemtype:4,url:e}):a.push({itemtype:1,text:e})):e&&e.trim()&&a.push({itemtype:1,text:e})}),a},p=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(i),s=(0,t.default)()||{},a=[];return e.map(function(e){s[e]?a.push({itemtype:3,groupid:s[e].groupId,tag:s[e].tag,url:s[e].url}):a=a.concat(g(e))}),a},f=function(e){var t=e.split(r),s=[];for(var i in t){var o=t[i];n.test(o)?s.push({itemtype:2,url:a.default.getWidthSuffix(o,640)}):s=s.concat(p(o))}return s},_=function(e){try{e=JSON.parse(e)}catch(t){console.log(t,e)}var t=[];return e.map(function(e){1!==e.itemtype?t.push(e):t=t.concat(p(e.text,!1))}),t},l=function(e){var t=JSON.parse(e);return[{itemtype:2,groupid:t.emotionGroup,tag:t.emotionTag,url:t.url||"https://imapi.mogujie.com/phiz/index?p="+encodeURIComponent(e)+"&tag="}]},y=function(e){try{e.message_content=JSON.parse(e.message_content)}catch(t){return e.message_type=501,e.message_content="[暂不支持该格式消息]",e}switch(e.message_content.type){case 6:e.message_type=1001;break;case 7:e.message_type=1007;break;case 11:e.message_type=1011;break;case 12:if(e.message_type=1012,e.message_content){var t=e.message_content;t.orderUrl&&(t.orderUrl=(0,s.transform)(t.orderUrl)),t.firstItem&&t.firstItem.image&&(t.firstItem.image=a.default.getWidthSuffix(t.firstItem.image,640)),e.message_content=t}break;case 13:if(e.message_type=1013,e.message_content){var r=e.message_content;r.refundUrl&&(r.url=(0,s.transform)(r.refundUrl)),r.firstItem&&r.firstItem.image&&(r.firstItem.image=a.default.getWidthSuffix(r.firstItem.image,640)),e.message_content=r}break;case 1e3:e.message_type=511,e.message_content=e.message_content.content;break;default:e.message_type=501,e.message_content="[暂不支持该格式消息]"}return e},d=function(e){var t=e,s=t.message_content;switch(t.message_type){case 1:case 129:e.message_content=f(s),e.message_type=505;break;case 100:e.message_type=503;break;case 3:e=y(e);break;case 5:case 132:e.message_content=l(s),e.message_type=505;break;case 501:e.message_content=p(s),e.message_type=505;break;case 505:e.message_content=_(s);break;default:e.message_type=501,e.message_content="[暂不支持该格式消息]"}return e};exports.default={formatMsg:function(e){var t=e.message_content;switch(e.message_type){case 501:e.message_type=1,e.message_content=t;break;case 502:e.message_type=1,e.message_content=o(t);break;case 504:e.message_type=5,e.message_content=c(t);break;case 505:e.message_type=1,e.message_content=u(t);break;case 1007:e.message_type=3,e.message_content=m(t)}return e},formatLastMsg:function(e){var t=e=d(e),s=t.message_content;switch(t.message_type){case 501:return s;case 502:return"[图片]";case 503:return"[你收到一条语音消息，请在app端查看]";case 504:return"[表情]";case 505:var a="";return(s||[]).map(function(e){1===e.itemtype&&(a+=e.text),2===e.itemtype&&(a+="[图片]"),3===e.itemtype&&(a+="[表情]"),4===e.itemtype&&(a+="[链接]")}),a;case 1007:return"[商品消息]";default:return"[通知]"}},parseMsg:d}; 
 			}); 
		define("common/im/notice.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=e(require("./init")),i=e(require("./p2pmsg")),f=e(require("../base/Events")),s=function(e,t){for(var n=e.split("."),o=t.split("."),r=0;r<=n.length;r++){if(parseInt(n[r])>parseInt(o[r]))return 1;if(parseInt(n[r])<parseInt(o[r]))return-1}return 0},a=function(e){function a(){t(this,a);var e=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e._count=0,i.default.onP2PMsg("wechat_p2p_msg_receive",function(t){t&&t.businessId&&(e._count++,e.$emit("CountChange",e._count),e.$emit("Msg",t))}),e}return o(a,f.default),r(a,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.useIM())return e.client_type=12,(0,u.default)(e)}},{key:"useIM",value:function(){var e=wx.getSystemInfoSync().SDKVersion||"0.0.0";return s(e,"1.5.0")<0}},{key:"onCountChange",value:function(e){this.$on("CountChange",e),e(this._count)}},{key:"offCountChange",value:function(e){e||this.$off("CountChange"),this.$off("CountChange",e)}},{key:"readMsg",value:function(e){e>0?this._count-=e:this._count=0,this.$emit("CountChange",this._count)}},{key:"offMsg",value:function(e){e||this.$off("Msg"),this.$off("Msg",e)}},{key:"onMsg",value:function(e){this.$on("Msg",e)}}]),a}();exports.default=new a; 
 			}); 
		define("common/im/p2pmsg.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./sdk/api")),r=e(require("../m")),n=e(require("./conv")),s=e(require("./sdk/promise")),a={},i=[],u={},o=["116zzt1m","1vnm0pe","116zzt1m","117025nc","1qvugc","1qvubc","1172pyhu","1qfnyw","1172jnw8"],c=function(e,t){if(t.conversation_id){var r=t.conversation_id;u[r]?u[r].push(t):u[r]=[t]}a[e]&&a[e].map(function(e){return e(t)})};t.default.on("getP2pMsg",function(e){if(e&&e.data&&e.data.message){var r=e.data.message,s=r.message_data,a=r.from_userid;r.to_userid;try{"string"==typeof s&&(s=JSON.parse(s))}catch(e){return void console.error("getP2pMsg error:"+e)}n.default.getConvByUserId(a).then(function(e){var r=e.conversation_id;switch(s.action){case"wechat_p2p_msg_receive":c("wechat_p2p_msg_receive",s);break;case"rateScore":var n=s.data||{};g(n.uid,n.shopid).then(function(e){n.isOrigin=e;var s={sender_id:a,conversation_id:r,timestamp:""+t.default.now(),client_message_id:t.default.getClientMsgId(),message_type:-1,message_content:n};c("rateScore",s)}).then()}})}else console.error("it is not a p2pMsg "+e)});var d=function(e){return r.default.MWP.request("mwp.imcenter.appMgjBatchShopInfo","1",{userIds:[e]}).then(function(e){var t=r.default.MWP.filterResult(e);if(t)return t[0]})},f=function(e){return o.indexOf(e)>=0},g=function(e,t){return t?s.default.resolve(f(t)):d(e).then(function(e){return f(e.shopId)})};exports.default={onP2PMsg:function(e,t){a[e]||(a[e]=[]),a[e].push(t)},getTags:function(){return i.length>0?s.default.resolve(i):r.default.MWP.request("mwp.cscenter.getRateTags","1",{bizKey:"imCustomerRate"}).then(function(e){var t=r.default.MWP.filterResult(e);return i=t.tags||[]})},getP2PMsg:function(e){return u[e]||[]},clearP2PMsg:function(e){u[e]=[]}}; 
 			}); 
		define("common/im/sdk/api.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./promise")),n=e(require("./imsdk")),u=function(e){return function(){for(var n=arguments.length,u=Array(n),d=0;d<n;d++)u[d]=arguments[d];return new t.default(function(t,n){e.apply(void 0,u.concat([function(e){for(var u=arguments.length,d=Array(u>1?u-1:0),f=1;f<u;f++)d[f-1]=arguments[f];e?t.apply(void 0,d):n.apply(void 0,d)}]))})}};exports.default={config:function(e){var t=Object.assign({},e);n.default.config(t)},getClientMsgId:n.default.getClientMsgId,now:n.default.now,getState:n.default.getState,open:function(e){return u(function(e,t){n.default.open(e,t)})(e)},close:function(e,t){return n.default.close(e,t)},getStatus:n.default.getState.bind(n.default),debug:n.default.debug.bind(n.default),on:n.default.on.bind(n.default),once:n.default.once.bind(n.default),send:function(e,t){return u(function(e,t,u){n.default.send(e,t,u)})(e,t)},reSend:function(e){return u(function(e,t){n.default.reSend(e,t)})(e)}}; 
 			}); 
		define("common/im/sdk/imsdk.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e,o){"object"==("undefined"==typeof exports?"undefined":t(exports))&&"object"==("undefined"==typeof module?"undefined":t(module))?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==("undefined"==typeof exports?"undefined":t(exports))?exports.imsdk=o():e.imsdk=o()}(void 0,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=o(1),r=n(o(2)),s=n(o(5)),a=null;a||(a=new r.default,a.getClientMsgId=i.getClientMsgId,a.debug=s.default,a.now=i.now),e.default=a,t.exports=e.default},function(e,o){o.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(e){return void 0===e?"undefined":t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":t(e)},i=(new Date).getTime(),r=parseInt(1e3*Math.random()+23),s=parseInt(1e3*Math.random()+23),a=i*Math.pow(2,10)+r,u=i*Math.pow(2,10)+s,c=0,p=o.now=function(){return(new Date).getTime()+c},l=o.setTimeOff=function(t){c=t},h=o.buildQuery=function(t){var e=[];for(var o in t)e.push(o+"="+t[o]);return e.join("&")},d=(o.defer=setTimeout,o.noop=function(){}),f=o.getRequestId=function(){return""+ ++u},y=o.getClientMsgId=function(){return""+ ++a},v=o.webSocket=function(){try{return window.WebSocket||window.MozWebSocket}catch(t){return null}}(),m=o.supportWs=!!v,g=o.wx=function(){try{return g}catch(t){return null}}(),b=o.parseData=function(t){if(t&&"string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t},_=o.stringifyData=function(t){return t&&"object"===(void 0===t?"undefined":n(t))&&(t=JSON.stringify(t)),t};o.default={now:p,setTimeOff:l,buildQuery:h,noop:d,getRequestId:f,getClientMsgId:y,webSocket:v,supportWs:m,wx:g,parseData:b,stringifyData:_}},function(e,o,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=(void 0===o?"undefined":t(o))&&"function"!=typeof o?e:o}function a(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+(void 0===o?"undefined":t(o)));e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}o.__esModule=!0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},c=i(n(3)),p=i(n(4)),l=i(n(6)),h=i(n(7)),d=i(n(8)),f=i(n(10)),y=n(1),v=n(5),m=(0,i(v).default)("MSG"),g=function(){return(new Date).getTime()},b=function(t){function e(){r(this,e);var o=s(this,t.call(this));return o.reqPool={},o.failPool={},o.io=null,o.readyState=3,o.openCb=y.noop,o.queue=new d.default,o.opts=l.default,o.isConnected=!0,o.networkType=null,o}return a(e,t),e.prototype.getState=function(){return this.readyState},e.prototype.config=function(t){if(3===this.readyState){var e=t.debug;(0,v.dev)(!!e&&(!0===e?"":e)),this.opts=u(this.opts,t)}},e.prototype.open=function(t,e){var o=this;return console.warn(this.readyState),3!==this.readyState?void e(1===this.readyState,{}):(m.log("conn start"),this.openCb=e,this.config(t),this.readyState=0,this.timestamp=g(),this.io=new p.default(this.opts,e),this.connectTimer=setTimeout(function(){o.close(),o.readyState=3,e(!1,"connect timeOut")},this.opts.connectTime),this._initIoEvent(),void this._initWindowEvent())},e.prototype.syncTime=function(){this.send("syncTime",{client_time:""+(0,y.now)()},function(t,e){var o=(0,y.now)(),n=e.server_time-e.client_time-parseInt((o-e.client_time)/2);(0,y.setTimeOff)(Math.abs(n)>1e3?n:0)})},e.prototype.doLogin=function(t,e){if(0===this.readyState){var o=this.requestMap("login",t);o.data.client_type||(o.data.client_type="poll"===this.io.curTransport?7:3),m.log("start login: %o",o),this._doSend(o,e,!0)}},e.prototype.send=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.noop,n=this.requestMap(t,e);m.log("send a msg(%s): %o",t,n),this._doSend(n,o)},e.prototype.reSend=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.noop,o=this.failPool[t];console.log(this.failPool),o?this._doSend(o,e):e(!1,"can't find package")},e.prototype.stop=function(t){m.log("client choose to close conn %s",t),this.io.stop(t)},e.prototype._initIoEvent=function(){this.io.on("open",this.onOpen.bind(this)),this.io.on("error",this.onError.bind(this)),this.io.on("closing",this.onClosing.bind(this)),this.io.on("close",this.onClose.bind(this)),this.io.on("message",this.onMsg.bind(this)),this.io.on("packet",this.onHeartbeat.bind(this))},e.prototype.onClosing=function(t){this.readyState=2,this.emit("closeing",t)},e.prototype.onClose=function(t){0===this.readyState&&this.openCb(!1,"webscocket closed"),this.readyState=3,this.queue.stop(),this.hbTimer&&clearTimeout(this.hbTimer),m.error("webscocket closed"),this.emit("close",t)},e.prototype.onError=function(t){0===this.readyState&&(this.openCb(!1,"network error"),this.readyState=3),this.emit("error",t)},e.prototype.onMsg=function(t){var e=t.request_id,o=this.reqPool[e];if(o){var n=o.cb,i=o.timerId,r=o.req,s=o.timestamp,a=0;if(i&&clearTimeout(i),t.command_id===r.command_id)a=1,n(!1,t);else if(t&&t.data){var u=t.data;a=u.result_code||u.result||0,u.result=a,0===a?(this.failPool[e]&&delete this.failPool[e],u.request_id=e,n(!0,u)):(this.failPool[e]=r,u.request_id=e,n(!1,u))}else a=2,n(!1,t);return m.log("recive a ack %o",t),this.sLog.send({ext:{requestPath:r.module_id+"/"+r.command_id,requestCostTime:g()-s,httpCode:a}}),void delete this.reqPool[e]}var c=this.pushMap(t);if(c&&c.type){var p=c.type,l=c.ackData;m.log("recive a push(%s) %o",p,t.data),this.emit(p,t),-1===h.default.noAckPush.indexOf(p)&&(m.log("ack for server push %o",l),this.io.send(l))}},e.prototype.onOpen=function(){var t=this;this.connectTimer&&clearTimeout(this.connectTimer);var e=this.opts.data,o=e.device_id,n=e.user_id;this.sLog=new f.default({url:this.opts.url,uuid:o,uid:n}),this.sLog.send({ext:{requestPath:"connect",requestCostTime:g()-this.timestamp,httpCode:0}}),m.log("conn success, start to login..."),this.readyState=0,this.doLogin(this.opts.data,function(e,o){e?(t.queue.start(),t.readyState=1,t.syncTime(),m.log("login success %o",o),t.emit("open",t.opts.data)):t.close(3022,"login fail"),t.openCb(e,o)})},e.prototype.onHeartbeat=function(){var t=this;this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout(function(){t.send("hb",{}),t.onHeartbeat()},this.opts.hbTime)},e.prototype._bindReqFunc=function(){var t=this,e=h.default.request;Object.keys(e).forEach(function(e){t[e]=function(o){return t.request(e,o)}})},e.prototype.pushMap=function(t){var e=h.default.push[t.module_id+"#"+t.command_id];if(e){var o={data:{},module_id:t.module_id,command_id:t.command_id+1,request_id:(0,y.getRequestId)(),biz_type:t.biz_type||this.opts.biz_type,version:t.version||this.opts.packageVersion,reserved:t.reserved||this.opts.reserved};return"message"===e&&(o.data.server_message_id=t.data.message.server_message_id),{type:e,ackData:o}}},e.prototype.close=function(t,e){this.hbTimer&&clearTimeout(this.hbTimer),m.log("start close"),this.io.close(t,e)},e.prototype._initWindowEvent=function(){var t=this;wx&&wx.onNetworkStatusChange&&wx.onNetworkStatusChange(function(e){var o=e.isConnected,n=e.networkType;o?(t.timestamp=g(),t.io.reconnect()):t.close(),m.log("networkChange:[%o, %o]",o,n),t.isConnected=o,t.networkType=n})},e.prototype.requestMap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=h.default.request[t];if(o)return o=o.split("#"),{module_id:Number(o[0]),command_id:Number(o[1]),biz_type:this.opts.biz_type,data:e,request_id:(0,y.getRequestId)(),version:this.opts.packageVersion,reserved:this.opts.reserved}},e.prototype._doSend=function(t,e){var o=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];m.log("msg do send %o(%o)",t,n);var i=t.request_id;if(i){if(n){var r=function(n){return setTimeout(function(){var i=o.reqPool[n],r=i.req,s=i.timestamp;o.failPool[n]=r,10!==r.module_id&&1!==r.command_id&&o.sLog.send({ext:{requestPath:r.module_id+"/"+r.command_id,requestCostTime:g()-s,httpCode:1006}}),delete o.reqPool[n],e(!1,t)},o.opts.msgTime)}(i);return this.reqPool[i]={req:t,timerId:r,timestamp:g(),cb:e},void this.io.send(t)}this.queue.push(function(){var n=function(t){return setTimeout(function(){var n=o.reqPool[t],i=n.req,r=n.timestamp;o.failPool[t]=i,10!==i.module_id&&1!==i.command_id&&o.sLog.send({ext:{requestPath:i.module_id+"/"+i.command_id,requestCostTime:g()-r,httpCode:1006}}),delete o.reqPool[t],e(!1,i)},o.opts.msgTime)}(i);o.reqPool[i]={req:t,timerId:n,timestamp:g(),cb:e},o.io.send(t)})}else e(!1,new Error("not a request Package"))},e}(c.default);o.default=b,e.exports=o.default},function(t,e,o){function n(){}function i(t,e,o){this.fn=t,this.context=e,this.once=o||!1}function r(){this._events=new n,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),r.prototype.eventNames=function(){var t,e,o=[];if(0===this._eventsCount)return o;for(e in t=this._events)s.call(t,e)&&o.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},r.prototype.listeners=function(t,e){var o=a?a+t:t,n=this._events[o];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,s=new Array(r);i<r;i++)s[i]=n[i].fn;return s},r.prototype.emit=function(t,e,o,n,i,r){var s=a?a+t:t;if(!this._events[s])return!1;var u,c,p=this._events[s],l=arguments.length;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),l){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,e),!0;case 3:return p.fn.call(p.context,e,o),!0;case 4:return p.fn.call(p.context,e,o,n),!0;case 5:return p.fn.call(p.context,e,o,n,i),!0;case 6:return p.fn.call(p.context,e,o,n,i,r),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];p.fn.apply(p.context,u)}else{var h,d=p.length;for(c=0;c<d;c++)switch(p[c].once&&this.removeListener(t,p[c].fn,void 0,!0),l){case 1:p[c].fn.call(p[c].context);break;case 2:p[c].fn.call(p[c].context,e);break;case 3:p[c].fn.call(p[c].context,e,o);break;case 4:p[c].fn.call(p[c].context,e,o,n);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];p[c].fn.apply(p[c].context,u)}}return!0},r.prototype.on=function(t,e,o){var n=new i(e,o||this),r=a?a+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):(this._events[r]=n,this._eventsCount++),this},r.prototype.once=function(t,e,o){var n=new i(e,o||this,!0),r=a?a+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):(this._events[r]=n,this._eventsCount++),this},r.prototype.removeListener=function(t,e,o,i){var r=a?a+t:t;if(!this._events[r])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[r],this;var s=this._events[r];if(s.fn)s.fn!==e||i&&!s.once||o&&s.context!==o||(0==--this._eventsCount?this._events=new n:delete this._events[r]);else{for(var u=0,c=[],p=s.length;u<p;u++)(s[u].fn!==e||i&&!s[u].once||o&&s[u].context!==o)&&c.push(s[u]);c.length?this._events[r]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new n:delete this._events[r]}return this},r.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=a,r.EventEmitter=r,t.exports=r},function(e,o,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(e,o){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!o||"object"!=(void 0===o?"undefined":t(o))&&"function"!=typeof o?e:o}function a(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+(void 0===o?"undefined":t(o)));e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o)}o.__esModule=!0;var u=i(n(3)),c=n(1),p=(0,i(n(5)).default)("NET"),l=function(t){function e(o){r(this,e);var n=s(this,t.call(this));return n.reconnTimes=0,n.curTransport=null,n.readyState=3,n.opts=o,n.protocols=o.protocols,n.url=o.url||o.uri,n.doConnect(),n}return a(e,t),e.prototype.doConnect=function(){try{wx.connectSocket({url:this.url}),wx.onSocketOpen(this.onOpen.bind(this)),wx.onSocketError(this.onError.bind(this)),wx.onSocketMessage(this.onMsg.bind(this)),wx.onSocketClose(this.onClose.bind(this))}catch(e){var t=window.WebSocket||window.MozWebSocket;this.ws=new t(this.url),this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMsg.bind(this),this.ws.onerror=this.onError.bind(this),this.ws.onclose=this.onClose.bind(this)}},e.prototype.doClose=function(t,e){p.log("stat close");try{wx.closeSocket(t,e)}catch(o){this.ws.close(t,e)}},e.prototype.doSend=function(t){try{wx.sendSocketMessage({data:t})}catch(e){this.ws.send(t)}},e.prototype.onPacket=function(t){for(var e=arguments.length,o=Array(e>1?e-1:0),n=1;n<e;n++)o[n-1]=arguments[n];this.emit("packet",{type:t,data:o}),this.emit.apply(this,[t].concat(o))},e.prototype.reconnect=function(){if(3===this.readyState)return++this.reconnTimes>2?(p.log("reconn fail 3 times, will stop!"),this.close()):void this.doConnect()},e.prototype.onOpen=function(t){this.reconnTimes=0,this.readyState=1,this.emit("open",t)},e.prototype.onMsg=function(t){var e=(0,c.parseData)(t.data);p.log("got msg %o",e),this.onPacket("message",e)},e.prototype.onError=function(t){p.error("got a error: %o",t),this.onPacket("error",t)},e.prototype.onClose=function(t){this.readyState=3,p.log("connect close: %o",t),t.code,this.emit("close",t)},e.prototype.close=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments[1];1===this.readyState&&(this.readyState=2,this.emit("closing",{code:t,reason:e}),this.doClose(t,e))},e.prototype.send=function(t){t&&this.doSend((0,c.stringifyData)(t))},e}(u.default);o.default=l,e.exports=o.default},function(e,o){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}o.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(e){return void 0===e?"undefined":t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":t(e)},r=[],s=[],a=void 0,u=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","OrangeRed","crimson"],c=function(t){var e=0;for(var o in t)e+=t.charCodeAt(o)*o;return e%=u.length,u[e]},p=function(t){for(var e in r)if(r[e].test(t))return!0;return!1},l=function(){var t=+new Date,e=t-(a||t);return a=t,"+"+e+"ms"},h=function(t,e,o){o[0]="%c"+t+" %c"+o[0]+"%c "+l();var n="color: "+e;o.splice(1,0,n,"color: inherit");var i=0,r=0;return o[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(r=i))}),o.splice(r,0,n),o},d=function(){function t(e){n(this,t),this.name=e,this.colors=c(e),this.checkEnable()}return t.prototype.checkEnable=function(){this.enable=p(this.name)},t.prototype.toggleLog=function(t){for(var e,o=arguments.length,n=Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];if(this.enable)return n=h(this.name,this.colors,n),"object"===("undefined"==typeof console?"undefined":i(console))&&console[t]&&(e=console)[t].apply(e,n)},t.prototype.log=function(){this.toggleLog.apply(this,["log"].concat(Array.prototype.slice.call(arguments)))},t.prototype.error=function(){this.toggleLog.apply(this,["error"].concat(Array.prototype.slice.call(arguments)))},t.prototype.warn=function(){this.toggleLog.apply(this,["warn"].concat(Array.prototype.slice.call(arguments)))},t}();o.default=function(t){var e=new d(t);return s.push(e),e},o.dev=function(t){t||(t=!1===t?"":"*"),t=t.split(/[\s,]+/),r=t.map(function(t){return t=t.replace(/\*/g,".*?"),new RegExp("^"+t+"$")}),s.map(function(t){t.checkEnable()})}},function(t,e){e.__esModule=!0,e.default={data:{},protocols:"dumb-increment-protocol",connectTime:1e4,hbTime:3e4,msgTime:1e4,pollCycle:6e3,reConnectMaxTimes:3,url:"wss://imws.mogujie.com/",uuid:"test",biz_type:1,reserved:"0",packageVersion:300},t.exports=e.default},function(t,e){e.__esModule=!0,e.default={noAckPush:["userKicked","msgReaded","cinfoNotify","userStateNotify"],request:{getAccessServer:"2#1",login:"2#3",logout:"2#5",syncTime:"2#8",getLoginState:"2#10",kickOther:"2#12",getConvList:"3#1",updateConv:"3#3",fetchConv:"3#5",createConv:"3#7",delConv:"3#9",operateConv:"3#11",getLastMsg:"3#15",getUnreadCnt:"3#17",getAllUnreadCnt:"3#19",createGroup:"4#1",delGroup:"4#3",updateGroup:"4#5",getGroupInfo:"4#7",addGroupMem:"4#9",delGroupMem:"4#11",getApplier:"4#13",operateApplier:"4#15",operateAdmin:"4#17",transferOwner:"4#31",getGroupSimple:"4#35",getGroupMember:"4#37",sendMsg:"5#1",getHistoryMsg:"5#5",msgRead:"5#7",modifyMsg:"5#9",sendP2pMsg:"6#1",p2pMsg:"6#3",getOnLineState:"7#2",setOnLineState:"7#4",getUserInfo:"7#6",monitorState:"7#8",unmonitorState:"7#10",getStateMonitor:"7#12",getCinfoCnt:"8#1",hb:"10#1",reportErr:"8#2",echo:"8#3",forward:"8#4",transmit:"12#1",getService:"14#1",switchService:"14#3",destroyService:"14#5",getLastService:"14#7",bizSwitchService:"17#1"},push:{"2#7":"userKicked","2#14":"stateChanged","3#13":"convUpdated","4#19":"groupDeled","4#21":"groupUpdated","4#23":"memberAdded","4#25":"memberDeled","4#27":"adminChaned","4#29":"applierOperated","4#33":"ownerTransfered","5#3":"message","5#11":"msgReaded","6#3":"getP2pMsg","7#1":"userStateNotify","8#3":"cinfoNotify","12#3":"transmit"}},t.exports=e.default},function(t,e,o){function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=o(1),s=n(o(9)),a=(0,n(o(5)).default)("MSG"),u=function(){function t(){i(this,t),this.status=0,this.drain=r.noop,this.store=new s.default}return t.prototype.start=function(){a.log("queue start"),this.status=1,this.process()},t.prototype.process=function(){if(1===this.status){if(this.store.length<=0)return this.pause(),void(0,r.defer)(this.drain.bind(this));this.store.shift().fn(),(0,r.defer)(this.process.bind(this))}},t.prototype.stop=function(){a.log("queue stop"),this.status=0},t.prototype.pause=function(){this.status=2},t.prototype.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t instanceof Array||(t=[t]);for(var o=this.store.head;o&&e>=o.priority;)o=o.next;for(var n=0,i=t.length;n<i;n++){var s={fn:t[n],priority:e};o?this.store.insertBefore(o,s):this.store.push(s)}2===this.status&&(0,r.defer)(this.start.bind(this))},t}();e.default=u,t.exports=e.default},function(t,e){function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){t.length=1,t.head=t.tail=e}e.__esModule=!0;var i=function(){function t(){o(this,t),this.head=this.tail=null,this.length=0}return t.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},t.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},t.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},t.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):n(this,t)},t.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):n(this,t)},t.prototype.shift=function(){return this.head&&this.removeLink(this.head)},t.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},t.prototype.empty=function(){this.head=this.tail=null,this.length=0},t}();e.default=i,t.exports=e.default},function(t,e,o){function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=o(1),s=n(o(11)),a=n(o(12)),u=(0,r.now)(),c=57,p=function(){function t(e){i(this,t),this.v=e.v||2,this.url=e.url||"";var o=(0,s.default)(this.url);this.uuid=e.uuid||"",this.uid=e.uid||"",this.host=e.url?o.origin:e.host||"",this.port=""+(e.url?o.port:e.port||443),this.pf=e.pf||c,this.pushQueue=[]}return t.prototype.send=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this.buildData(e),this.pushQueue.push(e);var o=this.pushQueue;if(o.length>=3){this.pt=(0,r.now)(),this.data=o.join("\n");var n={v:this.v,pf:this.pf,pt:this.pt,data:this.data};setTimeout(function(){t._doSend("https://log.mogujie.com/log?web=1",n),t.pushQueue=[]})}},t.prototype.buildData=function(t){var e=[0,this.uuid,"s"],o=(0,a.default)({ver:"",_channel:"",deviceName:"",os_ver:"",root:0,provider:"",launchTime:u,time:(0,r.now)(),network:0,new_did:this.uuid,"tid-token":this.uuid,uid:this.uid,ext:{requestPath:"",requestCostTime:0,httpCode:0,error:"",requestSize:0,responseSize:0,bizCode:"0",apiver:"300",port:this.port,serverip:this.host,session_key:"",caller:"im",feature:"mec"}},t);return e.push(JSON.stringify(o)),e=e.join("\t")},t.prototype._doSend=function(t,e){wx.request({url:t,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:e})},t}();e.default=p,t.exports=e.default},function(t,e){e.__esModule=!0,e.default=function(t){try{var e=document.createElement("a");return e.href=t,e}catch(e){var o=t.match(/^(([^:\/?#]+:)?(?:\/\/(([^\/?#:]*)(?::([^\/?#:]*))?)))?([^?#]*)(\?[^#]*)?(#.*)?$/),n={hash:o[8]||"",host:o[3]||"",hostname:o[4]||"",href:o[0]||"",origin:o[1]||"",pathname:o[6]||(o[1]?"/":""),port:o[5]||"",protocol:o[2]||"",search:o[7]||""};return 2==n.protocol.length&&(n.protocol="file:///"+n.protocol.toUpperCase(),n.origin=n.protocol+"//"+n.host),n.href=n.origin+n.pathname+n.search+n.hash,o&&n}},t.exports=e.default},function(t,e,o){function n(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function i(t,e,o){var n=e[o];if(void 0!==n&&null!==n){if(a.call(t,o)&&(void 0===t[o]||null===t[o]))throw new TypeError("Cannot convert undefined or null to object ("+o+")");a.call(t,o)&&s(n)?t[o]=r(Object(t[o]),e[o]):t[o]=n}}function r(t,e){if(t===e)return t;e=Object(e);for(var o in e)a.call(e,o)&&i(t,e,o);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),r=0;r<n.length;r++)u.call(e,n[r])&&i(t,e,n[r]);return t}var s=o(13),a=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(t){t=n(t);for(var e=1;e<arguments.length;e++)r(t,arguments[e]);return t}},function(e,o){e.exports=function(e){var o=void 0===e?"undefined":t(e);return null!==e&&("object"===o||"function"===o)}}])}); 
 			}); 
		define("common/im/sdk/promise.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../m"));exports.default=e.default.Promise; 
 			}); 
		define("common/im/user.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./sdk/api")),r=e(require("../m")),n=e(require("./util")),u=e(require("./sdk/promise")),o=Object.assign,i={},a=null;t.default.on("open",function(e){a=e.user_id});var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.default.MWP.request("mwp.imcenter.appMgjUsersInfo","1",{userIds:e}).then(function(e){if(!e.data)throw new Error("系统找不到用户信息");var t={};return(e.data||[]).map(function(e){var r=e.userId;t[r]={entity_id:r,entity_type:1,avatar:e.avatar,userRole:e.userRole,intro:e.intro||"",showStrategy:e.showStrategy||0,hideInput:4===e.userRole&&2!=(2&e.officialAuth),name:e.userName}}),i=o(i,t),t})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e||e.length<=0)return u.default.resolve({});var t=n.default.objPick(i,e),r=t.leftKeys,a=t.pickObj;return r.length<=0?u.default.resolve(a):s(r).then(function(e){return o(a,e)})},l=function(e){return f([e]).then(function(t){return t&&t[e]?t[e]:null})};exports.default={getUsersReq:s,getUsers:f,getUser:l,getLoginUserId:function(){return a?u.default.resolve(a):a?void 0:new u.default(function(e){t.default.once("open",function(t){a=t.user_id,e(a)})})},getLoginUser:function(){return a?l(a):new u.default(function(e){t.default.once("open",function(t){a=t.user_id,e(l(a))})})}}; 
 			}); 
		define("common/im/util.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return e&&e.__esModule?e:{default:e}}(require("./sdk/api")),t=function(e){var t=e?new Date(Number(e)):new Date(r.default.now());return{y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate(),h:t.getHours(),i:t.getMinutes(),s:t.getSeconds(),q:Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()}},n=function(e){return"星期"+["日","一","二","三","四","五","六"][(e?new Date(Number(e)):new Date).getDay()]},i=function(e){return Number(e)>9?""+e:"0"+e},a=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Y-m-d H:i:s",n=t(e);return r.replace(/hh/gi,i(n.h)).replace(/ii/gi,i(n.i)).replace(/ss/gi,i(n.s)).replace(/y/gi,n.y%100).replace(/m/gi,n.m).replace(/d/gi,n.d).replace(/h/gi,n.h).replace(/i/gi,n.i).replace(/s/gi,n.s)};exports.default={formtTime:a,escapeHtml:function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#039;")},clone:function r(t){var n,i,a;n=Array.isArray(t)?[]:{};for(a in t)i=t[a],n[a]="object"===(void 0===i?"undefined":e(i))?r(i):i;return n},dayTime:function(e,r){var i=t(),o=t(e);if(i.Y===o.Y){if(i.m===o.m){if(i.d===o.d)return a(e,"hh:ii");if(i.d-o.d==1)return r?"昨天":a(e,"昨天 hh:ii");if(i.d-o.d<=7){var u=n(e);return r?u:u+" "+a(e,"hh:ii")}}if(1===i.d&&i.m-o.m==1){var c=new Date;if(c=new Date(c.setDate(c.getDate()-1)).getDate(),o.d===c)return r?"昨天":a(e,"昨天 hh:ii");if(o.d>=c-6){var f=n(e);return r?f:f+" "+a(e,"hh:ii")}}}return r?a(e,"y/m/d"):a(e,"y/m/d hh:ii")},objPick:function(e,r){var t=[],n={};return r.map(function(r){e[r]?n[r]=e[r]:t.push(r)}),{leftKeys:t,pickObj:n}},getCache:function(e){return wx.getStorageSync(e)},setCache:function(e,r){try{return wx.setStorageSync(e,r)}catch(e){console.log(e)}},url2id:function e(r,t){if(t||(t=!1),24===r.length&&r.match(/^[0-9a-f]+$/))return r;if(r instanceof Array){for(var n=0;n<r.length;n++){var i=r[n];r[n]=e(i)}return r}if(r.indexOf(",")>0){r=r.split(",");for(var a=0;a<r.length;a++){var o=r[a];o?r[a]=e(o):delete r[a]}return r.join(",")}if(t&&r.match(/^(null|undefined)$/i))return!1;var u=0;switch(parseInt(r.substr(0,1))){case 1:u=(parseInt(parseInt(r.substr(1)+"",36).toString(10))-56)/2;break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:u=0;break;default:u=r}return 0<u?parseInt(u):0},mixUint32:function(e,r){if(e<=0)return""+r;for(var t="";;){var n=e%10*4294967296+r;if(e=Math.floor(e/10),r=Math.floor(n/10),t=(n%10).toString(10)+t,!e&&!r)break}return t},buildQuery:function(e){var r=[];for(var t in e)r.push(t+"="+e[t]);return r.join("&")}}; 
 			}); 
		define("common/lib.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};module.exports=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={},r={9:0};return e.e=function(t){throw new Error("Not chunk loading available")},e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",function(n,o,i){for(var s,u,a,c=0,f=[];c<n.length;c++)u=n[c],r[u]&&f.push(r[u][0]),r[u]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);for(;f.length;)f.shift()();if(i)for(c=0;c<i.length;c++)a=e(e.s=i[c]);return a}}([function(e,n,r){function o(t){return i(t)===g}function i(t){return l.call(t)}function s(e){if(null===e)return e;var n=void 0===e?"undefined":t(e);if("number"===n||"string"===n||"boolean"===n||"undefined"===n)return e;switch(i(e)){case p:return new Date(e);case d:return e.map(s);case g:return u({},e);default:return e}}function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(0===e.length)return t;for(var r=0,i=e.length;r<i;r++){var a=e[r];if(a&&a!==t)for(var c in a)if(f.call(a,c)){var l=a[c];o(t[c])?t[c]=u(t[c],l):t[c]=s(l)}}return t}function a(t){return t.reduce(function(t,e){return m(e)?t.concat(e):(t.push(e),t)},[])}function c(t,e){for(var n={},r=0,o=e.length;r<o;r++){var i=e[r];f.call(t,i)&&(n[i]=t[i])}return n}Object.defineProperty(n,"__esModule",{value:!0}),n.escapeHtml=function(t){return t?t.replace(v,function(t){return y[t]}):""},n.apply=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);default:return t.apply(e,n)}},n.toArray=function(t,e,n){return h.call(t,e,n)},n.clone=s,n.merge=u,n.flatten=a,n.pick=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return c(t,a(e))},n.omit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e=a(e),c(t,Object.keys(t).filter(function(t){return e.indexOf(t)<0}))},n.setAt=function(t,e,n){var r,o,i=t.replace(/\[([^\]]+)]/g,".$1").split("."),s=e;for(r=0,o=i.length-1;r<o;r++)try{s=s[i[r]]}catch(e){return void console.error('fail to set value on path "%s"',t)}s[i[r]]=n},n.throttle=function(t,e,n){var r,o,i,s=null,u=0;n||(n={});var a=function(){u=!1===n.leading?0:Date.now(),s=null,i=t.apply(r,o),s||(r=o=null)};return function(){var c=Date.now();u||!1!==n.leading||(u=c);var f=e-(c-u);return r=this,o=arguments,f<=0||f>e?(clearTimeout(s),s=null,u=c,i=t.apply(r,o),s||(r=o=null)):s||!1===n.trailing||(s=setTimeout(a,f)),i}},n.debounce=function(t,e,n){var r,o,i,s,u,a=function a(){var c=Date.now()-s;c<e&&c>0?r=setTimeout(a,e-c):(r=null,n||(u=t.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,s=Date.now();var c=n&&!r;return r||(r=setTimeout(a,e)),c&&(u=t.apply(i,o),i=o=null),u}};var f=Object.prototype.hasOwnProperty,l=Object.prototype.toString,h=Array.prototype.slice,p="[object Date]",d="[object Array]",g="[object Object]",y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v=/([&<>"`'])/g,m=Array.isArray},function(t,e,n){function r(t){return t&&"function"==typeof t.then}function o(t,e){return function(n){return n?t():new Promise(e)}}function i(t){setTimeout(function(){throw new Error(t)},0)}function s(t){return i("[System] Fail to get deviceId: "+t),a()()}var u=n(17),a=n.n(u),c=function(){wx.canIUse&&wx.canIUse("onNetworkStatusChange")&&wx.onNetworkStatusChange(function(){f.refresh("networkType")}),c=function(){}},f=new(function(){function t(t){this._getters={},this._getters=t,this.purge()}return t.prototype.purge=function(){this._cache=Object.create(null)},t.prototype.register=function(t,e){this._getters[t]=e},t.prototype.getSync=function(t){var e=this._cache[t];return void 0===e&&this._getters[t]&&(e=this._getters[t](!0)),e},t.prototype.refresh=function(t){delete this._cache[t]},t.prototype.get=function(t){var e=this,n=this._cache[t];if(void 0===n){if(!this._getters[t])return Promise.reject(new Error(t+" not exists"));try{var o=this._getters[t](!1);return r(o)?o.then(function(n){return e._cache[t]=n}):(this._cache[t]=o,Promise.resolve(o))}catch(t){return Promise.reject(t)}}return Promise.resolve(n)},t}())({systemInfo:o(function(){return wx.getSystemInfoSync()},function(t,e){wx.getSystemInfo({success:function(e){t(e)},fail:function(t){e(new Error(t.errMsg))}})}),deviceId:o(function(){try{var t=wx.getStorageSync("mgj.did");if(!t){t=a()();try{wx.setStorageSync("mgj.did",t)}catch(e){wx.setStorage({key:"mgj.did",data:t,fail:function(t){i("[System] Fail to save deviceId: "+t.errMsg)}})}}return t}catch(t){return s(t.message)}},function(t,e){wx.getStorage({key:"mgj.did",success:function(n){if(n.data)return t(n.data);var r=a()();wx.setStorage({key:"mgj.did",data:r,success:function(){t(r)},fail:function(t){e(new Error(t.errMsg))}})},fail:function(e){t(s(e.errMsg))}})}),networkType:o(function(){throw new Error("no sync method to get network type")},function(t,e){c(),wx.getNetworkType({success:function(e){t(e.networkType)},fail:function(t){e(new Error(t.errMsg))}})})});e.a=f},function(t,e,n){e.a=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};Object.assign},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=n(0),i=function(){function t(){this._storage=Object.create(null)}return t.getInstance=function(){return null===this._instance?this._instance=new this:this._instance},t.prototype.has=function(t){return t in this._storage},t.prototype.forEach=function(t,e){var n=this._storage;for(var r in n)t.call(e,n[r],r)},t.prototype.purge=function(){this._storage=Object.create(null)},t.prototype.put=function(t,e,n){return void 0===e?this.remove(t):this._storage[t]=e},t.prototype.get=function(t){return this._storage[t]},t.prototype.getAll=function(){return Object(o.clone)(this._storage)},t.prototype.remove=function(t){delete this._storage[t]},t.prototype.getAndRemove=function(t){var e=this.get(t);return void 0!==e&&this.remove(t),e},t._instance=null,t}(),s=20,u=function(t){function e(e){void 0===e&&(e=s);var n=t.call(this)||this;return n._queue=[],n.capacity=e,n}return r.a(e,t),e.prototype.purge=function(){t.prototype.purge.call(this),this._queue=[]},e.prototype.put=function(e,n,r){if(void 0===r&&(r={}),void 0!==t.prototype.put.call(this,e,n)){if(!0===r.keep)return n;var o=this._queue,i=o.indexOf(e);if(i>=0&&o.splice(i,1),o.push(e),o.length>this.capacity)for(var s=0,u=o.length-this.capacity;s<u;s++)t.prototype.remove.call(this,o[s]),o.shift();return n}},e.prototype.get=function(e){var n=t.prototype.get.call(this,e);if(void 0!==n)return this._queue.sort(function(t,n){return t===e||n===e?1:0}),n},e.prototype.remove=function(e){t.prototype.remove.call(this,e);var n=this._queue.indexOf(e);n>=0&&this._queue.splice(n,1)},e}(i),a="default",c=function(t){function e(n){void 0===n&&(n=a);var r=this;if(e._namespaces[n])throw new Error('PersistentStorage with namespace "'+n+'" exists');return r=t.call(this)||this,e._namespaces[n]=!0,r._namespace="storage."+n,r._writeTimer=null,r.readSync(),r}return r.a(e,t),e.prototype.purge=function(){t.prototype.purge.call(this),this.write()},e.prototype.put=function(e,n,r){if(void 0===r&&(r={}),void 0!==t.prototype.put.call(this,e,n))return this.write(r.immediate),n},e.prototype.remove=function(e){t.prototype.remove.call(this,e),this.write()},e.prototype.readSync=function(){try{var t=wx.getStorageSync(this._namespace);t&&(this._storage=t)}catch(t){}},e.prototype.write=function(t){var e=this;void 0===t&&(t=!1),!0===t&&this._writeSync(),this._writeTimer&&clearTimeout(this._writeTimer),this._writeTimer=setTimeout(function(){e._write(),e._writeTimer=null},0)},e.prototype._write=function(){wx.setStorage({key:this._namespace,data:this._storage})},e.prototype._writeSync=function(){wx.setStorageSync(this._namespace,this._storage)},e._namespaces=Object.create(null),e}(i);n.d(e,"MemoryStorage",function(){return u}),n.d(e,"PersistentStorage",function(){return c});var f={has:function(t){return u.getInstance().has(t)||c.getInstance().has(t)},forEach:function(t,e){u.getInstance().forEach(t,e),c.getInstance().forEach(t,e)},put:function(t,e,n){return void 0===n&&(n={}),n.persistent?c.getInstance().put(t,e,n):u.getInstance().put(t,e,n)},get:function(t,e){if(void 0===e&&(e={}),e.persistent)return c.getInstance().get(t);var n=u.getInstance().get(t);return void 0===n?c.getInstance().get(t):n},remove:function(t,e){void 0===e&&(e={}),e.persistent||u.getInstance().remove(t),c.getInstance().remove(t)},getAndRemove:function(t,e){if(void 0===e&&(e={}),e.persistent)return c.getInstance().getAndRemove(t);var n=u.getInstance().getAndRemove(t);return void 0===n?c.getInstance().getAndRemove(t):n}};e.default=f},function(t,e,n){var r=n(23),o=n.n(r),i=n(1),s=Promise,u=i.a.getSync("systemInfo");try{/iOS\s*(8|10\.0)/i.test(u.system)&&(Promise=s=o.a,Object.defineProperty(Promise,"__polyfill__",{value:!0}))}catch(t){console.warn("fail to detect Promise version")}e.a=s},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=function(){function t(){this._events=Object.create(null)}return t.prototype.$on=function(t,e){return(this._events[t]||(this._events[t]=[])).push(e),this},t.prototype.$once=function(t,e){var n=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];this.$off(t,n),Object(r.apply)(e,this,o)};return this.$on(t,n),this},t.prototype.$off=function(t,e){if(0===arguments.length)return this._events=Object.create(null),this;var n=this._events[t];if(!n)return this;if(1===arguments.length)return this._events[t]=null,this;for(var r=n.length-1;r>=0;r--)if(n[r]===e){n.splice(r,1);break}return this},t.prototype.$emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=this._events[t];if(o)for(var i=0,s=o.length;i<s;i++)try{Object(r.apply)(o[i],this,e)}catch(e){console.error("fail to execute event handler of",t,e.stack)}return this},t}();e.default=o},function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"LOG_LEVEL",function(){return s}),n.d(e,"DEFAULT_CONFIG",function(){return l});var r=n(1),o=n(0),i=n(3),s={debug:0,log:1,warn:2,error:3,silent:9},u={get:function(t){return f.read()[t]}},a=new(n(5).default),c=u,f={Level:s,$on:void 0,$once:void 0,$off:void 0,$emit:void 0,read:function(){return c===u&&(c=new i.PersistentStorage("debug")),c.getAll()},write:function(t){null===c&&(c=new i.PersistentStorage("debug")),Object.keys(t).forEach(function(e){c.put(e,t[e])}),a.$emit("update")},debug:void 0,log:void 0,warn:void 0,error:void 0,time:function(t){c.get("level")===s.debug&&console.time(t)},timeEnd:function(t){c.get("level")===s.debug&&console.timeEnd(t)}};"function"!=typeof console.debug&&(console.debug=console.log),["debug","log","warn","error"].forEach(function(t){f[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];c.get("level")>s[t]||Object(o.apply)(console[t],console,e)}}),["$on","$once","$off","$emit"].forEach(function(t){f[t]=a[t].bind(a)});var l={level:s.silent};0===Object.keys(f.read()).length&&f.write(l),r.a.get("systemInfo").then(function(t){"devtools"===t.platform&&f.read().level>s.warn&&f.write({level:s.warn})}),e.default=f},function(t,e,n){function r(t,e){void 0===e&&(e=!0);var n=t.split(i),r=e?decodeURIComponent:a;return n.reduce(function(t,e){var n,o,i=(e=e.replace(s,"%20")).indexOf("=");return i<0?(n=e,o=""):(n=e.slice(0,i),o=e.slice(i+1)),n=r(n),o=r(o),u.call(t,n)?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o,t},{})}function o(t,e){if(void 0===e&&(e=!0),!t)return"";var n=e?encodeURIComponent:a;return Object.keys(t).map(function(e){var r=t[e];return e=n(e),Array.isArray(r)?r.map(function(t,r){return e+"["+r+"]="+n(t)}).join("&"):e+"="+n(r)}).join("&")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"parse",function(){return r}),n.d(e,"stringify",function(){return o});var i=/&/,s=/\+/g,u=Object.prototype.hasOwnProperty,a=function(t){return t}},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.requestManager=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(n(26)),s=new(function(){function t(e){r(this,t),this.queue=new i.default,this.max=e,this.curCount=0,this.id=0}return o(t,[{key:"setMaxRequest",value:function(t){this.max=t}},{key:"sendRequest",value:function(t){var e=this;if(t._task={id:e.id++,task:null,abort:function(){this.task?this.task.abort():e.queue.remove(this.id)&&e.curCount--}},this.queue.enqueue(t),this.curCount<this.max){var n=this.queue.dequeue();n._task.task=this._sendRequestInternal(n)}return t._task}},{key:"_sendRequestInternal",value:function(t){var e=this;return this.curCount++,wx.request({url:t.url,data:t.data,header:t.header,method:t.method,dataType:t.dataType,success:function(e){t.success&&t.success(e)},fail:function(e){/fail abort/gi.test(e.errMsg)||t.fail&&t.fail(e)},complete:function(n){e.curCount--,t.complete&&t.complete(n);var r=e.queue.dequeue();r&&(r._task.task=e._sendRequestInternal(r))}})}}]),t}())(10);e.requestManager=s},function(t,e,n){function r(t,e,n){return function(r){void 0===r&&(r={});var o=r.success,i=r.fail,s=r.complete;r=Object(p.merge)({},e,r),"function"==typeof n?r=n(r)||r:Object(p.merge)(r,n);var u,a,c=new Promise(function(e,n){r.success=function(t){u=t,"function"==typeof o&&o(t),e(t)},r.fail=function(t){a=t,"function"==typeof i&&i(t),n(new Error(t.errMsg))},delete r.complete,t(r)});return"function"==typeof s&&(c=c.then(function(t){return s(u),t},function(t){return s(a),Promise.reject(t)})),c}}function o(t){Object.assign(y,t)}function i(){return O?l.a.resolve():M||(M=new l.a(function(t){wx.getStorage({key:k,success:function(e){var n=e.data;n&&(Object.assign(n,n.userInfo),delete n.userInfo,u(n),t())},fail:function(){g.default.warn("fail to read loginItem"),t()}})}))}function s(){wx.setStorage({key:k,data:{userInfo:O,token:b,sign:S},fail:function(){g.default.error("fail to write loginItem")}})}function u(t){t&&(O=Object(p.pick)(t,"uid","uname","avatar"),b=t.token,h.a.setSession(S=t.sign),h.a.setCookie("__ud_",O.uid))}function a(t,e){g.default.log("_login"),wx.login({success:function(e){t(e.code)},fail:function(t){e(new Error(t.errMsg))}})}function c(t,e,n){g.default.log("_getUserInfo"),wx.getUserInfo({withCredentials:!0,success:function(r){var o={code:t,rawData:r.rawData,signature:r.signature,encryptedData:r.encryptedData,iv:r.iv};h.a.request("mwp.apollo.weixin.xcx.callback","1",o).then(h.a.filterResult).then(function(t){u(t.loginItem),s(),e(S)}).catch(function(t){b=S=O=null,s(),n(new w(3,t.message))})},fail:function(){return wx.canIUse&&wx.canIUse("openSetting")?v({title:"是否要打开设置页面重新授权",content:"需要获取您的公开信息（昵称、头像等），请到小程序的设置中打开用户信息授权",confirmText:"去设置"}).then(function(r){r.confirm?m().then(function(r){r.authSetting["scope.userInfo"]?c(t,e,n):n(new w(2,"授权失败，请重新授权"))}).catch(function(){n(new w(9,"授权失败，您可能有部分功能无法使用"))}):n(new w(9,"授权失败，您可能有部分功能无法使用"))}).catch(function(){n(new w(9,"授权失败，请重新授权"))}):v({title:"",content:"请到小程序列表，删除“"+P.appName+"”，搜索“"+P.appName+"”重新进入并授权",showCancel:!1,complete:function(){n(new w(9,"授权失败，您可能有部分功能无法使用"))}})}})}function f(){E=null}Object.defineProperty(e,"__esModule",{value:!0});var l=n(4),h=n(10),p=n(0),d=n(5),g=n(6),y={primaryColor:"#ff5777",secondaryColor:"#666666"},v=r(wx.showModal,null,function(t){return Object.assign(t,{confirmColor:y.primaryColor,cancelColor:y.secondaryColor})}),m=r(wx.openSetting),_=(r(wx.getStorage),r(wx.setStorage),r(wx.getSystemInfo),r(wx.chooseAddress),n(2)),w=function(t){function e(e,n){var r=t.call(this,n)||this;return r.isUserError=!0,r.code=e,r}return _.a(e,t),e}(Error),k="mgj.user",b=null,S=null,O=null,j=!0,P={appName:"蘑菇街女装",color:"#ff5777"},M=null,E=null,x=new d.default,C={get token(){return b},get sign(){return S},get userInfo(){return Object.create(O)},get uid(){return O?O.uid:""},$on:x.$on.bind(x),$once:x.$once.bind(x),$off:x.$off.bind(x),$emit:x.$emit.bind(x),init:function(t){return void 0===t&&(t={}),Object.assign(P,t),o({primaryColor:P.color}),h.a.setLoginHandler(function(){return C.refreshSign()}),wx.getNetworkType({success:function(t){"none"===t.networkType&&(j=!1)}}),wx.canIUse&&wx.canIUse("onNetworkStatusChange")&&wx.onNetworkStatusChange(function(t){if(!j&&t.isConnected)return C.refreshSign();j=!0}),i().then(function(){return null===b?C.login():new l.a(function(t,e){wx.checkSession({success:function(){t(S)},fail:function(t){e(new w(1,t.errMsg))}})}).catch(function(){return C.login()})})},login:function(){return g.default.log("User.login"),E||(E=new l.a(function(t,e){a(function(n){c(n,function(e){f(),C.$emit("login",e),t(e)},function(t){f(),e(t)})},function(t){f(),e(t)})}))},refreshSign:function(){return g.default.log("User.refreshSign"),E||i().then(function(){return null===b?C.login():E=h.a.request("mwp.apollo.login.refreshsign","1",{token:b}).then(h.a.filterResult).then(function(t){return u(t.loginItem),s(),f(),C.$emit("login",S),S}).catch(function(){return f(),C.login()})})},ensure:function(t){return void 0===t&&(t=!1),E||i().then(function(){return b?l.a.resolve(S):t?l.a.reject(new w(9,"未登录")):C.login()})},showUserError:function(t){return!!t.isUserError&&(3===t.code?(v({title:"",content:t.message,showCancel:!1}),!0):(g.default.error(t.message),!1))},Code:{ERR_WX_LOGIN:1,ERR_NO_PERMIT:2,ERR_FORBIDDEN:3,ERR_CANCEL:9}};e.default=C},function(e,n,r){function o(t){if(t.ret===d.Success)return t.data;throw Object.assign(Object.create(new Error(t.msg||h)),{code:t.ret,payload:t})}function i(t){return t&&"function"==typeof t.then}function s(t){return t?"string"==typeof t?t:JSON.stringify(t):""}function u(t){return function(e,n,r){var o=r.value;r.value=function(){return console.warn("Deprecated:",t),o.apply(this,arguments)}}}var a={};r.d(a,"ERR_MESSAGE",function(){return h}),r.d(a,"ENV",function(){return p}),r.d(a,"CODE",function(){return d}),r.d(a,"GATEWAY",function(){return g}),r.d(a,"HOSTNAME",function(){return y}),r.d(a,"TOKEN_KEY",function(){return v}),r.d(a,"UUID_KEY",function(){return m});var c,f=r(4),l=r(1),h="服务器开小差了，请稍候再试",p={Develop:"DEVELOP",PreRelease:"PRE_RELEASE",Release:"RELEASE"},d={Success:"SUCCESS",NeedHttps:"FAIL_SYS_NEED_HTTPS",TokenNeedRenew:"FAIL_SYS_TOKEN_NEED_RENEW",SessionInvalid:"FAIL_BIZ_SESSION_INVALID"},g=function(){try{var t=location.hostname;if(/(mogujie\.org|meili-inc\.com)$/.test(t))return"nsh5"}catch(t){}return"h5"}(),y=(c={},c.mgj={Develop:"devapi.mogujie.com",PreRelease:"newpreapi.mogujie.com",Release:"api.mogujie.com"},c.mls={Develop:"devapi.meilishuo.com",PreRelease:"preapi.meilishuo.com",Release:"api.meilishuo.com"},c.xd={Develop:"devapi.xiaodian.com",PreRelease:"preapi.xiaodian.com",Release:"api.xiaodian.com"},c),v="_mwp_h5_token",m="__mgjuuid",_=function(){function t(){this.data={}}return t.prototype.add=function(t,e,n){return void 0===n&&(n=null),this.data[t+"."+e]=n,this},t.prototype.toObject=function(){return this.data},t}(),w=function(){function t(t){this.callbacks={},this.Request=t}return t.prototype.addParameter=function(t,e,n){return this.parameter||(this.parameter=new _),this.parameter.add(t,e,n),this},t.prototype.request=function(t,e,n,r){var o,s=this;return n instanceof _?o=n.toObject():(o=this.parameter?this.parameter.toObject():null,r||(r=n||{})),this.promise=this.Request.request(t,e,o,r).then(function(t){return s.result=t,s.Request.filterResult(t)}).then(function(t){var e=Object.keys(t).filter(function(t){return t in s.callbacks}).map(function(e){return s.callbacks[e](t[e])}).filter(i);return e.length>0?s.Request.Promise.all(e).then(function(){return s.result}):s.result}),this},t.prototype.on=function(t,e){return this.callbacks[t]||(this.callbacks[t]=e),this},t.prototype.then=function(t,e){return this.promise=this.promise.then(t,e),this},t.prototype.catch=function(t){return this.promise=this.promise.catch(t),this},t.Parameter=_,t}(),k=r(14),b=r.n(k),S=["mw-pv","mw-sid","mw-did"];"function"!=typeof Date.now&&(Date.now=function(){return(new Date).getTime()});var O=function(){function t(){this._params={},this._omitted={}}return t.prototype.add=function(t,e){return S.indexOf(t)>=0?(this._omitted[t]=e,this):((e||"data"===t)&&(this._params[t]=e),this)},t.prototype.sign=function(t,e,n,r){var o=this._params,i=Object.keys(o);return i.sort(),b()(i.map(function(t){return o[t]}).concat([t,e,b()(n),r]).join("&"))},t.prototype.getSignedParams=function(t){var e=this,n=t.constructor;this.add("mw-appkey",n.AppKey).add("mw-t",String(Date.now())).add("mw-uuid",t.getUUID()).add("mw-ttid",n.TTID);var r=t.getMWPCookieHeader();Object.keys(r).forEach(function(t){t.startsWith("mw-cookie-")&&e.add(t,r[t])});var o=s(t.data);return this.add("mw-sign",this.sign(t.api,t.version,o,t.getToken())).add("data",o),Object.assign({},this._omitted,this._params)},t.getSignedParams=function(e){return(new t).getSignedParams(e)},t}();(O||(O={})).Key={KEY_DEVICE_ID:"mw-did",KEY_UID:"mw-uid",KEY_CMD_V:"mw-cmd-v"};var j=O,P=function(){function t(t){var e=this;this.callback=t,this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.exec=function(){return this.callback().then(this.resolve,this.reject)},t.prototype.then=function(t,e){return this.promise=this.promise.then(t,e)},t.prototype.catch=function(t){return this.promise=this.promise.catch(t)},t}(),M=function(){function t(){this.tasks=[]}return t.createQueue=function(){var t=new this;return this.instances.push(t),t},t.getQueue=function(){return this.instances[0]},t.prototype.add=function(t){try{var e=new P(t);return this.tasks.push(e),e}catch(t){return null}},t.prototype.exec=function(){var e=this;t.instances=t.instances.filter(function(t){return e!==t});var n=function(){return e.tasks=null};return Promise.all(this.tasks.map(function(t){return t.exec()})).then(n,n)},t.instances=[],t}(),E=function(){function t(t,e,n){void 0===n&&(n={}),this.retries=1,this.api=t,this.version=e;var r=this.constructor.defaultOptions;this.options=Object.assign({},r,n),this.options.headers=Object.assign({},r.headers,n.headers)}return t.getContext=function(t,e,n){return new this(t,e,n)},t.request=function(t,e,n,r){return this.getContext(t,e,r).request(n)},t.setHeader=function(t,e){var n=this.defaultOptions;n.headers||(n.headers={}),n.headers[t]=e},t.getDSL=function(){return new w(this)},t.getDSLParameter=function(){return new w.Parameter},t.setGlobalEnv=function(t){t&&(this.defaultOptions.env=t)},t.getGlobalEnv=function(){return this.defaultOptions.env},t.getMWPCookies=function(t,e){return this.MWPCookieJar.getCookies(this.getContext(t,e))},t.prototype.shouldRetry=function(){return this.retries<5},t.prototype.getToken=function(){throw new Error("Method not implemented.")},t.prototype.getUUID=function(){return""},t.prototype.getParams=function(){return j.getSignedParams(this)},t.prototype.getHostname=function(){var t=this.constructor.Hostname;switch(this.options.env){case p.Develop:return t.Develop;case p.PreRelease:return t.PreRelease;default:return t.Release}},t.prototype.getOrigin=function(){return(this.options.useHTTPS?"https:":"http:")+"//"+this.getHostname()},t.prototype.getURL=function(){return this.getOrigin()+"/"+g+"/"+this.api+"/"+this.version+"/"},t.prototype.getHeaders=function(){return Object.assign({},this.options.headers)},t.prototype.getMWPCookies=function(){return this.constructor.MWPCookieJar.getCookies(this)},t.prototype.getMWPCookieHeader=function(){var t={},e=this.getMWPCookies();return Object.keys(e).length>0&&(t["mw-cookie-"+this.api.replace(/\./g,"")+this.version]=Object.keys(e).map(function(t){return t+"="+e[t]}).join("; ")+";"),t},t.prototype.request=function(t){return this.data=t,this.getToken()?this._fetch():this.enqueue()},t.prototype.fetch=function(t,e){e(new Error("Please implement `fetch` method in your own subclass"))},t.prototype.handleResponse=function(t){switch(t.ret){case d.TokenNeedRenew:return this._fetch();case d.NeedHttps:return this.options.useHTTPS=!0,this._fetch();default:return this.constructor.Promise.resolve(t)}},t.prototype._fetch=function(){var t=this;return new this.constructor.Promise(function(e,n){if(!t.shouldRetry())return console.warn("Have retried too much times"),n(new Error(h));t.retries++,t.fetch(e,n)}).then(function(e){return t.handleResponse(e)})},t.prototype.enqueue=function(){var t=M.getQueue();if(t){var e=t.add(this._fetch.bind(this));return null===e?this._fetch():e}t=M.createQueue();var n=this._fetch(),r=t.exec.bind(t);return n.then(r,r),n},t.Promise=Promise,t.Env=p,t.Hostname=y.mgj,t.Code=d,t.defaultOptions={useHTTPS:!1,env:p.Release},t.v="__VERSION__",t.filterResult=o,t}();String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(e||0,t.length)===t});var x=function(){function t(t){this.hostname=t,this.cookies=this._readStorage()}return t.getCookieJar=function(t){var e=t.getHostname(),n=this.instances[e];return n||(n=this.instances[e]=new this(e)),n},t.getCookies=function(t){return this.getCookieJar(t).getCookies("/"+t.api+"/"+t.version)},t.prototype.getStorageKey=function(){return"mwp.cookie."+this.hostname},t.prototype.refresh=function(t){void 0===t&&(t=Date.now()),this.cookies=this.cookies.filter(function(e){return e.expires>t}),this._writeStorage()},t.prototype.getCookies=function(t){return this._get(t).reduce(function(t,e){return t[e.name]=e.value,t},{})},t.prototype.setFromHeader=function(t){var e=this,n=parseInt(t["mw-st"],10);!isNaN(n)&&n||(n=Date.now());for(var r in t)if(t.hasOwnProperty(r)&&r.startsWith("mw-set-cookie-")){var o=t[r];Array.isArray(o)?o.forEach(function(t){return e.parseMWPCookie(t,n)}):this.parseMWPCookie(o,n)}},t.prototype.parseMWPCookie=function(t,e){var n=this;t.split(";,").forEach(function(t){for(var r=t.split(";").filter(Boolean),o=r[0].split("="),i={name:o[0],value:o[1]},s=1,u=r.length;s<u;s++)if(r[s]){var a=r[s].split("="),c=a[0],f=a[1];"max-age"===c?i.expires=e+1e3*parseInt(f,10):"path"===c?i.path=f:"shared"===c&&(i.shared=f?f.split(/\s*,\s*/):[])}n._set(i,e)})},t.prototype._readStorage=function(){try{var t=JSON.parse(localStorage.getItem(this.getStorageKey()));return t||[]}catch(t){return console.error("Fail to read mwp cookie, hostname: %s",this.hostname),[]}},t.prototype._writeStorage=function(){try{localStorage.setItem(this.getStorageKey(),JSON.stringify(this.cookies))}catch(t){console.error("Fail to write mwp cookie, hostname: %s",this.hostname)}},t.prototype._set=function(t,e){this.cookies=this.cookies.filter(function(e){return t.name!==e.name||t.path!==e.path}),this.cookies.push(t),this.refresh(e)},t.prototype._get=function(t){return this.refresh(),"/"!==t[0]&&(t="/"+t),this.cookies.filter(function(e){return t.startsWith(e.path)||e.shared&&e.shared.some(function(e){return t.startsWith(e)})})},t.instances={},t}(),C=E,I=r(5),T=r(6),R=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return R(e,t),e.prototype._readStorage=function(){try{var t=wx.getStorageSync(this.getStorageKey());return t||[]}catch(t){return T.default.error("Fail to read mwp cookie, hostname: %s",this.hostname),[]}},e.prototype._writeStorage=function(){var t=this;wx.setStorage({key:this.getStorageKey(),data:this.cookies,fail:function(){T.default.error("Fail to write mwp cookie, hostname: %s",t.hostname)}})},e}(x),A=r(8),q=r(3),H=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N="mwp.cookie",W=function(t){function e(e){return t.call(this,N+"."+e)||this}return H(e,t),e.getCookieJar=function(t){var e=this.instances[t];return e||(this.instances[t]=new this(t))},e.parse=function(t){return t.split(/\s*;\s*/).filter(Boolean).reduce(function(t,e){var n=e.split("="),r=n[0],o=n[1];return t[r]=o,t},{})},e.prototype.toString=function(){var t=this;return Object.keys(this._storage).map(function(e){return e+"="+encodeURIComponent(t._storage[e])}).join("; ")},e.prototype.toObject=function(){return this._storage},e.instances={},e}(q.PersistentStorage),U=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=this&&this.__decorate||function(e,n,r,o){var i,s=arguments.length,u=s<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"===("undefined"==typeof Reflect?"undefined":t(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,n,r,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(u=(s<3?i(u):s>3?i(n,r,u):i(n,r))||u);return s>3&&u&&Object.defineProperty(n,r,u),u},$=j.Key,J=$.KEY_DEVICE_ID,L=$.KEY_UID,K=$.KEY_CMD_V,z=a.CODE,B=a.TOKEN_KEY,Y=a.ERR_MESSAGE,V=function(t){function e(e,n,r){void 0===r&&(r={});var o=this;return r.useHTTPS=!0,o=t.call(this,e,n,r)||this,o.task=null,o}return U(e,t),e.setSession=function(t){this.getWxaCookieJar().put("__mogujie",t)},e.setLoginHandler=function(t){if("function"!=typeof t)throw new Error("login handler should be a function");this.loginHandler=t},e.setCookie=function(t,e){this.getWxaCookieJar().put(t,e)},e.getCookie=function(t){return this.getWxaCookieJar().get(t)},e.getMWPCookies=function(t,e){return this.MWPCookieJar.getCookies(this.getContext(t,e))},e.getDeviceID=function(){return l.a.getSync("deviceId")},e.getWxaCookieJar=function(){return W.getCookieJar(this.AppKey)},e.on=function(t,e){return this._events.$on(t,e),this},e.once=function(t,e){return this._events.$once(t,e),this},e.off=function(t,e){return this._events.$off(t,e),this},e.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return(r=this._events).$emit.apply(r,[t].concat(e)),this;var r},e.prototype.getHeaders=function(){return Object.assign(t.prototype.getHeaders.call(this),{"Content-Type":"application/x-www-form-urlencoded",Cookie:this._getWxaCookieJar().toString()})},e.prototype.getCookies=function(){return this.getMWPCookies()},e.prototype.fetch=function(t,n){var r=this;this.task=A.requestManager.sendRequest({url:this.getURL(),data:this.getParams(),header:this.getHeaders(),method:this.options.method,success:function(o){var i;if(i="string"==typeof o.statusCode?parseInt(o.statusCode,10):o.statusCode,isNaN(i)||200!==i)n(new Error(Y));else{var s=o.data,u=o.header||s.header;D.getCookieJar(r).setFromHeader(u),void 0!==u[K]&&e.emit(K,u[K]),t(s)}},fail:function(t){n(new Error("网络请求失败，请稍候再试"))}})},e.prototype.getToken=function(){return this._getWxaCookieJar().get(B)},e.prototype.getUUID=function(){return l.a.getSync("deviceId")},e.prototype.getParams=function(){var t=new j;t.add(L,this._getWxaCookieJar().get("__ud_")||"").add(J,l.a.getSync("deviceId"));var e=this.options.headers;return e&&Object.keys(e).forEach(function(n){n.startsWith("mw-")&&t.add(n,e[n])}),t.getSignedParams(this)},e.prototype.getOrigin=function(){return"https://"+this.getHostname()},e.prototype.getURL=function(){return this.getOrigin()+"/wx/"+this.api+"/"+this.version+"/"},e.prototype.handleResponse=function(e){switch(e.ret){case z.TokenNeedRenew:var n=this._getWxaCookieJar();n.put("_mwp_h5_token",e.token),n.put("_mwp_h5_token_enc",e.encToken);break;case z.SessionInvalid:return this.handleSessionInvalid(e)}return t.prototype.handleResponse.call(this,e)},e.prototype.handleSessionInvalid=function(e){var n=this,r=this.constructor,o=r.loginHandler&&r.loginHandler();return o?("string"==typeof o&&(o=f.a.resolve(o)),o.then(function(t){return r.setSession(t),n._fetch()})):t.prototype.handleResponse.call(this,e)},e.prototype._getWxaCookieJar=function(){return W.getCookieJar(this.constructor.AppKey)},e.Promise=f.a,e.MWPCookieJar=D,e.AppKey="100028",e.TTID="NMMain@mgj_wxxcx_1.0",e.defaultOptions=Object.assign({method:"GET"},C.defaultOptions),e._events=new I.default,F([u("Use `context.getMWPCookies()` instead.")],e.prototype,"getCookies",null),F([u("Use `System.getSync('deviceId')` instead.")],e,"getDeviceID",null),e}(C);n.a=V},function(t,e,n){function r(t){return{time:new Date(Date.now()+_),_sync:t}}function o(){return new d.a(function(t,e){wx.request({url:"https://act.mogujie.com/time",success:function(n){var r;try{r=JSON.parse(n.data.replace(/^[\s\S]*\(({[\s\S]+})\)[\s\S]*$/,"$1"))}catch(t){return e(t)}var o=r.status,i=r.result;if(1001===o.code)return t(1e3*i.time-Date.now());e(new Error(o.msg))},fail:function(t){e(t.errMsg)}})})}Object.defineProperty(e,"__esModule",{value:!0});var i,s={st:Date.now()},u=n(14),a=n.n(u),c=n(10),f=n(8),l=n(1),h=n(0),p=n(7),d=n(4),g=(i={},i.get="3",i.multiget="3",i.makeup="3",i.recommend="4",i.multirecommend="4",i),y=function(){function t(e,n){this.task=null,this.type=e,this.version=g[e],this.data=n?Object(h.clone)(n):{};var r=t.defaultOptions.appPlat;r&&(this.data.appPlat=r)}return t.config=function(t){Object.assign(this.defaultOptions,t)},t.request=function(e,n,r){return new t(e,n).request(r)},t.get=function(e,n){return t.request("get",e,n)},t.multiget=function(e,n){return t.request("multiget",e,n)},t.makeup=function(e){return t.request("makeup",e)},t.recommend=function(e){return t.request("recommend",e)},t.multirecommend=function(e){return t.request("multirecommend",e)},t.prototype.request=function(t){var e=this;return this.getStrategy(t).reduce(function(t,n){return t?t.catch(function(){return e[n]()}):e[n]()},null)},t.prototype.requestMWP=function(){var e=t.defaultOptions,n=e.headers,r=void 0===n?{}:n,o=e.group;return o&&(r["mw-group"]=o),c.a.request("mwp.darwin."+this.type,this.version,this.data,{headers:r}).then(c.a.filterResult)},t.prototype.requestCDN=function(){var t=this;return new d.a(function(e,n){t.task=f.requestManager.sendRequest({url:"https://mce.mogucdn.com/ajax/"+t.type+"/"+t.version,data:t.data,success:function(r){t._handleHTTPResponse(r.data,e,n)},fail:function(t){n(new Error(t.errMsg))}})})},t.prototype.requestBackup=function(){var t=this;return new d.a(function(e,n){t.task=f.requestManager.sendRequest({url:"https://mcebackup.mogucdn.com/ajax/"+t.type+"/"+t.version+"%3F"+Object(p.stringify)(t.data),success:function(r){t._handleHTTPResponse(r.data,e,n)},fail:function(t){n(new Error(t.errMsg))}})})},t.prototype.getStrategy=function(t){return void 0===t&&(t=!1),void 0!==this.data.cKey&&(t=!0),t||"get"!==this.type&&"multiget"!==this.type?["requestMWP","requestBackup","requestCDN"]:["requestCDN","requestBackup","requestMWP"]},t.prototype._handleHTTPResponse=function(t,e,n){t.success&&"SUCCESS"===t.returnCode?e(t.data):n(new Error(t.returnMessage))},t.defaultOptions={appPlat:"sapp"},t}(),v=(n(29),function(t){return t}),m=v=function(t){function e(){return["_mwp_h5_token_enc","_mwp_h5_token","__mogujie","__ud_"].map(function(e){return e+"="+encodeURIComponent(t.getCookie(e))}).join("; ")}var n=t.prototype.fetch;return t.Env=Object.assign({Mock:"MOCK"},t.Env),t.prototype.fetch=function(r,o){var i=this;"MOCK"===this.options.env?(this.options.hero&&(this.data?this.data._hero=this.options.hero:this.data={_hero:this.options.hero}),f.requestManager.sendRequest({url:"https://lotus.meili-inc.com/mock/"+this.api+"@"+this.version,method:"GET",data:this.data,header:{Cookie:e(),"mw-did":t.getDeviceID()},success:function(e){if(200===parseInt(e.statusCode,10)){var n=e.data;return void 0===n.ret&&(n={api:i.api,v:i.version,ret:t.Code.Success,data:n}),r(n)}o(new Error("network error, status code "+e.statusCode))},fail:function(t){o(new Error(t.errMsg))}})):n.call(this,r,o)},t},_=null,w=null;n.d(e,"performance",function(){return s}),n.d(e,"System",function(){return l.a}),c.a.Promise=d.a;var k={v:"2.0.0",Promise:d.a,requestManager:f.requestManager,MWP:c.a,MCE:y,fn:Object.assign({},h,{md5:a.a}),qs:p,getServerTime:function(t){return void 0===t&&(t=!1),null===_||t?w||(w=o().catch(o).then(function(t){var e=!0;return null===t?e=!1:_=t,w=null,r(e)})):d.a.resolve(r(!1))}};k.MWP=m(c.a),console.info("[INFO] `M.MWP` 可设置 options 为 `{ env: MWP.Env.Mock }` 代理至 Lotus"),Object.defineProperty(c.a,"v",{value:"3.1.0"});e.default=k},function(t,e,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}t.exports=n}).call(e,n(19))},function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]}},function(t,e,n){!function(){var e=n(24),r=n(15).utf8,o=n(25),i=n(15).bin,s=function t(n,s){n.constructor==String?n=s&&"binary"===s.encoding?i.stringToBytes(n):r.stringToBytes(n):o(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||(n=n.toString());for(var u=e.bytesToWords(n),a=8*n.length,c=1732584193,f=-271733879,l=-1732584194,h=271733878,p=0;p<u.length;p++)u[p]=16711935&(u[p]<<8|u[p]>>>24)|4278255360&(u[p]<<24|u[p]>>>8);u[a>>>5]|=128<<a%32,u[14+(a+64>>>9<<4)]=a;for(var d=t._ff,g=t._gg,y=t._hh,v=t._ii,p=0;p<u.length;p+=16){var m=c,_=f,w=l,k=h;f=v(f=v(f=v(f=v(f=y(f=y(f=y(f=y(f=g(f=g(f=g(f=g(f=d(f=d(f=d(f=d(f,l=d(l,h=d(h,c=d(c,f,l,h,u[p+0],7,-680876936),f,l,u[p+1],12,-389564586),c,f,u[p+2],17,606105819),h,c,u[p+3],22,-1044525330),l=d(l,h=d(h,c=d(c,f,l,h,u[p+4],7,-176418897),f,l,u[p+5],12,1200080426),c,f,u[p+6],17,-1473231341),h,c,u[p+7],22,-45705983),l=d(l,h=d(h,c=d(c,f,l,h,u[p+8],7,1770035416),f,l,u[p+9],12,-1958414417),c,f,u[p+10],17,-42063),h,c,u[p+11],22,-1990404162),l=d(l,h=d(h,c=d(c,f,l,h,u[p+12],7,1804603682),f,l,u[p+13],12,-40341101),c,f,u[p+14],17,-1502002290),h,c,u[p+15],22,1236535329),l=g(l,h=g(h,c=g(c,f,l,h,u[p+1],5,-165796510),f,l,u[p+6],9,-1069501632),c,f,u[p+11],14,643717713),h,c,u[p+0],20,-373897302),l=g(l,h=g(h,c=g(c,f,l,h,u[p+5],5,-701558691),f,l,u[p+10],9,38016083),c,f,u[p+15],14,-660478335),h,c,u[p+4],20,-405537848),l=g(l,h=g(h,c=g(c,f,l,h,u[p+9],5,568446438),f,l,u[p+14],9,-1019803690),c,f,u[p+3],14,-187363961),h,c,u[p+8],20,1163531501),l=g(l,h=g(h,c=g(c,f,l,h,u[p+13],5,-1444681467),f,l,u[p+2],9,-51403784),c,f,u[p+7],14,1735328473),h,c,u[p+12],20,-1926607734),l=y(l,h=y(h,c=y(c,f,l,h,u[p+5],4,-378558),f,l,u[p+8],11,-2022574463),c,f,u[p+11],16,1839030562),h,c,u[p+14],23,-35309556),l=y(l,h=y(h,c=y(c,f,l,h,u[p+1],4,-1530992060),f,l,u[p+4],11,1272893353),c,f,u[p+7],16,-155497632),h,c,u[p+10],23,-1094730640),l=y(l,h=y(h,c=y(c,f,l,h,u[p+13],4,681279174),f,l,u[p+0],11,-358537222),c,f,u[p+3],16,-722521979),h,c,u[p+6],23,76029189),l=y(l,h=y(h,c=y(c,f,l,h,u[p+9],4,-640364487),f,l,u[p+12],11,-421815835),c,f,u[p+15],16,530742520),h,c,u[p+2],23,-995338651),l=v(l,h=v(h,c=v(c,f,l,h,u[p+0],6,-198630844),f,l,u[p+7],10,1126891415),c,f,u[p+14],15,-1416354905),h,c,u[p+5],21,-57434055),l=v(l,h=v(h,c=v(c,f,l,h,u[p+12],6,1700485571),f,l,u[p+3],10,-1894986606),c,f,u[p+10],15,-1051523),h,c,u[p+1],21,-2054922799),l=v(l,h=v(h,c=v(c,f,l,h,u[p+8],6,1873313359),f,l,u[p+15],10,-30611744),c,f,u[p+6],15,-1560198380),h,c,u[p+13],21,1309151649),l=v(l,h=v(h,c=v(c,f,l,h,u[p+4],6,-145523070),f,l,u[p+11],10,-1120210379),c,f,u[p+2],15,718787259),h,c,u[p+9],21,-343485551),c=c+m>>>0,f=f+_>>>0,l=l+w>>>0,h=h+k>>>0}return e.endian([c,f,l,h])};s._ff=function(t,e,n,r,o,i,s){var u=t+(e&n|~e&r)+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._gg=function(t,e,n,r,o,i,s){var u=t+(e&r|n&~r)+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._hh=function(t,e,n,r,o,i,s){var u=t+(e^n^r)+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._ii=function(t,e,n,r,o,i,s){var u=t+(n^(e|~r))+(o>>>0)+s;return(u<<i|u>>>32-i)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,n){if(void 0===t||null===t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(s(t,n));return n&&n.asBytes?r:n&&n.asString?i.bytesToString(r):e.bytesToHex(r)}}()},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},,function(t,e,n){var r=n(18),o=n(20),i=o;i.v1=r,i.v4=o,t.exports=i},function(t,e,n){var r=n(12),o=n(13),i=r(),s=[1|i[0],i[1],i[2],i[3],i[4],i[5]],u=16383&(i[6]<<8|i[7]),a=0,c=0;t.exports=function(t,e,n){var r=e&&n||0,i=e||[],f=void 0!==(t=t||{}).clockseq?t.clockseq:u,l=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:c+1,p=l-a+(h-c)/1e4;if(p<0&&void 0===t.clockseq&&(f=f+1&16383),(p<0||l>a)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=l,c=h,u=f;var d=(1e4*(268435455&(l+=122192928e5))+h)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=255&d;var g=l/4294967296*1e4&268435455;i[r++]=g>>>8&255,i[r++]=255&g,i[r++]=g>>>24&15|16,i[r++]=g>>>16&255,i[r++]=f>>>8|128,i[r++]=255&f;for(var y=t.node||s,v=0;v<6;++v)i[r+v]=y[v];return e||o(i)}},function(e,n){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":t(window))&&(r=window)}e.exports=r},function(t,e,n){var r=n(12),o=n(13);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var u=0;u<16;++u)e[i+u]=s[u];return e||o(s)}},,,function(e,n){!function(n){function r(){}function o(t,e){return function(){t.apply(e,arguments)}}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void a(e.promise,t)}u(e.promise,r)}else(1===t._state?u:a)(e.promise,t._value)})):t._deferreds.push(e)}function u(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===(void 0===n?"undefined":t(n))||"function"==typeof n)){var r=n.then;if(n instanceof i)return e._state=3,e._value=n,void c(e);if("function"==typeof r)return void l(o(r,n),e)}e._state=1,e._value=n,c(e)}catch(t){a(e,t)}}function a(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function l(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,a(e,t))})}catch(t){if(n)return;n=!0,a(e,t)}}var h=setTimeout;i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(r);return s(this,new f(t,e,n)),n},i.all=function(e){return new i(function(n,r){function o(e,u){try{if(u&&("object"===(void 0===u?"undefined":t(u))||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(t){o(e,t)},r)}i[e]=u,0==--s&&n(i)}catch(t){r(t)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return n([]);for(var s=i.length,u=0;u<i.length;u++)o(u,i[u])})},i.resolve=function(e){return e&&"object"===(void 0===e?"undefined":t(e))&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)})},i._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){h(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},i._setImmediateFn=function(t){i._immediateFn=t},i._setUnhandledRejectionFn=function(t){i._unhandledRejectionFn=t},void 0!==e&&e.exports?e.exports=i:n.Promise||(n.Promise=i)}(this)},function(t,e){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var o=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?n.push(e.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<t.length;o=++r%4)0!=o&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(r))>>>6-2*o);return n}};t.exports=n}()},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function r(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}t.exports=function(t){return null!=t&&(n(t)||r(t)||!!t._isBuffer)}},function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){r(this,t),this.items=[]}return o(t,[{key:"enqueue",value:function(t){this.items.push(t)}},{key:"dequeue",value:function(){return this.items.shift()}},{key:"front",value:function(){return this.items[0]}},{key:"remove",value:function(t){for(var e,n=0;n<this.items.length;n++)if((e=this.items[n])._task&&e._task.id===t)return this.items.splice(n,1)}},{key:"isEmpty",value:function(){return 0===this.items.length}},{key:"clear",value:function(){this.items=[]}},{key:"size",value:function(){return this.items.length}},{key:"print",value:function(){console.log(this.items.toString())}}]),t}();e.default=i},,,function(t,e){Date.format=function(t,e){var n=Date.formatLogic,r=-1!==e.indexOf("a")||-1!==e.indexOf("A"),o=[];o.d=t.getDate(),o.dd=n.pad(o.d,2),o.ddd=n.i18n.shortDayNames[t.getDay()],o.dddd=n.i18n.dayNames[t.getDay()],o.M=t.getMonth()+1,o.MM=n.pad(o.M,2),o.MMM=n.i18n.shortMonthNames[o.M-1],o.MMMM=n.i18n.monthNames[o.M-1],o.yyyy=t.getFullYear(),o.yyy=n.pad(o.yyyy,2)+"y",o.yy=n.pad(o.yyyy,2),o.y="y",o.H=t.getHours(),o.hh=n.pad(r?n.convertTo12Hour(o.H):o.H,2),o.h=r?n.convertTo12Hour(o.H):o.H,o.HH=n.pad(o.H,2),o.m=t.getMinutes(),o.mm=n.pad(o.m,2),o.s=t.getSeconds(),o.ss=n.pad(o.s,2),o.z=t.getMilliseconds(),o.zz=o.z+"z",o.zzz=n.pad(o.z,3),o.ap=o.H<12?"am":"pm",o.a=o.H<12?"am":"pm",o.AP=o.H<12?"AM":"PM",o.A=o.H<12?"AM":"PM";for(var i=0,s="",u="";i<e.length;){for(u=e.charAt(i);i+1<e.length&&void 0!==o[u+e.charAt(i+1)];)u+=e.charAt(++i);void 0!==o[u]?s+=o[u]:s+=u,i++}return s},Date.formatLogic={pad:function(t,e){var n="";if(e<1)return"";for(var r=0;r<e;r++)10,n+="0";var o=t;return o=n+t,o=o.substring(o.length-e)},convertTo12Hour:function(t){return t%12==0?12:t%12},i18n:{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},Date.prototype.toFormattedString=function(t){return Date.format(this,t)},Date.parseFormatted=function(t,e){var n=new Date(2e3,0,1),r=[];r.d="([0-9][0-9]?)",r.dd="([0-9][0-9])",r.M="([0-9][0-9]?)",r.MM="([0-9][0-9])",r.yyyy="([0-9][0-9][0-9][0-9])",r.yyy="([0-9][0-9])[y]",r.yy="([0-9][0-9])",r.H="([0-9][0-9]?)",r.hh="([0-9][0-9])",r.h="([0-9][0-9]?)",r.HH="([0-9][0-9])",r.m="([0-9][0-9]?)",r.mm="([0-9][0-9])",r.s="([0-9][0-9]?)",r.ss="([0-9][0-9])",r.z="([0-9][0-9]?[0-9]?)",r.zz="([0-9][0-9]?[0-9]?)[z]",r.zzz="([0-9][0-9][0-9])",r.ap="([ap][m])",r.a="([ap][m])",r.AP="([AP][M])",r.A="([AP][M])";for(var o=Date.parseLogic,i=0,s="",u=new Array(""),a="";i<e.length;){for(a=e.charAt(i);i+1<e.length&&void 0!==r[a+e.charAt(i+1)];)a+=e.charAt(++i);void 0!==r[a]?(s+=r[a],u[u.length]=a):s+=a,i++}var c=new RegExp(s),f=t.match(c);if(void 0!==f&&f.length===u.length){for(i=0;i<u.length;i++)if(""!==u[i])switch(u[i]){case"yyyy":case"yyy":n.setYear(o.parseInt(f[i]));break;case"yy":n.setYear(2e3+o.parseInt(f[i]));break;case"MM":case"M":n.setMonth(o.parseInt(f[i])-1);break;case"dd":case"d":n.setDate(o.parseInt(f[i]));break;case"hh":case"h":case"HH":case"H":n.setHours(o.parseInt(f[i]));break;case"mm":case"m":n.setMinutes(o.parseInt(f[i]));break;case"ss":case"s":n.setSeconds(o.parseInt(f[i]));break;case"zzz":case"zz":case"z":n.setMilliseconds(o.parseInt(f[i]));break;case"AP":case"A":case"ap":case"a":("PM"===f[i]||"pm"===f[i])&&n.getHours()<12&&n.setHours(n.getHours()+12),"AM"!==f[i]&&"am"!==f[i]||12!==n.getHours()||n.setHours(0)}return n}},Date.parseLogic={unpad:function(t){for(var e=t;e.length>1&&"0"===e[0];)e=e.substring(1,e.length);return e},parseInt:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return parseInt(this.unpad(t),10)})},Date.prototype.fromFormattedString=function(t,e){return this.setTime(Date.parseFormatted(t,e).getTime()),this}}]); 
 			}); 
		define("common/live/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../m.js")),a=(e.default.MWP,e.default.fn.sendMsg),t=2;exports.default={encodeLiveParamsForNavigateParam:function(e){var t="";try{t=JSON.stringify(e)}catch(e){a(e,{_author:"jiangfan",threshold:1,context:"encodeLiveParamsForNavigateParam"})}return t},encodeLiveParamsForNavigateUrl:function(e){var t="";try{t=encodeURIComponent(JSON.stringify(e))}catch(e){a(e,{_author:"jiangfan",threshold:1,context:"encodeLiveParamsForNavigateUrl"})}return t},decodeLiveParams:function(e){if(!e)return null;var t=null;try{t=JSON.parse(decodeURIComponent(e))}catch(e){a(e,{_author:"jiangfan",threshold:1,context:"decodeLiveParams"})}return console.log(t),t},returnToLive:function(e,a){var t=getCurrentPages(),r=t.length>1?t[t.length-2]:null;if(r&&-1!==r.route.indexOf("pages/live/index"))wx.navigateBack({delta:1});else{var i=this.decodeLiveParams(e);a("/pages/live/index",{actorUserId:i.actorId||"",roomId:i.roomId||0,acm:i.acm||""})}},gotoDetailPage:function(e,a,t,r){console.log({gotoDetailPage:e,liveParams:a});var i={};a&&(i.liveParams=this.encodeLiveParamsForNavigateParam(a)),e.cparam&&(i.cparam=e.cparam),e.acm&&(i.acm=e.acm),r?t("detail",Object.assign({itemId:e.itemId},i)):e.outerId?t("rushDetail",Object.assign({itemId:e.itemId,activityId:e.outerId},i)):e.togetherGroup&&e.togetherGroup.on?t("pintuanDetail",Object.assign({itemId:e.itemId,activityId:e.togetherGroup.activityId},i)):t("detail",Object.assign({itemId:e.itemId},i))},gotoGoodsExplainPage:function(e,a,t){console.log({gotoGoodsExplainPage:e,liveParams:a});var r={};a&&(r.liveParams=this.encodeLiveParamsForNavigateParam(a)),e.cparam&&(r.cparam=e.cparam),e.acm&&(r.acm=e.acm),t("/pages/live/liveGoodsExpVideo/index",Object.assign({itemVideoId:e.explainInfo.id},r))},getFullUrl:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return null;e=e.split("?").slice(0,2).join("?");var t=[];Object.keys(a).forEach(function(e){a[e]&&t.push(e+"="+a[e])});var r="";return t&&t.length>0&&(r=e.indexOf("?")>-1?"&":"?"),""+e+r+t.join("&")},buildLiveParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{appId:"11m",platform:t})},setPlatfomId:function(e){e&&(t=e)}}; 
 			}); 
		define("common/m.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("./lib")([1],{31:function(e,r,t){e.exports=t(11)}},[31]); 
 			}); 
		define("common/pay/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,a){for(var s=0;s<a.length;s++){var n=a[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,s,n){return s&&e(a.prototype,s),n&&e(a,n),a}}(),s=function(e){return e&&e.__esModule?e:{default:e}}(require("../m.js")),n=s.default.MWP,r=s.default.Promise,t={mgj:"wxca3957e5474b3670",mls:"wx8122ed29755c69c2"},o={mgj:"mgjXcx",mls:"mlsXcx"},c=function(){function s(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,s),this.payId=a.payId||null,this.modou=a.modou||0,this.platform=a.platform||"mgj"}return a(s,[{key:"exec",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return new r(function(r,c){if(a.payId&&(e.payId=a.payId),a.modou&&(e.modou=a.modou),!e.payId)return e.sendResponse({code:"1204",success:!1,from:"mgj",msg:"payId is required!",detail:"payId is required!"},"success",r,s);n.request("mwp.pay_cashier.mlsXcxWechatPay",1,{payId:e.payId,appId:t[e.platform],scenetype:o[e.platform],modou:e.modou}).then(function(a){if("SUCCESS"!==a.ret)return e.sendResponse(e.handlerMoguError(a),"success",r,s);e.handleResponse(a,function(n,t){if(n)return e.sendResponse(n,"error",c,s);if(t.code&&!t.success)return e.sendResponse(t,"success",r,s);var o=a.data.pf_async?t.data.asyncData.weChatToken:t.data.weChatToken,u=null;try{u=getCurrentPages()[0].$logE}catch(n){}wx.requestPayment(e.mixin(o,{success:function(a){u&&u("000000243",{payId:e.payId,prepayId:o.package.split("=")[1]},{force:!0}),e.sendResponse({code:"2101",success:!0,from:"wx",msg:"支付成功",detail:a},"success",r,s)},fail:function(a){e.sendResponse(e.handleWxError(a),"success",r,s)},complete:function(a){if("requestPayment:cancel"===a.errMsg)return e.sendResponse({code:"2201",success:!1,from:"wx",msg:"调用支付失败，用户取消支付",detail:{errMsg:"requestPayment:fail cancel"}},"success",r,s)}}))})}).catch(function(a){return e.sendResponse(a,"error",c,s)})})}},{key:"handleResponse",value:function(e,a){function s(){n.request(c,1,{queryParams:e.data.pf_async.asyncParams.params.queryParams}).then(function(n){try{if(n.data.hasResult)return a(void 0,n);if(t>=e.data.pf_async.asyncParams.maxQueryLoop||Date.now()-o>=e.data.pf_async.asyncParams.maxQueryDelay)return a(void 0,{code:"1201",success:!1,from:"mgj",msg:"达到重试限制条件",detail:{}})}catch(e){return a(void 0,{code:"1202",success:!1,from:"mgj",msg:"轮询过程错误",detail:e})}t++,setTimeout(function(){s.apply(r)},e.data.pf_async.asyncParams.queryDelay)}).catch(function(e){return a(e,void 0)})}var r=this,t=0,o=Date.now();if(!e.data.pf_async)return a(void 0,e);var c=e.data.pf_async.apiName;s.apply(r)}},{key:"sendResponse",value:function(e,a,s,n){s(e),"success"===a?n(void 0,e):n(e,void 0)}},{key:"handleWxError",value:function(e){var a=null;try{a=e.errMsg.split("requestPayment:fail")[1].replace(/^\s*|\s*$/g,"")}catch(e){}var s={cancel:{text:"用户取消支付",code:"01"},"no permission":{text:"无权限",code:"02"}};return{code:s[a]&&s[a].text?"22"+s[a].code:"22xx",success:!1,from:"wx",msg:"调用支付失败 "+(s[a]&&s[a].text||a),detail:e}}},{key:"handlerMoguError",value:function(e){return{code:"12xx",success:!1,from:"mgj",msg:e.msg,detail:{code:e.ret,api:e.api}}}},{key:"mixin",value:function(e,a){for(var s in e)e.hasOwnProperty(s)&&(a[s]=e[s]);return a}}]),s}();exports.default=c; 
 			}); 
		define("common/reminder/wxCustomReminder.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={api:"mwp.walch.PushMessageActionlet",versions:"1.0"},i={api:"mwp.walch.PushItemNoticeActionlet",versions:"1.0"},t={api:"mwp.walch.BatchPushMessageActionlet",versions:"1.0"},s=e,n="",a={},r=!1,c=!1;try{c=!(!wx||wx.isH5)}catch(e){console.log("不是微信环境不可使用wxCustomReminder")}var o="",d="",u="";if(c){var m=require;o=m("../../common/utils/cache.js").default,u=m("../../common/m").default,d=u.MWP}else u=window.M,d=u.MWP;var l={getReminderStatus:function(e){var i={},t=(e=e.wxConfig||{}).reminderType;return t?(i[e.bizType_xcx]=!1,"goods-single"===t&&c&&(i[e.bizType_xcx]=!(!o||!o.get("mogu-remind-"+e.bizType_xcx+"_"+e.bizIds))),i):(console.error("lost reminderType when getReminderStatus"),!1)},setReminder:function(e,i){var t={reminderType:"single",aheadTime:10,channel:"300"};if(e=e.wxConfig||{},"goods-single"===(e=Object.assign(t,e)).reminderType){var s=l.getReminderStatus({wxConfig:e});(s=s[e.bizType_xcx])?i&&i({status:"fail",msg:"已经设置过提醒了~"}):c&&p(e,function(e){i&&i(e)})}else c&&p(e,function(e){i&&i(e)})},cancelReminder:function(){}},g=function(e,i){if("goods-single"===e&&i){var t="mogu-remind-"+a.bizType_xcx+"_"+a.bizIds,s=i;c&&o&&o.put(t,s,{persistent:!0})}},p=function(c,o){var u=0,m=(a=c).reminderType;switch(a.startTime&&(u=a.startTime-60*a.aheadTime),a.bizIds=a.bizIds+"",m){case"single":s=e,n={bizType:a.bizType_xcx,bizId:a.bizIds.split(",")[0],time:u};break;case"goods-single":s=i,n={eventId:a.bizType_xcx,itemId:a.bizIds,time:u,startTime:a.startTime,activityId:a.activityId,channel:a.channel};break;case"batch":s=t,n={bizType:a.bizType_xcx,bizIdList:a.bizIds};break;default:o&&o({status:"fail",msg:"提醒的事件类型不存在~"})}s&&n&&!r?(r=!0,d&&d.request(s.api,s.versions,n).then(d.filterResult).then(function(){r=!1,g(m,u),o&&o({status:"success",msg:"设置提醒成功"})}).catch(function(e){r=!1;var i={status:"fail",msg:"设置提醒失败~"};e&&e.code&&"FAIL_BIZ_4003"===e.code?i.msg="请不要;设置过多提醒":e&&e.code&&"FAIL_BIZ_4006"===e.code&&(i.msg="已设置提醒","goods-single"===m&&(i={status:"success",msg:"设置提醒成功"},g(m,u))),o&&o(i)})):r=!1},f=function(){return Math.floor((new Date).getTime()/1e3)},b=function(){var e=f(),i=/^mogu-remind-/;o&&o.put("remind-cleanup-date",e,{persistent:!0}),o&&o.forEach(function(t,s){if(i.test(s)){var n=+(o&&o.get(s));n<e&&e-n>86400&&o&&o.remove(s)}})};c&&function(){var e=o&&o.get("remind-cleanup-date"),i=f();e?i-e>86400&&b():o&&o.put("remind-cleanup-date",i,{persistent:!0})}(),exports.default=l; 
 			}); 
		define("common/service/page.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={};exports.default=e; 
 			}); 
		define("common/service/route.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(t){for(var n=t.split("?")[1]||"",i=s(n),a=arguments.length,l=Array(a>1?a-1:0),o=1;o<a;o++)l[o-1]=arguments[o];for(var u=0,c=r.length;u<c;u++)i[r[u]]=l[u];return l[r.length]&&(i=Object.assign(s(l[r.length]),i)),e(i)}}function r(e){var t=o.default.get("TABS");return e=e.split("?")[0],{isTab:e in t,url:e}}function n(e){return c.some(function(t){return!!t.test.test(e)&&(e=e.replace(t.test,t.replacer),!0)}),e}function i(e){console.error(e),a.default.fn.sendMsg(new Error(e))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform=n,exports.navigate=function(e,t){var a=r(e=n(e));a.isTab?((0,u.nextPeventOnShow)(!0),wx.switchTab({url:a.url,fail:function(e){(0,u.nextPeventOnShow)(!1),i("[SwitchTab]:"+e.errMsg),t&&t()}})):wx.navigateTo({url:e,fail:function(r){console.error("[Navigate]:",r.errMsg),wx.redirectTo({url:e,fail:function(e){i("[Redirect]:"+e.errMsg),t&&t()}})}})},exports.redirect=function(e,t){var a=r(e=n(e));a.isTab?((0,u.nextPeventOnShow)(!0),wx.switchTab({url:a.url,fail:function(e){(0,u.nextPeventOnShow)(!1),i("[SwitchTab]:"+e.errMsg),t&&t()}})):wx.redirectTo({url:e,fail:function(e){i("[Redirect]:"+e.errMsg),t&&t()}})};var a=e(require("../m")),l=e(require("./url")),o=e(require("../utils/cache")),u=require("../../mixins/logger/index"),s=a.default.qs.parse,c=[{test:/^https?:\/\/h5\.mogujie\.com\/detail-normal\/index.html\?itemId=([0-9a-z]+).*$/,replacer:t(l.default.detail,"itemId")},{test:/^mgj:\/\/detail\?iid=([0-9a-z]+)(?:&(.*))?$/,replacer:t(l.default.detail,"itemId")},{test:/^https?:\/\/shop\.mogujie\.com\/detail\/([0-9a-z]+).*$/,replacer:t(l.default.detail,"itemId")}]; 
 			}); 
		define("common/service/upload.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("../lib")([3],{27:function(e,t,n){function i(e,t,n,a,o){var c=[r,t.api||l,"?",Object(u.stringify)({appKey:t.appKey||f,sign:s.default.sign,_did:g})].join("");wx.uploadFile({url:c,filePath:e,name:"image",success:function(o){try{var u=JSON.parse(o.data);switch(u.status.code){case 1001:n(Object.assign({localPath:e},u.result));break;case 1022:s.default.refreshSign().then(function(){i(e,t,n,a)}).catch(function(e){a(e)});break;default:a(new Error(u.status.msg))}}catch(e){a(e)}},fail:function(e){a(new Error(e.errMsg))},complete:o})}function a(e){return/\.(jpe?g|png)$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),u=n(7),c=n(1),s=n(9),r="https://media.mogujie.com/",l="image/put",f="14a",g=c.a.getSync("deviceId"),h=n(2),p=function(e){function t(t,n){var i=e.call(this)||this;i.size=t.length,i.waiting=t,i.uploading=[],i.options=n;for(var a=0,o=i.waiting.length;a<o;a++)i._exec();return i}return h.a(t,e),t.prototype._remove=function(e){this.uploading=this.uploading.filter(function(t){return t!==e})},t.prototype._exec=function(){var e=this;if(this.uploading.length<5)if(this.waiting.length>0){var t=this.waiting.shift();this.uploading.push(t),i(t,this.options,function(t){e.$emit("upload",t)},function(n){e.$emit("fail",n,t)},function(){e._remove(t),e._exec()})}else 0===this.uploading.length&&this.$emit("finish")},t}(n(5).default),d={uploadImage:function(e,t){return void 0===t&&(t={}),a(e)?new o.a(function(n,a){i(e,t,n,a)}):o.a.reject(new Error("请选择 JPG 或 PNG 类型的图片"))},uploadImages:function(e,t){return void 0===t&&(t={}),0===(e=e.filter(a)).length?null:new p(e,t)},chooseAndUploadImage:function(e){return new o.a(function(t,n){wx.chooseImage({count:1,success:function(i){var a=i.tempFilePaths;d.uploadImage(a[0],e).then(t,n)},fail:function(){t(null)}})})},chooseAndUploadImages:function(e,t){return void 0===e&&(e=9),new o.a(function(n){wx.chooseImage({count:e,success:function(e){var i=e.tempFilePaths;n(d.uploadImages(i,t))},fail:function(){n(null)}})})}};t.default=d}},[27]); 
 			}); 
		define("common/service/url.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){for(var t=arguments.length,d=Array(t>1?t-1:0),a=1;a<t;a++)d[a-1]=arguments[a];return e="/pages/"+e+"/index",function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=0,i=d.length;a<i;a++)if(void 0===t[d[a]])throw new Error("miss parameter: "+d[a]);var n=e;return Object.keys(t).length>0&&(n+="?"+r(t)),n}}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(require("../m")).default.qs.stringify,t=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}({home:e("shop/home"),debug:e("debug"),personal:e("personal"),fav:e("fav","type"),footprint:e("footprint"),feedback:e("feedback"),shop:e("shop/home","shopId"),shopSearch:e("shop/search","shopId"),shopHotSearch:e("shop/hotSearch","shopId"),detail:e("detail/pages/normal","itemId"),pinrule:e("detail/pages/pinrule"),rushDetail:e("detail/pages/rush","itemId","activityId"),shopkillDetail:e("detail/pages/shopkill","itemId","activityId"),orderList:e("order/list","orderStatus"),orderDetail:e("order/detail","orderId"),rateList:e("rate/list","itemId"),rateAdd:e("rate/add","orderId"),rateAppend:e("rate/append","orderId"),refundCash:e("refund/cash","orderId"),refundDetail:e("refund/detail","orderId"),refundIM:e("refund/im","orderId"),refundProtocol:e("refund/protocol"),refundHelpList:e("refund/help/list"),refundHelpDetail:e("refund/help/detail"),refundLogistics:e("refund/logistics","refundId"),refundLogisticsEdit:e("refund/logisticsEdit","orderId"),refundLogisticsAgain:e("refund/logisticsAgain","refundId","shopOrderId"),refundRequest:e("refund/request","orderId"),logisticsList:e("logisticsList","type","orderId"),refundApply:e("refund/apply","orderId"),refundApplyDetail:e("refund/applydetail","orderId"),refundApplyResult:e("refund/applyresult","orderId"),pintuanIndex:e("pintuanIndex"),pintuanActive:e("pintuanActive","pid"),pintuanLottery:e("pintuanLottery","pid"),pinshare:e("pinshare","tuanId"),pintuanDetail:e("detail/pages/pintuan","itemId","activityId"),pintuanOrderList:e("order/ptlist","orderStatus"),pintuanOrderDetail:e("order/detail","orderId"),pintuanLotteryResult:e("pintuan/lotteryresult","activityId"),pintuanRed:e("pintuanRed"),searchMiddle:e("searchMiddle"),wallCategory:e("wallCategory","fcid","title"),wallSearch:e("wallSearch","q"),wallRelative:e("wallRelative","pid","iid"),wallAct:e("wallAct","pageName"),wallPackage:e("wallPackage","title"),coupon:e("coupon"),cart:e("cart"),buy:e("buy"),payresult:e("payresult","payOrderId")},"debug",e("debug"));exports.default=t; 
 			}); 
		define("common/service/user.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("../lib")([0],{22:function(e,r,t){e.exports=t(9)}},[22]); 
 			}); 
		define("common/setup.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("./m"),u=e(t),a=e(require("./service/user")),l=e(require("./utils/cache")),p=e(require("./utils/debug"));require("../mixins/options");var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var u in e)Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t.default=e,t}(require("../mixins/logger/index")),d=e(require("./utils/houston")),f=e(require("./app.config")),n=u.default.MWP;n.TTID=f.default.ttid,n.AppKey=f.default.appKey,l.default.put("appKey",f.default.appKey,{keep:!0});var s=f.default.shopId,i=f.default.sellerUserId,o=f.default.shopIdNum,c=p.default.read(),m=c.shopId||s,v=c.shopIdNum||o,I=c.sellerUserId||i;l.default.put("shopId",m,{keep:!0}),l.default.put("shopIdNum",v,{keep:!0}),l.default.put("sellerUserId",I,{keep:!0}),l.default.put("marketType",f.default.marketType,{keep:!0}),l.default.put("appId",f.default.appId,{keep:!0}),l.default.put("sceneType",f.default.sceneType,{keep:!0}),l.default.put("appName",f.default.appName,{keep:!0}),l.default.put("primaryColor","#ff5777",{keep:!0}),l.default.put("channel",f.default.channel,{kepp:!0}),l.default.put("eventId",f.default.eventId,{kepp:!0}),r.initializeLogger({platform:f.default.platform,uuid:t.System.getSync("deviceId"),uid:function(){return a.default.uid}}),l.default.put("TABS",f.default.tabbarParams,{keep:!0}),r.initQueue(),u.default.fn.sendMsg=r.reportMsg,n._setGlobalEnv=n.setGlobalEnv,n.setGlobalEnv=function(e,t){!0===e?this._setGlobalEnv(t):console.error(new Error("Please use debug page to switch MWP environment!"))},n.setGlobalEnv(!0,c.env),d.default.setUp(); 
 			}); 
		define("common/trade/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),n=t(require("../m.js")),i=t(require("../service/user")),s=t(require("../utils/cache")),o=n.default.MWP,r=n.default.fn.sendMsg,u=function(){function t(a,n,i,s){var o=this;e(this,t),this.$toast=a,this.$loading=n,this.options=i||{},this.$root=s,this.$root&&this.$root.$getOptions().then(function(t){o.options=Object.assign({},t,i)})}return a(t,null,[{key:"getPromotionType",value:function(){return{Normal:1,NormalPintuan:4,PinTuan:2,Rush:3,JiaJiaGou:5,ShopKill:7}}}]),a(t,[{key:"addCart",value:function(t,e){var a=this;return this.options=Object.assign({},this.options,e),new n.default.Promise(function(e,n){a._addCartRquest(t,!1,e,n)})}},{key:"buy",value:function(t,e){var a=this;return this.options=Object.assign({},this.options,e),new n.default.Promise(function(e,n){if(a.options.isPresale)a.$toast&&a.$toast.show("小程序暂不支持预售，请移步蘑菇街App下单哟");else{var i=a._getBuyParams(t,a.options,a.$root);a._buyRequest(i,e,n)}})}},{key:"_addCartRquest",value:function(t,e,a,n){var i=this,s=t.sku,r=t.number,u=s.stockId,c=s.nowprice,p=this.options.liveParams||"",l=this.$root&&this.$root.ptpData||{},h=l.ptp_url||this.options.ptp||"",d=l.ptp_cnt||this.options.ptpCnt||"",y={liveParams:p&&JSON.stringify(p)||"",ptpCnt:d};this.$loading&&this.$loading.show(),o.request("mwp.CartWeb.unifiedAddCart","2",{stockId:u,number:r,price:c,ptp:h,extensions:JSON.stringify(y),marketType:getApp().data.marketType,sourceMarket:"weixin",force:e}).then(o.filterResult).then(function(s){s.overMax&&!e?i._showCartCheck(t,a,n):(i.$toast&&i.$toast.show("加入购物车成功"),a({result:"success"})),i.$loading&&i.$loading.hide()}).catch(function(t){i.$loading&&i.$loading.hide(),i.handleRequestError(t),a({result:"error"})})}},{key:"_showCartCheck",value:function(t,e,a){var n=this;wx.showModal({title:"购物车空间不足",content:"你的购物车商品已满200件",cancelColor:"#666666",confirmColor:"#FF5777",cancelText:"取消",confirmText:"继续加购",success:function(i){i.confirm?n._addCartRquest(t,!0,e,a):i.cancel&&e({result:"cancel"})},fail:function(t){n.$toast&&n.$toast.show(t.message),e({result:"error"})}})}},{key:"handleRequestError",value:function(t){console.log(t),r(t,{_author:"changsheng",threshold:1}),i.default.showUserError(t)||this.$toast.show(t.message)}},{key:"_getBuyParams",value:function(e,a,n){var i=a.type,s=e.sku.stockId,o=e.installment,r=e.number,u=a.liveParams,c=a.orderFrom||"detail",p=a.isNew,l=a.tuanId,h=a.activityId,d=a.tuanType,y=a.hasQualification,f=n&&n.ptpData||{},m=f.ptp_url||a.ptp||"",g=f.ptp_cnt||a.ptpCnt||"",v=m,k=e.outType||a.outType,b=t.getPromotionType(),w={shops:[{skus:[{stockId:s,number:r,ptp:v,ptpCnt:g,liveParams:u}]}],orderFrom:c,marketType:getApp().data.marketType,sourceMarket:"weixin"};switch(i){case b.NormalPintuan:w={shops:[{skus:[{stockId:s,number:r,ptp:v,ptpCnt:g,liveParams:u,pinTuan:{tuanType:d}}]}],orderFrom:c,marketType:getApp().data.marketType,sourceMarket:"weixin"},Object.assign(w);break;case b.PinTuan:Object.assign(w,{pinTuan:{isOwner:!l,isNew:p,tuanId:l,tuanType:d,hasQualification:y},activityId:h,activityType:k||4,channel:"channel_pintuan"});break;case b.Rush:Object.assign(w,{activityId:h,activityType:1,channel:"channel_kuaiqiang"});break;case b.JiaJiaGou:Object.assign(w,{channel:"channel_jiajiagou",activityType:7,activityId:h});break;case b.ShopKill:Object.assign(w,{channel:"channel_shop_seckill",activityType:10,activityId:h})}return e.installmentNum&&o&&(w.repayStageReqDTO={payway:"repayStage",perPrice:o.perPrice,num:o.num,fee:o.fee,chosen:!0}),w}},{key:"_buyRequest",value:function(t,e,a){s.default.put("buy.buyParams",t),e({result:"success"})}}]),t}();exports.default=u; 
 			}); 
		define("common/utils/ItemReminder.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),a=e(require("../m.js")),n=e(require("../service/user")),i=a.default.MWP,o=a.default.fn.sendMsg,s=function(){function e(r,a){t(this,e),this.$toast=r,this.$loading=a,this.syncReminderData()}return r(e,[{key:"addReminder",value:function(e){var t=this,r=e.eventId,n=e.itemId,o=e.scatter,s=e.time,d=e.startTime,u=e.activityIdNum,c=e.activityIdStr,l=e.channel,m=void 0===l?getApp().data.channel:l;return new a.default.Promise(function(e,a){var l=u||c||"",h=n+l;if(t.isReminded(n,l))return t.$toast&&t.$toast.show("已设置提醒"),void e({result:"success"});if(!r||!n)return t._handleError(new Error("设置提醒缺少参数")),void e({result:"error"});if(t.isLoaaidng)e({result:"loading"});else{t.isLoaaidng=!0,t.$loading&&t.$loading.show();var v={eventId:r,itemId:n,scatter:o,time:s,startTime:d,channel:m};c&&(v.activityIdUrl=c),u&&(v.activityId=u),i.request("mwp.walch.PushItemNoticeActionlet","1.0",v).then(i.filterResult).then(function(r){t.$toast&&t.$toast.show("眼光很好哦看中这款！稍后留意微信通知哦~"),t.renminderData[h]=d,t._saveReminderData(),t.$loading&&t.$loading.hide(),t.isLoaaidng=!1,e({result:"success"})}).catch(function(r){r.message="设置提醒失败","FAIL_BIZ_4002"===r.code&&(r.message="请不要点太快"),"FAIL_BIZ_4006"===r.code?(t.$toast&&t.$toast.show("已设置提醒"),t.renminderData[h]=d,t._saveReminderData(),e({result:"success"})):(t._handleError(r),e({result:"error"})),t.isLoaaidng=!1,t.$loading&&t.$loading.hide()})}})}},{key:"removeReminder",value:function(){}},{key:"isReminded",value:function(e){var t=e.itemId,r=void 0===t?"":t,a=e.activityId,n=void 0===a?"":a;return!!this.renminderData[r+n]}},{key:"getReminderList",value:function(e){var t=this,r={};return e.forEach(function(e){var a=e.itemId,n=void 0===a?"":a,i=e.activityId;r[n+(void 0===i?"":i)]=!!t.renminderData[reminderKey]}),r}},{key:"syncReminderData",value:function(){try{this.renminderData=wx.getStorageSync("ItemReminder")||{},this._resetReminderData()}catch(e){this._handleError(e)}}},{key:"_resetReminderData",value:function(){var e=parseInt((new Date).getTime()/1e3),t=this.renminderData,r=!0,a=!1,n=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var s=i.value;e-t[s]>=86400&&this._removeReminderData(s)}}catch(e){a=!0,n=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}this._saveReminderData()}},{key:"_removeReminderData",value:function(e){delete this.renminderData[e]}},{key:"_saveReminderData",value:function(){wx.setStorageSync("ItemReminder",this.renminderData)}},{key:"_handleError",value:function(e){console.log(e),o(e,{_author:"changsheng",threshold:1}),n.default.showUserError(e)||this.$toast&&this.$toast.show(e.message)}}]),e}();exports.default=s; 
 			}); 
		define("common/utils/acmLog.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t){return t=t.split("#")[0],new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i").test(t)?RegExp.$2.replace(/\+/g," "):""}function t(){var e=getCurrentPages(),t=e[e.length-1].route;return o.default[t]}function n(e,t){return e.logMod&&"string"==typeof e.logMod&&(t=e.logMod),t&&"string"==typeof t?(t=t.split("_"),{modId:t[0]||"",acmTotal:t[1]||1}):{modId:"",acmTotal:1}}function r(e,t,n,r){var o=[];return e&&-1===t.indexOf("wx_")&&(e=e.split("."),t?(o=t.split("."))[6]=o[6]?o[6]+"-"+e[6]:e[6]:o=e),o[6]&&(o[6]+="-idx_"+n),o[6]&&(o[6]+="-mfs_"+(r||1)),o.join(".")||t}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(require("../service/page")),i={acmExtendFn:function(o,i){var d=t(),u=n(o,i),a=u.modId,f=u.acmTotal,l=o.href,c=o.acm,s=o.logIndex,x=l&&-1!=l.indexOf("acm="),_=c||"",g=s||0;return x&&!_&&(_=e("acm",l)),_&&(_.indexOf("wx_")>=0||_.indexOf("-wx")>=0)?_:_&&_.indexOf("mf_")>=0?_+"-wx":a&&d?r("3.mf.1_0_0.0.0.0.wx_"+d+"_"+a,_,g,f):_}};exports.default=i; 
 			}); 
		define("common/utils/cache.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("../lib")([2],{21:function(e,r,t){e.exports=t(3)}},[21]); 
 			}); 
		define("common/utils/cpcutil.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return null;var t=[],n=!0,o=!1,u=void 0;try{for(var s,a=Object.keys(r)[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var i=s.value;t.push(i+"="+r[i])}}catch(e){o=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw u}}return e+"?"+t.join("&")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestCparam=void 0;var t=e(require("../../common/service/user")),n=require("../../common/m"),o=e(n),u=(o.default.MWP,o.default.fn.sendMsg);exports.requestCparam=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o.default.Promise(function(s,a){var i=e.itemId,c=e.cparam,l=e.acm,m=e.businessStyle,d=e.custom;if(!i||!c)return u(new Error("cpc打点参数缺失"),{_author:"changsheng",threshold:1}),void s({result:"noParam",msg:"required param not found"});(new Date).getTime();var f=n.System.getSync("deviceId"),p=t.default.uid,g=getCurrentPages().slice(-2)[0]||null,h=g&&r(g.route,g.options)||"",v={cparam:c,acm:l,businessStyle:m,custom:d,clickUserId:p,timestamp:+new Date,tradeItemId:i,uuid:f,refUrl:h,platform:2,web:0,_platform:57};o.default.requestManager.sendRequest({url:"https://log.mogujie.com/unionlog.php",method:"GET",data:{cpcparam:JSON.stringify(v)},complete:function(e){},success:function(e){s({result:"success",response:e})},error:function(e){u(new Error("计费打点请求失败!!!"),{_author:"changsheng",threshold:"1"}),s({result:"error",errorMessage:e.message})}})})}; 
 			}); 
		define("common/utils/dataProtect/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./utils/trim")),r=e(require("./utils/type")),a=new RegExp("\\[([0-9]+)\\]","gi"),n=new RegExp("\\[('|\\\"|)([a-zA-Z0-9-]+)('|\\\"|)\\]","gi"),c=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("string"!=typeof r||0===r.length)return e;a.test(r)&&(r=r.replace(a,".{{$1}}")),n.test(r)&&(r=r.replace(n,".$2"));var c=/\{\{([0-9]+)\}\}/gi;return r.split(".").reduce(function(e,r,a,n){if(e)return"string"==typeof r&&(r=(0,t.default)(r)),c.test(r)&&(r=Number(r.replace(c,"$1"))),""===r?e:e[r]},e)},s={zero:0,null:null,undefined:void 0,emptyString:"",emptyArray:[],emptyObject:{}},i=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==(0,r.default)(e)&&"array"!==(0,r.default)(e))return e;if("string"!=typeof a||0===a.length)return e;var i=(0,t.default)(a).split(/[ ]+/),u=Object.assign({},s,n),l=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((a+=1)>=i.length)return r;var s=i[a];switch(s){case"&&":return r&&t(r,a);case"||":return r||t(r,a);case"==":case"===":case"!=":case"!==":case">":case">=":case"<":case"<=":var u=t(r,a,!0);switch(s){case"==":r=r==u;break;case"===":r=r===u;break;case"!=":r=r!=u;break;case"!==":r=r!==u;break;case">":r=r>u;break;case">=":r=r>=u;break;case"<":r=r<u;break;case"<=":r=r<=u}return t(r,a+1);default:var l=/^(!+)(.*)/,f=null;if(l.test(s)&&(f=s.replace(l,"$1"),s=s.replace(l,"$2")),r=c(e,s),f)switch(f){case"!":r=!r;break;case"!!":r=!!r}}return n?r:t(r,a)}(),f=(0,r.default)(l);if(l)switch(f){case"array":l=0===l.length?u.emptyArray:l;break;case"object":l=0===Object.keys(l).length?u.emptyObject:l}else switch(f){case"null":l=u.null;break;case"undefined":l=u.undefined;break;case"number":l=u.zero;break;case"string":l=u.emptyString}return l},u={get:i,set:function(){},check:function(e,t,r){return!!i(e,t,r)}};exports.default=u; 
 			}); 
		define("common/utils/dataProtect/utils/trim.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")}; 
 			}); 
		define("common/utils/dataProtect/utils/type.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};exports.default=function(t){return"object"===(void 0===t?"undefined":o(t))||"function"==typeof t?e[toString.call(t)]||"object":void 0===t?"undefined":o(t)}; 
 			}); 
		define("common/utils/debug.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("../lib")([8],[],[6]); 
 			}); 
		define("common/utils/encrypt/aes.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e,n){return r.AES.encrypt(n,t,{iv:e,mode:r.mode.CBC,padding:r.pad.ZeroPadding}).toString()}function e(t,e,n){return r.AES.decrypt(n,t,{iv:e,mode:r.mode.CBC,padding:r.pad.ZeroPadding}).toString(r.enc.Utf8)}var r=r||function(t,e){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;i<t;i++)e[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<t;i+=4)e[n+i>>>2]=r[i>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;n<e;n+=4)r.push(4294967296*t.random()|0);return new s.init(r,e)}}),c=r.enc={},a=c.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++){var i=e[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new s.init(r,e/2)}},f=c.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new s.init(r,e)}},u=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},h=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,c=i/(4*o);if(e=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*o,i=t.min(4*e,i),e){for(var a=0;a<e;a+=o)this._doProcessBlock(n,a);a=n.splice(0,e),r.sigBytes-=i}return new s.init(a,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new p.HMAC.init(t,r).finalize(e)}}});var p=r.algo={};return r}(Math);!function(){var t=r,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;i<r;i+=3)for(var o=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<r;s++)t.push(n.charAt(o>>>6*(3-s)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,n=this._map;(i=n.charAt(64))&&-1!=(i=t.indexOf(i))&&(r=i);for(var i=[],o=0,s=0;s<r;s++)if(s%4){var c=n.indexOf(t.charAt(s-1))<<s%4*2,a=n.indexOf(t.charAt(s))>>>6-s%4*2;i[o>>>2]|=(c|a)<<24-o%4*8,o++}return e.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,r,n,i,o,s){return((t=t+(e&r|~e&n)+i+s)<<o|t>>>32-o)+e}function n(t,e,r,n,i,o,s){return((t=t+(e&n|r&~n)+i+s)<<o|t>>>32-o)+e}function i(t,e,r,n,i,o,s){return((t=t+(e^r^n)+i+s)<<o|t>>>32-o)+e}function o(t,e,r,n,i,o,s){return((t=t+(r^(e|~n))+i+s)<<o|t>>>32-o)+e}for(var s=r,c=(f=s.lib).WordArray,a=f.Hasher,f=s.algo,u=[],h=0;64>h;h++)u[h]=4294967296*t.abs(t.sin(h+1))|0;f=f.MD5=a.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(s=0;16>s;s++){a=t[c=r+s];t[c]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var s=this._hash.words,c=t[r+0],a=t[r+1],f=t[r+2],h=t[r+3],p=t[r+4],d=t[r+5],l=t[r+6],y=t[r+7],g=t[r+8],_=t[r+9],v=t[r+10],B=t[r+11],m=t[r+12],k=t[r+13],x=t[r+14],S=t[r+15],w=s[0],z=s[1],C=s[2],D=s[3],z=o(z=o(z=o(z=o(z=i(z=i(z=i(z=i(z=n(z=n(z=n(z=n(z=e(z=e(z=e(z=e(z,C=e(C,D=e(D,w=e(w,z,C,D,c,7,u[0]),z,C,a,12,u[1]),w,z,f,17,u[2]),D,w,h,22,u[3]),C=e(C,D=e(D,w=e(w,z,C,D,p,7,u[4]),z,C,d,12,u[5]),w,z,l,17,u[6]),D,w,y,22,u[7]),C=e(C,D=e(D,w=e(w,z,C,D,g,7,u[8]),z,C,_,12,u[9]),w,z,v,17,u[10]),D,w,B,22,u[11]),C=e(C,D=e(D,w=e(w,z,C,D,m,7,u[12]),z,C,k,12,u[13]),w,z,x,17,u[14]),D,w,S,22,u[15]),C=n(C,D=n(D,w=n(w,z,C,D,a,5,u[16]),z,C,l,9,u[17]),w,z,B,14,u[18]),D,w,c,20,u[19]),C=n(C,D=n(D,w=n(w,z,C,D,d,5,u[20]),z,C,v,9,u[21]),w,z,S,14,u[22]),D,w,p,20,u[23]),C=n(C,D=n(D,w=n(w,z,C,D,_,5,u[24]),z,C,x,9,u[25]),w,z,h,14,u[26]),D,w,g,20,u[27]),C=n(C,D=n(D,w=n(w,z,C,D,k,5,u[28]),z,C,f,9,u[29]),w,z,y,14,u[30]),D,w,m,20,u[31]),C=i(C,D=i(D,w=i(w,z,C,D,d,4,u[32]),z,C,g,11,u[33]),w,z,B,16,u[34]),D,w,x,23,u[35]),C=i(C,D=i(D,w=i(w,z,C,D,a,4,u[36]),z,C,p,11,u[37]),w,z,y,16,u[38]),D,w,v,23,u[39]),C=i(C,D=i(D,w=i(w,z,C,D,k,4,u[40]),z,C,c,11,u[41]),w,z,h,16,u[42]),D,w,l,23,u[43]),C=i(C,D=i(D,w=i(w,z,C,D,_,4,u[44]),z,C,m,11,u[45]),w,z,S,16,u[46]),D,w,f,23,u[47]),C=o(C,D=o(D,w=o(w,z,C,D,c,6,u[48]),z,C,y,10,u[49]),w,z,x,15,u[50]),D,w,d,21,u[51]),C=o(C,D=o(D,w=o(w,z,C,D,m,6,u[52]),z,C,h,10,u[53]),w,z,v,15,u[54]),D,w,a,21,u[55]),C=o(C,D=o(D,w=o(w,z,C,D,g,6,u[56]),z,C,S,10,u[57]),w,z,l,15,u[58]),D,w,k,21,u[59]),C=o(C,D=o(D,w=o(w,z,C,D,p,6,u[60]),z,C,B,10,u[61]),w,z,f,15,u[62]),D,w,_,21,u[63]);s[0]=s[0]+w|0,s[1]=s[1]+z|0,s[2]=s[2]+C|0,s[3]=s[3]+D|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(r.length+1),this._process(),r=(e=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(f),s.HmacMD5=a._createHmacHelper(f)}(Math),function(){var t=r,e=t.lib,n=e.Base,i=e.WordArray,o=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=(c=this.cfg).hasher.create(),n=i.create(),o=n.words,s=c.keySize,c=c.iterations;o.length<s;){a&&r.update(a);var a=r.update(t).finalize(e);r.reset();for(var f=1;f<c;f++)a=r.finalize(a),r.reset();n.concat(a)}return n.sigBytes=4*s,n}});t.EvpKDF=function(t,e,r){return o.create(r).compute(t,e)}}(),r.lib.Cipher||function(t){var e=(l=r).lib,n=e.Base,i=e.WordArray,o=e.BufferedBlockAlgorithm,s=l.enc.Base64,c=l.algo.EvpKDF,a=e.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,r,n){return("string"==typeof r?y:d).encrypt(t,e,r,n)},decrypt:function(e,r,n){return("string"==typeof r?y:d).decrypt(t,e,r,n)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=l.mode={},u=function(t,e,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)t[e+i]^=n[i]},h=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();h.Encryptor=h.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize;u.call(this,t,e,n),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),h.Decryptor=h.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=t.slice(e,e+n);r.decryptBlock(t,e),u.call(this,t,e,n),this._prevBlock=i}}),f=f.CBC=h,h=(l.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=(r=r-t.sigBytes%r)<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(n);r=i.create(o,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:f,padding:h}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var p=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(l.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){var e=(t=s.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:r})}},d=e.SerializableCipher=n.extend({cfg:n.extend({format:f}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n);return e=i.finalize(e),i=i.cfg,p.create({ciphertext:e,key:r,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),l=(l.kdf={}).OpenSSL={execute:function(t,e,r,n){return n||(n=i.random(8)),t=c.create({keySize:e+r}).compute(t,n),r=i.create(t.words.slice(e),4*r),t.sigBytes=4*e,p.create({key:t,iv:r,salt:n})}},y=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:l}),encrypt:function(t,e,r,n){return n=this.cfg.extend(n),r=n.kdf.execute(r,t.keySize,t.ivSize),n.iv=r.iv,(t=d.encrypt.call(this,t,e,r.key,n)).mixIn(r),t},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),r=n.kdf.execute(r,t.keySize,t.ivSize,e.salt),n.iv=r.iv,d.decrypt.call(this,t,e,r.key,n)}})}(),function(){for(var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],o=[],s=[],c=[],a=[],f=[],u=[],h=[],p=[],d=[],l=[],y=0;256>y;y++)l[y]=128>y?y<<1:y<<1^283;for(var g=0,_=0,y=0;256>y;y++){var v=(v=_^_<<1^_<<2^_<<3^_<<4)>>>8^255&v^99;i[g]=v,o[v]=g;var B=l[g],m=l[B],k=l[m],x=257*l[v]^16843008*v;s[g]=x<<24|x>>>8,c[g]=x<<16|x>>>16,a[g]=x<<8|x>>>24,f[g]=x,x=16843009*k^65537*m^257*B^16843008*g,u[v]=x<<24|x>>>8,h[v]=x<<16|x>>>16,p[v]=x<<8|x>>>24,d[v]=x,g?(g=B^l[l[l[k^B]]],_^=l[l[_]]):g=_=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=e.extend({_doReset:function(){for(var t=(r=this._key).words,e=r.sigBytes/4,r=4*((this._nRounds=e+6)+1),n=this._keySchedule=[],o=0;o<r;o++)if(o<e)n[o]=t[o];else{var s=n[o-1];o%e?6<e&&4==o%e&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=S[o/e|0]<<24),n[o]=n[o-e]^s}for(t=this._invKeySchedule=[],e=0;e<r;e++)o=r-e,s=e%4?n[o]:n[o-4],t[e]=4>e||4>=o?s:u[i[s>>>24]]^h[i[s>>>16&255]]^p[i[s>>>8&255]]^d[i[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,c,a,f,i)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,u,h,p,d,o),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,c){for(var a=this._nRounds,f=t[e]^r[0],u=t[e+1]^r[1],h=t[e+2]^r[2],p=t[e+3]^r[3],d=4,l=1;l<a;l++)var y=n[f>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&p]^r[d++],g=n[u>>>24]^i[h>>>16&255]^o[p>>>8&255]^s[255&f]^r[d++],_=n[h>>>24]^i[p>>>16&255]^o[f>>>8&255]^s[255&u]^r[d++],p=n[p>>>24]^i[f>>>16&255]^o[u>>>8&255]^s[255&h]^r[d++],f=y,u=g,h=_;y=(c[f>>>24]<<24|c[u>>>16&255]<<16|c[h>>>8&255]<<8|c[255&p])^r[d++],g=(c[u>>>24]<<24|c[h>>>16&255]<<16|c[p>>>8&255]<<8|c[255&f])^r[d++],_=(c[h>>>24]<<24|c[p>>>16&255]<<16|c[f>>>8&255]<<8|c[255&u])^r[d++],p=(c[p>>>24]<<24|c[f>>>16&255]<<16|c[u>>>8&255]<<8|c[255&h])^r[d++],t[e]=y,t[e+1]=g,t[e+2]=_,t[e+3]=p},keySize:8});t.AES=e._createHelper(n)}(),r.mode.ECB=function(){var t=r.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),t.Decryptor=t.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),t}(),r.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){for(var e=t.words,r=t.sigBytes-1;!(e[r>>>2]>>>24-r%4*8&255);)r--;t.sigBytes=r+1}},module.exports={CryptoJS:r,getKey:function(t){var e=(r.MD5(t)+"").substr(0,16);return r.enc.Utf8.parse(e)},md5:function(t){return r.MD5(t)+""},encryptLocal:function(t,e){t=r.MD5(t.toUpperCase())+"";var n={_data_:e,_time_:(new Date).getTime()+6e5};return n=JSON.stringify(n),this.encrypt(t,n)},decryptLocal:function(t,e){t=r.MD5(t.toUpperCase())+"";var n=JSON.parse(this.decrypt(t,e)),i=(new Date).getTime();return n._time_>=i?n._data_:null},encrypt:function(e,r){var n,i;return n=i=this.getKey(e),t(n,i,r)},encryptData:function(e,r){var n,i;n=i=this.getKey(e);for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&(r[o]=t(n,i,r[o].toString()));return r},decrypt:function(t,r){var n,i;return n=i=this.getKey(t),e(n,i,r.replace(/\s+/g,""))},decryptData:function(t,r){var n,i;n=i=this.getKey(t);for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&(r[o]=e(n,i,r[o].toString()));return r}}; 
 			}); 
		define("common/utils/encrypt/rsa.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,r,i){null!=t&&("number"==typeof t?this.fromNumber(t,r,i):null==r&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,r))}function r(){return new t(null)}function i(t){return S.charAt(t)}function e(t,r){var i=A[t.charCodeAt(r)];return null==i?-1:i}function o(t){var i=r();return i.fromInt(t),i}function s(t){var r,i=1;return 0!=(r=t>>>16)&&(t=r,i+=16),0!=(r=t>>8)&&(t=r,i+=8),0!=(r=t>>4)&&(t=r,i+=4),0!=(r=t>>2)&&(t=r,i+=2),0!=(r=t>>1)&&(t=r,i+=1),i}function n(t){this.m=t}function h(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function a(){this.i=0,this.j=0,this.S=new Array}function u(){return new a}function f(){if(null==B){for(B=u();E<w;){var t=Math.floor(65536*Math.random());x[E++]=255&t}for(B.init(x),E=0;E<x.length;++E)x[E]=0;E=0}return B.next()}function p(){}function c(r,i){return new t(r,i)}function l(r,i){if(i<r.length+11)return console.error("Message too long for RSA"),null;for(var e=new Array,o=r.length-1;o>=0&&i>0;){var s=r.charCodeAt(o--);s<128?e[--i]=s:s>127&&s<2048?(e[--i]=63&s|128,e[--i]=s>>6|192):(e[--i]=63&s|128,e[--i]=s>>6&63|128,e[--i]=s>>12|224)}e[--i]=0;for(var n=new p,h=new Array;i>2;){for(h[0]=0;0==h[0];)n.nextBytes(h);e[--i]=h[0]}return e[--i]=2,e[--i]=0,new t(e)}function y(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function v(t){var r,i,e="";for(r=0;r+3<=t.length;r+=3)i=parseInt(t.substring(r,r+3),16),e+=M.charAt(i>>6)+M.charAt(63&i);for(r+1==t.length?(i=parseInt(t.substring(r,r+1),16),e+=M.charAt(i<<2)):r+2==t.length&&(i=parseInt(t.substring(r,r+2),16),e+=M.charAt(i>>2)+M.charAt((3&i)<<4));(3&e.length)>0;)e+=I;return e}var m,g={},d={};d.KJUR={};var D=d.KJUR;"Microsoft Internet Explorer"==g.appName?(t.prototype.am=function(t,r,i,e,o,s){for(var n=32767&r,h=r>>15;--s>=0;){var a=32767&this[t],u=this[t++]>>15,f=h*a+u*n;o=((a=n*a+((32767&f)<<15)+i[e]+(1073741823&o))>>>30)+(f>>>15)+h*u+(o>>>30),i[e++]=1073741823&a}return o},m=30):"Netscape"!=g.appName?(t.prototype.am=function(t,r,i,e,o,s){for(;--s>=0;){var n=r*this[t++]+i[e]+o;o=Math.floor(n/67108864),i[e++]=67108863&n}return o},m=26):(t.prototype.am=function(t,r,i,e,o,s){for(var n=16383&r,h=r>>14;--s>=0;){var a=16383&this[t],u=this[t++]>>14,f=h*a+u*n;o=((a=n*a+((16383&f)<<14)+i[e]+o)>>28)+(f>>14)+h*u,i[e++]=268435455&a}return o},m=28),t.prototype.DB=m,t.prototype.DM=(1<<m)-1,t.prototype.DV=1<<m;t.prototype.FV=Math.pow(2,52),t.prototype.F1=52-m,t.prototype.F2=2*m-52;var T,b,S="0123456789abcdefghijklmnopqrstuvwxyz",A=new Array;for(T="0".charCodeAt(0),b=0;b<=9;++b)A[T++]=b;for(T="a".charCodeAt(0),b=10;b<36;++b)A[T++]=b;for(T="A".charCodeAt(0),b=10;b<36;++b)A[T++]=b;n.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},n.prototype.revert=function(t){return t},n.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},n.prototype.mulTo=function(t,r,i){t.multiplyTo(r,i),this.reduce(i)},n.prototype.sqrTo=function(t,r){t.squareTo(r),this.reduce(r)},h.prototype.convert=function(i){var e=r();return i.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),i.s<0&&e.compareTo(t.ZERO)>0&&this.m.subTo(e,e),e},h.prototype.revert=function(t){var i=r();return t.copyTo(i),this.reduce(i),i},h.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var r=0;r<this.m.t;++r){var i=32767&t[r],e=i*this.mpl+((i*this.mph+(t[r]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=r+this.m.t]+=this.m.am(0,e,t,r,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},h.prototype.mulTo=function(t,r,i){t.multiplyTo(r,i),this.reduce(i)},h.prototype.sqrTo=function(t,r){t.squareTo(r),this.reduce(r)},t.prototype.copyTo=function(t){for(var r=this.t-1;r>=0;--r)t[r]=this[r];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},t.prototype.fromString=function(r,i){var o;if(16==i)o=4;else if(8==i)o=3;else if(256==i)o=8;else if(2==i)o=1;else if(32==i)o=5;else{if(4!=i)return void this.fromRadix(r,i);o=2}this.t=0,this.s=0;for(var s=r.length,n=!1,h=0;--s>=0;){var a=8==o?255&r[s]:e(r,s);a<0?"-"==r.charAt(s)&&(n=!0):(n=!1,0==h?this[this.t++]=a:h+o>this.DB?(this[this.t-1]|=(a&(1<<this.DB-h)-1)<<h,this[this.t++]=a>>this.DB-h):this[this.t-1]|=a<<h,(h+=o)>=this.DB&&(h-=this.DB))}8==o&&0!=(128&r[0])&&(this.s=-1,h>0&&(this[this.t-1]|=(1<<this.DB-h)-1<<h)),this.clamp(),n&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,r){var i;for(i=this.t-1;i>=0;--i)r[i+t]=this[i];for(i=t-1;i>=0;--i)r[i]=0;r.t=this.t+t,r.s=this.s},t.prototype.drShiftTo=function(t,r){for(var i=t;i<this.t;++i)r[i-t]=this[i];r.t=Math.max(this.t-t,0),r.s=this.s},t.prototype.lShiftTo=function(t,r){var i,e=t%this.DB,o=this.DB-e,s=(1<<o)-1,n=Math.floor(t/this.DB),h=this.s<<e&this.DM;for(i=this.t-1;i>=0;--i)r[i+n+1]=this[i]>>o|h,h=(this[i]&s)<<e;for(i=n-1;i>=0;--i)r[i]=0;r[n]=h,r.t=this.t+n+1,r.s=this.s,r.clamp()},t.prototype.rShiftTo=function(t,r){r.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)r.t=0;else{var e=t%this.DB,o=this.DB-e,s=(1<<e)-1;r[0]=this[i]>>e;for(var n=i+1;n<this.t;++n)r[n-i-1]|=(this[n]&s)<<o,r[n-i]=this[n]>>e;e>0&&(r[this.t-i-1]|=(this.s&s)<<o),r.t=this.t-i,r.clamp()}},t.prototype.subTo=function(t,r){for(var i=0,e=0,o=Math.min(t.t,this.t);i<o;)e+=this[i]-t[i],r[i++]=e&this.DM,e>>=this.DB;if(t.t<this.t){for(e-=t.s;i<this.t;)e+=this[i],r[i++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;i<t.t;)e-=t[i],r[i++]=e&this.DM,e>>=this.DB;e-=t.s}r.s=e<0?-1:0,e<-1?r[i++]=this.DV+e:e>0&&(r[i++]=e),r.t=i,r.clamp()},t.prototype.multiplyTo=function(r,i){var e=this.abs(),o=r.abs(),s=e.t;for(i.t=s+o.t;--s>=0;)i[s]=0;for(s=0;s<o.t;++s)i[s+e.t]=e.am(0,o[s],i,s,0,e.t);i.s=0,i.clamp(),this.s!=r.s&&t.ZERO.subTo(i,i)},t.prototype.squareTo=function(t){for(var r=this.abs(),i=t.t=2*r.t;--i>=0;)t[i]=0;for(i=0;i<r.t-1;++i){var e=r.am(i,r[i],t,2*i,0,1);(t[i+r.t]+=r.am(i+1,2*r[i],t,2*i+1,e,r.t-i-1))>=r.DV&&(t[i+r.t]-=r.DV,t[i+r.t+1]=1)}t.t>0&&(t[t.t-1]+=r.am(i,r[i],t,2*i,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(i,e,o){var n=i.abs();if(!(n.t<=0)){var h=this.abs();if(h.t<n.t)return null!=e&&e.fromInt(0),void(null!=o&&this.copyTo(o));null==o&&(o=r());var a=r(),u=this.s,f=i.s,p=this.DB-s(n[n.t-1]);p>0?(n.lShiftTo(p,a),h.lShiftTo(p,o)):(n.copyTo(a),h.copyTo(o));var c=a.t,l=a[c-1];if(0!=l){var y=l*(1<<this.F1)+(c>1?a[c-2]>>this.F2:0),v=this.FV/y,m=(1<<this.F1)/y,g=1<<this.F2,d=o.t,D=d-c,T=null==e?r():e;for(a.dlShiftTo(D,T),o.compareTo(T)>=0&&(o[o.t++]=1,o.subTo(T,o)),t.ONE.dlShiftTo(c,T),T.subTo(a,a);a.t<c;)a[a.t++]=0;for(;--D>=0;){var b=o[--d]==l?this.DM:Math.floor(o[d]*v+(o[d-1]+g)*m);if((o[d]+=a.am(0,b,o,D,0,c))<b)for(a.dlShiftTo(D,T),o.subTo(T,o);o[d]<--b;)o.subTo(T,o)}null!=e&&(o.drShiftTo(c,e),u!=f&&t.ZERO.subTo(e,e)),o.t=c,o.clamp(),p>0&&o.rShiftTo(p,o),u<0&&t.ZERO.subTo(o,o)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var r=3&t;return r=r*(2-(15&t)*r)&15,r=r*(2-(255&t)*r)&255,r=r*(2-((65535&t)*r&65535))&65535,(r=r*(2-t*r%this.DV)%this.DV)>0?this.DV-r:-r},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(i,e){if(i>4294967295||i<1)return t.ONE;var o=r(),n=r(),h=e.convert(this),a=s(i)-1;for(h.copyTo(o);--a>=0;)if(e.sqrTo(o,n),(i&1<<a)>0)e.mulTo(n,h,o);else{var u=o;o=n,n=u}return e.revert(o)},t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var r;if(16==t)r=4;else if(8==t)r=3;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return this.toRadix(t);r=2}var e,o=(1<<r)-1,s=!1,n="",h=this.t,a=this.DB-h*this.DB%r;if(h-- >0)for(a<this.DB&&(e=this[h]>>a)>0&&(s=!0,n=i(e));h>=0;)a<r?(e=(this[h]&(1<<a)-1)<<r-a,e|=this[--h]>>(a+=this.DB-r)):(e=this[h]>>(a-=r)&o,a<=0&&(a+=this.DB,--h)),e>0&&(s=!0),s&&(n+=i(e));return s?n:"0"},t.prototype.negate=function(){var i=r();return t.ZERO.subTo(this,i),i},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var r=this.s-t.s;if(0!=r)return r;var i=this.t;if(0!=(r=i-t.t))return this.s<0?-r:r;for(;--i>=0;)if(0!=(r=this[i]-t[i]))return r;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+s(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(i){var e=r();return this.abs().divRemTo(i,null,e),this.s<0&&e.compareTo(t.ZERO)>0&&i.subTo(e,e),e},t.prototype.modPowInt=function(t,r){var i;return i=t<256||r.isEven()?new n(r):new h(r),this.exp(t,i)},t.ZERO=o(0),t.ONE=o(1),a.prototype.init=function(t){var r,i,e;for(r=0;r<256;++r)this.S[r]=r;for(i=0,r=0;r<256;++r)i=i+this.S[r]+t[r%t.length]&255,e=this.S[r],this.S[r]=this.S[i],this.S[i]=e;this.i=0,this.j=0},a.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var B,w=256,x=new Array,E=0;p.prototype.nextBytes=function(t){var r;for(r=0;r<t.length;++r)t[r]=f()},y.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},y.prototype.encrypt=function(t){var r=l(t,this.n.bitLength()+7>>3);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var e=i.toString(16);return 0==(1&e.length)?e:"0"+e};var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I="=";void 0!==D.asn1&&D.asn1||(D.asn1={}),D.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var r=t.toString(16);return r.length%2==1&&(r="0"+r),r},this.bigIntToMinTwosComplementsHex=function(r){var i=r.toString(16);if("-"!=i.substr(0,1))i.length%2==1?i="0"+i:i.match(/^[0-7]/)||(i="00"+i);else{var e=i.substr(1).length;e%2==1?e+=1:i.match(/^[0-7]/)||(e+=2);for(var o="",s=0;s<e;s++)o+="f";i=new t(o,16).xor(r).add(t.ONE).toString(16).replace(/^-/,"")}return i},this.getPEMStringFromHex=function(t,r){var i=CryptoJS.enc.Hex.parse(t),e=CryptoJS.enc.Base64.stringify(i).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,""),"-----BEGIN "+r+"-----\r\n"+e+"\r\n-----END "+r+"-----\r\n"}},function(t){var r,i={};i.decode=function(i){var e;if(r===t){var o="= \f\n\r\t \u2028\u2029";for(r=[],e=0;e<64;++e)r["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(e=0;e<o.length;++e)r[o.charAt(e)]=-1}var s=[],n=0,h=0;for(e=0;e<i.length;++e){var a=i.charAt(e);if("="==a)break;if(-1!=(a=r[a])){if(a===t)throw"Illegal character at offset "+e;n|=a,++h>=4?(s[s.length]=n>>16,s[s.length]=n>>8&255,s[s.length]=255&n,n=0,h=0):n<<=6}}switch(h){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:s[s.length]=n>>10;break;case 3:s[s.length]=n>>16,s[s.length]=n>>8&255}return s},i.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,i.unarmor=function(t){var r=i.re.exec(t);if(r)if(r[1])t=r[1];else{if(!r[2])throw"RegExp out of sync";t=r[2]}return i.decode(t)},d.Base64=i}(),function(t){function r(t,i){t instanceof r?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=i)}function i(t,r,i,e,o){this.stream=t,this.header=r,this.length=i,this.tag=e,this.sub=o}r.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t]},r.prototype.hexDigits="0123456789ABCDEF",r.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},r.prototype.hexDump=function(t,r,i){for(var e="",o=t;o<r;++o)if(e+=this.hexByte(this.get(o)),!0!==i)switch(15&o){case 7:e+="  ";break;case 15:e+="\n";break;default:e+=" "}return e},r.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,i.prototype.reSeemsASCII=/^[ -~]+$/,i.prototype.posStart=function(){return this.stream.pos},i.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},i.prototype.toHexString=function(t){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},i.decodeLength=function(t){var r=t.get(),i=127&r;if(i==r)return i;if(i>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0===i)return-1;r=0;for(var e=0;e<i;++e)r=r<<8|t.get();return r},i.hasContent=function(t,e,o){if(32&t)return!0;if(t<3||t>4)return!1;var s=new r(o);if(3==t&&s.get(),s.get()>>6&1)return!1;try{var n=i.decodeLength(s);return s.pos-o.pos+n==e}catch(t){return!1}},i.decode=function(t){t instanceof r||(t=new r(t,0));var e=new r(t),o=t.get(),s=i.decodeLength(t),n=t.pos-e.pos,h=null;if(i.hasContent(o,s,t)){var a=t.pos;if(3==o&&t.get(),h=[],s>=0){for(var u=a+s;t.pos<u;)h[h.length]=i.decode(t);if(t.pos!=u)throw"Content size is not correct for container starting at offset "+a}else try{for(;;){var f=i.decode(t);if(0===f.tag)break;h[h.length]=f}s=a-t.pos}catch(t){throw"Exception while decoding undefined length content: "+t}}else t.pos+=s;return new i(e,n,s,o,h)},d.ASN1=i}();var R=d.ASN1;R.prototype.getHexStringValue=function(){var t=this.toHexString(),r=2*this.header,i=2*this.length;return t.substr(r,i)},y.prototype.parseKey=function(t){try{var r=0,i=0,e=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?d.Hex.decode(t):d.Base64.unarmor(t),o=R.decode(e);if(2!==o.sub.length)return!1;var s=o.sub[1].sub[0];return r=s.sub[0].getHexStringValue(),this.n=c(r,16),i=s.sub[1].getHexStringValue(),this.e=parseInt(i,16),!0}catch(t){return!1}};var C=function(t){y.call(this),t&&"string"==typeof t&&this.parseKey(t)};(C.prototype=new y).constructor=C;var N=function(t){t=t||{},this.default_key_size=parseInt(t.default_key_size)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null};N.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new C(t)},N.prototype.encrypt=function(t,r){var i=r||"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQClvdUhP6EMMXJw3iApoGzqh7AS\rGTrkHLHGJYiK8dR5QDqK4NB2jH3+G3BEuMiasN3nKR5sEDZmH8MyqJEq0AyQl8wJ\rrR9nhACurJzPiCZgkjLiKK+X309m+tusI8f6VBieOwFIOKdExO/g6d5ClatLkIDk\rUed5G3KyupwMVAWJBQIDAQAB";this.setKey(i);try{return v(this.key.encrypt(t))}catch(t){return!1}},module.exports=new N; 
 			}); 
		define("common/utils/footprint.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(){return(new Date).toFormattedString("MM月dd日")}function t(){return c=[],r()}function r(){return new Promise(function(e,t){wx.setStorage({key:i,data:c,success:e,fail:t})})}function n(){if(c)return c;try{if(c=wx.getStorageSync(i),!Array.isArray(c))try{c=JSON.parse(c)}catch(e){c=[]}}catch(e){t()}return c}Object.defineProperty(exports,"__esModule",{value:!0});var i="footprint.list",a=function(e){return e&&e.__esModule?e:{default:e}}(require("../../common/m")).default.fn.pick,d=["tag","page","itemId","activityId","title","img","nowPrice","oldPrice"],o=100,c=void 0;exports.default={read:n,clean:t,add:function(t){var i=n();if(t=a(t,d),Object.keys(t).length!==d.length)throw new TypeError("lack necessary parameter");t.date=e(),t.oldPrice.indexOf("undefined")>=0&&delete t.oldPrice;for(var c=i.length-1;c>=0;c--){var u=i[c];if(u.date===t.date&&u.itemId===t.itemId){i.splice(c,1);break}if(u.date<t.date)break}i.push(t),i.length>o&&i.shift(),r()}}; 
 			}); 
		define("common/utils/houston.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e){return e&&e.__esModule?e:{default:e}}(require("../m")),u=r.default.MWP,o=r.default.Promise,i="HoustonStoreKey",s="0",a=function(e,t){if(!Array.isArray(t))return null!=e&&Object.prototype.hasOwnProperty.call(e,t);for(var n=t.length,r=0;r<n;r++){var u=t[r];if(null==e||!Object.prototype.hasOwnProperty.call(e,u))return!1;e=e[u]}return!!n},c=function(e){return"function"==typeof e},l=function e(t,r){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(t===r)return 0!==t||1/t==1/r;if(null==t||null==r)return!1;if(t!==t&&r!==r)return!0;var i=void 0===t?"undefined":n(t),s=void 0===r?"undefined":n(r);if("function"!==i&&"object"!==i&&"object"!=s)return!1;var l=Object.prototype.toString.call(t);if(l!==Object.prototype.toString.call(r))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+t==""+r;case"[object Number]":return+t!=+t?+r!=+r:0==+t?1/+t==1/r:+t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object Symbol]":return Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(r)}var f="[object Array]"===l;if(!f){if("object"!=(void 0===t?"undefined":n(t))||"object"!=(void 0===r?"undefined":n(r)))return!1;var h=t.constructor,d=r.constructor;if(h!==d&&!(c(h)&&h instanceof h&&c(d)&&d instanceof d)&&"constructor"in t&&"constructor"in r)return!1}var p=u.length;for(o.length;p--;)if(u[p]===t&&o[p]===r)return!0;if(u.push(t),o.push(r),f){var v=t.length;if(v!==r.length)return!1;for(;v--;)if(!e(t[v],r[v],u,o))return!1}else{var y=Object.keys(t),g=Object.keys(r),k=y.length;if(k!==g.length)return!1;for(;k--;){var b=y[k];if(!a(r,b)||!e(t[b],r[b],u,o))return!1}}return u.pop(),o.pop(),!0},f=function(e,t){return l(e,t)},h=function(e,t){var n="[Houston] "+t+" Please make contact with @changsheng";r.default.fn.sendMsg(e,{_author:"changsheng",threshold:1,message:n}),console.error(n,e)},d=function(){function n(){e(this,n)}return t(n,null,[{key:"setUp",value:function(){u.on("mw-cmd-v",this.updateHandler.bind(this));var e=new v;return this._houstonConfig=e,this.update()}},{key:"getConfig",value:function(e){var t=e.groupName,n=e.key,r=e.defaultValue,u=e.listener;return this._houstonConfig.getValue({groupName:t,key:n,defaultValue:r,listener:u})}},{key:"updateHandler",value:function(e){var t=this;try{var n=JSON.parse(e).v,r=1e3*parseInt(10*Math.random());this._houstonConfig.version!==s?setTimeout(function(){t.update(n)},r):this.update(n)}catch(e){h(e,"MWP没有返回正确的version")}}},{key:"update",value:function(e){return this._houstonConfig.updateByVersion(e)}}]),n}(),p=function(){function n(){e(this,n),this._lock=!1,this._queue=[],this._lockedQueue=[]}return t(n,[{key:"synchronize",value:function(e,t){var n=this;return new o(function(r,u){t?n._lockedQueue.push({task:e,isNeedLocked:t,resolve:r,reject:u}):n._queue.push({task:e,isNeedLocked:t,resolve:r,reject:u}),n._dequeue()})}},{key:"_dequeue",value:function(){for(;this._lockedQueue.length>0&&!this._lock;){var e=this._lockedQueue.shift();this._lock=e.isNeedLocked,this._execute(e)}for(;this._queue.length>0&&!this._lock&&0===this._lockedQueue.length;){var t=this._queue.shift();this._lock=t.isNeedLocked,this._execute(t)}}},{key:"_execute",value:function(e){var t=this,n=e.task,r=e.resolve,u=(e.reject,e.isNeedLocked);n().then(r).then(function(){u&&(t._lock=!1),t._dequeue()}).catch(function(e){u&&(t._lock=!1),t._dequeue(),h(e,"Error occurred during task execute."),r()})}}]),n}(),v=function(){function n(){e(this,n);var t=wx.getStorageSync(i)||{};this.groups=t.groups||{},this.version=t.version||s,this.mutex=new p,this.listeners={},this.updateMwpHeader(this.version)}return t(n,[{key:"getValue",value:function(e){var t=this,n=e.groupName,r=e.key,u=e.defaultValue,i=e.listener;return n&&r?this.mutex.synchronize(function(){return new o(function(e,o){var s=t.getGroup(n),a=s&&s.data&&s.data[r]||u||null,c=t.listeners[n]||{},l=c[r]||[];l.push(i),c[r]=l,t.listeners[n]=c,e(a)})}):null}},{key:"getGroup",value:function(e){return e?this.groups[e]||{}:null}},{key:"deleteGroup",value:function(e){e&&delete this.groups[e]}},{key:"saveGroup",value:function(e){e&&e.name&&(this.groups[e.name]=e)}},{key:"getGroupsAndVersions",value:function(){var e={},t=this.groups;return Object.keys(t).forEach(function(n){e[n]=t[n].version}),e}},{key:"getGroupData",value:function(e){return this.getGroup(e).data||{}}},{key:"getListenerInKey",value:function(e,t){return(this.listeners[e]||{})[t]||[]}},{key:"updateByVersion",value:function(e){var t=this;return this.mutex.synchronize(function(){return new o(function(n,r){var u=t.version,o=t.getGroupsAndVersions(),i=(new Date).getTime();if(u===s||!t.lastRequestFailTime||i-t.lastRequestFailTime>6e4){if(!e||e!==u)return t.request(o,n,r);n(e)}else n(u)})},!0)}},{key:"request",value:function(e,t,n){var r=this;return u.request("mwp.HoustonCore.getConfig","1",{groups:e},{useHTTPS:!0}).then(u.filterResult).then(function(e){e.groups;var n=e.version;r.update(e),t(n)}).catch(function(e){r.lastRequestFailTime=(new Date).getTime(),h(e,"Error occurred during request mwp.HoustonCore.getConfig."),t(r.version)})}},{key:"update",value:function(e){var t=this,n=e.groups||{},r=e.version||s;this.updateMwpHeader(r),Object.keys(n).forEach(function(e){var r=n[e];r.name=e;var u=r.data,o=t.getGroupData(e);switch(r.action){case"MODIFY":Object.keys(u).forEach(function(n){var r=u[n],i=o[n];f(r,i)||t.getListenerInKey(e,n).forEach(function(e){e(r,i)})}),t.saveGroup(r);break;case"DELETE":Object.keys(o).forEach(function(n){var r=o[n];t.getListenerInKey(e,n).forEach(function(e){e(null,r)})}),t.deleteGroup(e)}}),this.version=r,this.synchronize()}},{key:"updateMwpHeader",value:function(e){u.defaultOptions.headers=u.defaultOptions.headers||{},u.defaultOptions.headers["mw-cmd-v"]=e||s}},{key:"synchronize",value:function(){wx.setStorage({key:i,data:{groups:this.groups,version:this.version},success:function(){}})}}]),n}();exports.default=d; 
 			}); 
		define("common/utils/imgUrlTool.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var x=wx.getSystemInfoSync(),e=x.pixelRatio;(!e||e<1)&&(e=1),e>2.5&&(e=2.5);var t={imgKeyArr:["80","100","160","180","200","240","280","300","320","360","400","440","480","520","540","560","600","640"],imgKeyMap:{80:{"1:1":"80x80","7:9":"80x103","3:4":"80x107","2:3":"80x120",999:"80x999"},100:{"1:1":"100x100","7:9":"100x129","3:4":"100x134","2:3":"100x150",999:"100x999"},160:{"1:1":"160x160","7:9":"160x206","3:4":"160x214","2:3":"160x240",999:"160x999"},180:{"1:1":"180x180","7:9":"180x232","3:4":"180x240","2:3":"180x270",999:"180x999"},200:{"1:1":"200x200","7:9":"200x258","3:4":"200x268","2:3":"200x300",999:"200x999"},240:{"1:1":"240x240","7:9":"240x308","3:4":"240x320","2:3":"240x360",999:"240x999"},280:{"1:1":"280x280","7:9":"280x360","3:4":"280x374","2:3":"280x420",999:"280x999"},300:{"1:1":"300x300","7:9":"300x386","3:4":"300x400","2:3":"300x450",999:"300x999"},320:{"1:1":"320x320","7:9":"320x412","3:4":"320x428","2:3":"320x480",999:"320x999"},360:{"1:1":"360x360","7:9":"360x463","3:4":"360x480","2:3":"360x540",999:"360x999"},400:{"1:1":"400x400","7:9":"400x515","3:4":"400x534","2:3":"400x600",999:"400x999"},440:{"1:1":"440x440","7:9":"440x566","3:4":"440x587","2:3":"440x660",999:"440x999"},480:{"1:1":"480x480","7:9":"480x618","3:4":"480x640","2:3":"480x720",999:"480x999"},520:{"1:1":"520x520","7:9":"520x670","3:4":"520x694","2:3":"520x780",999:"520x999"},540:{"1:1":"540x540","7:9":"540x695","3:4":"540x720","2:3":"540x810",999:"540x999"},560:{"1:1":"560x560","7:9":"560x720","3:4":"560x747","2:3":"560x840",999:"560x999"},600:{"1:1":"600x600","7:9":"600x772","3:4":"600x800","2:3":"600x900",999:"600x999"},640:{"1:1":"640x640","7:9":"640x824","3:4":"640x854","2:3":"640x960",999:"640x999"}},imgQuality:70,dprDefMaxWidth:640,dprDefRatio:"999",defCode:"999x999.v1c0",clientHeight:x.windowHeight,clientWidth:x.windowWidth,dpr:e,dprClentWidth:x.windowWidth*e||750,webpSupport:"android"==x.platform||"devtools"==x.platform,getDefSuffix:function(x){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getWidthSuffix(x,750,e)},getNoResizeSuffix:function(x){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.getCodeSuffix(x,this.defCode)},getWidthSuffix:function(x,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=this.defCode,r=e/750*this.clientWidth,d=i?this.dpr:1,f=parseInt(r)*d;return f&&f>0&&f<1950&&(f+=50,n=100*Math.ceil(f/100)+"x9999.v1c7E"),this.getCodeSuffix(x,n,t)},getGoodsRatioSuffix:function(x,e,t){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=e/750*this.clientWidth,d=this.defCode,f="",o=".v1cAC",h=n?this.dpr:1;switch(t){case"1:1":case"7:9":case"3:4":case"2:3":f=t;break;default:f=this.dprDefRatio,o=".v1c96"}var g=parseInt(r)*h;(!g||g<0||g>this.dprDefMaxWidth)&&(g=this.dprDefMaxWidth);var a=!0,p=!1,l=void 0;try{for(var s,u=this.imgKeyArr[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var v=s.value;if(g<=v||v==this.dprDefMaxWidth){d=this.imgKeyMap[v][f]+o;break}}}catch(x){p=!0,l=x}finally{try{!a&&u.return&&u.return()}finally{if(p)throw l}}return this.getCodeSuffix(x,d,i,"pngAdd")},getCodeSuffix:function(x,e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"def",n=x;if(!x||!e||"no"==e||x.indexOf(".webp")>0||x.indexOf(".gif")>0)return x;if(-1===x.indexOf("mogucdn"))return x;if(x.indexOf(".jpg")<0&&x.indexOf(".png")<0)return x;if(x.indexOf(".jpg")>0&&x.indexOf(".png")>0)return x;var r="",d=x.split(".");if("jpg"==d[d.length-1])r="jpg";else{if("png"!=d[d.length-1])return x;r="png"}e="_"+e;var f="."+this.imgQuality+".";if(x.indexOf(".png_")<0&&x.indexOf(".jpg_")<0&&x.indexOf("."+r)==x.length-4&&(x=x+e+f+r),this.webpSupport&&!1!==t){if(x.indexOf("."+r+"_")>0){var o=x.split(".");o[o.length-1]==r&&(o[o.length-1]="webp",x=o.join("."))}}else if("png"==r&&"pngAdd"!=i)return n;return x}};exports.default=t; 
 			}); 
		define("common/utils/lazyData.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.LazyData=void 0;var i=function(){function t(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(i,e,a){return e&&t(i.prototype,e),a&&t(i,a),i}}(),e=function(t){return t&&t.__esModule?t:{default:t}}(require("../m")).default.MCE,a=function(){function a(){t(this,a),this.i={},this.children=[],this.pids=[],this.isCdn=!1,this.index=1}return i(a,[{key:"init",value:function(t,i){this.pids=t.data&&t.data.pids||[],this.i=t,this.isCdn=!!i,this.getAllChildren(this.i),this._request()}},{key:"getAllChildren",value:function(t){var i=t.$children||[];this.children=this.children.concat(i);for(var e=0;e<i.length;e++)if(i[e]&&i[e].$children){var a=i[e]&&i[e].data&&i[e].data.pids||[];this.pids=this.pids.concat(a),this.getAllChildren(i[e])}}},{key:"reload",value:function(){this._request()}},{key:"_request",value:function(){var t=this,i=this,a=this.isCdn||!1;if(!(i&&i.pids&&i.pids.length>0))return i.i.$broadcast("__lazy-data__",i.pids,{},!1),void console.log("________"+this.i.name+"_lazyData请求失败：没有需要请求的资源位！");var n=i.pids.join(",");e.multiget({pids:n},!a).then(function(e){i.i.$broadcast("__lazy-data__",i.pids,e,!0),console.log("________"+t.i.name+"_lazyData_isCdn：",a),console.log("________"+t.i.name+"_lazyData请求成功：",e)}).catch(function(e){t.index++,t.index<=3?(t._request(),console.log("________"+t.i.name+"_lazyData请求失败：继续第"+t.index+"次请求！")):(i.i.$broadcast("__lazy-data__",i.pids,{},!1),console.log("________"+t.i.name+"_lazyData请求失败：",e))})}}]),a}(),n=new a;exports.default=n,exports.LazyData=a; 
 			}); 
		define("common/utils/makeup.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,_){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _=function(){function e(e,_){for(var n=0;n<_.length;n++){var t=_[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(_,n,t){return n&&e(_.prototype,n),t&&e(_,t),_}}(),n=function(e){return e&&e.__esModule?e:{default:e}}(require("../m")).default.MCE,t=function(){function t(_,n){e(this,t),this.i=_,this.pid=n,this.index=1,n?this._request():(this.i.$broadcast("__makeup_done__",n,{},!1),console.log("________makeup请求失败：pid不能为空！"))}return _(t,[{key:"reload",value:function(){this._request()}},{key:"_request",value:function(){var e=this,_=this.pid||"";_&&n.makeup({pid:_}).then(function(n){e.i.$broadcast("__makeup_done__",_,n,!0),console.log("________makeup请求"+_+"成功：",n)}).catch(function(n){e.index++,e.index<=3?(e._request(),console.log("________makeup请求失败：继续第"+e.index+"次请求！")):(e.i.$broadcast("__makeup_done__",_,{},!1),console.log("________makeup请求"+_+"失败：",n))})}}]),t}();exports.default=t; 
 			}); 
		define("common/utils/reminder.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=e(require("../m.js")),a=e(require("../service/user")),i=r.default.MWP,o=r.default.fn.sendMsg,s=function(){function e(n,r){t(this,e),this.$toast=n,this.$loading=r,this.syncReminderData()}return n(e,[{key:"addReminder",value:function(e){var t=this;return new r.default.Promise(function(n,r){t.$loading&&t.$loading.show(),i.request("mwp.ferrari.addFollow","1.0",{rushId:e,type:2,sourceType:5}).then(i.filterResult).then(function(r){t.$toast&&t.$toast.show("眼光很好哦看中这款！稍后留意微信通知哦~");var a=(new Date).getTime();t.renminderData[e]=a,t._saveReminderData(),t.$loading&&t.$loading.hide(),n({result:"success"})}).catch(function(e){t._handleError(e),t.$loading&&t.$loading.hide(),n({result:"error"})})})}},{key:"removeReminder",value:function(){}},{key:"isReminded",value:function(e){return!!this.renminderData[e]}},{key:"getReminderList",value:function(e){var t=this,n={};return e.forEach(function(e){n[e]=!!t.renminderData[e]}),n}},{key:"syncReminderData",value:function(){try{this.renminderData=wx.getStorageSync("Reminder")||{},this._resetReminderData()}catch(e){this._handleError(e)}}},{key:"_resetReminderData",value:function(){var e=(new Date).getTime(),t=this.renminderData,n=!0,r=!1,a=void 0;try{for(var i,o=Object.keys(t)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;e-t[s]>=1728e5&&this._removeReminderData(s)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}this._saveReminderData()}},{key:"_removeReminderData",value:function(e){delete this.renminderData[e]}},{key:"_saveReminderData",value:function(){wx.setStorage({key:"Reminder",data:this.renminderData,fail:function(e){o(e,{_author:"changsheng",threshold:1})}})}},{key:"_handleError",value:function(e){console.log(e),o(e,{_author:"changsheng",threshold:1}),a.default.showUserError(e)||this.$toast&&this.$toast.show(e.message)}}]),e}();exports.default=s; 
 			}); 
		define("components/activeEntry/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function t(t,i){var e=[],a=!0,n=!1,o=void 0;try{for(var r,d=t[Symbol.iterator]();!(a=(r=d.next()).done)&&(e.push(r.value),!i||e.length!==i);a=!0);}catch(t){n=!0,o=t}finally{try{!a&&d.return&&d.return()}finally{if(n)throw o}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},a=t(require("../../common/utils/imgUrlTool")),n=t(require("../../common/m")).default.MCE;exports.default={data:function(){return{$headingName:"heading_more",$headingTitle:"",$headingTitleIcon:"",$headingHeight:"50rpx",$headingBgColor:"none",$headingMargin:"0 0 20rpx 0",$headingPadding:0,$headingColor:"",$headingFontWeight:"normal",$headingFontSize:"28rpx",$headingMoreText:"更多",$headingMoreTextColor:"#999",$headingMoreLink:"",$headingWxaMoreLink:"",$headingAppId:"",$headingCanLaunch:!0,canLaunch:!0,list:[],isActive:!1,collectFormId:!0,formType:2,boxBgColor:"#fff",boxBgImage:"",boxHeight:"auto",boxMinHeight:"310rpx",boxPadding:"20rpx 0 0 0",boxMargin:"16rpx 0 0 0",justifyContent:"flex-start",listMargin:0,listPadding:"10rpx 0 0 0",itemWidth:"",itemHeight:"",itemPadding:0,itemMargin:"0 0 30rpx 16rpx",itemBoxShadow:"none",itemBorderRadius:0,itemBgColor:"",imageWidth:"120rpx",imageHeight:"120rpx",imageMargin:"0 auto",imageBorderRadius:0,titleIsShow:!0,titleWidth:"100%",titleHeight:"40rpx",titleTextAlign:"center",titleFontSize:"28rpx",titleFontWight:"normal",titleTop:"134rpx",titleLeft:0,descriptionIsShow:!1,descriptionWidth:"200rpx",descriptionHeight:"34rpx",descriptionTextAlign:"left",descriptionFontSize:"24rpx",descriptionTop:"58rpx",descriptionLeft:"24rpx",minCount:4,maxCount:100,ptpC:""}},onLoad:function(){this.lazyData(),this.makeup()},onReady:function(){},methods:{formSubmitHandler:function(t){var i=t.detail.formId,e=this.data.formType||2;console.log("________formId",i),console.log("________form场景",e),this.$root.$logForm(i,e)},cancelBubbleHandler:function(t){},init:function(t,i){var e=t&&t.pids||[];i=!!i,e&&e.length>0&&this.mce(e,i)},setActiveEntryData:function(t){this._formatData(t)},lazyData:function(){var t=this;this.$on("__lazy-data__",function(i,e,a){if(a&&t.data&&t.data.pids&&t.data.pids.length>0&&e){var n=t.data.pids[0],o=n&&e&&e[n]||{};t._formatData(o)}})},makeup:function(){var t=this;this.$on("__makeup_done__",function(i,e,a){if(a&&t.data&&t.data.makeupKey&&e&&e[t.data.makeupKey]){var n=e[t.data.makeupKey]||{};t._formatData(n)}})},mce:function(t,i){var e=this;if(t&&t.length>0){this.setData({list:[]});var a=t.join(","),o=t[0];n.multiget({pids:a},!i).then(function(t){var i=o&&t&&t[o]||{};e._formatData(i),console.log("________activeEntry请求（multiget）"+a+"成功：",t)}).catch(function(t){console.log("________activeEntry请求（multiget）"+a+"失败：",t)})}else console.log("________activeEntry请求（multiget）pids不能为空！")},mceGet:function(t,i){var e=this;t&&t.pid?(this.setData({list:[]}),n.get(t,!i).then(function(i){e._formatData(i||{}),console.log("________activeEntry请求（get）"+t.pid+"成功：",i)}).catch(function(i){console.log("________activeEntry请求（get）"+t.pid+"失败：",i)})):console.log("________activeEntry请求（get）pid不能为空！")},_formatData:function(t){var n=this.data.minCount,o=this.data.maxCount,r=t&&t.list||[],d=t&&t.info||{},g=[],l=[],h={},s=this.$root&&this.$root.$canLaunch&&this.$root.$canLaunch()||!1,u=function(){var t="",i="";if(1===arguments.length)t=arguments[0],i=arguments[0];else{if(!(arguments.length>=2))return;t=arguments[0],i=arguments[1]}void 0!==d[t]&&null!==d[t]&&""!==d[t]&&(h[i]=d[t])};if(d&&(u("title","$headingTitle"),u("titleColor","$headingColor"),u("titleIcon","$headingTitleIcon"),u("moreTitle","$headingMoreText"),u("moreLink","$headingMoreLink"),u("moreColor","$headingMoreTextColor"),u("wxaMoreLink","$headingWxaMoreLink"),u("wxaMoreAppId","$headingAppId"),u("boxBgColor"),d.boxBgImage&&(h.boxBgImage=a.default.getWidthSuffix(d.boxBgImage,750)),u("boxMargin"),u("boxPadding"),u("boxHeight"),u("boxMinHeight"),u("backgroundColor","boxBgColor"),d.backgroundImage&&(h.boxBgImage=a.default.getWidthSuffix(d.backgroundImage,750)),u("margin","boxMargin"),u("padding","boxPadding"),u("justifyContent"),u("listMargin"),u("listPadding"),u("itemWidth"),u("itemHeight"),u("itemPadding"),u("itemMargin"),u("itemBorderRadius"),u("itemBgColor"),u("imageWidth"),u("imageHeight"),u("imageMargin"),u("itemBorderRadius","imageBorderRadius"),u("titleIsShow"),u("titleWidth"),u("titleHeight"),u("titleTextAlign"),u("titleFontSize"),u("titleFontWight"),u("titleTop"),u("titleLeft"),u("descriptionIsShow"),u("descriptionWidth"),u("descriptionHeight"),u("descriptionTextAlign"),u("descriptionFontSize"),u("descriptionTop"),u("descriptionLeft"),u("minCount"),u("maxCount")),r&&r.length>=n){r=r.slice(0,o);var c=!0,_=!1,m=void 0;try{for(var f,p=r.entries()[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var x=i(f.value,2),v=x[0],$=x[1];g.push($.acm||""),l.push(v);var y=$.width||500;$.suffixImage=$.image?a.default.getWidthSuffix($.image,y):"",$.wxa_suffixImage=$.wxa_image?a.default.getWidthSuffix($.wxa_image,y):""}}catch(t){_=!0,m=t}finally{try{!c&&p.return&&p.return()}finally{if(_)throw m}}this.$root.$logE("0x00000000",{modName:"____"+this.data.ptpC+"____",acms:g,indexs:l}),this.setData(e({list:r},h,{canLaunch:s,$headingCanLaunch:s}))}}}}; 
 			}); 
		define("components/bottomNavBar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{bnbList:[],isShowBottomBar:!1}},methods:{initBottomNavBar:function(t){console.log(this.$root.query.hasBot),this.$root.query.hasBot&&this.setData({isShowBottomBar:!0}),this.lazyData(),this.makeup()},lazyData:function(){var t=this;this.$on("__lazy-data__",function(a,o,i){if(i&&o&&t.data&&t.data.pids&&t.data.pids.length>0){var s=o[t.data.pids[0]].list||[];t.transData(s)}})},makeup:function(){var t=this;this.$on("__makeup_done__",function(a,o,i){if(i&&o&&t.data&&t.data.makeupKey&&o[t.data.makeupKey]){var s=o[t.data.makeupKey].list||[];t.transData(s)}})},transData:function(t){var a="/"+this.$root.route||this.$root.__route__,o=void 0;t.map(function(t){o=t.link.split("?")[0],t.isActive=a.indexOf(o)>=0,console.log(o)}),this.setData({bnbList:t})}}}; 
 			}); 
		define("components/captcha/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../common/m.js")).default.MWP;exports.default={name:"captcha",data:function(){return{show:!1,imgUrl:"",loading:!0,showValidateResult:!1,validateResult:"失败",clickCount:[0,0,0,0],code:null}},methods:{init:function(){this.setData({show:!0}),this.refreshImg()},refreshImg:function(){var e=this;this.setData({loading:!0,showValidateResult:!1,clickCount:[0,0,0,0],code:null}),t.request("mwp.shieldcaptain.keyActionlet","1",{}).then(function(t){return t.data.code}).then(function(t){return e.setData({code:t}),e.downloadImg(t)}).then(function(t){e.setData({imgUrl:t,loading:!1})})},handleClick:function(t){if(!this.data.showValidateResult){var e=t.currentTarget.dataset.index,a=Array.prototype.slice.call(this.data.clickCount);a[e]++,this.setData({clickCount:a})}},handleRefresh:function(){this.data.showValidateResult||this.refreshImg()},validate:function(){var e=this;return new Promise(function(a,n){e.setData({loading:!0}),t.request("mwp.shieldcaptain.validateActionlet","1",{captkey:e.data.code,captcode:e.data.clickCount.join("_")}).then(function(t){return e.setData({loading:!1,showValidateResult:!0,validateResult:t.data.result?"成功":"失败"}),"SUCCESS"===t.ret?a({success:!0,msg:"验证通过",key:e.data.code,code:e.data.clickCount.join("_")}):(setTimeout(function(){e.refreshImg()},500),a({success:!1,msg:t.msg,key:e.data.code,code:e.data.clickCount.join("_")}))}).catch(function(t){return n(t)})})}},downloadImg:function(e){return new Promise(function(a,n){t.request("mwp.shieldcaptain.aPPCaptchaActionlet","1",{code:e}).then(function(t){a("data:image/jpg;base64,"+t.data.data)}).catch(function(t){n(t)})})}}; 
 			}); 
		define("components/cartComponent/components/coupon/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/m")).default.MWP;exports.default={data:function(){return{list:[],shopName:""}},onLoad:function(){},methods:{closeCoupon:function(){"normal"!=this.$parent.data.type?this.$parent.setData({openCoupon:!1}):this.setData({show:!1})},formSubmitHandler:function(t){var e=t.detail.formId;this.$root.$logForm(e,2),this.delegate(t.detail)},delegate:function(t){var e=t.target.dataset.type;"function"==typeof this[e]&&this[e](t)},getShopCoupon:function(e){var o=this,a=e.target.dataset.campid;a&&t.request("mwp.ford.getShopCoupon","1",{campId:a}).then(function(t){t&&t.data?(o.data.list.map(function(t){t.campId==a&&(t.isAlreadGet=!0)}),o.setData({list:o.data.list})):o.$parent.$toast.show(t.msg||"系统异常")})},couponTouch:function(t){console.log("touch")}}}; 
 			}); 
		define("components/cartComponent/components/crossShopDiscount/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},methods:{goWall:function(t){var e=t.currentTarget.dataset.page;this.$root.$navigate(e)}}}; 
 			}); 
		define("components/cartComponent/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(require("../../common/m")),o=t(require("../../common/utils/cache")),i=t(require("../../components/loading/index")),s=t(require("./components/coupon/index")),n=t(require("./components/crossShopDiscount/index")),r=t(require("../../components/empty/index")),c=t(require("../../components/toast/index")),u=t(require("../../common/utils/imgUrlTool")),d=t(require("../../components/mask/index")),m=t(require("../../common/service/url")),p=a.default.MWP;a.default.logger;exports.default={timer:0,delay:500,timestamp:0,tickParam:null,components:{loading:i.default,couponList:s.default,crossShopDiscount:n.default,empty:r.default,toast:c.default,mask:d.default},data:function(){return{isShow:!1,$mask:{isShow:null},hideEmptyButton:!1,shops:[],shopMap:{},skuMap:o.default.get("cart.listSkuMap")||{},allChecked:!1,allCheckedNumber:0,totalPrice:"￥0.00",$couponList:{},$bottomTag:[],showEmptyPage:!1,$empty:{},checkedItems:[],skuDeleteMap:{},openCoupon:null,tickMap:{},tickArr:[],cartLevelCoudan:{},shopCdMap:{},cartCoudanOrigin:{},shopCdMapOrigin:{},recommends:[],autoplay:!1,current:0,isRecommendChecked:!1,barBgColor:"#ffe6e8",showRecommend:null,marginBottom:"0"}},onHide:function(){this.setData({autoplay:!1})},onShow:function(){var t=o.default.get("tick.recommend");t&&"half"==this.data.type&&this.setData({autoplay:!t.isRecommendChecked})},methods:{cacheRecommend:function(){var t={tickParam:this.tickParam,isRecommendChecked:this.data.isRecommendChecked,current:this.data.current,recommends:this.data.recommends,barBgColor:this.data.barBgColor,showRecommend:this.data.showRecommend};o.default.put("tick.recommend",t)},showRecommend:function(){var t=o.default.get("tick.recommend");t?(this.setData({isRecommendChecked:t.isRecommendChecked||!1,recommends:t.recommends||[],current:t.current||0,barBgColor:t.barBgColor,showRecommend:t.showRecommend,autoplay:!t.isRecommendChecked}),this.tickParam=t.tickParam||null):(this.setData({autoplay:!1,isRecommendChecked:!1,recommends:[],current:0}),this.tickParam=null)},setMarginBottom:function(){var t=this.data.cartLevelCoudan,e=this.data.recommends,a=116;t.coudanStatus&&(a+=60),e&&e.length&&(a+=90),a=a?a+"rpx":0,this.setData({marginBottom:a})},hide:function(){this.setData({isShow:!1,openCoupon:null}),this.$mask.hide(),this.$parent.$emit("hide")},init:function(t){var e=this;console.log(o.default.get("cart.listSkuMap"));var a={sellerUserId:getApp().data.sellerUserId},i={marketType:getApp().data.marketType,sourceMarket:"weixin",filters:JSON.stringify(a)},s=[],n=this.getCutImage,r=this.data.shopMap,c=o.default.get("cart.listSkuMap")||{},u=this.data.skuDeleteMap,d=0,h=!1,l=wx.getSystemInfoSync(),g=this.fix2Price,k=o.default.get("cart.skuMap")||{};this.$loading.show(),this.timer=0,k&&Object.keys(k).forEach(function(t){c[t]=!0}),this.setData({isShow:!0,type:t&&t.type||"half",winHeight:t&&"normal"==t.type?l.windowHeight:""}),t&&t.noMask?this.$mask.showWithoutAnimation({opacity:"0"}):this.$mask.show(),this.$on("hideDialog",function(){e.hide()}),p.request("mwp.CartWeb.cartList","1",i).then(function(a){var i=a.data||{},p=[],l=0,k=0;if(a.data&&i.shopGroup&&i.shopGroup.length){i.shopGroup.map(function(t){var a={},o=0,i=0,m=0;if(a.shopInfo={shopName:t.shopInfo&&t.shopInfo.shopName||"",sellerUserIdEsc:t.shopInfo&&t.shopInfo.sellerUserIdEsc||"",shopIdEsc:t.shopInfo&&t.shopInfo.shopIdEsc||""},a.cartItemGroup=[],a.groupTypeEnum=t.groupTypeEnum||"",a.promotionRelatedTagList=t.promotionRelatedTagList||[],a.shopRelatedTagList=e.shopTagImage(t.shopRelatedTagList||[]),a.deleted=!1,a.normalGroup="FUTURESALE"!=t.groupTypeEnum&&"INVALID"!=t.groupTypeEnum&&"PRESALE"!=t.groupTypeEnum,t.cartItemGroup&&t.cartItemGroup.length){t.cartItemGroup.map(function(e){var r={},d="";r.number=e.number||1,r.ptp=e.ptp||"",r.remindRelatedTagList=e.remindRelatedTagList||[],r.skuImageBottomTagList=e.skuImageBottomTagList||[],r.extensions=e.extensions||{},r.sku={},e.titleRelatedTagList&&e.titleRelatedTagList.length&&e.titleRelatedTagList.map(function(t){d+=t.text}),r.remindRelatedTagList.length&&r.remindRelatedTagList.forEach(function(t){"SKU_REDUCED_PRICE_REMIND_TAG"==t.tagNodeEnum?t.tagClass="ui-skuTag ui-skuTag-border":2==t.type?t.tagClass="ui-skuTag ui-skuTag-img":t.tagClass="ui-skuTag",t.tagStyle="background: "+(t.image?"url("+t.image+") no-repeat":t.bgColor||"#fff")+";color: "+t.textColor}),r.skuImageBottomTagList.length&&r.skuImageBottomTagList.forEach(function(t){t.tagStyle="background: "+(t.extra&&t.extra.image?"url("+t.extra.image+") no-repeat":"#fff")+"; color: "+t.textColor}),e.sku?r.sku={inValid:e.sku.inValid,imgHttps:n(e.sku.imgHttps),title:e.sku.title||"",stockIdEsc:e.sku.stockIdEsc||"",skuAttributes:e.sku.skuAttributes||[],stock:e.sku.stock,nowprice:e.sku.nowprice||0,price:e.sku.price||0,reason:e.sku.reason||"",itemIdEsc:e.sku.itemIdEsc||"",tuanType:e.sku.tuanType||""}:r.sku={},r.priceTagList=e.skuPriceRelatedTagList,r.isPintuan=r.sku.tuanType,r.inStock=r.sku.stock>=r.number,r.skuTitleTag=d,r.price=g(e.sku.price),r.nowprice=g(e.sku.nowprice),r.hideInput=!r.inStock||r.sku.inValid&&("FUTURESALE"==t.groupTypeEnum||"PRESALE"==t.groupTypeEnum||"INVALID"==t.groupTypeEnum),r.hideInput&&o++,u[r.sku.stockIdEsc]&&(u[r.sku.stockIdEsc]=!u[r.sku.stockIdEsc],c[r.sku.stockIdEsc]&&(c[r.sku.stockIdEsc]=!1)),c[r.sku.stockIdEsc]&&!r.sku.inValid&&(i++,l++),u[r.sku.stockIdEsc]||r.sku.inValid||m++,s.push(r.sku.itemIdEsc),a.cartItemGroup.push(r)}),r[t.shopInfo&&t.shopInfo.shopIdEsc]=i==m&&0!=i,r[t.shopInfo&&t.shopInfo.shopIdEsc]&&!t.deleted&&k++,o==m&&(a.outStock=!0),a.hideShopInput="FUTURESALE"==t.groupTypeEnum||"PRESALE"==t.groupTypeEnum||"INVALID"==t.groupTypeEnum||a.outStock,a.noHref="FUTURESALE"==t.groupTypeEnum||"PRESALE"==t.groupTypeEnum||"INVALID"==t.groupTypeEnum}p.push(a),"INVALID"===t.groupTypeEnum||"FUTURESALE"==t.groupTypeEnum||"PRESALE"==t.groupTypeEnum||t.deleted||d++}),k==d&&0!=k&&(h=!0);var f=null,I=!1;"蘑菇街女装"===o.default.get("appName")&&(I=!0),i.globalExtInfoDTO&&i.globalExtInfoDTO.crossShopDiscountBannerDTO&&(f=i.globalExtInfoDTO.crossShopDiscountBannerDTO),e.$crossShopDiscount.setData({crossShopDiscountBanner:f,showCrossShopDiscountBanner:I}),e.setData({showEmptyPage:!1,allChecked:h,shops:p,skuMap:c,shopMap:r,skuDeleteMap:u}),e.showRecommend(),e.coudanCallback(i,[],!0)}else{var E=e,C=e.data.hideEmptyButton;e.$empty.setData({type:11,text:"购物车还是空的哦~",button:C?null:"去逛逛",tip:null,callback:function(){E.$root.$navigate(m.default.home())}}),e.setData({showEmptyPage:!0})}o.default.put("cart.listSkuMap",c),e.calculation(0==l),s=s.join(",")||"",t&&t.callback&&"function"==typeof t.callback&&t.callback(s),e.$loading.hide()}).catch(function(t){e.$loading.hide(),e.$toast.show("购物车开小差了哦，请稍后再试"),console.error(t)})},getCutImage:function(t){return u.default.getWidthSuffix(t,160)},shopChange:function(t){var a,i=this,s=t.currentTarget.id,n=(this.data.shopMap,this.data.skuMap);this.data.shops.map(function(t){if(t.shopInfo.shopIdEsc==s){var e=i.data.shopMap[s];t.cartItemGroup.map(function(t){t.hideInput||(n[t.sku.stockIdEsc]=!e)})}}),this.calculation(),this.setData((a={},e(a,"shopMap."+s,!this.data.shopMap[s]),e(a,"skuMap",n),a)),o.default.put("cart.listSkuMap",n),this.ifAllChecked()},itemBoxChange:function(t){var a,i=t.currentTarget.id,s=t.currentTarget.dataset.shopId,n=0,r=this.data.skuMap[i],c=this.data.skuMap,u=this.data.shopMap;this.data.shops.map(function(t){if(t.shopInfo.shopIdEsc&&t.shopInfo.shopIdEsc==s){var e=0;t.cartItemGroup.map(function(t){t.sku&&t.sku.stockIdEsc==i&&(c[i]=!r),c[t.sku.stockIdEsc]&&n++,t.hideInput||e++}),u[s]=n==e}}),this.setData((a={},e(a,"shopMap."+s,u[s]),e(a,"skuMap",c),a)),o.default.put("cart.listSkuMap",c),this.calculation(),this.ifAllChecked()},ifAllChecked:function(){var t=this.data.shops,e=this.data.shopMap,a=t.filter(function(t){return!t.hideShopInput&&!t.deleted}),o=a.filter(function(t){return e[t.shopInfo.shopIdEsc]&&!t.deleted}),i=o.length==a.length&&0!=o.length;this.setData({allChecked:i})},addCart:function(t){var e=this,a=t.target.id,o=t.target.dataset.num,i=t.target.dataset.shopid||"",s=t.target.dataset.stock,n=this.data.skuMap,r=this.fix2Price;if(this.$root.$logE("016010000"),!(o>=s)){var c={number:++o,stockId:a,calcPrice:!0,marketType:getApp().data.marketType,sourceMarket:"weixin"};this.$loading.show(),p.request("mwp.CartWeb.modifyCart","1",c).then(function(t){t&&t.data&&e.data.shops.length?(e.data.shops.map(function(e){var s=0;e.shopInfo.shopIdEsc&&e.shopInfo.shopIdEsc==i&&e.cartItemGroup.map(function(i){if(i.sku&&i.sku.stockIdEsc==a){var n=t.data&&t.data.cartItemDTO||{};i.number=o,i.inStock=i.number<=i.sku.stock,n.sku&&(i.nowprice=n.sku&&r(n.sku.nowprice),i.isPintuan=n.sku&&n.sku.tuanType)}i.inStock||s++,i.hideInput=!i.inStock||i.sku.inValid&&("FUTURESALE"==e.groupTypeEnum||"PRESALE"==e.groupTypeEnum||"INVALID"==e.groupTypeEnum)}),s==e.cartItemGroup.length?e.outStock=!0:e.outStock=!1,e.hideShopInput="FUTURESALE"==e.groupTypeEnum||"PRESALE"==e.groupTypeEnum||"INVALID"==e.groupTypeEnum||e.outStock}),e.calculation(!n[a]),e.setData({shops:e.data.shops})):e.$toast.show(t.msg||t.message||"系统出错"),e.$loading.hide()}).catch(function(t){e.$loading.hide(),console.error(t)})}},minusCart:function(t){var e=this,a={},o=t.target.id,i=t.target.dataset.num,s=t.target.dataset.shopid||"",n=this.data.skuMap,r=this.fix2Price;if(this.$root.$logE("016010000"),!(i<=1)){var c={number:--i,stockId:o,calcPrice:!0,marketType:getApp().data.marketType,sourceMarket:"weixin"};this.$loading.show(),p.request("mwp.CartWeb.modifyCart","1",c).then(function(t){t&&t.data&&e.data.shops.length||"FAIL_BIZ_stock_not_enough"==t.ret?(e.data.shops.map(function(e){var a=0;e.shopInfo.shopIdEsc&&e.shopInfo.shopIdEsc==s&&e.cartItemGroup.map(function(s){if(s.sku&&s.sku.stockIdEsc==o){var n=t.data&&t.data.cartItemDTO||{};s.number=i,s.inStock=s.number<=s.sku.stock,n.sku&&(s.nowprice=n.sku&&r(n.sku.nowprice),s.isPintuan=n.sku&&n.sku.tuanType)}s.inStock||a++,s.hideInput=!s.inStock||s.sku.inValid&&("FUTURESALE"==e.groupTypeEnum||"PRESALE"==e.groupTypeEnum||"INVALID"==e.groupTypeEnum)}),a==e.cartItemGroup.length?e.outStock=!0:e.outStock=!1,e.hideShopInput="FUTURESALE"==e.groupTypeEnum||"PRESALE"==e.groupTypeEnum||"INVALID"==e.groupTypeEnum||e.outStock}),a.shops=e.data.shops,e.calculation(!n[o]),e.setData({shops:a.shops})):e.$toast.show(t.msg||t.message||"系统出错"),e.$loading.hide()}).catch(function(t){e.$loading.hide(),console.error(t)})}},delCart:function(t){var e=this,a={},i=t.target.id,s=t.target.dataset.shopid,n={stockId:i,marketType:getApp().data.marketType,sourceMarket:"weixin"},r=0,c=this.data.skuDeleteMap,u=this.data.skuMap,d=this.data.shopMap,m=u[i];this.$root.$logE("016000119"),wx.showModal({title:"确定要删除该商品吗",confirmColor:"#ff5777",success:function(t){t.confirm&&(e.$loading.show(),p.request("mwp.CartWeb.deleteCart","1",n).then(function(t){e.$loading.hide(),t&&t.data&&e.data.shops.length?(e.data.shops.map(function(t){if(t.shopInfo.shopIdEsc&&t.shopInfo.shopIdEsc==s||""==s){var e=0,a=0;t.cartItemGroup&&t.cartItemGroup.length&&t.cartItemGroup.map(function(t){t.sku&&t.sku.stockIdEsc==i&&(c[i]=!0,u[i]=!1),c[t.sku.stockIdEsc]&&r++,t.hideInput&&!c[t.sku.stockIdEsc]&&e++,c[t.sku.stockIdEsc]||a++}),e==a&&(t.hideShopInput=!0,d[t.shopInfo.shopIdEsc]=!1),0==a&&(t.deleted=!0)}}),a.shops=e.data.shops,e.calculation(!m),e.setData({shops:a.shops,skuDeleteMap:c,skuMap:u,shopMap:d}),o.default.put("cart.listSkuMap",u),e.ifAllChecked(),e.setEmpty()):e.$toast.show(t.msg||t.message||"系统出错")}).catch(function(t){e.$loading.hide(),console.error(t)}))}})},allChange:function(t){var e={},a=this.data.allChecked,i=this.data.shopMap,s=this.data.skuMap;this.data.shops&&this.data.shops.length&&this.data.shops.map(function(t){t.hideShopInput||(i[t.shopInfo.shopIdEsc]=!a),t.cartItemGroup&&t.cartItemGroup.length&&t.cartItemGroup.map(function(t){t.hideInput||(s[t.sku.stockIdEsc]=!a)})}),e.allChecked=!a,this.calculation(),this.setData({allChecked:e.allChecked,shopMap:i,skuMap:s}),o.default.put("cart.listSkuMap",s)},calculation:function(t){var e=[],a={},o=[],i=0,s=0,n=this.data.skuMap,r=this.data.skuDeleteMap,c=this.fix2Price;if(this.data.shops.length&&this.data.shops.map(function(t){if(t.cartItemGroup&&t.cartItemGroup.length){var c=[];t.cartItemGroup.map(function(e){var u=e.sku.stockIdEsc,d={};if(n[e.sku.stockIdEsc]&&!e.sku.inValid&&e.number<=e.sku.stock&&"INVALID"!==t.groupTypeEnum&&"PRESALE"!==t.groupTypeEnum&&"FUTURESALE"!==t.groupTypeEnum&&!r[e.sku.stockIdEsc]){s++,i+=e.sku.nowprice*e.number,d={stockId:u,number:parseInt(e.number),ptp:e.ptp||""};var m={shopId:t.shopInfo.shopIdEsc,number:parseInt(e.number)},p={stockId:u,number:parseInt(e.number)};e.extensions&&(e.extensions.liveParams&&(d.liveParams=e.extensions.liveParams),e.extensions.ptpCnt&&(d.ptpCnt=e.extensions.ptpCnt)),e.isPintuan&&(d.pinTuan={tuanType:e.sku.tuanType}),c.push(d),o.push(p),a[u]=m}}),c.length>0&&e.push({skus:c})}}),this.data.isRecommendChecked&&this.data.recommends[this.data.current]){for(var u=this.data.recommends[this.data.current],d=!1,m=0;m<o.length;m++)if(o[m].stockId==u.stockId){o[m].number+=1,d=!0;break}d||o.push({stockId:u.stockId,number:1}),t=!1,i+=100*u.price}t?this.setData({totalPrice:"￥"+c(i)}):this.tick(i),this.setData({allCheckedNumber:s,checkedItems:e,tickMap:a,tickArr:o})},getCoupon:function(t){var e=this,a={sellerId:t.currentTarget.id,marketType:getApp().data.marketType},o=t.currentTarget.dataset.shopname;p.request("mwp.ford.getValidShopProList","1",a).then(p.filterResult).then(function(t){var a={list:t.list,shopName:o,show:!0,type:e.data.type};e.$couponList.setData(a),e.setData({openCoupon:!0})})},goToBuy:function(){var t={orderFrom:"cart",shops:this.data.checkedItems},e=!1,a=this.data.allCheckedNumber;if(this.data.isRecommendChecked&&this.data.recommends[this.data.current]){a+=1;for(var i=this.data.recommends[this.data.current],s=this.data.checkedItems,n=0;n<s.length;n++){for(var r=s[n].skus,c=0;c<r.length;c++){var u=r[c];if(u.stockId==i.stockId){u.number+=1,e=!0;break}}if(e)break}if(!e){var d=this.$root.ptpData;s.push({skus:[{stockId:i.stockId,number:1,ptp:d.ptp_cnt||""}]})}}this.data.checkedItems.length<=0?this.$toast.show("请先选择商品哦"):a>50?this.$toast.show("最多50样商品同时下单结算哦~"):(o.default.put("buy.buyParams",t),this.$root.$navigate(m.default.buy()),this.hide())},shopTagImage:function(t){var e=/(\.jpg|\.webp|\.png|\.gif)/gi;return t&&t.length&&t.map(function(t){var a=t.image;if(e.test(a)){var o=a.split(e),i=(o.slice(0,1).join("")+o[1]).match(/(\d+)x(\d+)\.\w+$/),s=i&&i[1]||60;s=(s=Number(s))&&s>=195?132:60,t.width=s,t.image=t.image}}),t},setEmpty:function(){var t=this.data.shops,e=0,a=this,o=this.data.hideEmptyButton;t&&t.length&&(t.map(function(t){t.deleted&&e++}),e==t.length&&(this.$empty.setData({type:11,text:"购物车还是空的哦~",button:o?null:"去逛逛",tip:null,callback:function(){a.$root.$navigate(m.default.home())}}),this.setData({showEmptyPage:!0,isRecommendChecked:!1,recommends:[],current:0,showRecommend:null}),this.tickParam=null,this.cacheRecommend()))},formSubmitHandler:function(t){var e=t.detail.formId,a=t.detail.target.dataset.handler;return"checkout"==a?(this.$root.$logForm(e,1),void this.goToBuy()):"minus"==a?(this.$root.$logForm(e,1),void this.minusCart(t.detail)):"add"==a?(this.$root.$logForm(e,1),void this.addCart(t.detail)):"delete"==a?(this.$root.$logForm(e,1),void this.delCart(t.detail)):void 0},closeCartComponent:function(){this.setData({isShow:!1,openCoupon:null,$mask:{isShow:null}}),this.setData({autoplay:!1}),this.cacheRecommend()},fixPrice:function(t){return(t=t?""+(t/100).toFixed(2):"").indexOf(".")?t.replace(/0+?$/,"").replace(/\.$/,""):t},fix2Price:function(t){return t=t?""+(t/100).toFixed(2):"0.00"},tick:function(t){var e=this,a=this.delay,o=this.fix2Price,i=void 0;this.timer?console.log(this.timer):this.timer=setTimeout(function(){clearTimeout(e.timer),e.timer=0,i=+Date.now(),e.isTicking=!0,p.request("mwp.CartWeb.tick","1",{tick:JSON.stringify(e.data.tickArr),marketType:getApp().data.marketType},{method:"POST"}).then(function(a){if(e.isTicking=!1,a&&a.data){if(e.timestamp>i)return;e.timestamp=i;var s=a.data;e.delay=s.coudanResDTO&&s.coudanResDTO.delay>500?s.coudanResDTO.delay:500,e.coudanCallback(s,e.data.tickMap),a.data.coudanResDTO||e.setData({totalPrice:"￥"+o(t)})}else e.setData({totalPrice:"￥"+o(t)}),e.resetRecommend()}).catch(function(a){e.isTicking=!1,console.log(a),e.setData({totalPrice:"￥"+o(t)}),e.resetRecommend()})},a)},coudanCallback:function(t,e,a){var i=this,s=this.data.shopCdMap,n=this.fixPrice;if(o.default.put("cart.skuMap",e),t.coudanResDTO){var r=t.coudanResDTO.cartLevelAdvancedSuggestionDTO,c=t.coudanResDTO.shopLevelAdvancedSuggestionDTOList;if(a||(this.cacheRecommend(),this.tickRecommend(r,this.data.tickArr)),r.coudanStatus>=0){var u=this.data.cartLevelCoudan,d=r.promotionCode,m=r.parameters,p=r.searchKeys,h=r.styles;u.coudanStatus=r.coudanStatus,u.activityName=m.activityName||"",h?(u.tagStyle="color:"+(h.tagTextColor||"#ff5777")+"; background: "+(h.tagBgColor||"#FFE6E8")+";",u.styles="color: "+(h.barTextColor||"#ff5777")+";background:"+(h.barBgUrl?"url("+h.barBgUrl+") no-repeat;background-size:100%;":"#FFE6E8;")):(u.tagStyle="color: #ff5777; background: #FFE6E8;",u.styles="color: #ff5777;background: #FFE6E8;"),1==r.coudanStatus?"platformCoupon"==d&&(u.cutPrice=n(m.cutPrice),u.limitPrice=n(m.limitPrice),u.desc="已满"+u.limitPrice+"元，已减"+u.cutPrice+"元"):2==r.coudanStatus&&(u.promotionId=p&&p.promotionId,u.promotionCode=d,"platformCoupon"==d&&(u.deltaPrice=n(m.deltaPrice),u.cutPrice=n(m.cutPrice),u.limitPrice=n(m.limitPrice),u.title="以下商品满"+u.limitPrice+"元，立减"+u.cutPrice+"元",u.desc=a?"满"+u.limitPrice+"元，立减"+u.cutPrice+"元":"再购"+u.deltaPrice+"元，立减"+u.cutPrice+"元")),this.setData({totalPrice:"￥"+n(m.selectedPrice),cartLevelCoudan:u},function(){i.setMarginBottom()}),a&&this.setData({cartCoudanOrigin:JSON.parse(JSON.stringify(u))})}s=JSON.parse(JSON.stringify(this.data.shopCdMapOrigin)),c.length&&(c.forEach(function(t){var e={},o=t.coudanStatus,i=t.discountFee,r=t.parameters,c=t.promotionCode,u=t.searchKeys,d=t.promotionTag;if(o>=0){if(e.promotionTag=d,e.coudanStatus=o,1==o)"reachReduce"==c?(e.cutPrice=n(r.cutPrice),e.limitPrice=n(r.limitPrice),e.desc="已满"+e.limitPrice+"元，已减"+e.cutPrice+"元"):"reachFreePostage"==c?(e.limitPrice=n(r.limitPrice),e.desc="已满"+e.limitPrice+"元，已享包邮"):"itemCountOverReduce"==c?(e.cutPrice=n(r.cutPrice),e.limitNumber=r.limitNumber,e.desc="已满"+e.limitNumber+"件，已减"+e.cutPrice+"元"):"itemCountOverDiscount"==c?(e.disCount=n(r.disCount),e.discountFee=n(i),e.limitNumber=r.limitNumber,e.desc="已满足"+e.limitNumber+"件"+e.disCount+"折，已优惠"+e.discountFee+"元"):"itemCountOverFreePostage"==c?(e.limitNumber=r.limitNumber,e.desc="已满"+e.limitNumber+"件，已享包邮"):"packageSale"==c&&(e.discountFee=n(i),e.limitPrice=n(r.limitPrice),e.limitNumber=r.limitNumber,e.desc="已满足"+e.limitPrice+"元任选"+e.limitNumber+"件，已优惠"+e.discountFee+"元");else if(2==o){var m="";e.promotionCode=c,u&&u.promotionId&&(e.promotionId=u.promotionId),"reachReduce"==c?(e.cutPrice=n(r.cutPrice),e.limitPrice=n(r.limitPrice),e.deltaPrice=n(r.deltaPrice),m="满"+e.limitPrice+"元，立减"+e.cutPrice+"元",e.desc="再购"+e.deltaPrice+"元，立减"+e.cutPrice+"元"):"reachFreePostage"==c?(e.limitPrice=n(r.limitPrice),e.deltaPrice=n(r.deltaPrice),m="满"+e.limitPrice+"元，立享包邮",e.desc="再购"+e.deltaPrice+"元，立享包邮"):"itemCountOverReduce"==c?(e.cutPrice=n(r.cutPrice),e.limitNumber=r.limitNumber,e.needNumber=r.needNumber,m="满"+e.limitNumber+"件，立减"+e.cutPrice+"元",e.desc="再购"+e.needNumber+"件，立减"+e.cutPrice+"元"):"itemCountOverDiscount"==c?(e.disCount=n(r.disCount),e.limitNumber=r.limitNumber,e.needNumber=r.needNumber,m="满"+e.limitNumber+"件，立享"+e.disCount+"折",e.desc="再购"+e.needNumber+"件，立享"+e.disCount+"折"):"itemCountOverFreePostage"==c?(e.limitNumber=r.limitNumber,e.needNumber=r.needNumber,m="满"+e.limitNumber+"件，立享包邮",e.desc="再购"+e.needNumber+"件，立享包邮"):"packageSale"==c&&(e.limitPrice=n(r.limitPrice),e.limitNumber=r.limitNumber,e.needNumber=r.needNumber,m=e.limitPrice+"元任选"+e.limitNumber+"件",e.desc="再购"+e.needNumber+"件，立享【"+m+"】"),a&&(e.desc=m),e.title="以下商品"+m}s[t.shopIdEsc]=e}else s[t.shopIdEsc]=null}),this.setData({shopCdMap:s}),a&&this.setData({shopCdMapOrigin:JSON.parse(JSON.stringify(s))}))}else this.setData({cartLevelCoudan:JSON.parse(JSON.stringify(this.data.cartCoudanOrigin)),shopCdMap:JSON.parse(JSON.stringify(this.data.shopCdMapOrigin))},function(){i.setMarginBottom()}),this.resetRecommend()},goCoudan:function(t){var e=t.currentTarget.dataset,a=e.shopId,o=e.promotionId,i={promotionCode:e.promotionCode,title:e.title,type:"cart"};a&&(i.shopId=a),o&&(i.promotionId=o),this.$root.$navigate(m.default.wallPackage(i)),this.closeCartComponent()},paramChanged:function(t){if(!this.tickParam)return!0;var e=!1;for(var a in t)t[a]!==this.tickParam[a]&&(e=!0);return e},resetRecommend:function(){this.data.isRecommendChecked?this.cacheRecommend():(this.tickParam=null,this.clearRecommend())},clearRecommend:function(){var t=this,e=this.data.recommends;e&&e.length&&(this.animating=!0,this.setData({showRecommend:!1}),setTimeout(function(){t.setData({recommends:[],current:0,isRecommendChecked:!1,showRecommend:null},function(){t.setMarginBottom()}),t.cacheRecommend(),t.animating=!1},280))},tickRecommend:function(t,e){var a=this;if(!this.data.isRecommendChecked){var o=t.promotionCode,i=t.searchKeys;if(2!==t.coudanStatus||"platformCoupon"!==o)return this.tickParam=null,void this.clearRecommend();var s=parseInt(i.fromPrice);if(!s||!e.length)return this.tickParam=null,void this.clearRecommend();for(var n=[],r=0;r<e.length;r++)n.push(e[r].stockId);var c={marketType:"market_mogujie",fromPrice:s,promotionId:i.promotionId,stockIdList:JSON.stringify(n)};this.paramChanged(c)&&(this.tickParam=c,this.isRequesting=!0,p.request("mwp.CartWeb.tickRecommend","1",this.tickParam).then(function(t){if(t&&t.data){var e=t.data,o=e.recommends,i=e.styles,s=[];if(o&&o.length)for(var n=0;n<o.length;n++)o[n].price=(o[n].price/100).toFixed(2),o[n].image=u.default.getWidthSuffix(o[n].image,160),s.push(o[n].acm);s.length&&a.$root.$logE("0x00000000",{acms:s}),a.setData({barBgColor:i&&i.barBgColor?i.barBgColor:"#ffe6e8",recommends:o||[],current:0,showRecommend:!0,autoplay:!0},function(){a.setMarginBottom()}),a.cacheRecommend()}else a.clearRecommend();a.isRequesting=!1}).catch(function(){a.clearRecommend(),a.isRequesting=!1}))}},onSwiperChange:function(t){var e=t.detail;this.setData({current:e.current}),this.cacheRecommend()},checkRecommend:function(){if(this.isRequesting||this.timer||this.animating||this.isTicking)console.log("不能点击。。。");else{var t=this.data.recommends[this.data.current];if(t){var e=this.data.isRecommendChecked,a=!(e=!e);this.setData({isRecommendChecked:e,autoplay:a});var o={isSelect:e?1:0,itemId:t.itemId,acm:t.acm,stockId:t.stockId,disprice:100*t.price,num:1};this.$root.$logE("016000558",o),this.calculation()}}},goDetail:function(){var t=this.data.recommends[this.data.current];t&&t.itemId&&(this.setData({autoplay:!1}),this.cacheRecommend(),this.$root.$navigate(m.default.detail({itemId:t.itemId})),this.closeCartComponent())},clickHandler:function(t){var e=t.currentTarget.dataset,a=e.itemId,o=e.ptp_from;this.$root.$navigate(m.default.detail({itemId:a,ptp_from:o})),this.closeCartComponent()},navigateShop:function(t){var e=t.currentTarget.dataset,a=e.shopId,o=void 0===a?"":a;!e.noHref&&o&&(this.$root.$navigate(m.default.shop({shopId:o})),this.closeCartComponent())}}}; 
 			}); 
		define("components/cashier/common/aes.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e,n){return r.AES.encrypt(n,t,{iv:e,mode:r.mode.CBC,padding:r.pad.ZeroPadding}).toString()}function e(t,e,n){return r.AES.decrypt(n,t,{iv:e,mode:r.mode.CBC,padding:r.pad.ZeroPadding}).toString(r.enc.Utf8)}var r=r||function(t,e){var r={},n=r.lib={},i=function(){},o=n.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var i=0;i<t;i++)e[n+i>>>2]|=(r[i>>>2]>>>24-i%4*8&255)<<24-(n+i)%4*8;else if(65535<r.length)for(i=0;i<t;i+=4)e[n+i>>>2]=r[i>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;n<e;n+=4)r.push(4294967296*t.random()|0);return new s.init(r,e)}}),c=r.enc={},a=c.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++){var i=e[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new s.init(r,e/2)}},f=c.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;n<t;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new s.init(r,e)}},u=c.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},h=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,c=i/(4*o);if(e=(c=e?t.ceil(c):t.max((0|c)-this._minBufferSize,0))*o,i=t.min(4*e,i),e){for(var a=0;a<e;a+=o)this._doProcessBlock(n,a);a=n.splice(0,e),r.sigBytes-=i}return new s.init(a,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new p.HMAC.init(t,r).finalize(e)}}});var p=r.algo={};return r}(Math);!function(){var t=r,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var i=0;i<r;i+=3)for(var o=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<r;s++)t.push(n.charAt(o>>>6*(3-s)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,n=this._map;(i=n.charAt(64))&&-1!=(i=t.indexOf(i))&&(r=i);for(var i=[],o=0,s=0;s<r;s++)if(s%4){var c=n.indexOf(t.charAt(s-1))<<s%4*2,a=n.indexOf(t.charAt(s))>>>6-s%4*2;i[o>>>2]|=(c|a)<<24-o%4*8,o++}return e.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,r,n,i,o,s){return((t=t+(e&r|~e&n)+i+s)<<o|t>>>32-o)+e}function n(t,e,r,n,i,o,s){return((t=t+(e&n|r&~n)+i+s)<<o|t>>>32-o)+e}function i(t,e,r,n,i,o,s){return((t=t+(e^r^n)+i+s)<<o|t>>>32-o)+e}function o(t,e,r,n,i,o,s){return((t=t+(r^(e|~n))+i+s)<<o|t>>>32-o)+e}for(var s=r,c=(f=s.lib).WordArray,a=f.Hasher,f=s.algo,u=[],h=0;64>h;h++)u[h]=4294967296*t.abs(t.sin(h+1))|0;f=f.MD5=a.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,r){for(s=0;16>s;s++){a=t[c=r+s];t[c]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var s=this._hash.words,c=t[r+0],a=t[r+1],f=t[r+2],h=t[r+3],p=t[r+4],d=t[r+5],l=t[r+6],y=t[r+7],g=t[r+8],_=t[r+9],v=t[r+10],B=t[r+11],m=t[r+12],k=t[r+13],x=t[r+14],S=t[r+15],w=s[0],z=s[1],C=s[2],D=s[3],z=o(z=o(z=o(z=o(z=i(z=i(z=i(z=i(z=n(z=n(z=n(z=n(z=e(z=e(z=e(z=e(z,C=e(C,D=e(D,w=e(w,z,C,D,c,7,u[0]),z,C,a,12,u[1]),w,z,f,17,u[2]),D,w,h,22,u[3]),C=e(C,D=e(D,w=e(w,z,C,D,p,7,u[4]),z,C,d,12,u[5]),w,z,l,17,u[6]),D,w,y,22,u[7]),C=e(C,D=e(D,w=e(w,z,C,D,g,7,u[8]),z,C,_,12,u[9]),w,z,v,17,u[10]),D,w,B,22,u[11]),C=e(C,D=e(D,w=e(w,z,C,D,m,7,u[12]),z,C,k,12,u[13]),w,z,x,17,u[14]),D,w,S,22,u[15]),C=n(C,D=n(D,w=n(w,z,C,D,a,5,u[16]),z,C,l,9,u[17]),w,z,B,14,u[18]),D,w,c,20,u[19]),C=n(C,D=n(D,w=n(w,z,C,D,d,5,u[20]),z,C,v,9,u[21]),w,z,S,14,u[22]),D,w,p,20,u[23]),C=n(C,D=n(D,w=n(w,z,C,D,_,5,u[24]),z,C,x,9,u[25]),w,z,h,14,u[26]),D,w,g,20,u[27]),C=n(C,D=n(D,w=n(w,z,C,D,k,5,u[28]),z,C,f,9,u[29]),w,z,y,14,u[30]),D,w,m,20,u[31]),C=i(C,D=i(D,w=i(w,z,C,D,d,4,u[32]),z,C,g,11,u[33]),w,z,B,16,u[34]),D,w,x,23,u[35]),C=i(C,D=i(D,w=i(w,z,C,D,a,4,u[36]),z,C,p,11,u[37]),w,z,y,16,u[38]),D,w,v,23,u[39]),C=i(C,D=i(D,w=i(w,z,C,D,k,4,u[40]),z,C,c,11,u[41]),w,z,h,16,u[42]),D,w,l,23,u[43]),C=i(C,D=i(D,w=i(w,z,C,D,_,4,u[44]),z,C,m,11,u[45]),w,z,S,16,u[46]),D,w,f,23,u[47]),C=o(C,D=o(D,w=o(w,z,C,D,c,6,u[48]),z,C,y,10,u[49]),w,z,x,15,u[50]),D,w,d,21,u[51]),C=o(C,D=o(D,w=o(w,z,C,D,m,6,u[52]),z,C,h,10,u[53]),w,z,v,15,u[54]),D,w,a,21,u[55]),C=o(C,D=o(D,w=o(w,z,C,D,g,6,u[56]),z,C,S,10,u[57]),w,z,l,15,u[58]),D,w,k,21,u[59]),C=o(C,D=o(D,w=o(w,z,C,D,p,6,u[60]),z,C,B,10,u[61]),w,z,f,15,u[62]),D,w,_,21,u[63]);s[0]=s[0]+w|0,s[1]=s[1]+z|0,s[2]=s[2]+C|0,s[3]=s[3]+D|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(r.length+1),this._process(),r=(e=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}}),s.MD5=a._createHelper(f),s.HmacMD5=a._createHmacHelper(f)}(Math),function(){var t=r,e=t.lib,n=e.Base,i=e.WordArray,o=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=(c=this.cfg).hasher.create(),n=i.create(),o=n.words,s=c.keySize,c=c.iterations;o.length<s;){a&&r.update(a);var a=r.update(t).finalize(e);r.reset();for(var f=1;f<c;f++)a=r.finalize(a),r.reset();n.concat(a)}return n.sigBytes=4*s,n}});t.EvpKDF=function(t,e,r){return o.create(r).compute(t,e)}}(),r.lib.Cipher||function(t){var e=(l=r).lib,n=e.Base,i=e.WordArray,o=e.BufferedBlockAlgorithm,s=l.enc.Base64,c=l.algo.EvpKDF,a=e.Cipher=o.extend({cfg:n.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,r,n){return("string"==typeof r?y:d).encrypt(t,e,r,n)},decrypt:function(e,r,n){return("string"==typeof r?y:d).decrypt(t,e,r,n)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var f=l.mode={},u=function(t,e,r){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var i=0;i<r;i++)t[e+i]^=n[i]},h=(e.BlockCipherMode=n.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();h.Encryptor=h.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize;u.call(this,t,e,n),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),h.Decryptor=h.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=t.slice(e,e+n);r.decryptBlock(t,e),u.call(this,t,e,n),this._prevBlock=i}}),f=f.CBC=h,h=(l.pad={}).Pkcs7={pad:function(t,e){for(var r=4*e,n=(r=r-t.sigBytes%r)<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(n);r=i.create(o,r),t.concat(r)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:f,padding:h}),reset:function(){a.reset.call(this);var t=(e=this.cfg).iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=e.createEncryptor;else r=e.createDecryptor,this._minBufferSize=1;this._mode=r.call(e,this,t&&t.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var p=e.CipherParams=n.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),f=(l.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return((t=t.salt)?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){var e=(t=s.parse(t)).words;if(1398893684==e[0]&&1701076831==e[1]){var r=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:r})}},d=e.SerializableCipher=n.extend({cfg:n.extend({format:f}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n);return e=i.finalize(e),i=i.cfg,p.create({ciphertext:e,key:r,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(r,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),l=(l.kdf={}).OpenSSL={execute:function(t,e,r,n){return n||(n=i.random(8)),t=c.create({keySize:e+r}).compute(t,n),r=i.create(t.words.slice(e),4*r),t.sigBytes=4*e,p.create({key:t,iv:r,salt:n})}},y=e.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:l}),encrypt:function(t,e,r,n){return n=this.cfg.extend(n),r=n.kdf.execute(r,t.keySize,t.ivSize),n.iv=r.iv,(t=d.encrypt.call(this,t,e,r.key,n)).mixIn(r),t},decrypt:function(t,e,r,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),r=n.kdf.execute(r,t.keySize,t.ivSize,e.salt),n.iv=r.iv,d.decrypt.call(this,t,e,r.key,n)}})}(),function(){for(var t=r,e=t.lib.BlockCipher,n=t.algo,i=[],o=[],s=[],c=[],a=[],f=[],u=[],h=[],p=[],d=[],l=[],y=0;256>y;y++)l[y]=128>y?y<<1:y<<1^283;for(var g=0,_=0,y=0;256>y;y++){var v=(v=_^_<<1^_<<2^_<<3^_<<4)>>>8^255&v^99;i[g]=v,o[v]=g;var B=l[g],m=l[B],k=l[m],x=257*l[v]^16843008*v;s[g]=x<<24|x>>>8,c[g]=x<<16|x>>>16,a[g]=x<<8|x>>>24,f[g]=x,x=16843009*k^65537*m^257*B^16843008*g,u[v]=x<<24|x>>>8,h[v]=x<<16|x>>>16,p[v]=x<<8|x>>>24,d[v]=x,g?(g=B^l[l[l[k^B]]],_^=l[l[_]]):g=_=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=e.extend({_doReset:function(){for(var t=(r=this._key).words,e=r.sigBytes/4,r=4*((this._nRounds=e+6)+1),n=this._keySchedule=[],o=0;o<r;o++)if(o<e)n[o]=t[o];else{var s=n[o-1];o%e?6<e&&4==o%e&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=s<<8|s>>>24,s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=S[o/e|0]<<24),n[o]=n[o-e]^s}for(t=this._invKeySchedule=[],e=0;e<r;e++)o=r-e,s=e%4?n[o]:n[o-4],t[e]=4>e||4>=o?s:u[i[s>>>24]]^h[i[s>>>16&255]]^p[i[s>>>8&255]]^d[i[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,c,a,f,i)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,u,h,p,d,o),r=t[e+1],t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,c){for(var a=this._nRounds,f=t[e]^r[0],u=t[e+1]^r[1],h=t[e+2]^r[2],p=t[e+3]^r[3],d=4,l=1;l<a;l++)var y=n[f>>>24]^i[u>>>16&255]^o[h>>>8&255]^s[255&p]^r[d++],g=n[u>>>24]^i[h>>>16&255]^o[p>>>8&255]^s[255&f]^r[d++],_=n[h>>>24]^i[p>>>16&255]^o[f>>>8&255]^s[255&u]^r[d++],p=n[p>>>24]^i[f>>>16&255]^o[u>>>8&255]^s[255&h]^r[d++],f=y,u=g,h=_;y=(c[f>>>24]<<24|c[u>>>16&255]<<16|c[h>>>8&255]<<8|c[255&p])^r[d++],g=(c[u>>>24]<<24|c[h>>>16&255]<<16|c[p>>>8&255]<<8|c[255&f])^r[d++],_=(c[h>>>24]<<24|c[p>>>16&255]<<16|c[f>>>8&255]<<8|c[255&u])^r[d++],p=(c[p>>>24]<<24|c[f>>>16&255]<<16|c[u>>>8&255]<<8|c[255&h])^r[d++],t[e]=y,t[e+1]=g,t[e+2]=_,t[e+3]=p},keySize:8});t.AES=e._createHelper(n)}(),r.mode.ECB=function(){var t=r.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),t.Decryptor=t.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),t}(),r.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){for(var e=t.words,r=t.sigBytes-1;!(e[r>>>2]>>>24-r%4*8&255);)r--;t.sigBytes=r+1}},module.exports={CryptoJS:r,getKey:function(t){var e=(r.MD5(t)+"").substr(0,16);return r.enc.Utf8.parse(e)},md5:function(t){return r.MD5(t)+""},encryptLocal:function(t,e){t=r.MD5(t.toUpperCase())+"";var n={_data_:e,_time_:(new Date).getTime()+6e5};return n=JSON.stringify(n),this.encrypt(t,n)},decryptLocal:function(t,e){t=r.MD5(t.toUpperCase())+"";var n=JSON.parse(this.decrypt(t,e)),i=(new Date).getTime();return n._time_>=i?n._data_:null},encrypt:function(e,r){var n,i;return n=i=this.getKey(e),t(n,i,r)},encryptData:function(e,r){var n,i;n=i=this.getKey(e);for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&(r[o]=t(n,i,r[o].toString()));return r},decrypt:function(t,r){var n,i;return n=i=this.getKey(t),e(n,i,r.replace(/\s+/g,""))},decryptData:function(t,r){var n,i;n=i=this.getKey(t);for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&(r[o]=e(n,i,r[o].toString()));return r}}; 
 			}); 
		define("components/cashier/common/router.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={home:!0,installment:!1,message:!1,pwd:!1,result:!1},o=["home"];exports.default=function(t){-1===t?(o.pop(),t=o.pop()):"home"===t?o=["home"]:o[o.length-1]!==t&&o.push(t),o.length||(o=["home"],t="home");for(var r in e)e[r]=r===t;return{page:t,showConfig:e}}; 
 			}); 
		define("components/cashier/common/rsa.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,r,i){null!=t&&("number"==typeof t?this.fromNumber(t,r,i):null==r&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,r))}function r(){return new t(null)}function i(t){return S.charAt(t)}function e(t,r){var i=A[t.charCodeAt(r)];return null==i?-1:i}function o(t){var i=r();return i.fromInt(t),i}function s(t){var r,i=1;return 0!=(r=t>>>16)&&(t=r,i+=16),0!=(r=t>>8)&&(t=r,i+=8),0!=(r=t>>4)&&(t=r,i+=4),0!=(r=t>>2)&&(t=r,i+=2),0!=(r=t>>1)&&(t=r,i+=1),i}function n(t){this.m=t}function h(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function a(){this.i=0,this.j=0,this.S=new Array}function u(){return new a}function f(){if(null==B){for(B=u();E<w;){var t=Math.floor(65536*Math.random());x[E++]=255&t}for(B.init(x),E=0;E<x.length;++E)x[E]=0;E=0}return B.next()}function p(){}function c(r,i){return new t(r,i)}function l(r,i){if(i<r.length+11)return console.error("Message too long for RSA"),null;for(var e=new Array,o=r.length-1;o>=0&&i>0;){var s=r.charCodeAt(o--);s<128?e[--i]=s:s>127&&s<2048?(e[--i]=63&s|128,e[--i]=s>>6|192):(e[--i]=63&s|128,e[--i]=s>>6&63|128,e[--i]=s>>12|224)}e[--i]=0;for(var n=new p,h=new Array;i>2;){for(h[0]=0;0==h[0];)n.nextBytes(h);e[--i]=h[0]}return e[--i]=2,e[--i]=0,new t(e)}function y(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function v(t){var r,i,e="";for(r=0;r+3<=t.length;r+=3)i=parseInt(t.substring(r,r+3),16),e+=M.charAt(i>>6)+M.charAt(63&i);for(r+1==t.length?(i=parseInt(t.substring(r,r+1),16),e+=M.charAt(i<<2)):r+2==t.length&&(i=parseInt(t.substring(r,r+2),16),e+=M.charAt(i>>2)+M.charAt((3&i)<<4));(3&e.length)>0;)e+=I;return e}var m,g={},d={};d.KJUR={};var D=d.KJUR;"Microsoft Internet Explorer"==g.appName?(t.prototype.am=function(t,r,i,e,o,s){for(var n=32767&r,h=r>>15;--s>=0;){var a=32767&this[t],u=this[t++]>>15,f=h*a+u*n;o=((a=n*a+((32767&f)<<15)+i[e]+(1073741823&o))>>>30)+(f>>>15)+h*u+(o>>>30),i[e++]=1073741823&a}return o},m=30):"Netscape"!=g.appName?(t.prototype.am=function(t,r,i,e,o,s){for(;--s>=0;){var n=r*this[t++]+i[e]+o;o=Math.floor(n/67108864),i[e++]=67108863&n}return o},m=26):(t.prototype.am=function(t,r,i,e,o,s){for(var n=16383&r,h=r>>14;--s>=0;){var a=16383&this[t],u=this[t++]>>14,f=h*a+u*n;o=((a=n*a+((16383&f)<<14)+i[e]+o)>>28)+(f>>14)+h*u,i[e++]=268435455&a}return o},m=28),t.prototype.DB=m,t.prototype.DM=(1<<m)-1,t.prototype.DV=1<<m;t.prototype.FV=Math.pow(2,52),t.prototype.F1=52-m,t.prototype.F2=2*m-52;var T,b,S="0123456789abcdefghijklmnopqrstuvwxyz",A=new Array;for(T="0".charCodeAt(0),b=0;b<=9;++b)A[T++]=b;for(T="a".charCodeAt(0),b=10;b<36;++b)A[T++]=b;for(T="A".charCodeAt(0),b=10;b<36;++b)A[T++]=b;n.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},n.prototype.revert=function(t){return t},n.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},n.prototype.mulTo=function(t,r,i){t.multiplyTo(r,i),this.reduce(i)},n.prototype.sqrTo=function(t,r){t.squareTo(r),this.reduce(r)},h.prototype.convert=function(i){var e=r();return i.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),i.s<0&&e.compareTo(t.ZERO)>0&&this.m.subTo(e,e),e},h.prototype.revert=function(t){var i=r();return t.copyTo(i),this.reduce(i),i},h.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var r=0;r<this.m.t;++r){var i=32767&t[r],e=i*this.mpl+((i*this.mph+(t[r]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=r+this.m.t]+=this.m.am(0,e,t,r,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},h.prototype.mulTo=function(t,r,i){t.multiplyTo(r,i),this.reduce(i)},h.prototype.sqrTo=function(t,r){t.squareTo(r),this.reduce(r)},t.prototype.copyTo=function(t){for(var r=this.t-1;r>=0;--r)t[r]=this[r];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},t.prototype.fromString=function(r,i){var o;if(16==i)o=4;else if(8==i)o=3;else if(256==i)o=8;else if(2==i)o=1;else if(32==i)o=5;else{if(4!=i)return void this.fromRadix(r,i);o=2}this.t=0,this.s=0;for(var s=r.length,n=!1,h=0;--s>=0;){var a=8==o?255&r[s]:e(r,s);a<0?"-"==r.charAt(s)&&(n=!0):(n=!1,0==h?this[this.t++]=a:h+o>this.DB?(this[this.t-1]|=(a&(1<<this.DB-h)-1)<<h,this[this.t++]=a>>this.DB-h):this[this.t-1]|=a<<h,(h+=o)>=this.DB&&(h-=this.DB))}8==o&&0!=(128&r[0])&&(this.s=-1,h>0&&(this[this.t-1]|=(1<<this.DB-h)-1<<h)),this.clamp(),n&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,r){var i;for(i=this.t-1;i>=0;--i)r[i+t]=this[i];for(i=t-1;i>=0;--i)r[i]=0;r.t=this.t+t,r.s=this.s},t.prototype.drShiftTo=function(t,r){for(var i=t;i<this.t;++i)r[i-t]=this[i];r.t=Math.max(this.t-t,0),r.s=this.s},t.prototype.lShiftTo=function(t,r){var i,e=t%this.DB,o=this.DB-e,s=(1<<o)-1,n=Math.floor(t/this.DB),h=this.s<<e&this.DM;for(i=this.t-1;i>=0;--i)r[i+n+1]=this[i]>>o|h,h=(this[i]&s)<<e;for(i=n-1;i>=0;--i)r[i]=0;r[n]=h,r.t=this.t+n+1,r.s=this.s,r.clamp()},t.prototype.rShiftTo=function(t,r){r.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)r.t=0;else{var e=t%this.DB,o=this.DB-e,s=(1<<e)-1;r[0]=this[i]>>e;for(var n=i+1;n<this.t;++n)r[n-i-1]|=(this[n]&s)<<o,r[n-i]=this[n]>>e;e>0&&(r[this.t-i-1]|=(this.s&s)<<o),r.t=this.t-i,r.clamp()}},t.prototype.subTo=function(t,r){for(var i=0,e=0,o=Math.min(t.t,this.t);i<o;)e+=this[i]-t[i],r[i++]=e&this.DM,e>>=this.DB;if(t.t<this.t){for(e-=t.s;i<this.t;)e+=this[i],r[i++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;i<t.t;)e-=t[i],r[i++]=e&this.DM,e>>=this.DB;e-=t.s}r.s=e<0?-1:0,e<-1?r[i++]=this.DV+e:e>0&&(r[i++]=e),r.t=i,r.clamp()},t.prototype.multiplyTo=function(r,i){var e=this.abs(),o=r.abs(),s=e.t;for(i.t=s+o.t;--s>=0;)i[s]=0;for(s=0;s<o.t;++s)i[s+e.t]=e.am(0,o[s],i,s,0,e.t);i.s=0,i.clamp(),this.s!=r.s&&t.ZERO.subTo(i,i)},t.prototype.squareTo=function(t){for(var r=this.abs(),i=t.t=2*r.t;--i>=0;)t[i]=0;for(i=0;i<r.t-1;++i){var e=r.am(i,r[i],t,2*i,0,1);(t[i+r.t]+=r.am(i+1,2*r[i],t,2*i+1,e,r.t-i-1))>=r.DV&&(t[i+r.t]-=r.DV,t[i+r.t+1]=1)}t.t>0&&(t[t.t-1]+=r.am(i,r[i],t,2*i,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(i,e,o){var n=i.abs();if(!(n.t<=0)){var h=this.abs();if(h.t<n.t)return null!=e&&e.fromInt(0),void(null!=o&&this.copyTo(o));null==o&&(o=r());var a=r(),u=this.s,f=i.s,p=this.DB-s(n[n.t-1]);p>0?(n.lShiftTo(p,a),h.lShiftTo(p,o)):(n.copyTo(a),h.copyTo(o));var c=a.t,l=a[c-1];if(0!=l){var y=l*(1<<this.F1)+(c>1?a[c-2]>>this.F2:0),v=this.FV/y,m=(1<<this.F1)/y,g=1<<this.F2,d=o.t,D=d-c,T=null==e?r():e;for(a.dlShiftTo(D,T),o.compareTo(T)>=0&&(o[o.t++]=1,o.subTo(T,o)),t.ONE.dlShiftTo(c,T),T.subTo(a,a);a.t<c;)a[a.t++]=0;for(;--D>=0;){var b=o[--d]==l?this.DM:Math.floor(o[d]*v+(o[d-1]+g)*m);if((o[d]+=a.am(0,b,o,D,0,c))<b)for(a.dlShiftTo(D,T),o.subTo(T,o);o[d]<--b;)o.subTo(T,o)}null!=e&&(o.drShiftTo(c,e),u!=f&&t.ZERO.subTo(e,e)),o.t=c,o.clamp(),p>0&&o.rShiftTo(p,o),u<0&&t.ZERO.subTo(o,o)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var r=3&t;return r=r*(2-(15&t)*r)&15,r=r*(2-(255&t)*r)&255,r=r*(2-((65535&t)*r&65535))&65535,(r=r*(2-t*r%this.DV)%this.DV)>0?this.DV-r:-r},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(i,e){if(i>4294967295||i<1)return t.ONE;var o=r(),n=r(),h=e.convert(this),a=s(i)-1;for(h.copyTo(o);--a>=0;)if(e.sqrTo(o,n),(i&1<<a)>0)e.mulTo(n,h,o);else{var u=o;o=n,n=u}return e.revert(o)},t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var r;if(16==t)r=4;else if(8==t)r=3;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return this.toRadix(t);r=2}var e,o=(1<<r)-1,s=!1,n="",h=this.t,a=this.DB-h*this.DB%r;if(h-- >0)for(a<this.DB&&(e=this[h]>>a)>0&&(s=!0,n=i(e));h>=0;)a<r?(e=(this[h]&(1<<a)-1)<<r-a,e|=this[--h]>>(a+=this.DB-r)):(e=this[h]>>(a-=r)&o,a<=0&&(a+=this.DB,--h)),e>0&&(s=!0),s&&(n+=i(e));return s?n:"0"},t.prototype.negate=function(){var i=r();return t.ZERO.subTo(this,i),i},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var r=this.s-t.s;if(0!=r)return r;var i=this.t;if(0!=(r=i-t.t))return this.s<0?-r:r;for(;--i>=0;)if(0!=(r=this[i]-t[i]))return r;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+s(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(i){var e=r();return this.abs().divRemTo(i,null,e),this.s<0&&e.compareTo(t.ZERO)>0&&i.subTo(e,e),e},t.prototype.modPowInt=function(t,r){var i;return i=t<256||r.isEven()?new n(r):new h(r),this.exp(t,i)},t.ZERO=o(0),t.ONE=o(1),a.prototype.init=function(t){var r,i,e;for(r=0;r<256;++r)this.S[r]=r;for(i=0,r=0;r<256;++r)i=i+this.S[r]+t[r%t.length]&255,e=this.S[r],this.S[r]=this.S[i],this.S[i]=e;this.i=0,this.j=0},a.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var B,w=256,x=new Array,E=0;p.prototype.nextBytes=function(t){var r;for(r=0;r<t.length;++r)t[r]=f()},y.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},y.prototype.encrypt=function(t){var r=l(t,this.n.bitLength()+7>>3);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var e=i.toString(16);return 0==(1&e.length)?e:"0"+e};var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I="=";void 0!==D.asn1&&D.asn1||(D.asn1={}),D.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var r=t.toString(16);return r.length%2==1&&(r="0"+r),r},this.bigIntToMinTwosComplementsHex=function(r){var i=r.toString(16);if("-"!=i.substr(0,1))i.length%2==1?i="0"+i:i.match(/^[0-7]/)||(i="00"+i);else{var e=i.substr(1).length;e%2==1?e+=1:i.match(/^[0-7]/)||(e+=2);for(var o="",s=0;s<e;s++)o+="f";i=new t(o,16).xor(r).add(t.ONE).toString(16).replace(/^-/,"")}return i},this.getPEMStringFromHex=function(t,r){var i=CryptoJS.enc.Hex.parse(t),e=CryptoJS.enc.Base64.stringify(i).replace(/(.{64})/g,"$1\r\n");return e=e.replace(/\r\n$/,""),"-----BEGIN "+r+"-----\r\n"+e+"\r\n-----END "+r+"-----\r\n"}},function(t){var r,i={};i.decode=function(i){var e;if(r===t){var o="= \f\n\r\t \u2028\u2029";for(r=[],e=0;e<64;++e)r["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(e=0;e<o.length;++e)r[o.charAt(e)]=-1}var s=[],n=0,h=0;for(e=0;e<i.length;++e){var a=i.charAt(e);if("="==a)break;if(-1!=(a=r[a])){if(a===t)throw"Illegal character at offset "+e;n|=a,++h>=4?(s[s.length]=n>>16,s[s.length]=n>>8&255,s[s.length]=255&n,n=0,h=0):n<<=6}}switch(h){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:s[s.length]=n>>10;break;case 3:s[s.length]=n>>16,s[s.length]=n>>8&255}return s},i.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,i.unarmor=function(t){var r=i.re.exec(t);if(r)if(r[1])t=r[1];else{if(!r[2])throw"RegExp out of sync";t=r[2]}return i.decode(t)},d.Base64=i}(),function(t){function r(t,i){t instanceof r?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=i)}function i(t,r,i,e,o){this.stream=t,this.header=r,this.length=i,this.tag=e,this.sub=o}r.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw"Requesting byte offset "+t+" on a stream of length "+this.enc.length;return this.enc[t]},r.prototype.hexDigits="0123456789ABCDEF",r.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},r.prototype.hexDump=function(t,r,i){for(var e="",o=t;o<r;++o)if(e+=this.hexByte(this.get(o)),!0!==i)switch(15&o){case 7:e+="  ";break;case 15:e+="\n";break;default:e+=" "}return e},r.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,i.prototype.reSeemsASCII=/^[ -~]+$/,i.prototype.posStart=function(){return this.stream.pos},i.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},i.prototype.toHexString=function(t){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},i.decodeLength=function(t){var r=t.get(),i=127&r;if(i==r)return i;if(i>3)throw"Length over 24 bits not supported at position "+(t.pos-1);if(0===i)return-1;r=0;for(var e=0;e<i;++e)r=r<<8|t.get();return r},i.hasContent=function(t,e,o){if(32&t)return!0;if(t<3||t>4)return!1;var s=new r(o);if(3==t&&s.get(),s.get()>>6&1)return!1;try{var n=i.decodeLength(s);return s.pos-o.pos+n==e}catch(t){return!1}},i.decode=function(t){t instanceof r||(t=new r(t,0));var e=new r(t),o=t.get(),s=i.decodeLength(t),n=t.pos-e.pos,h=null;if(i.hasContent(o,s,t)){var a=t.pos;if(3==o&&t.get(),h=[],s>=0){for(var u=a+s;t.pos<u;)h[h.length]=i.decode(t);if(t.pos!=u)throw"Content size is not correct for container starting at offset "+a}else try{for(;;){var f=i.decode(t);if(0===f.tag)break;h[h.length]=f}s=a-t.pos}catch(t){throw"Exception while decoding undefined length content: "+t}}else t.pos+=s;return new i(e,n,s,o,h)},d.ASN1=i}();var R=d.ASN1;R.prototype.getHexStringValue=function(){var t=this.toHexString(),r=2*this.header,i=2*this.length;return t.substr(r,i)},y.prototype.parseKey=function(t){try{var r=0,i=0,e=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?d.Hex.decode(t):d.Base64.unarmor(t),o=R.decode(e);if(2!==o.sub.length)return!1;var s=o.sub[1].sub[0];return r=s.sub[0].getHexStringValue(),this.n=c(r,16),i=s.sub[1].getHexStringValue(),this.e=parseInt(i,16),!0}catch(t){return!1}};var C=function(t){y.call(this),t&&"string"==typeof t&&this.parseKey(t)};(C.prototype=new y).constructor=C;var N=function(t){t=t||{},this.default_key_size=parseInt(t.default_key_size)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null};N.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new C(t)},N.prototype.encrypt=function(t,r){var i=r||"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQClvdUhP6EMMXJw3iApoGzqh7AS\rGTrkHLHGJYiK8dR5QDqK4NB2jH3+G3BEuMiasN3nKR5sEDZmH8MyqJEq0AyQl8wJ\rrR9nhACurJzPiCZgkjLiKK+X309m+tusI8f6VBieOwFIOKdExO/g6d5ClatLkIDk\rUed5G3KyupwMVAWJBQIDAQAB";this.setKey(i);try{return v(this.key.encrypt(t))}catch(t){return!1}},module.exports=new N; 
 			}); 
		define("components/cashier/common/weChat.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}function e(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},n=function(){function a(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=a(require("../../../common/m")),s=a(require("../config")),o=r.default.MWP,c=s.default.appId||"wxca3957e5474b3670",p=s.default.scenetype||"mgjXcx",u=function(a,e){getCurrentPages()[0].$logE&&getCurrentPages()[0].$logE(a,e)},i=function(){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,a),this.payId=t.payId||null,this.modou=t.modou||0,this.platform=t.platform||"mgj",this.params=t}return n(a,[{key:"exec",value:function(){var a=this;this.payId&&(this.platform=this.platform||"mgj",o.request("mwp.pay_cashier.mlsXcxWechatPay",1,{payId:this.payId,modouUse:this.modouUse||0,appId:c,scenetype:p}).then(function(e){if("SUCCESS"===e.ret){if(e.data.weChatToken)a.openWeChatPay(e.data.weChatToken);else if(e.data.pf_async&&e.data.pf_async.apiName){var t=0,n=e.data.pf_async.asyncParams.maxQueryLoop||10,r=e.data.pf_async.asyncParams.queryDelay||1e3;!function s(){o.request(e.data.pf_async.apiName,1,{queryParams:e.data.pf_async.asyncParams.params.queryParams}).then(function(e){e.data.hasResult&&e.data.asyncData?a.openWeChatPay(e.data.asyncData.weChatToken):++t<=n?setTimeout(function(){s()},r):a.params.failCb&&a.params.failCb()})}()}}else a.params.failCb&&a.params.failCb()}))}},{key:"openWeChatPay",value:function(a){var e=this,n=t({},a,{success:function(){u("001010006",{payMethod:"weChatPay",payId:e.payId,prepayId:a.package.split("=")[1]}),e.params.successCb&&e.params.successCb()},fail:function(a){"requestPayment:fail cancel"===a.errMsg?(u("001010016",{payId:e.payId,payMethod:"weChatPay"}),e.params.cancelCb&&e.params.cancelCb()):(u("001010007",{payId:e.payId,payMethod:"weChatPay",ErrorMessage:a.errMsg}),e.params.failCb&&e.params.failCb())},complete:function(a){"requestPayment:cancel"===a.errMsg&&(u("001010016",{payId:e.payId,payMethod:"weChatPay"}),e.params.cancelCb&&e.params.cancelCb())}});wx.requestPayment(n)}}]),a}();exports.default=i; 
 			}); 
		define("components/cashier/components/header/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},e={home:{title:"选择支付方式",leftIcon:"close"},installment:{title:"选择分期方案",leftIcon:"arrow-left"},pwd:{title:"输入支付密码",leftIcon:"arrow-left"},message:{title:"短信验证",leftIcon:"arrow-left"},result:{title:"支付结果",leftIcon:"arrow-left"}};exports.default={name:"header",data:function(){return{page:"home",title:"选择支付方式",extraTitle:"",leftIcon:"close",rightIcon:""}},methods:{setTitle:function(r,a){a?this.setData(t({page:r},e[r],{extraTitle:a})):this.setData(t({page:r},e[r]))},leftTap:function(){"arrow-left"===this.data.leftIcon?this.$parent.routeGo(-1):this.$parent.hide()}}}; 
 			}); 
		define("components/cashier/config.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports={appId:getApp().data.appId,scenetype:getApp().data.sceneType,isShowSimpleCashier:!1,isCheckBfm:!1,isShowBfm:!0}; 
 			}); 
		define("components/cashier/config_example.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports={appId:"wxca3957e5474b3670",scenetype:"mgjXcx",isShowSimpleCashier:!0,isCheckBfm:!0,isShowBfm:!0}; 
 			}); 
		define("components/cashier/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},a=t(require("../../common/m")),s=t(require("../toast/index")),i=t(require("../loading/index")),o=t(require("./components/header/index")),n=t(require("./common/router")),d=t(require("./common/weChat")),r=t(require("./mockPages/home/index")),h=t(require("./mockPages/installment/index")),l=t(require("./mockPages/message/index")),u=t(require("./mockPages/pwd/index")),p=t(require("./mockPages/result/index")),c=t(require("./config")),m=a.default.MWP,y=!0;exports.default={data:function(){return{isShow:!1,showConfig:{home:!0}}},methods:{show:function(t){var e=this;t.payId&&(t.stagingNum||(t.stagingNum=0),this.getIsShowSimpleCashier().then(function(){e.showCashier(t)},function(){new d.default(t).exec()}))},getIsShowSimpleCashier:function(){var t=this;return new Promise(function(e,a){c.default.isShowSimpleCashier?!c.default.isShowSimpleCashier||c.default.isCheckBfm?(t.$loading.show(),m.request("mwp.pay_mailo.getmailouserinfo",1,{}).then(function(s){t.$loading.hide(),"SUCCESS"===s.ret&&s.data&&"NORMAL"===s.data.userStatus?(t.$loading.show(),m.request("mwp.pay_mailo.getmailoswitchinfo",1,{}).then(function(s){t.$loading.hide(),"SUCCESS"===s.ret&&s.data.isOpenCashier?e():a()})):(t.$loading.hide(),a())},function(){t.$loading.hide()})):e():a()})},showCashier:function(t){var e=this;this.$loading.show(),this.reSetAllData(),m.request("mwp.pay_cashier.cashierRender",1,{payId:t.payId,stagingNum:t.stagingNum}).then(function(a){if(e.$loading.hide(),"SUCCESS"===a.ret){var s={},i=[],o=[],n=(a=a.data).itemList[0];n.forEach(function(t){t.data.isChecked&&(s=t),"mailoPay"===t.payType&&i.push(t),"weChatPay"===t.payType&&o.push(t)}),c.default.isShowBfm||(n=o),c.default.isShowBfm&&!i.length&&n.push({payType:"mailoPay",data:{title:"白付美",isDisabled:!0,isChecked:!1,desc:"该支付方式暂不可用",icon:"https://s10.mogucdn.com/mlcdn/c45406/170930_02kc845d7cfj6dg54a4l6i0fabhgj_80x80.png"}}),t.stagingNum&&i.length&&!i[0].data.isDisabled?m.request("mwp.pay_cashier.stagingRender",1,{payId:t.payId,stagingNum:t.stagingNum,commodityStaging:!0}).then(function(t){if("SUCCESS"===t.ret){var a=t.data.installmentList;e.$installment.setInstallmentData(a);var i="不分期",o=s.data.price;a.forEach(function(t){t.checked&&(i=t.number,o=t.totalPrice)}),e.setSelectMethod({payType:s.payType,data:s.data,price:"mailoPay"===s.payType?o:s.data.price,hongbaoUse:s.data.hongbaoUse,installmentDesc:i})}else e.$toast.show(t.msg||"网络错误")}):e.setSelectMethod({payType:s.payType,data:s.data,price:s.data.price,hongbaoUse:s.data.hongbaoUse,installmentDesc:s.data.installmentDesc}),e.$home.setHomeData({payMethods:n,topbanner:a.topbanner&&a.topbanner.list||[],selectedMethod:e.data.selectedMethod});var d=i[0]&&i[0].data&&i[0].data.phone;d&&"string"==typeof d&&e.$message.setData({phoneNumTail:d.substr(-4)}),e.setData({params:t,payMethods:n,isShow:!0}),e.$root.$logE("001010040",{payId:t.payId,isAPISucceed:!0,defultPayMethod:s.payType})}else e.$toast.show(a.msg||"网络错误")})},hide:function(){this.reSetAllData(),this.$root.$logE("001010016",{payId:this.data.params.payId,payMethod:this.data.selectedMethod.payType}),this.data.params.cancelCb&&this.data.params.cancelCb()},routeGo:function(t,e){var a=(0,n.default)(t),s=a.page,i=a.showConfig;this.setData({showConfig:i}),this.$header.setTitle(s,e)},setHeaderTitle:function(t){this.$header.setData({title:t})},setSelectMethod:function(t){this.setData({selectedMethod:e({},this.data.selectedMethod,t)}),this.$home.setData({selectedMethod:this.data.selectedMethod}),this.$installment.setData({selectedMethod:this.data.selectedMethod})},paySubmit:function(){if(this.canClickFn())if(this.$root.$logE("001010001",{payId:this.data.params.payId,payMethod:this.data.selectedMethod.payType,installmentId:this.data.selectedMethod.installmentId}),"weChatPay"!==this.data.selectedMethod.payType){if("mailoPay"===this.data.selectedMethod.payType){var t=this.data.payMethods.filter(function(t){return"mailoPay"===t.payType})[0];return!this.data.showConfig.home||t.data.canUseFixAmount||this.data.selectedMethod.installmentId?void this.goPwd():(this.$toast.show("您的固定额度不足，请选用分期支付"),void this.goInstallment())}}else{var a=e({},this.data.params,{cancelCb:function(){},failCb:function(){}});new d.default(a).exec()}},mailoPay:function(t){var a=this,s=e({payId:this.data.params.payId,payType:"mailoPay",extraInfo:this.data.selectedMethod.data.extraInfo||"",installmentId:this.data.selectedMethod.installmentId||0,pwd:this.$pwd.data.hasVerifyPwd},t);this.$loading.show(),m.request("mwp.pay_cashier.maibeiPay",1,s).then(function(t){if("SUCCESS"!==t.ret)return a.$toast.show(t.msg||"网络错误"),a.$message.setData({numHasInput:[],numHasInputStr:""}),"FAIL_BIZ_230028"===t.ret?void a.$loading.hide():(a.$root.$logE("001010007",{payId:a.data.params.payId,payMethod:a.data.selectedMethod.payType}),a.$result.setData({isPaySuccess:"FAIL_BIZ_231006"===t.ret}),a.$loading.hide(),void a.routeGo("result"));a.payResult(t.data)})},goPwd:function(){var t=this;m.request("mwp.pay_cashier.passwordSet",1,{}).then(function(e){"SUCCESS"===e.ret?(t.$pwd.reSetData(e.data.isSet),t.routeGo("pwd"),e.data.isSet||t.setHeaderTitle("设置支付密码")):t.$toast.show(e.msg||"网络错误")})},afterPwd:function(){var t=this.data.payMethods.filter(function(t){return"mailoPay"===t.payType})[0];if(t.data.isNeedSmsVerify||t.data.isNeedSignProtocol)return this.$message.setData({isNeedSignProtocol:t.data.isNeedSignProtocol}),void this.routeGo("message");this.mailoPay()},payResult:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxQueryDelay:10,queryDelay:1};this.$loading.show();!function a(){e.maxQueryDelay-=1,m.request("mwp.pay_cashier.bfmResultQuery",1,{payId:t.data.params.payId}).then(function(s){if("SUCCESS"===s.ret&&2===s.data.status)return t.$root.$logE("001010006",{payId:t.data.params.payId,payMethod:t.data.selectedMethod.payType}),t.$result.setData({isPaySuccess:!0}),t.$loading.hide(),t.routeGo("result"),t.data.params.successCb&&t.data.params.successCb(),void setTimeout(function(){t.reSetAllData()},2e3);e.maxQueryDelay>0&&t.data.isShow&&t.data.showConfig.result?setTimeout(function(){a()},1e3*e.queryDelay):e.maxQueryDelay<=0&&t.$toast.show("支付结果查询失败")})}()},goInstallment:function(){var t=this;m.request("mwp.pay_cashier.stagingRender",1,{payId:this.data.params.payId,stagingNum:this.data.params.stagingNum,commodityStaging:!0}).then(function(e){"SUCCESS"===e.ret?(t.$installment.setInstallmentData(e.data.installmentList),t.routeGo("installment",e.data.repaymentDate)):t.$toast.show(e.msg||"网络错误")})},reSetAllData:function(){this.routeGo("home"),this.setData({isShow:!1}),this.$home.reSetAllData(),this.$installment.reSetAllData(),this.$pwd.reSetAllData(),this.$message.reSetAllData()},canClickFn:function(){return!!y&&(y=!1,setTimeout(function(){y=!0},1e3),!0)}},components:{header:o.default,loading:i.default,home:r.default,installment:h.default,message:l.default,pwd:u.default,result:p.default,toast:s.default}}; 
 			}); 
		define("components/cashier/mockPages/home/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},e={payMethods:[],selectedMethod:{},topbanner:[],isShowTopbanner:!1,isCopytopbannerText:!1,animationData:{}};exports.default={name:"home",data:function(){return t({},e)},methods:{setHomeData:function(e){var a=this;e.topbanner.length&&(e.isShowTopbanner=!0),this.setData(t({},e)),e.isShowTopbanner&&setTimeout(function(){a.topbannerScroll()},1e3)},goInstallment:function(){this.$parent.goInstallment()},paySubmit:function(){this.$parent.paySubmit()},hideTopbanner:function(){this.setData({isShowTopbanner:!1})},changeMethod:function(t){var e=this.data.payMethods.filter(function(e){return e.payType===t.detail.value})[0];"mailoPay"===t.detail.value&&this.$parent.data.selectedMethod.installmentPrice&&(e.data.price=this.$parent.data.selectedMethod.installmentPrice),this.$parent.setSelectMethod({payType:e.payType,data:e.data,price:e.data.price,hongbaoUse:e.data.hongbaoUse})},topbannerScroll:function(){var t=this;if(wx.createSelectorQuery){var e=wx.createSelectorQuery();e.select("#cashier-notice-scroll").boundingClientRect(),e.selectViewport().boundingClientRect(),e.exec(function(e){var a=e[0],n=e[1];if(a&&n&&a.width>n.width-70){var i=a.width/n.width*5e3;t.setData({isCopytopbannerText:!0});var o=wx.createAnimation({duration:i,timingFunction:"linear"});o.translateX("-"+a.width+"px").step();var r=o.export(),s=wx.createAnimation({duration:0});s.translateX(0).step();var c=s.export();!function e(){t.data.isShowTopbanner&&(t.setData({animationData:r}),setTimeout(function(){t.setData({animationData:c}),setTimeout(function(){e()},500)},i))}()}})}},reSetAllData:function(){this.setData(t({},e))}}}; 
 			}); 
		define("components/cashier/mockPages/installment/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},e={installmentList:[],isSlected:!1,selectedId:""};exports.default={name:"installment",data:function(){return t({},e)},methods:{changeInstallment:function(t){var e=this.data.installmentList.filter(function(e){return+e.installmentId==+t.detail.value})[0];this.setData({isSlected:!0,selectedId:t.detail.value}),this.$parent.setSelectMethod({payType:"mailoPay",price:e.totalPrice,installmentPrice:e.totalPrice,installmentDesc:e.number,installmentId:e.installmentId})},setInstallmentData:function(t){var e=this;this.data.isSlected&&this.data.selectedId&&t.map(function(t){return+t.installmentId==+e.data.selectedId?t.checked=!0:t.checked=!1,t}),this.setData({installmentList:t})},paySubmit:function(){this.$parent.paySubmit()},reSetAllData:function(){this.setData(t({},e))}}}; 
 			}); 
		define("components/cashier/mockPages/message/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},a=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/m")).default.MWP,e={isNeedSignProtocol:!1,isShowProtocol:!1,checkedProtocol:!0,numHasInput:[],numHasInputStr:"",canSendSms:!0,countdownStr:"60秒后重发",phoneNumTail:"",numArr:[1,2,3,4,5,6,7,8,9,"",0,"x"],protocolUrlArr:["2dl0106lk0hkj6gga8a1hie8ch15h","59159he92e7e70eg6fi42a5ali15h","4547g00e5d0k839leiijhj10gca19","018l19i4lge80gf3i0g2a13i7k0b0","7jkj70lcal9bkh3a0i4de3fik0bce","353hihf764hc13ied6dcib76lkb90","13g974ld7d62f8i699lakg47iakik","57892e3ail48i4ga3b9jdg075426g","647b96hj1jc36638b1k6ldjec9kjb","0je8ba66l5lhkhj1d2h16l510lkge","3b4h44lhlei1ib0c4a7dj070kef38","472chd378ie4l8j42l9ccfek8hifl","55bg45i83k3k4hkcj0lke03dlabi6","43gh4i89j6lg4ijdhb2e3ck477859","2ac8l1g0jb0f5ll2fd6349g94k6ga","52k96eg3ebi6l37laf60eg43jg8g2","0g274926ld1jg867597a5cb09hca3","54f9892e7jlch34alka2b970f6j2b","514a160cl03ab8b294f0a965201e0","861i73gjelc1hahh1afcgcik8jjjj"]};exports.default={name:"message",data:function(){return t({},e)},methods:{changeCheckedProtocol:function(){this.setData({checkedProtocol:!this.data.checkedProtocol}),6===this.data.numHasInput.length&&this.data.checkedProtocol&&this.$parent.mailoPay({verifyCode:this.data.numHasInputStr})},sendSms:function(){var t=this;a.request("mwp.pay_cashier.bfmFirstUseWithSms",1,{payId:this.$parent.data.params.payId}).then(function(a){if("SUCCESS"===a.ret){t.$parent.$toast.show(a.data.msg),t.setData({canSendSms:!1});var e=60;!function a(){setTimeout(function(){if((e-=1)<=0)return e=60,void t.setData({canSendSms:!0});t.setData({countdownStr:e+"秒后重发"}),a()},1e3)}()}else t.$parent.$toast.show(a.msg||"网络错误")})},numTap:function(t){var a=t.target.dataset.num;if(""!==a&&!("x"!==a&&this.data.numHasInput.length>=6)){var e=this.data.numHasInput;if("x"===a?e.pop():e.push(a),this.setData({numHasInput:e,numHasInputStr:e.join("")}),6===e.length){if(this.data.isNeedSignProtocol&&!this.data.checkedProtocol)return void this.$parent.$toast.show("您未同意借款合同");this.$parent.mailoPay({smsVerifyCode:this.data.numHasInputStr})}}},hideProtocol:function(){this.setData({isShowProtocol:!1})},showProtocol:function(){this.setData({isShowProtocol:!0})},reSetAllData:function(){this.setData(t({},e))}}}; 
 			}); 
		define("components/cashier/mockPages/pwd/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(exports,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},n=t(require("../../../../common/m")),s=t(require("../../common/aes.js")),i=t(require("../../common/rsa.js")),r=n.default.MWP,u={isSetPwd:!0,isReInput:!1,numHasInput:[],numHasInputAgain:[],hasVerifyPwd:"",numArr:[1,2,3,4,5,6,7,8,9,"",0,"x"]};exports.default={name:"pwd",data:function(){return a({},u)},methods:{numTap:function(t){var a=t.currentTarget.dataset.num;if(""!==a){var n=this.data.isReInput?"numHasInputAgain":"numHasInput";"x"!==a&&this.data[n].length>=6||("x"===a?this.data[n].pop():this.data[n].push(a),this.setData(e({},n,this.data[n])),this.handlerInput())}},handlerInput:function(){var t=this;if(6===this.data.numHasInput.length){if(!this.data.isSetPwd)return this.data.isSetPwd||0!==this.data.numHasInputAgain.length?void(this.data.isSetPwd||6!==this.data.numHasInputAgain.length||(this.data.numHasInput.join("")===this.data.numHasInputAgain.join("")?this.getSeedAndAes(this.data.numHasInput.join("")).then(function(e){t.setPwd(e).then(function(){t.$parent.afterPwd(e)})}):(this.$parent.$toast.show("两次密码输入不一致"),this.reSetData()))):(this.$parent.$toast.show("请再次输入支付密码"),void this.setData({isReInput:!0}));this.getSeedAndAes(this.data.numHasInput.join("")).then(function(e){t.verifyPwd(e).then(function(a){a&&t.$parent.afterPwd(e)})})}},getSeedAndAes:function(t){var e=this;return new Promise(function(a){r.request("mwp.pay_cashier.getSrandNum",1,{}).then(function(n){if("SUCCESS"===n.ret){var r=s.default.encrypt(n.data.randNum,t),u=i.default.encrypt(r);a(u)}else e.$parent.$toast.show(n.msg||"网络错误")})})},verifyPwd:function(t){var e=this;return new Promise(function(a){r.request("mwp.pay_cashier.passwordCheck",1,{pwd:t}).then(function(n){e.reSetData(),"SUCCESS"===n.ret?(e.$parent.$toast.show(n.data.desc),1001===n.data.type&&(e.setData({hasVerifyPwd:t}),a(t))):e.$parent.$toast.show(n.msg||"网络错误")})})},setPwd:function(t){var e=this;return new Promise(function(a){r.request("mwp.pay_cashier.passwordAdd",1,{pwd:t,pwdConfirm:t}).then(function(n){if("SUCCESS"!==n.ret)return e.$parent.$toast.show(n.msg),void e.reSetData();n.data.setResult&&(e.$parent.$toast.show("密码设置成功"),e.setData({hasVerifyPwd:t}),a(t))})})},reSetData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.isSetPwd;this.setData({isSetPwd:t,isReInput:!1,numHasInput:[],numHasInputAgain:[]})},reSetAllData:function(){this.setData(a({},u))}}}; 
 			}); 
		define("components/cashier/mockPages/result/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},t={isPaySuccess:!1};exports.default={name:"result",data:function(){return e({},t)},methods:{goHome:function(){this.$parent.routeGo("home")}}}; 
 			}); 
		define("components/countdown/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../common/m")).default.fn.sendMsg;exports.default={_timer:null,_listTimer:null,data:function(){return{format:"",countdown:0,countdownList:[]}},getTimeItems:function(t,i){t<0&&(t=0);var e=[],s=i.match(/[a-zA-Z]{1,3}/g),n=i.match(/[\u4e00-\u9fa5]+|[^a-zA-Z]/g)||[],o=this.getTime(t,i);return s.map(function(t,i){e.push({num:o[t],symbol:n[i]})}),e},getTime:function(t,i){var e=Math.floor(t/86400),s=Math.floor((t-24*e*60*60)/3600),n=Math.floor((t-60*(24*e*60+60*s))/60),o=Math.floor(t-60*(24*e*60+60*s+n));return t>=86400&&-1===i.indexOf("d")&&(s+=24*e),t>=3600&&-1===i.indexOf("h")&&(n+=60*s),t>=60&&-1===i.indexOf("m")&&(o+=60*n),{dd:this.formatTime(e),hh:this.formatTime(s),mm:this.formatTime(n),ss:this.formatTime(o),d:e,h:s,m:n,s:o}},formatTime:function(t){return t<10?"0"+t:t},setCountdownTimeItems:function(t,i){var e=i.format,s=i.runCallback,n=i.endCallback,o=parseInt(Math.ceil(t/1e3));s&&s(o),o<=0&&(clearTimeout(this._timer),n&&n(o));var r=this.getTimeItems(o,e);this.setData({timeItems:r})},initCountdown:function(t,i){var e=this;clearTimeout(this._timer);var s=(new Date).getTime(),n=t-s,o=n%1e3||0;this._timer=setTimeout(function(){e.initCountdown(t,i)},o),this.setCountdownTimeItems(n,i)},setCountdownTimeItemsList:function(){var t=this,i=[],e=0,s=(new Date).getTime();this.showTimeList.forEach(function(n){var o=n.format,r=n.endTime,a=parseInt(Math.ceil((r-s)/1e3));a<=0&&(a=0,e++);var m=t.getTimeItems(a,o);i.push(m)}),this.showTimeList.length===e&&clearTimeout(this._listTimer),this.setData({timeItemsList:i})},initCountdownList:function(t){var i=this;clearTimeout(this._listTimer);var e=(new Date).getTime(),s=(t-e)%1e3||0;this._listTimer=setTimeout(function(){i.initCountdownList(t)},s),this.setCountdownTimeItemsList()},onShow:function(){this.resume(),this.resumeList()},onHide:function(){this.stop(),this.stopList()},onUnload:function(){this.stop(),this.stopList()},stop:function(){this._timer=clearTimeout(this._timer)},stopList:function(){this._listTimer=clearTimeout(this._listTimer)},resume:function(){if(this.format&&this.endTime&&!this._timer){var t=this.endTime,i=this.format,e=this.runCallback,s=this.endCallback;this.initCountdown(t,{format:i,runCallback:e,endCallback:s})}},resumeList:function(){if(this.showTimeList&&this.showTimeList.length>0&&!this._listTimer){var t=this.maxEndTime;this.initCountdownList(t)}},reset:function(){if(!this.options)return console.error("[reset] can not apply reset function before init"),void t(new Error("[reset] can not apply reset function before init",{_author:"changsheng",threshold:1}));this.setUp(this.options)},resetList:function(){if(!this.listOptions)return console.error("[resetList] can not apply reset function before init"),void t(new Error("[resetList] can not apply reset function before init",{_author:"changsheng",threshold:1}));this.setUpList(this.listOptions)},setUp:function(t){var i=t.countdown,e=t.format,s=t.runCallback,n=t.endCallback,o=t.numClass,r=t.symbolClass,a=t.className,m=1e3*i,h=(new Date).getTime()+m;this.endTime=h,this.format=e,this.runCallback=s,this.endCallback=n,this.initCountdown(h,{format:e,runCallback:s,endCallback:n}),this.setData({numClass:o,symbolClass:r,className:a})},setUpList:function(t){this.countdownList=t.countdownList;var i=(new Date).getTime(),e=0;this.showTimeList=this.countdownList.map(function(t,s){var n=Number(t.countdown)||0,o=t.format,r=i+1e3*n;return r>e&&(e=r),{format:o,endTime:r}}),this.maxEndTime=e,this.initCountdownList(e)},methods:{init:function(t){this.options=t,this.setUp(t)},initList:function(t){this.listOptions=t,this.setUpList(t)}}}; 
 			}); 
		define("components/empty/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var l=["http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png","http://s11.mogucdn.com/mlcdn/c45406/171228_0bd48kal29c9e3bee9glabl672lab_514x257.png"];exports.default={data:function(){return{_images:l,type:0,text:"糟糕，页面被外星人绑架了",tip:null,button:null,callback:function(){}}},methods:{handleClick:function(l){this.data.callback(l)}}}; 
 			}); 
		define("components/end/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{isEnd:!1,placeholder:"加载中...",image:"",text:""}},onLoad:function(){var t=this.data,e={image:"http://s3.mogucdn.com/mlcdn/c45406/171227_33a1d0d23d42fghhlab06ic3gd4ia_453x25.png",test:""};this.setData(Object.assign(t,{image:e.image,text:t.text||e.text}))}}; 
 			}); 
		define("components/error/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t={REQUEST_ERROR:{image:"https://s16.mogucdn.com/p2/170106/upload_06ekl2b2khbklk257h5c057ccdelc_514x258.png",title:"网络加载失败",btnText:"点击刷新"},NOT_FOUND:{image:"https://s8.mogucdn.com/pic/150112/17y7h4_ieydcyjsha2dgndcmuytambqgiyde_410x354.png",title:"很抱歉，找不到你要访问的页面",btnText:"返回"}};exports.default={data:function(){return{}},methods:{init:function(e){this.type=e.type||"NOT_FOUND",this.callback=e.callback,this.setData({image:e.image||t[this.type].image,title:e.title||t[this.type].title,btnText:e.btnText||t[this.type].btnText})},onBtnClick:function(){"NOT_FOUND"===this.type?wx.navigateBack():this.callback&&this.callback()}}}; 
 			}); 
		define("components/fastBuy/components/address/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/m")).default.MWP;exports.default={data:function(){return{address:"",realName:"",mobile:"",province:"",city:"",area:"",addressId:""}},onShow:function(){},onLoad:function(){},methods:{formSubmitHandler:function(e){var t=e.detail.formId;this.$root.$logForm(t,1),this.chooseContact()},chooseContact:function(t){var o=this,r=this,s=this.$parent.dp;wx.canIUse&&wx.canIUse("chooseAddress")?wx.chooseAddress({success:function(t){console.log(t.errMsg);var o=t.userName,a=t.postalCode,n={province:t.provinceName,city:t.cityName,area:t.countyName,address:t.detailInfo,mobile:t.telNumber,zip:a,realName:o,marketType:"market_mogujie"};e.request("mwp.TradeWebLogistics.AddReceiveAddressActionlet","1",n).then(function(e){if(e.data){var t=e.data.addressId,o=s.reQueryString({addressId:t}),a=JSON.stringify({createOrderRequestStr:JSON.stringify(o),marketType:getApp().data.marketType});r.$emit("update",a)}else r.$parent.$toast.show(e.msg)})},fail:function(e){e.errMsg.endsWith("cancel")||(wx.canIUse&&wx.canIUse("openSetting")?wx.showModal({title:"",content:"需要打开小程序的设置重新授权获取您的收货地址",confirmText:"去设置",confirmColor:"#ff5777",success:function(e){e.confirm&&wx.openSetting({})}}):o.$parent.$toast.show("需要微信版本升级才能重新授权读取地址哟～"))}}):this.$parent.$toast.show("请升级微信版本")}}}; 
 			}); 
		define("components/fastBuy/components/coupon/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{title:"",list:[],isExpressList:null,activeKey:"",shopKey:"",$Scope:""}},onLoad:function(){},methods:{callClickCloseCoupon:function(t){this.$parent.setData({$couponList:{showCouponList:!1}})},formSubmitHandler:function(t){var e=t.detail.formId;this.$root.$logForm(e,2),this.delegate(t.detail)},delegate:function(t){this.$parent.delegate(t)}}}; 
 			}); 
		define("components/fastBuy/components/payBar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var a=e(require("../../../../common/m")),t=e(require("../../../../common/service/user")),n=require("../../../../mixins/logger/index"),r=e(require("../../../../common/service/url")),i=e(require("../../../cashier/index")),o=e(require("../../../../common/utils/cache")),s=a.default.MWP;exports.default={data:function(){return{isPresale:!1,lock:!1}},components:{cashier:i.default},onLoad:function(){},methods:{formSubmitHandler:function(e){var a=e.detail.formId;this.$root.$logForm(a,2),this.callClickSubOrder(e.detail)},callCashier:function(e){var a=this,t=e.payId,n=e.isChannelPinTuan,r=e.callBackUrl,i=e.msg,o=e.pinTuanTag,s=e.pinTuanUrl,l=e.noPintuan;this.$cashier.show({payId:t,successCb:function(){a.$parent.$emit("paySuccess",{noPintuan:l,callBackUrl:r,pinTuanTag:o,pinTuanUrl:s,msg:i}),"normal"!=a.$parent.data.type?(a.$parent.close(),a.setData({lock:!1})):a.navigateAfaterPay({isChannelPinTuan:n,callBackUrl:r})},cancelCb:function(){a.$parent.$emit("payCancel",{pinTuanTag:o,pinTuanUrl:s,msg:i}),"normal"!=a.$parent.data.type?(a.$parent.close(),a.setData({lock:!1})):a.navigatePayCancel({isChannelPinTuan:n})},failCb:function(){wx.showModal({title:"支付失败",content:"支付失败了，是否要重新支付？",cancelText:"放弃支付",confirmText:"重新支付",confirmColor:"#ff5777",success:function(t){if(t.confirm)a.callCashier(e);else{if("normal"==a.$parent.data.type)return void a.navigatePayCancel({isChannelPinTuan:n});a.$parent.close(),a.setData({lock:!1})}}})}})},tipCallBack:function(e){var a=this,t=this.data.type,n=e.payId,r=e.res,i=e.isChannelPinTuan,o=e.callBackUrl,s=e.noPinTuan,l=e.pinTuanTag,c=e.pinTuanUrl,d=e.itemTag;if(n)this.callCashier({payId:n,isChannelPinTuan:i,msg:r.msg,callBackUrl:o,noPinTuan:s,pinTuanTag:l,pinTuanUrl:c});else{if(this.setData({lock:!1}),"PT"===l&&"ZERO"===d)return void("normal"===t?this.$root.$redirect(o):this.$root.$navigate(o));wx.showModal({title:"支付失败",content:"呜~支付失败了，是否要重新支付？",cancelText:"暂不支付",confirmText:"重新支付",confirmColor:"#ff5777",success:function(e){if(e.confirm)a.navigatePayCancel({isChannelPinTuan:i}),a.$parent.close();else{if("normal"==a.$parent.data.type)return void wx.navigateBack();a.$parent.close()}}})}},callClickSubOrder:function(e){var a=this,i={},l=this.$parent,c=l.data.$address,d=this.data.lock,u="",p=this.$parent.dp;if(this.$root.$logE("016000501"),c.addressId)if(this.data.isPresale)l.$toast.show("请到蘑菇街PC或APP上购买预售商品");else{i=p.getCreateOrderParams();var h=s.getContext("mwp.TradeWebBuy.createOrderActionlet","1",{method:"POST"}),T=h.getCookies();i.extensions.cps=T.__cps||"",i.extensions.cpsUnion=T.__cps_union||"",i.extensions.dot=(0,n.getFromId)()+"_"+(0,n.getScene)(),u=JSON.stringify({createOrderRequestStr:JSON.stringify(i),marketType:"market_mogujie"}),d||(this.$parent.$loading.show(),this.setData({lock:!0}),h.request(u).then(function(e){var t=a.$parent.data.type;if(a.$parent.$loading.hide(),e&&e.data){o.default.remove("tick.recommend");var n=e.data,i=n.payId,s=n.payOrderId,l=p.channel,c=n&&n.createOrderShopOrderResDTOList&&n.createOrderShopOrderResDTOList,d=c[0]&&c[0].orderTag&&c[0].orderTag.inputTag,u="PT"===d&&"channel_pintuan"===l,h=n&&n.createOrderShopOrderResDTOList&&n.createOrderShopOrderResDTOList[0]&&n.createOrderShopOrderResDTOList[0].orderTag&&n.createOrderShopOrderResDTOList[0].orderTag.itemTag,T=p.pintuanReqDTO&&p.pintuanReqDTO.tuanId||n.createOrderShopOrderResDTOList[0].shopOrderId,f=a.$root.query.acm,m=a.$root.query.cparam,$=a.$root.query.liveParams,g=r.default.pinshare({tuanId:T}),O=!0,P=u?g:r.default.payresult({payOrderId:s});a.$parent.$loading.hide(),f&&(P+="&acm="+f),m&&(P+="&cparam="+m),$&&(P+="&liveParams="+$),c.length&&c.forEach(function(e){return"PT"!=(e.orderTag&&e.orderTag.inputTag)||(O=!1,!1)});var C={payId:i,res:n,isChannelPinTuan:u,callBackUrl:P,noPinTuan:O,pinTuanTag:d,pinTuanUrl:g,itemTag:h};if(c[0]&&c[0].pinTuanResDTO&&c[0].pinTuanResDTO.tuanMessage)return void a.$parent.$toast.show(c[0].pinTuanResDTO.tuanMessage,2500,a.tipCallBack(C));a.tipCallBack(C)}else{if(a.$parent.$loading.hide(),a.setData({lock:!1}),"FAIL_BIZ_BIZ_FREE_COUPON_USED"==e.ret)return void wx.showModal({title:"异常提示",content:e.msg,showCancel:!1,confirmText:"确定",confirmColor:"#ff5777",success:function(e){e.confirm&&("normal"==t?wx.navigateBack():a.$parent.close())}});a.$parent.$toast.show(e.msg||"系统异常")}}).catch(function(e){a.$parent.$loading.hide(),t.default.showUserError(e)||a.$parent.$toast.show(e.message)}),console.log(i))}else l.$toast.show("请添加收货地址！")},navigateAfaterPay:function(e){var a=this.$parent.data.type,t=e.callBackUrl;"normal"==a?this.$root.$redirect(t):this.$root.$navigate(t)},navigatePayCancel:function(e){"normal"==this.$parent.data.type&&(e.isChannelPinTuan?this.$root.$redirect(r.default.pintuanOrderList({orderStatus:"all"})):this.$root.$redirect(r.default.orderList({orderStatus:"all"})))}}}; 
 			}); 
		define("components/fastBuy/components/realname/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{requiresRealname:!1,hasRealname:!1,policy:null,name:null,identity:null}},goRealNameClicked:!1,onShow:function(){if(this.goRealNameClicked){this.$parent.$toast.show("正在更新实名认证信息");var e=JSON.stringify({createOrderRequestStr:JSON.stringify(this.$parent.dp.params),marketType:getApp().data.marketType});this.$emit("update",e),this.goRealNameClicked=!1}},methods:{goRealName:function(e){var t=this,a=getCurrentPages()[getCurrentPages().length-1].route;wx.navigateToMiniProgram({appId:"wx26550136c4b70208",path:"/pages/act/index?pageName=realname/addsuccinctly&redirect="+encodeURIComponent(a)+"&appId="+getApp().data.appId,success:function(e){t.goRealNameClicked=!0},fail:function(e){wx.showModal({title:"出错了",content:e.errMsg,showCancel:!1})}})}}}; 
 			}); 
		define("components/fastBuy/components/shop/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../../common/m")),s=t(require("../../components/coupon/index")),a=t(require("../../../../components/imcall/index"));e.default.MWP;exports.default={components:{couponList:s.default,imCall:a.default},data:function(){return{shops:[],$couponList:{},showModifyNumberGroup:{},lockAdd:!1,lockSub:!1}},onLoad:function(){this.params=this.$parent.data.nextReqData},methods:{setShopOpt:function(t){var e=[];t.shops.forEach(function(t){e.push(t.shopIdEsc)}),this.$imCall.setImOpts({shopIds:e}),this.setData(t)},delegate:function(t){var e=t.target.dataset.type;"function"==typeof this[e]&&this[e](t)},someDelegate:function(t){var e=t.target.dataset.handler;"function"==typeof this[e]&&this[e](t)},formDelegate:function(t){var e=t.target.dataset.handler;"function"==typeof this[e]&&this[e](t)},formSubmitHandler:function(t){var e=t.detail.formId;this.$root.$logForm(e,1),this.delegate(t.detail)},showModifyNumber:function(t){var e=t.target.id,s=t.target.dataset.shop,a=this.data.shops,o=this.data&&this.data.showModifyNumberGroup||{};a.map(function(t){var a=t.skuGroupList||[];t.shopKey==s&&a.map(function(t){t.skuIdEsc==e&&(o[e]=!0)})}),this.setData({shops:a,showModifyNumberGroup:o})},callClickSub:function(t){var e=this,s=t.target,a=s.id,o=s.dataset.shop,i=s.dataset.number,r=void 0,n=void 0,u=this.$parent.dp;this.data.lockSub||(this.$root.$logE("016010002"),i<=1||(this.setData({lockSub:!0}),r=u.reQueryString({shopKey:o,skuId:a,number:--i}),n=JSON.stringify({createOrderRequestStr:JSON.stringify(r),marketType:"market_mogujie"}),this.$emit("update",{requeryDataStr:n,setLock:function(){e.setData({lockSub:!1})},callback:function(){e.setData({lockSub:!1}),u.reQueryString({shopKey:o,skuId:a,number:++i})}})))},callClickAdd:function(t){var e=this,s=t.target,a=s.id,o=s.dataset.shop,i=s.dataset.number,r=s.dataset.stock,n=void 0,u=void 0,p=this.$parent.dp,c=this.data.lockAdd;this.$root.$logE("016010002"),c||i!=r&&(this.setData({lockAdd:!0}),n=p.reQueryString({shopKey:o,skuId:a,number:++i}),u=JSON.stringify({createOrderRequestStr:JSON.stringify(n),marketType:"market_mogujie"}),this.$emit("update",{requeryDataStr:u,setLock:function(){e.setData({lockAdd:!1})},callback:function(){e.setData({lockAdd:!1}),p.reQueryString({shopKey:o,skuId:a,number:--i})}}))},callClickShopSale:function(t){var e=this.data.shops,s=t.target.dataset.shop,a=t.target.dataset.promotionKey,o=[];this.$scope;e.map(function(t){t.shopKey==s&&(o=t.promotionList)}),o.length<=1||(this.$couponList.setData({title:"请选择优惠券",shopKey:s,list:o,isExpressList:!1,activeKey:a,showCouponList:!0}),this.setData({showCouponList:!0}))},callClickExpress:function(t){var e=this.data.shops,s=t.target.dataset.shop,a=t.target.dataset.expressCode,o=[];e.map(function(t){t.shopKey==s&&t.logisticsList&&t.logisticsList.length>1&&t.logisticsList.map(function(t){o.push({promotionKey:t.expressCode,promotionDesc:t.expressName})})}),0!=o.length&&(this.$couponList.setData({title:"请选择快递",shopKey:s,list:o,isExpressList:!0,activeKey:a,showCouponList:!0}),this.setData({showCouponList:!0}))},chooseCouponItem:function(t){var e=t.target.id,s=void 0,a=void 0,o=this.$couponList.data.shopKey,i=t.target.dataset.activeKey,r="logisticsCode"==t.target.dataset.cat?"logisticsCode":"promotionKey",n={shopKey:o},u=this.$parent.dp;n[r]=e,s=u.reQueryString(n),a=JSON.stringify({createOrderRequestStr:JSON.stringify(s),marketType:"market_mogujie"}),this.$emit("update",{requeryDataStr:a,callback:function(){n[r]=i,u.reQueryString(n)}}),this.$couponList.setData({showCouponList:!1,isExpressList:null})},callClickTaxCompliance:function(t){var e=this,s=t.target.dataset.shopkey,a=this.$parent.data.shopTaxMap;a[s]||(a[s]=!0,this.setData({shopTaxMap:a},function(){setTimeout(function(){a[s]=!1,e.setData({shopTaxMap:a})},4e3)}))}}}; 
 			}); 
		define("components/fastBuy/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../common/m")),o=e(require("../../common/utils/cache")),s=e(require("../../components/loading/index")),i=e(require("../../components/toast/index")),a=e(require("../../components/mask/index")),r=e(require("./components/address/index")),n=e(require("./components/shop/index")),c=e(require("./tool/dataParser.js")),d=e(require("./components/payBar/index")),m=e(require("./components/coupon/index")),p=e(require("./components/realname/index")),u=e(require("../../common/utils/imgUrlTool")),l=e(require("../../common/service/user")),h=t.default.MWP;exports.default={components:{loading:s.default,address:r.default,shop:n.default,paybar:d.default,toast:i.default,couponList:m.default,mask:a.default,realname:p.default},data:function(){return{isShow:!1,$mask:{isShow:null},$address:{},$shop:{},$couponList:{},operationList:[],promotionList:[],selectedPromotionList:[],totalPrice:0,$paybar:{},nextReqData:{},shopComments:{},hasData:!1,shopTaxMap:{},$realname:{}}},dp:null,excMsg:{ptFull:"FAIL_BIZ_VALIDATE_PINTUAN_IS_CAN_NOT_BUY"},onShow:function(){},methods:{init:function(e){var t=this;this.dp=null,this.setData({isShow:!0,shopComments:{},noMask:e&&e.noMask||!1,type:e&&e.type||"half"}),this.$shop.setShopOpt({shops:[],showModifyNumberGroup:{},lockAdd:!1,lockSub:!1}),this.$paybar.setData({totalPriceStr:"",isPresale:!1,lock:!1}),this.$on("hideDialog",function(){t.setData({isShow:!1}),t.$mask.hide()}),e=Object.assign({},e,{ptpCnt:this.$parent.ptpData.ptp_url}),this.getParamsFromCache(e),this.$shop.$off("update"),this.$shop.$on("update",function(e){t.requestData(e.requeryDataStr,e.callback,e.setLock)}),this.$address.$off("update"),this.$address.$on("update",function(e){t.requestData(e)}),this.$realname.$off("update"),this.$realname.$on("update",function(e){t.requestData(e)}),this.$mask.show()},close:function(){this.setData({isShow:!1}),this.$mask.hide()},getParamsFromCache:function(e){var t=void 0;try{t=o.default.get("buy.buyParams"),this.dp=new c.default(e);var s=JSON.stringify({createOrderRequestStr:JSON.stringify(this.dp.changeParams(t)),marketType:getApp().data.marketType});o.default.remove("buy.buyParams"),this.requestData(s)}catch(e){console.log(e)}},requestData:function(e,t,o){var s=this,i=this.toArray,a=this.toPrice,r=this.data.shopComments,n=!1,c=this.$shop.data.showModifyNumberGroup||{},d=this.dp;this.$loading.show(),h.request("mwp.TradeWebBuy.confirmOrderActionlet","1",e,{method:"POST"}).then(function(e){if(s.$loading.hide(),e.data){var m=e&&e.data||{},p=m.address||{},u=m.haigouIdentity,l=m.shopGroupList,h=[],f=void 0,g=void 0,P=0,y=void 0,L=0,D="",k=void 0,$=void 0,S=i(m.promotionList),v="";m.operationList.map(function(e){"choosePromotion"==e.operationName&&(f=!0),"chooseAddress"==e.operationName&&(g=!0)}),l.map(function(e){var t={},o=i(e.skuGroupList),r=[],m=!1;y=e.stage?e.stage.goodsPrice:0,t.logisticsList=i(e.logisticsList),t.promotionList=i(e.promotionList),t.selectedLogistics=e.selectedLogistics||{},t.postage=e.selectedLogistics.postage>=0?a(e.selectedLogistics.postage):"0.00",t.selectedPromotionKey=e.selectedPromotionList&&e.selectedPromotionList[0]&&e.selectedPromotionList[0].promotionKey||"",t.selectedPromotionDesc=e.selectedPromotionList&&e.selectedPromotionList[0]&&e.selectedPromotionList[0].promotionDesc||"",t.selectedDiscountFee=e.selectedPromotionList&&e.selectedPromotionList[0]&&e.selectedPromotionList[0].discountFee||0,t.selectedPromotionDiscount=a(t.selectedDiscountFee),t.shopKey=e.shopKey,t.shopName=e.shopName,t.shopIdEsc=e.shopIdEsc,t.buyerComment=e.buyerComment,t.totalPrice=a(e.totalPrice),t.firstStagePrice=e.stageList,t.sellerUserId=e.sellerUserIdEsc||e.shopIdEsc||"",t.extensions=e.extensions||{},e.stageList&&e.stageList.map(function(e){if("first"===e.name&&(t.firstStagePrice=a(e.goodsPrice)),"last"===e.name){t.lastStagePrice=a(e.goodsPrice);var o=new Date(1e3*e.beginTime);t.beginTime=Date.format(o,"MM月dd日HH:mm:ss")+"开始支付尾款"}}),t.zero=d.pintuanReqDTO&&d.pintuanReqDTO.hasQualification,e.extensions&&e.extensions.shopOriginPrice&&(t.shopOriginPrice=a(e.extensions.shopOriginPrice)),o.map(function(e){var t={};t.imgUrlHttps=s.getCutImage(e.imgUrlHttps),t.itemIdEsc=e.itemIdEsc,t.skuIdEsc=e.skuIdEsc,t.promotionList=i(e.promotionList),t.quantity=e.quantity,t.inventory=e.inventory,t.selectedPromotionList=i(e.selectedPromotionList),t.title=e.title,t.showOriginPrice=e.skuPrice!==e.skuNowPrice,t.skuPrice=a(e.skuPrice),t.skuNowPrice=a(e.skuNowPrice),t.skuAttrList=e.skuAttrList,t.redPacketPrice=e.redPacketDTO&&a(e.redPacketDTO.price),t.redPacketDesc=e.redPacketDTO&&e.redPacketDTO.desc,t.showModifyNumber=c[e.skuIdEsc],t.isWareHouse=e.extensions&&"WAREHOUSE"==e.extensions.itemTypeTag,e.extensions&&e.extensions.freight&&(m=e.extensions.freight),r.push(t),P+=e.quantity,e.operationList.map(function(e){"modifySkuQuantity"==e.operationName&&(t.canModifyNumber=!0)})}),t.skuGroupList=r,t.freight=m,h.push(t),n=e.tagsDTO&&"YS"==e.tagsDTO.itemProcessTag||!1,e.operationList.map(function(o){"chooseShopPromotion"==o.operationName&&e.promotionList.length>1&&(t.chooseShopPromotion=!0),"chooseExpress"==o.operationName&&e.logisticsList.length>1&&(t.chooseExpress=!0),"addComment"==o.operationName&&(t.addComment=!0)})}),L=m.selectedPromotionList&&m.selectedPromotionList[0]&&m.selectedPromotionList[0].discountFee||0,D="¥"+a(n?y:m.totalPrice),k=m.selectedPromotionList&&m.selectedPromotionList[0]&&m.selectedPromotionList[0].promotionKey||"",$=m.selectedPromotionList&&m.selectedPromotionList[0]&&m.selectedPromotionList[0].promotionDesc||"",v=m.redPacketDTO?"支付时最高可再减"+a(m.redPacketDTO.price)+"元":"",s.$address.setData({address:p.address||"",realName:p.realName||"",mobile:p.mobile||"",province:p.province||"",city:p.city||"",area:p.area||"",addressId:p.addressId||""}),u&&s.$realname.setData({requiresRealname:!0,identity:u.identity,policy:u.policy,name:u.name,hasRealname:!(!u.identity||!u.name)}),s.$shop.setShopOpt({shops:h,shopComments:r,isPresale:n,showModifyNumberGroup:c,shopTaxMap:s.data.shopTaxMap}),s.$paybar.setData({totalPriceStr:D,isPresale:n,num:P,payRedpacket:v}),s.$couponList.setData({title:"请选择优惠券",list:m.promotionList,isExpressList:!1,activeKey:k,$Scope:s.$scope,showCouponList:!1}),s.setData({hasData:!0,choosePromotion:f,chooseAddress:g,selectedPromotionKey:k,selectedPromotionDesc:$,promotionList:S,discountFee:L,discountFeeStr:"-¥"+a(L),nextReqData:d.parseParams(m)}),o&&"function"==typeof o&&o()}else wx.showModal({title:"",content:e.msg||"系统异常",confirmColor:"#ff5777",showCancel:!1,success:function(e){if(e.confirm)if(s.data&&s.data.hasData)t&&"function"==typeof t&&t();else{if("normal"==s.data.type)return void wx.navigateBack();s.close()}}})}).catch(function(e){s.$loading.hide(),l.default.showUserError(e)||s.$toast.show(e.message)})},resetData:function(e){this.setData({nextReqData:this.dp.parseParams(e)})},toPrice:function(e){return(e/100).toFixed(2)},toArray:function(e){return Array.from?Array.from(e):Array.prototype.slice.call(e)},getCutImage:function(e){return u.default.getWidthSuffix(e,144)},callClickAllSale:function(e){var t=e.target.dataset.promotionKey,o=this.data.promotionList;o.length<=1||this.$couponList.setData({title:"请选择优惠券",shopKey:"",list:o,isExpressList:!1,activeKey:t,showCouponList:!0})},delegate:function(e){var t=e.target.dataset.type;"function"==typeof this[t]&&this[t](e)},formSubmitHandler:function(e){var t=e.detail.target.dataset.handler,o=e.detail.formId;this.$root.$logForm(o,2),"function"==typeof this[t]&&this[t](e.detail)},chooseCouponItem:function(e){var t=e.target.id,o=void 0,s=void 0,i=this.dp,a=e.target.dataset.activeKey;o=i.reQueryString({promotionKey:t}),s=JSON.stringify({createOrderRequestStr:JSON.stringify(o),marketType:getApp().data.marketType}),this.requestData(s,function(){i.reQueryString({promotionKey:a})}),this.$couponList.setData({showCouponList:!1})},getComment:function(e){var t=e.detail.value,o=e.target.id;this.data.shopComments[o]=t},setComment:function(e){var t=this.data.shopComments,o=this.data.$shop,s=e.target.id;o.shopComments=t,this.dp.reQueryString({shopKey:s,shopComments:t}),this.setData({shopComments:t,$shop:o})},callClickFastBuy:function(){this.setData({isShow:!1}),this.$mask.setData({isShow:null})}}}; 
 			}); 
		define("components/fastBuy/tool/dataParser.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),s=(function(t){t&&t.__esModule}(require("../../../common/m.js")),function(){function s(e){t(this,s),this.skuPtp={},this.skuPtpCnt={},this.skuLiveParam={},this.skuExtensions={},this.shopExtensions={},this.skuPintuan={},this.params=null,this.extensions={cps:"",cpsUnion:"",sourceMarket:e&&e.sourceMarket||"weixin"},this.channel="",this.certificate="",this.activityId="",this.activityType="",this.orderFrom="",this.platFormType="",this.sourceMarket=e&&e.sourceMarket||"weixin",this.marketType="",this.pintuanReqDTO=null,this.ptpCnt=e.ptpCnt}return e(s,[{key:"changeParams",value:function(t){var e=this,s={},i=[],o=[],r=this;return o=t.shops||[],this.sourceMarket=t.sourceMarket||this.sourceMarket,this.channel=t.channel||"",this.certificate=t.certificate||"",this.activityId=t.activityId||"",this.activityType=t.activityType||"",this.orderFrom=t.orderFrom||"",this.platFormType=t.platFormType||"H5",this.marketType=t.marketType||"market_mogujie",o.map(function(s){var o={},n=[];(s.skus||[]).map(function(t){var s={};s.quantity=t.number,s.skuId=t.stockId||t.skuId||"",s.extensions={ptp:t.ptp,ptpCnt:t.ptpCnt,sourceMarket:e.sourceMarket},t.liveParams&&(s.extensions.liveParams=t.liveParams,e.skuLiveParam[s.skuId]=t.liveParams),"cart"!=e.orderFrom&&(s.extensions.ptpCnt=e.ptpCnt),t.pinTuan&&(s.pintuanReqDTO=t.pinTuan,e.skuPintuan[s.skuId]=t.pinTuan),t.activityReqDTO&&(s.activityReqDTO=t.activityReqDTO),s.promotionKeyList=t.itemProId?[t.itemProId]:t.promotionKeyList,e.skuPtp[s.skuId]=t.ptp,e.skuPtpCnt[s.skuId]=t.ptpCnt,e.skuLiveParam[s.skuId]=t.liveParams,n.push(s)}),o.comment=s.comment||"",o.extensions=s.extensions||{sourceMarket:e.sourceMarket},o.logisticsCode=s.logisticsCode||"",o.promotionKeyList=s.promotionKeyList||[],o.createOrderSkuGroupReqDTOList=n,t.pinTuan&&(r.pintuanReqDTO=t.pinTuan,o.pintuanReqDTO=t.pinTuan),i.push(o)}),s={addressId:t.addressId||0,promotionKeyList:t.promotionKeyList||[],channel:this.channel,extensions:{orderFrom:this.orderFrom},marketType:this.marketType,createOrderShopGroupReqDTOList:i},this.platFormType&&(s.platFormType=this.platFormType),this.sourceMarket&&(s.extensions.sourceMarket=this.sourceMarket,this.extensions.sourceMarket=this.sourceMarket),this.modouUse&&(s.modouUse=this.modouUse),this.orderFrom&&(this.extensions.orderFrom=this.orderFrom),this.certificate&&(s.extensions.certificate=this.certificate,this.extensions.certificate=this.certificate),this.activityId&&(s.extensions.activityId=this.activityId,this.extensions.activityId=this.activityId),this.activityType&&(s.extensions.activityType=this.activityType,this.extensions.activityType=this.activityType),s}},{key:"parseParams",value:function(t){var e=this,s=t.shopGroupList||[],i=[],o=this.sourceMarket,r=this,n={};return s.map(function(t){var s=t.skuGroupList||[],n=t.selectedLogistics,a=[],p="";p=t.tagsDTO&&t.tagsDTO.itemTypeTag?t.tagsDTO.itemTypeTag:t.tagsDTO&&t.tagsDTO.itemProcessTag?t.tagsDTO.itemProcessTag:"",s.map(function(t){var s=t.quantity,i=t.skuIdEsc,n=[].concat(t.selectedPromotionList[0]&&t.selectedPromotionList[0].promotionKey||""),p=t.extensions&&t.extensions.itemTypeTag||"",u={skuId:i,quantity:s,promotionKeyList:n,extensions:{ptp:r.skuPtp[i],ptpCnt:e.skuPtpCnt[i],sourceMarket:o}};e.skuLiveParam[i]&&(u.extensions.liveParams=e.skuLiveParam[i]),"cart"!=e.orderFrom&&(u.extensions.ptpCnt=e.ptpCnt),p&&(u.extensions.itemTypeTag=p),e.skuPintuan[i]&&(u.pintuanReqDTO=e.skuPintuan[i]),t.activityResDTO&&(u.activityReqDTO=t.activityResDTO),a.push(u)});var u={shopKey:t.shopKey,comment:t.buyerComment||"",extensions:p?{identifyTag:p,sourceMarket:o}:{sourceMarket:o},logisticsCode:n&&n.expressCode||"",promotionKeyList:[].concat(t.selectedPromotionList[0]&&t.selectedPromotionList[0].promotionKey||""),createOrderSkuGroupReqDTOList:a};r.pintuanReqDTO&&(u.pintuanReqDTO=r.pintuanReqDTO),i.push(u)}),n={addressId:t.address&&t.address.addressId,promotionKeyList:[].concat(t.selectedPromotionList[0]&&t.selectedPromotionList[0].promotionKey||""),channel:this.channel,extensions:r.extensions||t.extensions||{},platFormType:r.platFormType,createOrderShopGroupReqDTOList:i},this.params=n,n}},{key:"reQueryString",value:function(t){var e=this.sourceMarket,s=this.params.createOrderShopGroupReqDTOList,i=this.params.promotionKeyList;return delete this.params.eventType,t.shopKey?s.map(function(s,i){var o=s.createOrderSkuGroupReqDTOList,r=s.promotionKeyList;delete s.eventType,t.shopKey&&s.shopKey===t.shopKey&&(t.promotionKey&&(r[0]=t.promotionKey,s.eventType=4),t.logisticsCode&&(s.logisticsCode=t.logisticsCode),s.extensions=t.openPresale?{identifyTag:"YS",sourceMarket:e}:{sourceMarket:e},s.comment=t.shopComments?t.shopComments[t.shopKey]:s.comment,o.map(function(e){var s=e.skuId;delete e.eventType,t.skuId&&s===t.skuId&&(e.quantity=t.number,e.eventType=2)}))}):(t.promotionKey&&(i[0]=t.promotionKey,this.params.eventType=5),t.addressId&&(this.params.addressId=t.addressId,this.params.eventType=1)),this.params}},{key:"getCreateOrderParams",value:function(){try{this.extensions.did=wx.getStorageSync("mgj.did")}catch(t){console.log(t)}return this.params}}]),s}());exports.default=s; 
 			}); 
		define("components/floatTip/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{scrollTop:0,windowHeight:0,scrollTopRange:600,showFloatTip:null}},initFloatTip:function(t){this.setWindowHeight(),this.setData({info:t})},setWindowHeight:function(){var t=this;wx.getSystemInfo({success:function(o){console.log(o),t.setData({scrollTopRange:o.windowHeight})},fail:function(t){console.log(t),sendMsg(t,{_author:"changsheng",threshold:1})}})},methods:{handleShowHideTip:function(t){var o=.5*this.data.scrollTopRange,s=this.data.showFloatTip;t>=o&&!s?this.setData({showFloatTip:!0}):t<o&&s&&this.setData({showFloatTip:!1})}}}; 
 			}); 
		define("components/footprintdialog/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){for(var e={},n=t.length-1;n>=0;n--){var i=t[n];i.img=o.default.getGoodsRatioSuffix(i.img,160,"1:1"),(e[i.date]||(e[i.date]=[])).push(i)}return Object.keys(e).map(function(t){return{date:t,goods:e[t]}})}Object.defineProperty(exports,"__esModule",{value:!0});var o=t(require("../../common/utils/imgUrlTool")),n=t(require("../../common/utils/footprint")),i=t(require("../empty/index"));exports.default={data:function(){return{isShow:null,zIndex:100,$empty:{type:12,text:"你还没有足迹~"}}},components:{empty:i.default},onShow:function(){this.readData()},readData:function(){var t=n.default.read();this.setData({groups:e(t)})},init:function(t){this.$mask=t.$mask},methods:{hideDialog:function(){var t=this;this.setData({isShow:!1}),setTimeout(function(){t.setData({isShow:null})},300)},onInnerClick:function(){},showDialog:function(){this.$mask&&this.$mask.show(),this.setData({isShow:!0})},onClean:function(t){var e=this,o=t.detail.formId;o&&this.$root.$logForm(o,2),wx.showModal({title:"清空足迹",content:"你确定要清空足迹吗？",cancelColor:"#666666",confirmColor:"#ff5777",success:function(t){t.confirm&&(n.default.clean(),e.readData())}})}}}; 
 			}); 
		define("components/gamePop/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../mask/index"));exports.default={name:"gamePop",components:{mask:e.default},data:function(){return{info:null,showInfo:!1,showContent:!0}},onLoad:function(){var e=this;this.$on("hideDialog",function(){e.close()})},onReady:function(){},methods:{render:function(e,t){!1!==t?this._renderWin(e):this.setData({info:e,showContent:t})},_renderWin:function(e){var t={bg:"//s10.mogucdn.com/mlcdn/c45406/170519_8423gkead9849gjehhh8gh6jj1ih4_630x714.png",title:"恭喜你中奖!"},o=e.data.giftContent;switch(e.content=o,e.giftType){case"platformCoupon":case"shopCoupon":t.title="恭喜获得"+o.giftName;break;case"card":case"itemGift":case"welfareItem":break;case"platPackage":t.title="恭喜获得平台券礼包";break;case"shopPackage":t.title="恭喜获得店铺券礼包";break;case"userQual":break;case"goodsGift":t.title="恭喜获得"+o.giftName,e.content.image=o.picUrl,e.content.name=o.giftName,e.btnType=1,e.btnLink="//act.mogujie.com/award/lottery/getgift?userRecordId="+idtourl(o.userRecordId)+"&refer="+encodeURIComponent(window.location.href);break;case"memberCard":t.title="恭喜你获得会员卡!",t.btnType=1;break;case"movieTicket":t.title="恭喜你获得电影票!",t.btnType=1}this._mix(t,e),this.setData({info:e,showContent:!0})},_mix:function(e,t){for(var o in e)t[o]=t[o]?t[o]:e[o]},open:function(){this.$mask.show(),this.setData({showInfo:!0})},close:function(){this.$mask.hide(),this.setData({showInfo:!1}),this.$parent.$emit("popClose")},closeBtn:function(e){if(e.target.dataset&&"close"==e.target.dataset.href)this.close();else{var t=e.target.dataset.href;t&&(this.$root.$logE("016000565",{activityCode:this.data.info&&this.data.info.activityCode}),this.$root.$redirect(t))}}}}; 
 			}); 
		define("components/gameUtil/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("../../common/service/user.js")),i=e(require("../../components/toast/index")),s=e(require("../../common/m")).default.MWP;exports.default={data:function(){return{}},components:{toast:i.default},onLoad:function(e){},methods:{init:function(e){switch(e.mwp){case"mock":this.env=s.Env.Mock;break;case"dev":this.env=s.Env.Develop;break;case"pre":this.env=s.Env.PreRelease}},listenData:function(e,i,o,t){var a=this,c=!t||!1!==t.needLogin;this.isShowTip=!(!t||!0!==t.isShowTip);var r=!(!t||!0!==t.isRisk);t.loginSuccess=t.loginSuccess||function(){},t.loginFail=t.loginFail||function(){},r&&(i.platform="sp"),s.request(e.name,e.version,i,{method:"POST",env:a.env}).then(function(e){var i="";if(e&&e.ret==s.Code.SessionInvalid)i="noLogin";else if(e&&e.ret==s.Code.Success)i="win";else if(e&&/^FAIL_BIZ_/.test(e.ret))switch(i="noWin",e.ret){case"FAIL_BIZ_3001":i="noWin";break;case"FAIL_BIZ_7001":i="noQual";break;case"FAIL_BIZ_1005":case"FAIL_BIZ_8002":i="limit";break;case"FAIL_BIZ_7003":i="risk";break;case"FAIL_BIZ_70022":i="awardLimit";break;case"FAIL_BIZ_1003":case"FAIL_BIZ_1002":i="noWin2";break;default:i="noWin3"}else i="noWin4";o({status:i,data:e.data,msg:e.msg}),"noLogin"!=i&&"win"!=i&&a.showTip(e.msg),"noLogin"==i&&c&&n.default.ensure(t.loginSuccess,t.loginFail)}).catch(function(e){o({status:"noWin4"}),a.showTip()})},showTip:function(e){this.isShowTip&&this.$toast.show(e||"网络错误，请稍后重试～",800,function(){})}}}; 
 			}); 
		define("components/getCoupon/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var o=t(require("../../common/m")),i=t(require("../../common/utils/imgUrlTool")),e=t(require("../../common/service/user.js")),n=o.default.MWP,a=o.default.MCE;exports.default={name:"getCoupon",tabLock:0,_now:Date.now||function(){return(new Date).getTime()},data:function(){return{img:"",boxHeight:"180rpx"}},onLoad:function(){},onReady:function(){},methods:{setCoupon:function(t){var o=this;this.link=t.link,this.relationKey=t.relationKey,this.$toast=t.$toast,this.pid=t.pid||"56251",this.isLogin=!1,this.getCouponMwpApi=t.getCouponMwpApi||"mwp.diana.couponLaunch",this.getCouponMwpVersion=t.getCouponMwpVersion||"2",e.default.ensure().then(function(){o.isLogin=!0,a.get({pid:o.pid},!0).then(function(t){var e=t.list[0];o.relationKey=e.relationKey,o.setData({img:i.default.getWidthSuffix(e.img,700)})}).catch(function(t){})}).catch(function(e){o.setData({img:i.default.getWidthSuffix(t.img,700)})})},getCoupon:function(){var t=this,o=this.getCouponMwpApi||"mwp.diana.couponLaunch",i=this.getCouponMwpVersion||"2";n.request(o,i,{relationKey:this.relationKey,platform:"app"}).then(function(o){var i="";i=o&&"SUCCESS"===o.ret?"领券成功！快去我的-优惠券查看":o.msg||"系统繁忙，请稍后重试",t.$toast&&t.$toast.show(i)}).catch(function(o){var i="系统繁忙，请稍后重试";o.isUserError&&(i="需要授权登陆，才能领优惠券哟~"),t.$toast&&t.$toast.show(i)})},couponSubmitHandler:function(t){var o=this,n=this._now();if(!(n-this.tabLock<2e3)){this.tabLock=n;var s=t.detail.formId;this.$root.$logForm(s,2),this.$root.$logE("016000192",{modName:"____领券模块e事件____"}),this.link?this.$root.$redirect(this.link):this.isLogin?this.getCoupon():e.default.ensure().then(function(){o.isLogin=!0,a.get({pid:o.pid},!0).then(function(t){var e=t.list[0];o.relationKey=e.relationKey,o.setData({img:i.default.getWidthSuffix(e.img,700)}),o.getCoupon()}).catch(function(t){})}).catch(function(t){var i="系统繁忙，请稍后重试";t.isUserError&&(i="需要授权登陆，才能领优惠券哟~"),o.$toast&&o.$toast.show(i)})}}}}; 
 			}); 
		define("components/imcall/getBusinessId.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../common/m")),n=e(require("../../common/im/index")),r=t.default.Promise,u={},o={},i=function(e){var n=e.shopIdList;return o[n]?o[n]:t.default.MWP.request("mwp.wechat_callback_service.getOrCreateBusinessAccount","1",e).then(t.default.MWP.filterResult).then(function(e){return o[n]=null,e},function(e){throw console.error("getBusinessId error",e),o={},e})};exports.default=function(){var e=[],t={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(n){u[n]?t[n]=u[n]:e.push(n)}),e.length<=0?r.resolve(t):n.default.getAppNum().then(function(n){var o={appId:n,shopIdList:e.join(",")};return i(o).then(function(e){return e?(t=Object.assign(t,e),u=Object.assign(u,e),t):{}},function(e){return new r(function(e,t){setTimeout(function(){i(o).then(e).catch(t)},2e3)})})})}; 
 			}); 
		define("components/imcall/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../common/m")),s=t(require("../../common/im/notice")),n=t(require("../../common/im/index")),i=t(require("../../common/service/user")),o=t(require("./getBusinessId")),a=t(require("./onlineStatus")),r=["orderDetail","orderRefund"];exports.default={data:function(){return{class:"",text:"",style:"opacity: 0;position: absolute; width: 100%; height: 100%;line-height: 100%;top: 0;left: 0;display: block;text-align: center;z-index: 99;",isLogin:!0,useBusinessId:!0,type:1,shopIds:null,useIM:null,shopId:null,businessIds:{},allStatus:{},showCard:!1,img:"",path:"",title:"",userId:null,convId:null,session:"",allocateType:1,goodsId:null,fromPage:null,fromType:null,activityId:null,channelId:null}},onLoad:function(){var t=this;this.showIM(),wx.getSetting&&wx.getSetting({success:function(e){var s=e.authSetting;s&&!1===s["scope.userInfo"]&&(console.log("login true"),t.setData({isLogin:!1}))}})},showIM:function(){var t=this.data.useIM;return null!==t?t:(t=s.default.useIM(),this.setData({useIM:t}),t)},verDiff:function(t,e){for(var s=t.split("."),n=e.split("."),i=0;i<=s.length;i++){if(parseInt(s[i])>parseInt(n[i]))return 1;if(parseInt(s[i])<parseInt(n[i]))return-1}return 0},methods:{setImOpts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.img&&e.path&&e.title&&(e.showCard=!0),this.setData(e,function(){t.setBusinessInfo()})},setBusinessInfo:function(){var t=this,e=this.data;if(!this.showIM()){var s=[];e.shopIds&&e.shopIds.length>0?s=e.shopIds:e.shopId&&(s=s.concat(e.shopId));var i=this.data.type;[0,1,2,3].indexOf(e.type)>-1&&(i=e.type),1!==i&&3!==i||n.default.getisMin().then(function(e){e?t.setData({useBusinessId:!1}):(0,o.default)(s).then(function(e){console.log("getBusiness:",t.data,e);var s=t.data.businessIds;s=Object.assign({},s,e),t.setData({businessIds:s,useBusinessId:!0})}).catch(function(){console.error("get BusinessId error twice")})}),2!==i&&3!==i||(0,a.default)(s).then(function(e){var s=t.data.allStatus;s=Object.assign({},s,e),t.setData({allStatus:s})}).catch(function(t){console.error("get online status error twice")})}},bindContact:function(t){var s=t.detail,n=s.path,i=s.query;n&&"/"!==n&&(n=n.replace(/^\/\//i,"/"),this.$root.$navigate(n+"?"+e.default.qs.stringify(i)))},doLogin:function(){i.default.init().catch(function(){console.log("IM need User login")})},noBusiness:function(){this.setBusinessInfo(),wx.showModal({content:"客服连接失败，请重试",showCancel:!1,confirmColor:"#ff4422"})},callContact:function(t){s.default.readMsg(),this.$root.$navigate("/pages/im/contact/index")},preventDefault:function(){},toggleTap:function(t){var s=t.currentTarget.dataset,n=s.shopid,i=s.userid,o=s.convid,a=s.allocatetype,u=s.goodsid,l=s.frompage,d=s.fromtype,c=s.activityid,f=s.channelid;if(a&&(a=r.indexOf(l)>0?2:1),n||i||o){var h={};n&&(h.shopId=n),i&&(h.userId=i),o&&(h.convId=o),a&&(h.allocateType=a),u&&(h.goodsId=u),d&&(h.fromType=d),c&&(h.activityId=c),f&&(h.channelId=f);var g="/pages/im/chat/index?"+e.default.qs.stringify(h);console.log(g),this.$root.$navigate(g)}else this.$root.$navigate("/pages/im/index")}}}; 
 			}); 
		define("components/imcall/onlineStatus.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../common/m")),n=e(require("../../common/im/index")),r=t.default.Promise,u={},o={},s=function(e){var n=e.shopIdList;return u[n]?u[n]:u[n]=t.default.MWP.request("mwp.imgolf.shopOnlineStatus","1",e).then(t.default.MWP.filterResult).then(function(e){return u[n]=null,e},function(e){throw console.error("getStatus error",e),u={},e})};exports.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],u={};return e.map(function(e){o[e]?u[e]=o[e]:t.push(e)}),t.length<=0?r.resolve(u):n.default.getAppId().then(function(n){var r={appId:n,shopIds:t.join(",")};return s(r).then(function(t){var n=t.shopOnlineStatus;return console.warn("getStatus",e,n),t?(u=Object.assign(u,n),o=Object.assign(o,n),u):{}},function(){return s(r)})})}; 
 			}); 
		define("components/imnotice/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("../../common/im/notice")),t=e(require("../../common/im/index")),o=e(require("../notice/index"));exports.default={components:{notice:o.default},data:function(){return{$notice:{icon:"https://s10.mogucdn.com/mlcdn/c45406/170830_3baie3i2jl9haa0l297b0g0571ahc_136x136.png",title:null,desc:null}}},onLoad:function(){t.default.getNotify().then(function(e){e&&n.default.init().catch(function(e){console.error("IM login fail:",e)})})},onShow:function(){var e=this;n.default.onMsg(function(n){e.show({title:n.shopName||"",desc:n.content||"",businessId:n.businessId,trigger:e.trigger,cancel:e.cancel})})},onHide:function(){n.default.offMsg()},methods:{show:function(e){this.$notice.show(e)},trigger:function(){n.default.readMsg(1)},cancel:function(){console.log("cancel")}}}; 
 			}); 
		define("components/loading/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"Loading",_timer:null,data:function(){return{show:!1}},onLoad:function(){},onReady:function(){},methods:{show:function(){var t=this;this._timer&&clearTimeout(this._timer),this._timer=setTimeout(function(){t._timer=null,t.setData({show:!0})},500)},hide:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this.setData({show:!1})}}}; 
 			}); 
		define("components/mask/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"Mask",data:function(){return{isShow:null,zIndex:99}},onLoad:function(){},onReady:function(){},methods:{show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.zIndex||this.data.zIndex,n=t.opacity;this.setData({isShow:!0,zIndex:i,opacity:n,amimation:!0})},showWithoutAnimation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.zIndex||this.data.zIndex,n=t.opacity;this.setData({isShow:!0,zIndex:i,opacity:n,amimation:!1})},hide:function(){var t=this;this.setData({isShow:!1}),setTimeout(function(){t.setData({isShow:null,opacity:null})},400)},forceHide:function(){this.setData({isShow:null,opacity:null})},onMaskClick:function(){this.$parent.$emit("hideDialog")}}}; 
 			}); 
		define("components/meiliSwiper/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function t(t,i){var e=[],r=!0,a=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(r=(n=s.next()).done)&&(e.push(n.value),!i||e.length!==i);r=!0);}catch(t){a=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return e}return function(i,e){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},r=t(require("../../common/utils/imgUrlTool")),a=t(require("../../common/m")).default.MCE;exports.default={data:function(){return{list:[],makeupKey:"",indicatorDots:!0,indicatorColor:"#fff",indicatorActiveColor:"#ff4422",autoplay:!0,interval:5e3,duration:400,circular:!0,boxBgColor:"none",boxHeight:"230rpx",boxPadding:0,boxMargin:0,swiperWidth:"750rpx",swiperHeight:"230rpx",swiperBoxShadow:"none",itemBorderRadius:"",maxCount:10,ptpC:""}},onLoad:function(){this.lazyData(),this.makeup()},onReady:function(){},methods:{makeup:function(){var t=this;this.$on("__makeup_done__",function(i,e,r){var a=t.data&&t.data.makeupKey||"",o=a?a+"_config":"";if(r&&a&&e&&e[a]){var n=e[a].list||[],s=e[a].info||{},l=e[o]&&e[o].list&&e[o].list[0]||{};t._transData(n,s,l)}})},lazyData:function(){var t=this;this.$on("__lazy-data__",function(i,e,r){if(r&&t.data&&t.data.pids&&t.data.pids.length>0&&e){var a=t.data.pids[0]||"",o=a&&e&&e[a]&&e[a].list||[];t._transData(o)}})},mceGet:function(t,i){var e=this;t&&t.pid?(this.setData({list:[]}),a.get(t,!i).then(function(i){var r=i.list||[],a=i.info||{};console.log(i),e._transData(r,a),console.log("________swiper请求（get）"+t.pid+"成功：",i)}).catch(function(i){console.log("________swiper请求（get）"+t.pid+"失败：",i)})):console.log("________swiper请求（get）pid不能为空！")},_transData:function(t,a,o){var n=[],s=[],l=this.data.maxCount,u={};if(t&&t.length>0){t=t.slice(0,l);var d=!0,f=!1,c=void 0;try{for(var _,p=t.entries()[Symbol.iterator]();!(d=(_=p.next()).done);d=!0){var h=i(_.value,2),g=h[0],m=h[1];m.suffixImage=m.image?r.default.getWidthSuffix(m.image,750):"",n.push(m.acm),s.push(g)}}catch(t){f=!0,c=t}finally{try{!d&&p.return&&p.return()}finally{if(f)throw c}}a&&o&&(u=this._setComponentConfig(a,o)),this.$root.$logE("0x00000000",{modName:"____"+this.data.ptpC+"____",acms:n,indexs:s}),this.setData(e({list:t},u))}},_setComponentConfig:function(t,i){var e={};i=this._deleteEmptyValue(i),Object.assign(t,i);var r=function(){var i="",r="";if(1===arguments.length)i=arguments[0],r=arguments[0];else{if(!(arguments.length>=2))return;i=arguments[0],r=arguments[1]}void 0!==t[i]&&null!==t[i]&&""!==t[i]&&(e[r]=t[i])};return t&&(r("boxBgColor"),r("boxHeight"),r("boxPadding"),r("boxMargin"),r("swiperWidth"),r("swiperHeight"),r("swiperBoxShadow"),r("itemBorderRadius"),r("indicatorColor"),r("indicatorActiveColor")),e},_deleteEmptyValue:function(t){var i={};for(var e in t)t[e]&&""!==t[e]&&(i[e]=t[e]);return i}}}; 
 			}); 
		define("components/notice/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={_timer:null,data:function(){return{show:!1,icon:null,title:"",time:5e3,y:0,desc:"",businessId:0,trigger:function(){},cancel:function(){}}},onHide:function(){this.hide()},methods:{tap:function(t){var i=t.target,e=this.data,n=e.trigger,s=e.cancel;i.dataset&&i.dataset.iscancel?s():n(),this.hide()},bindContact:function(t){var i=t.detail,e=i.path,n=i.query;e&&"/"!==e&&(e=e.replace(/^\/\//i,"/"),this.$root.$navigate(e+"?"+M.qs.stringify(n)))},show:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.$parent){var e=this.data.show;this.timer&&clearTimeout(this.timer),e?this.hide(function(){t._doShow(i)}):this._doShow(i)}},_doShow:function(t){var i=this;t.show=!0,this.setData(t,function(){i.setData({y:100});var t=i.data.time;i.timer=setTimeout(function(){i.hide()},t)})},hide:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.setData({y:0},function(){setTimeout(function(){t.setData({show:!1}),i()},200)})},start:function(t){t.touches.length>0&&(this.startY=t.touches[0].clientY)},end:function(t){if(t.changedTouches.length>0){var i=t.changedTouches[0].clientY,e=this.startY-i;if(0===e)return;e>35?((0,this.data.cancel)(),this.hide()):this.setData({y:100})}}}}; 
 			}); 
		define("components/qiangWall/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../common/utils/imgUrlTool")),i=t(require("../../common/utils/reminder")),s=t(require("../../common/m")),a=t(require("../countdown/index")),o=s.default.MWP;exports.default={components:{countdown:a.default},data:function(){return{list:[],nav:[],isRemindedObject:{},activeIndex:0,scrollLeft:0,leftTime:0,timeStatus:2,$countdown:{}}},onLoad:function(){this.reminder=new i.default(this.$root.$toast,this.$root.$loading)},onShow:function(){this.reminder.syncReminderData()},init:function(t){this.params={},t.bizKey&&(this.params.bizKey=t.bizKey),t.subBizKey&&(this.params.subBizKey=t.subBizKey),t.topId&&(this.params.topId=t.topId),t.topType&&(this.params.topType=t.topType),t.eventTime&&(this.params.eventTime=t.eventTime),t.source&&(this.params.source=t.source),this.requestGoods(this.params,!0)},requestGoods:function(t,e){var i=this;this.bottomStatus(!0,!1,!1),this.isLoading=!0,console.log("________本次快抢请求入参：",t),o.request("mwp.ferrari.getList","1.0",t).then(function(t){if(console.log("________本次快抢请求结果：",t),t&&t.data&&t.data.nav&&t.data.nav.length>0){var s=t.data.nav;e?i.renderNewNav(s):i.renderOldNav(s)}if(t&&t.data&&t.data.list&&t.data.list.length>0){var a=t.data.list;i.renderGoods(a),i.bottomStatus(!1,!1,!1)}else i.bottomStatus(!1,!0,!0);i.isLoading=!1}).catch(function(t){i.isLoading=!1,i.bottomStatus(!1,!0,!0)})},renderNewNav:function(t){for(var e=0,i=0,s=0,a=3,o={},n=0,r=0;r<t.length;r++){var d=t[r];o[d.dateDesc]?(t[r].isFirstDateDesc=!1,t[r].dateDescNum=n):(n++,o[d.dateDesc]=1,t[r].isFirstDateDesc=!0,t[r].dateDescNum=n),d.selected&&(e=r,i=this.computedScrollLeft(r,t),s=t[r].leftTime,a=t[r].status)}this.initCountdown(s||0),this.setData({nav:t,activeIndex:e,scrollLeft:i,leftTime:s,timeStatus:a})},renderOldNav:function(t){var e={},i=this.data.nav,s=this.data.activeIndex;t=t||i;for(var a=0;a<t.length;a++)e[t[a].startTime]=t[a];for(var o=0;o<i.length;o++){var n=i[o].startTime;e&&e[n]&&(i[o].statusDesc=e[n].statusDesc||"",i[o].leftTime=e[n].leftTime||0,i[o].status=e[n].status||3,i[o].dateDesc=e[n].dateDesc||"",i[o].timeDesc=e[n].timeDesc||"")}var r=i[s].leftTime,d=i[s].status;this.initCountdown(r||0),this.setData({nav:i,leftTime:r,timeStatus:d})},renderGoods:function(t){for(var i=[],s=[],a=[],o=[],n=0;n<t.length;n++){var r=t[n];r.image=r.image?e.default.getGoodsRatioSuffix(r.image,300,"1:1"):"",r.tagImg=r.tagImg?e.default.getWidthSuffix(r.tagImg,100):"",r.hasSold=r.total-r.left||0,r.schedule=0===r.left?"100%":0===r.hasSold?0:r.hasSold/r.total*100+"%",i.push(r.rushId),s.push(n),a.push(r.acm),o.push(r.iid)}this.setData({list:t,isRemindedObject:this.reminder.getReminderList(i)||{}}),this.$root.$logE("0x00000000",{modName:"____QIANG_WALL____",acms:a,indexs:s,iids:o})},getBoundingClientRect:function(){var t=this;wx.createSelectorQuery&&(wx.createSelectorQuery().select(".nav-item").boundingClientRect(function(e){t.nav_item_width=e.width||0}).exec(),wx.createSelectorQuery().select(".nav-date").boundingClientRect(function(e){t.nav_date_width=e.width||0}).exec())},computedScrollLeft:function(t,e){var i=0;try{var s=wx.getSystemInfoSync();i=s.screenWidth||s.windowWidth||0}catch(t){var a=wx.getSystemInfoSync();i=a.screenWidth||a.windowWidth||0}var o=i/750,n=Math.floor(50*o);return Math.floor(150*o)*t+n*(e[t].dateDescNum-1)||0},bottomStatus:function(t,e,i){var s=t?"正在加载...":"没有更多商品了~";this.$root.setData({$end:{placeholder:s,isEnd:e},isEmptyShow:i})},initCountdown:function(t){this.$countdown.init({format:"hh:mm:ss",countdown:t})},scopeToast:function(t){this.$root.$toast&&this.$root.$toast.show(t)},requestAddFollow:function(t){o.request("mwp.ferrari.addFollow","1.0",t).then(function(t){}).catch(function(t){})},methods:{goodsTapHandler:function(t){var e=t.currentTarget.dataset,i=e.rushid,s=e.href,a=e.acm;i&&this.requestAddFollow({rushId:i,type:1}),s&&this.$root.$navigate(s,{acm:a||""})},changeNavHandler:function(t){var e=t.currentTarget.dataset,i=e.index,s=e.time,a=e.left,o=e.status,n=this.computedScrollLeft(i,this.data.nav);if(i!==this.data.activeIndex&&!this.isLoading){this.initCountdown(a||0),this.setData({list:[],activeIndex:i,scrollLeft:n,leftTime:a,timeStatus:o});var r={};this.params.bizKey&&(r.bizKey=this.params.bizKey),this.params.subBizKey&&(r.subBizKey=this.params.subBizKey),this.params.source&&(r.source=this.params.source),r.eventTime=s,this.requestGoods(r,!1)}},formSubmitHandler:function(t){var e=this,i=t.detail.formId,s=t.detail.target.dataset.rushid;this.$root.$logForm(i,2),this.reminder&&!this.reminder.isReminded(s)?this.reminder.addReminder(s).then(function(t){if("success"===t.result){var i=e.data.isRemindedObject;i[s]=Date.now(),e.setData({isRemindedObject:i})}else t.result}).catch(function(t){}):this.reminder&&this.reminder.isReminded(s)?this.scopeToast("该商品您已设置过提醒~"):this.scopeToast("网络故障，请稍后重试！")},cancelBubbleHandler:function(t){}}}; 
 			}); 
		define("components/quickNavigation/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../mask/index")),i=t(require("../footprintdialog/index")),o=t(require("../cartComponent/index")),a=t(require("../../common/m")),s=t(require("../imcall/index")),n=t(require("../../common/service/url")),h=a.default.fn.sendMsg;exports.default={data:function(){return{isShowTop:!0,isNeedTop:!0,scrollTop:0,scrollTopRange:600,bottom:120,topShow:!1,entryShow:null,navStatus:"close",guideImage:"https://s10.mogucdn.com/mlcdn/c45406/170711_0gk13eg5gld0ddb016663lli28bfc_750x552.png",topImage:"http://s3.mogucdn.com/mlcdn/c45406/170607_542jddkeff0ceg0l7gh7cji40dc98_108x108.png",navImage:"http://s11.mogucdn.com/mlcdn/c45406/170607_36gj28a16508a9hcjf5i6f03dida8_108x108.png",closeImage:"http://s2.mogucdn.com/mlcdn/c45406/170607_5c4790367g1e2ee3b42026a1gllih_108x108.png",webImImage:"https://s10.mogucdn.com/mlcdn/c45406/170911_1f8kb6k4680j9h5g7gi4de1hajj9i_108x108.png",configsList:[{image:"http://s3.mogucdn.com/mlcdn/c45406/170607_1c1j7dfcih0bei34gk9djjkbdhg21_80x80.png",page:"home",text:"首页",name:"home",isShow:!!n.default.home},{image:"http://s11.mogucdn.com/mlcdn/c45406/170607_32g439e2gig2588dkgalf7jf1c49a_80x80.png",page:"footprint",text:"足迹",name:"foot",isShow:!0},{image:"https://s10.mogucdn.com/mlcdn/c45406/170607_7b7d927f81fhe9b2gibe3g06akl5f_80x80.png",page:"cart",text:"购物车",name:"cart",isShow:!0}],hasGuideShow:!1,webIm:null,isWebImTipsShow:null}},components:{mask:e.default,footPrintDialog:i.default,cartComponent:o.default,imCall:s.default},onLoad:function(){this.$on("hideDialog",this.hideEntry)},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var i=wx.getStorageSync("quickNavigateData");this.hasGuideShow=i&&i.hasGuideShow||!1,this.hasGuideShow=!0}catch(t){h(t,{_author:"changsheng",threshold:1})}this.$footPrintDialog.init({$mask:this.$mask}),e.webIm&&this.$imCall.setImOpts(e.webIm),this.setData({scrollTopRange:e.scrollTopRange||this.data.scrollTopRange,bottom:e.bottom||this.data.bottom,hasGuideShow:this.hasGuideShow||!1,webIm:e.webIm}),e.webIm&&!e.isWebImTipsHide&&wx.getStorage({key:"quickNavigation.webImTipsHide",success:function(e){e.data||t.initWebImTips()},fail:function(e){t.initWebImTips()}})},initWebImTips:function(){var t=this;setTimeout(function(){t.showWebImTips()},2e3),setTimeout(function(){t.hideWebImTips()},7e3)},showWebImTips:function(){this.setData({isWebImTipsShow:!0})},hideWebImTips:function(){var t=this;this.setData({isWebImTipsShow:!1}),setTimeout(function(){t.setData({isWebImTipsShow:null})},400)},hideGuide:function(){var t=this;this.hasGuideShow=!0,wx.setStorage({key:"quickNavigateData",data:{hasGuideShow:this.hasGuideShow},success:function(){t.setData({hasGuideShow:t.hasGuideShow})},fail:function(t){h(t,{_author:"changsheng",threshold:1})}})},methods:{setScrollTop:function(t){var e=this.data.scrollTopRange;t>=e&&!this.data.topShow?this.setData({topShow:!0}):t<e&&this.data.topShow&&this.setData({topShow:!1})},showEntry:function(){this.hideGuide(),this.$mask.show(),this.setData({entryShow:!0})},hideEntry:function(){var t=this;this.$mask.hide(),this.setData({entryShow:!1}),setTimeout(function(){t.setData({entryShow:null})},400)},onGuideClick:function(){this.hideGuide()},showCart:function(){this.$cartComponent.setData({hideEmptyButton:!0}),this.$cartComponent.init()},onNavClick:function(t){var e=t.currentTarget.dataset,i=e.page;switch(i){case"home":case"searchMiddle":this.$root.$redirect(i,{fromPage:e.fromPage});break;case"cart":this.$cartComponent.setData({hideEmptyButton:!0,noMask:!0}),this.$cartComponent.init();break;case"footprint":this.$footPrintDialog.showDialog()}},onImClick:function(t){wx.setStorage({key:"quickNavigation.webImTipsHide",data:!0})}}}; 
 			}); 
		define("components/raindrop/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../../common/m"),t=(e(i),e(require("../../common/utils/cache"))),s=(require("./lib/util"),e(require("../../components/toast/index"))),n=e(require("./stage/init")),r=e(require("./stage/preload")),o=e(require("./stage/jobmanage")),a=e(require("./stage/gamebegin")),u=e(require("./stage/raindrop")),h=e(require("./stage/events")),L=e(require("./stage/request")),l=e(require("./stage/gameover")),g=i.System.getSync("systemInfo");exports.default={components:{toast:s.default},data:function(){return{theme:"normal",screenWidth:g.screenWidth,screenHeight:g.screenHeight,showDialog:!1,isGameBegin:!1,isRaindropPage:!1,isShowWaitPage:!1,isShowCountDown:!1,isDropBegin:!1,isLastSceen:!1,duration:0,hitedNumber:0,lotterys:[],nextScreenTime:"",sponsorInfo:{},preloadImgs:[],goodsList:[],sessionId:""}},onLoad:function(e){"蘑菇街女装"===t.default.get("appName")&&(this.GLOBAL={},this.TIMEOUTID={},this.TIMEOUTID.waitingTimeID=null,this.TIMEOUTID.revokeID=null,this.TIMEOUTID.gameoverID=null,this.GLOBAL.repaintTicker=null,this.GLOBAL.loader=[],this.GLOBAL.firstLoad=!0,this.GLOBAL.isShowWaitPage=!1,this.GLOBAL.isShowCountDown=!1,this.GLOBAL.isGameBegin=!1,this.GLOBAL.isCheckScreen=!1,this.GLOBAL.isDropBegin=!1,this.GLOBAL.isGameOver=!1,this.GLOBAL.retryTimes=0)},onunload:function(){this.ctx=null,this.GLOBAL.repaintTicker.stop(),this.destroyTaskManage()},onShow:function(){if(this.GLOBAL.isGameBegin&&!this.GLOBAL.isCheckScreen||this.GLOBAL.isGameBegin&&0===this.GLOBAL.loader.length||this.GLOBAL.isGameBegin&&!this.GLOBAL.isDropBegin)this.GLOBAL.retryTimes++<2?(console.log("第"+this.GLOBAL.retryTimes+"加载"),this.init()):console.log("重载次数达到上限");else{if(this.GLOBAL.isGameBegin)return;this.init()}},onHide:function(){this._onHide()},methods:Object.assign(n.default,o.default,r.default,a.default,u.default,h.default,L.default,l.default)}; 
 			}); 
		define("components/raindrop/lib/assets.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Drops=[{id:"packet-1",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_0gef9gkkg197dhi84ljfd2d66bl04_138x190.png",w:138,h:190},{id:"packet-2",url:"https://s10.mogucdn.com/mlcdn/c45406/171127_09jgj8ie62e421fdelgbj2dj1g1aa_138x190.png",w:138,h:190},{id:"packet-3",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_549g9cfg044da752h9e2487cgi9k3_138x190.png",w:138,h:190},{id:"boom-1",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_1jkj1j8bcf5jcak5dglfcdcab3fe4_138x190.png",w:138,h:190},{id:"boom-2",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_5ial81bh8b7ea7612il2ggj15c55k_138x190.png",w:138,h:190}],exports.OtherAssets=[{id:"plus-1",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_0eig0e8gdhldfb9gljc65k1fc81j1_30x40.png",w:30,h:40},{id:"explosion-0",url:"https://s10.mogucdn.com/mlcdn/c45406/171123_6g44fa9a40gh7g23h65fafkab0bd8_120x104.png",w:120,h:104},{id:"explosion-1",url:"https://s10.mogucdn.com/mlcdn/c45406/171123_5b6gd9i58e3df2ij8feigcjjfbl33_130x112.png",w:130,h:112}],exports.DomAssets=[{id:"countdown-bg",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_0107k20hf9hak7l0b1bfjhil7ld1g_750x1334.png",w:750,h:1334},{id:"countdown-bg2",url:"  https://s10.mogucdn.com/mlcdn/c45406/171124_0jelf7540i82i67g2511380ddjde5_750x1334.png",w:750,h:1334},{id:"countdown-3",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_4lkbjh6k0ie8k2hfa5j5k4i3k1831_293x354.png",w:293,h:354},{id:"countdown-2",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_7d11k7l1gc17f00k476c0lf38h00k_293x354.png",w:293,h:354},{id:"countdown-1",url:"https://s10.mogucdn.com/mlcdn/c45406/171117_5lcaa1edf8c07kik4k34j3f1c3h15_293x354.png",w:293,h:354},{id:"cash-bg",url:"https://s10.mogucdn.com/mlcdn/c45406/171121_1g3jf0lk7ci3kjhcb46ke04aghab4_492x86.png",w:492,h:86},{id:"shopTicket-bg",url:"https://s10.mogucdn.com/mlcdn/c45406/171121_68i0e7kid4209jbf98fkfhcd44h57_492x86.png",w:492,h:86},{id:"plamtformTicket-bg",url:"https://s10.mogucdn.com/mlcdn/c45406/171121_6gkgklh5e0af8kda7id2hh47f29l2_492x86.png",w:492,h:86},{id:"reminder-1",url:"https://s10.mogucdn.com/mlcdn/c45406/171120_37f5j07i0ih4h9j54j3jc17a54acc_604x102.png",w:604,h:102},{id:"reminder-2",url:"https://s10.mogucdn.com/mlcdn/c45406/171120_1k4f403jk4akjac3jid4lg3d29f18_604x102.png",w:604,h:102}]; 
 			}); 
		define("components/raindrop/lib/taskManage.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:+new Date/1e3>>>0;if(e(this,n),r&&("[object Array]"!==Object.prototype.toString.call(r)||0!==r.length)){if("[object Array]"===Object.prototype.toString.call(r)){var o=!0,a=!1,u=void 0;try{for(var l,s=r.entries()[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=t(l.value,2),f=c[0],h=c[1];r[f]=this.parseDate(h)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}}else r=this.parseDate(r);this.schedules=[],"[object Array]"===Object.prototype.toString.call(r)?this.schedules=Object.assign([],this.uniqueArray(r)):this.schedules.push(r),this.serverTime=this.parseDate(i),this._now=+new Date/1e3>>>0,this.timeoutID=null}}return r(n,[{key:"uniqueArray",value:function(e){return Array.from(new Set(e))}},{key:"getSchedule",value:function(){return this.schedules}},{key:"parseDate",value:function(e){if("[object Date]"===Object.prototype.toString.call(e))return+new Date(e)/1e3>>>0;if("[object Number]"===Object.prototype.toString.call(e)){if(e/Math.pow(10,12)>>>0==1)return e/1e3>>>0;if(e/Math.pow(10,9)>>>0==1)return e;console.warn("时间格式不支持")}else console.warn("时间格式不支持")}},{key:"checkSchedule",value:function(e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=this.schedules.entries()[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=t(a.value,2),s=l[0],c=l[1];r[s]=c-e}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return this.diffList=r,this.parseDiffList(r)}},{key:"parseDiffList",value:function(e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e.entries()[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=t(a.value,2),s=(l[0],l[1]),c={};c.stamp=s,c.pole=s>0?1:-1,s=Math.abs(s),c.days=s/60/60/24>>>0,s-=24*c.days*60*60,c.hours=s/60/60>>>0,s-=60*c.hours*60,c.minitues=s/60>>>0,c.seconds=s%60,r.push(c)}}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}},{key:"getIntervalTime",value:function(){var e=this.checkSchedule(this.serverTime);return e.sort(function(e,t){e.stamp,t.stamp}),e}},{key:"_tick",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;this.timeoutID=setTimeout(function(){console.log("timeSpan",e),clearTimeout(r.timeoutID),e<=0?t():(e-=(+new Date/1e3>>>0)-r._now,r._now=+new Date/1e3>>>0,r._tick(e,t,n))},1e3*n)}},{key:"registerReminder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=this.getIntervalTime();if(0===(r=r.filter(function(e){return e.pole>0})).length)return!1;var n=r[0],i=!0,o=!1,a=void 0;try{for(var u,l=r[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;n.stamp>s.stamp&&(n=s)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return this._tick(n.stamp,e,t),n}},{key:"destroy",value:function(){console.log("注销任务监听"),clearTimeout(this.timeoutID)}}]),n}();exports.default=n; 
 			}); 
		define("components/raindrop/lib/ticker.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),i=function(){function i(e){t(this,i),this._targetFPS=e||30,this._interval=1e3/this._targetFPS,this._tickers=[],this._paused=!1,this._intervalId=null,this._lastTime=0,this._tickCount=0,this._tickTime=0,this._measuredFPS=0}return e(i,[{key:"start",value:function(t){if(!this._intervalId){this._lastTime=+new Date;var e,i=this,n=this._interval;e=function(){i._intervalId=setTimeout(e,n),i._tick()},this._paused=!1,e()}}},{key:"stop",value:function(){this._useRAF?(window.cancelAnimationFrame||window[browser.jsVendor+"CancelAnimationFrame"])(this._intervalId):clearTimeout(this._intervalId),this._intervalId=null,this._lastTime=0,this._paused=!0}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){this._paused=!1}},{key:"_tick",value:function(){if(!this._paused){var t=+new Date,e=t-this._lastTime,i=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1e3/(this._tickTime/this._tickCount)+.5>>0,this._tickCount=0,this._tickTime=0):this._tickTime+=t-this._lastTime,this._lastTime=t;for(var n=i.slice(0),a=0,s=n.length;a<s;a++)n[a].tick(e)}}},{key:"getMeasuredFPS",value:function(){return Math.min(this._measuredFPS,this._targetFPS)}},{key:"addTick",value:function(t){if(!t||"function"!=typeof t.tick)throw new Error("Ticker: The tick object must implement the tick method.");this._tickers.push(t)}},{key:"removeTick",value:function(t){var e=this._tickers,i=e.indexOf(t);i>=0&&e.splice(i,1)}},{key:"nextTick",value:function(t){var e=this,i={tick:function(n){e.removeTick(i),t()}};return e.addTick(i),i}},{key:"timeout",value:function(t,e){var i=this,n=(new Date).getTime()+e,a={tick:function(){(new Date).getTime()-n>=0&&(i.removeTick(a),t())}};return i.addTick(a),a}},{key:"interval",value:function(t,e){var i=this,n=(new Date).getTime()+e,a={tick:function(){var i=(new Date).getTime(),a=i-n;a>=0&&(a<e&&(i-=a),n=i+e,t())}};return i.addTick(a),a}}]),i}();exports.default=i; 
 			}); 
		define("components/raindrop/lib/util.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.Util={parseTask:function(t,r){var n=!0,o=!1,i=void 0;try{for(var a,u=t.entries()[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s=e(a.value,2),l=(s[0],s[1]);if(l.pole<0&&l.stamp+60*r>=0)return l}}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return!1},parseConfig:function(e){var t={},r=wx.getSystemInfoSync().model||"",n=r.indexOf("7 Plus")>-1,o=!/iPhone/i.test(r),i=[{number:4},{number:6},{number:8}],a=[{speed:10,fps:25},{speed:15,fps:30},{speed:18,fps:30}];for(var u in e)"density"===u?t=n?Object.assign(t,{number:4}):Object.assign(t,i[parseInt(e.density)-1]):"speed"===u?t=n?Object.assign(t,{speed:30,fps:30}):o?Object.assign(t,{speed:18,fps:15}):Object.assign(t,a[parseInt(e.speed)-1]):t[u]=e[u];return t},shuffle:function(e){for(var t=e.length-1;t>=0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e},isHited:function(e,t,r,n,o,i){return e>r&&e<r+o&&t>n&&t<n+i},isValidDate:function(e,t){var r=new Date(e),n=r.getYear(),o=(r.getMonth(),r.getDate());return!(t.getYear()!==n||!t.getMonth()||t.getDate()!==o)},generateStorageKey:function(e,t){var r=t.split(":")[0],n=t.split(":")[1],o=new Date(e);return o.setHours(r),o.setMinutes(n),(+o).toString()},setStorage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"visited";e&&("[object Number]"===Object.prototype.toString.call(e)&&(e=""+e),wx.setStorageSync(e,t))},getStorage:function(e){if(e)return"[object Number]"===Object.prototype.toString.call(e)&&(e=""+e),wx.getStorageSync(e)},removeStorage:function(e){if(e)try{wx.removeStorageSync(e||"")}catch(e){console.log(e)}},loadQueue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=0,n={},o=null;return new Promise(function(i,a){o=setTimeout(function(){a("下载图片超时")},1e3*t);var u=!0,s=!1,l=void 0;try{for(var c,f=e[Symbol.iterator]();!(u=(c=f.next()).done);u=!0)!function(){var t=c.value;wx.downloadFile({url:t.url,success:function(a){++r===e.length&&(i(n),clearTimeout(o)),n[t.id]=a.tempFilePath},fail:function(){a("下载图片失败")}})}()}catch(e){s=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw l}}})}}; 
 			}); 
		define("components/raindrop/stage/events.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../lib/util"),t=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../common/reminder/wxCustomReminder"));exports.default={touchstart:function(t){var i=this,o=t.touches[0].x,s=t.touches[0].y,r=!0;if(this.drops&&0!==this.drops.length)var a=setTimeout(function(){for(var t=i.drops.length-1;t>=0&&r;t--)e.Util.isHited(o,s,i.drops[t].x,i.drops[t].y,i.drops[t].w,i.drops[t].h)&&(i.dealhited(i.drops[t]),r=!1);clearTimeout(a)},0)},dealhited:function(e){var t=this;if(this.data.hitedNumber<this.gameConfig.limitNum){var i=this.data.hitedNumber;if(this.GLOBAL.collectNo>=this.gameConfig.intervalMaxNum)return void console.log("已达本次时间间隔内红包上限");e.isHited=!0,e.id.indexOf("packet")>-1?(this.initPlus(e.x,e.y),this.GLOBAL.collectNo++,this.setData({hitedNumber:++i}),this.$root.$logE("016000137",{sessionId:t.GLOBAL.logEkey,type:t.GLOBAL.logGameName,packetType:t.GLOBAL.logType,target:"redPacket"})):(this.initBooms(e.x,e.y),this.$root.$logE("016000137",{sessionId:t.GLOBAL.logEkey,type:t.GLOBAL.logGameName,packetType:t.GLOBAL.logType,target:"bomb"}))}else console.log("已达总红包上限")},setReminder:function(){var e=this,i={wxConfig:{reminderType:"single",bizType_xcx:"1212RedRainXCX",bizIds:""+this.GLOBAL.reminderTime,startTime:this.GLOBAL.reminderTime,aheadTime:10}};t.default.setReminder(i,function(t){"success"===t.status&&e.$root.$logE("016000249",{sessionId:e.GLOBAL.logEkey,type:e.GLOBAL.logGameName,packetType:e.GLOBAL.logType}),e.$toast.show(t.msg)})},closeLoetteryDialog:function(){this.setData({showDialog:!1,isGameBegin:!1})}}; 
 			}); 
		define("components/raindrop/stage/gamebegin.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){if(Array.isArray(e)){for(var o=0,t=Array(e.length);o<e.length;o++)t[o]=e[o];return t}return Array.from(e)}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../lib/util"),t=require("../lib/assets"),i=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../common/service/user.js"));exports.default={gameBegin:function(){var n=this;this.$root.$logE("016000195",{sessionId:n.GLOBAL.logEkey,type:n.GLOBAL.logGameName,packetType:n.GLOBAL.logType}),i.default.uid||n.$root.$logE("016000248",{sessionId:n.GLOBAL.logEkey,type:n.GLOBAL.logGameName,packetType:n.GLOBAL.logType});var a=parseInt(Math.random()*n.gameConfig.delayTime);o.Util.loadQueue([].concat(e(t.Drops),e(t.OtherAssets))).then(function(e){if(n.GLOBAL.unloaded=!1,n.GLOBAL.loader=e,n.GLOBAL.isShowWaitPage=!0,n.setData({isShowWaitPage:!0,duration:n.gameConfig.duration}),0===a)n.hideBeginCountDown(),n.revokeCountdown();else{n.TIMEOUTID.waitingTimeID=setTimeout(function(){clearTimeout(n.TIMEOUTID.waitingTimeID),n.hideBeginCountDown(),n.revokeCountdown()},1e3*a)}},function(e){console.log("加载canvas资源失败"),n.setData({isGameBegin:!1}),n.$root.$logE("016000234",{sessionId:n.GLOBAL.logEkey,type:n.GLOBAL.logGameName,packetType:n.GLOBAL.logType})})},hideBeginCountDown:function(){this.setData({isShowWaitPage:!1,isShowCountDown:!0})},revokeCountdown:function(){var e=this;this.GLOBAL.isShowCountDown=!0,this.TIMEOUTID.revokeID=setTimeout(function(){clearTimeout(e.TIMEOUTID.revokeID),e.$root.$logE("016100037",{sessionId:e.GLOBAL.logEkey,type:e.GLOBAL.logGameName,packetType:e.GLOBAL.logType}),e.initAnimate(),o.Util.setStorage(e.GLOBAL.storageKey)},3e3)}}; 
 			}); 
		define("components/raindrop/stage/gameover.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});require("../lib/util");var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../common/m")).default.MCE;exports.default={gameOver:function(){var e=this;this.GLOBAL.isGameOver||(this.GLOBAL.isGameOver=!0,this.setData({isDropBegin:!1}),this.data.lotterys.length>0?this.$root.$logE("016000516",{sessionId:e.GLOBAL.logEkey,type:e.GLOBAL.logGameName,packetType:e.GLOBAL.logType,status:"reward"}):this.$root.$logE("016000516",{sessionId:e.GLOBAL.logEkey,type:e.GLOBAL.logGameName,packetType:e.GLOBAL.logType,status:"nReward"}),this.fetchGoods(),this.TIMEOUTID.gameoverID=setTimeout(function(){clearTimeout(e.TIMEOUTID.gameoverID),e.GLOBAL.repaintTicker.stop(),e.ctx.clearRect(0,0,e.data.screenWidth,e.data.screenHeight),e.ctx.draw(),e.setData({showDialog:!0})},e.data.screenHeight/e.gameConfig.speed/e.gameConfig.fps*1e3-500))},fetchGoods:function(){var t=this,i=void 0;e.get({pid:90076}).then(function(e){i=e.list.splice(0,3),t.setData({goodsList:i})}).catch(function(){console.log("获取麦田数据失败")})},_destroy:function(){var e=this;Object.keys(this.TIMEOUTID).forEach(function(t,i){e.TIMEOUTID[t]&&clearTimeout(e.TIMEOUTID[t])}),this.GLOBAL.firstLoad=!1,this.GLOBAL.isGameOver=!1,this.GLOBAL.repaintTicker&&this.GLOBAL.repaintTicker.stop(),this.ctx&&(this.ctx.clearRect(0,0,this.data.screenWidth,this.data.screenHeight),this.ctx.draw(),this.ctx=null),this.setData({showDialog:!1,isGameBegin:!1,isRaindropPage:!1,isShowWaitPage:!1,isShowCountDown:!1,isDropBegin:!1})},_onHide:function(){this.GLOBAL.isGameBegin&&!this.GLOBAL.isGameOver?this._destroy():this.destroyTaskManage()}}; 
 			}); 
		define("components/raindrop/stage/init.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../common/m")),t=e.default.MCE;exports.default={init:function(){var i=this,n=this;this.$root.route.indexOf("pages/home/index");this.GLOBAL.collectNo=0,this.GLOBAL.repaintTicker=null,this.GLOBAL.onhideTimeoutID=null,e.default.getServerTime().then(function(e){var o=e.time;i.GLOBAL.serverTime=o,t.get({pid:89584}).then(function(e){n.checkScreen(e.list,o)}).catch(function(){n.setData({isGameBegin:!1}),console.log("获取麦田配置数据失败")})}).catch(function(e){console.log("获取服务器时间失败",e),n.setData({isGameBegin:!1})})}}; 
 			}); 
		define("components/raindrop/stage/jobmanage.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){var r=[],a=!0,i=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);a=!0);}catch(e){i=!0,n=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw n}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=require("../lib/util"),a=e(require("../lib/taskManage")),i=require("../lib/assets"),n=e(require("../../../common/m")).default.MCE;exports.default={registerTask:function(){var e=this,r=!0,a=!1,i=void 0;try{for(var n,s=this.taskManage.entries()[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var o=t(n.value,2),l=(o[0],o[1]),u=l.registerReminder(e.init.bind(e),2);if(u){var f=u.days,c=u.hours,h=u.minitues,g=u.seconds;console.log("离最近一场开始还有"+f+"天"+c+"小时"+h+"分钟"+g+"秒")}else l=null,console.log("当天游戏时间已过期")}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}},checkScreen:function(e,r){var i=+new Date(r);this.taskManage=[];var n=!0,s=!1,o=void 0;try{for(var l,u=e.entries()[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var f=t(l.value,2),c=f[0],h=f[1],g=1e3*h.startStamp,v=1e3*h.endStamp;if(i>g&&i<v){if(!this.saveCurrentInfo(g))return;return this.setData({sponsorInfo:h}),this.fetchGameConfig(),this.nextScreen(e,c),this.GLOBAL.isGameBegin=!0,void console.log("游戏开始")}if(i<g)return this.GLOBAL.firstLoad=!1,this.GLOBAL.recentTime=1e3*h.startStamp,this.taskManage.push(new a.default(h.startStamp,r)),void this.registerTask()}}catch(e){s=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(s)throw o}}},destroyTaskManage:function(){if(this.taskManage&&this.taskManage.length>0){var e=!0,t=!1,r=void 0;try{for(var a,i=this.taskManage[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var n=a.value;n.destroy(),n=null}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}},fetchGameConfig:function(){var e=this,t=this;n.get({pid:90212}).then(function(a){t.gameConfig=r.Util.parseConfig(a.list[0]),t.setData({isGameBegin:!0}),e.GLOBAL.isCheckScreen=!0,t.loadImgs(i.DomAssets,t.gameBegin.bind(t))}).catch(function(){console.log("获取游戏配置失败"),t.setData({isGameBegin:!1})})},nextScreen:function(e,t){var r="",a=e.length===t+1;if(a)r="赶紧去消费吧",a=!0;else{var i=new Date(1e3*e[t+1].startStamp),n=i.getDate(),s=this.GLOBAL.serverTime.getDate(),o=i.getHours(),l=i.getMinutes();l=l<9?"0"+l:l,r=n>s?"明日"+o+":"+l:"今日"+o+":"+l,a=!1,this.GLOBAL.reminderTime=e[t+1].startStamp}this.setData({isLastSceen:a,nextScreenTime:r})},saveCurrentInfo:function(e){var t=this,a=new Date(e),i=a.getHours(),n=a.getMinutes(),s=a.toLocaleDateString().replace(/\//g,"-");return i=i<9?"0"+i:i,n=n<9?"0"+n:n,this.GLOBAL.storageKey=e,this.GLOBAL.logEkey=s+"+"+i+":"+n,this.GLOBAL.logGameName="redPacket",this.GLOBAL.logType="activity",this.setData({sessionId:t.GLOBAL.logEkey}),"visited"!==r.Util.getStorage(this.GLOBAL.storageKey)||(console.log("红包雨: 本场已玩过"),!1)}}; 
 			}); 
		define("components/raindrop/stage/preload.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={loadImgs:function(i,o){this.imgloadedCallback=o,this.GLOBAL.imgAllMount=i.length,this.GLOBAL.imgLoadSucc=0,this.GLOBAL.imgLoadFail=0,this.setData({preloadImgs:i})},_imgOnLoad:function(i){this.GLOBAL.imgAllMount--,this.GLOBAL.imgLoadSucc++,this.GLOBAL.imgAllMount<=0&&(console.log("图片加载成功",this.GLOBAL.imgLoadSucc),console.log("图片加载失败",this.GLOBAL.imgLoadFail),this.imgloadedCallback())},_imgOnerror:function(i){this.GLOBAL.imgAllMount--,this.GLOBAL.imgLoadFail++,this.GLOBAL.imgAllMount<=0&&(console.log("图片加载成功",this.GLOBAL.imgLoadSucc),console.log("图片加载失败",this.GLOBAL.imgLoadFail),this.imgloadedCallback())}}; 
 			}); 
		define("components/raindrop/stage/raindrop.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function t(t,e){var r=[],i=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(i=(a=o.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){s=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(require("../lib/ticker")),i=require("../lib/util"),s=require("../lib/assets");exports.default={initPlus:function(t,e){this.plusIcons.push({x:t,y:e})},initBooms:function(t,e){this.booms.push({x:t,y:e,frameNumber:0})},initAnimate:function(){this.ctx=wx.createCanvasContext("canvas-2"),this.drops=[],this.booms=[],this.plusIcons=[],this.initDrops(),this.setData({isShowCountDown:!1,isDropBegin:!0,isRaindropPage:!0}),this.GLOBAL.isDropBegin=!0},mixBoomsInRedpackets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=Math.floor(this.gameConfig.number*t),r=this.gameConfig.number-e,i=[],n=[],a=[],o=[],h=!0,f=!1,l=void 0;try{for(var u,c=s.Drops[Symbol.iterator]();!(h=(u=c.next()).done);h=!0){var p=u.value;p.id.indexOf("packet")>-1?a.push(p):o.push(p)}}catch(t){f=!0,l=t}finally{try{!h&&c.return&&c.return()}finally{if(f)throw l}}for(var d=0;d<this.gameConfig.number;d++)i.length<r&&i.push(a[parseInt(Math.random()*a.length)]),n.length<e&&n.push(o[parseInt(Math.random()*o.length)]);return this.randomArrayPacketsBooms(i,n)},randomArrayPacketsBooms:function(e,r){for(var s=[],n=[],a={id:"",url:""},o=Math.abs(e.length-r.length);o-- >0;)n.push(a);if(e=i.Util.shuffle(e),r=i.Util.shuffle(r),e.length>r.length){r=i.Util.shuffle([].concat(t(r),n));for(var h=0;h<e.length;h++)s.push(e[h]),s.push(r[h])}else if(e.length<r.length){e=i.Util.shuffle([].concat(t(e),n));for(var f=0;f<r.length;f++)s.push(e[f]),s.push(r[f])}else for(var l=0;l<e.length;l++)s.push(e[l]),s.push(r[l]);return s.filter(function(t,e){return""!==t.id})},initDrops:function(){var t=this,e=Array.from(new Array(this.gameConfig.number),function(t,e){return e}),s=parseInt(this.data.screenWidth/this.gameConfig.number)-10,n=parseInt(this.data.screenHeight/this.gameConfig.number),a=null,o=null,h=this.mixBoomsInRedpackets(this.gameConfig.obstacleRatio||.6);this.offsetX=[],this.offsetXtmp=[],this.GLOBAL.traversalDirection=!0,i.Util.shuffle(e).forEach(function(e,r){o=h[r],a=.45,t.offsetX.push(s*r+20),t.drops.push({id:o.id,x:s*e+10,y:n*r-t.data.screenHeight-50,w:o.w*a,h:o.h*a,scale:a,angle:-200,url:o.url,tempFilePath:t.GLOBAL.loader[o.id]})}),this.fpsCount=0,this.GLOBAL.repaintTicker=new r.default(50),this.GLOBAL.repaintTicker.interval(this.repaint.bind(this),1e3/this.gameConfig.fps),this.GLOBAL.repaintTicker.start()},refreshCountDown:function(){var t=this.data.duration;--t<0?this.gameOver():(this.timeListener(),this.setData({duration:t}))},secondRandom:function(){var t=this,e=void 0;return t.GLOBAL.traversalDirection?t.offsetX.length>1?(i.Util.shuffle(t.offsetX),e=t.offsetX.pop(parseInt(Math.random()*t.offsetX.length)),t.offsetXtmp.push(e)):(e=t.offsetX[0],t.GLOBAL.traversalDirection=!1):t.offsetXtmp.length>1?(i.Util.shuffle(t.offsetXtmp),e=t.offsetXtmp.pop(parseInt(Math.random()*t.offsetXtmp.length)),t.offsetX.push(e)):(e=t.offsetXtmp[0],t.GLOBAL.traversalDirection=!0),e},drawDrops:function(t,e){e.y>=this.data.screenHeight&&this.data.isDropBegin&&(e.x=this.secondRandom(),e.y=-100,e.isHited=!1),t.save(),t.translate(e.x+e.w/2,e.y+e.h/2),t.rotate(200/Math.PI/180),t.scale(e.scale,e.scale),e.isHited?(e.x=-999,t.drawImage(e.tempFilePath,-9999,0)):t.drawImage(e.tempFilePath,-e.w/2,-e.h/2),e.y+=this.gameConfig.speed,t.restore()},drawPlus1:function(){if(!(this.plusIcons.length<1)){var t=!0,r=!1,i=void 0;try{for(var s,n=this.plusIcons.entries()[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var a=e(s.value,2),o=a[0],h=a[1];this.ctx.drawImage(this.GLOBAL.loader["plus-1"],h.x,h.y),h.y<30?this.plusIcons.splice(o,1):h.y-=10}}catch(t){r=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(r)throw i}}}},drawBoomsExplosion:function(){if(!(this.booms.length<1)){var t=!0,r=!1,i=void 0;try{for(var s,n=this.booms.entries()[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var a=e(s.value,2),o=a[0],h=a[1];h.frameNumber<2?(this.ctx.drawImage(this.GLOBAL.loader["explosion-"+h.frameNumber],h.x,h.y),h.frameNumber++):this.booms.splice(o,1)}}catch(t){r=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(r)throw i}}}},repaint:function(){this.ctx.clearRect(0,0,this.data.screenWidth,this.data.screenHeight),this.fpsCount++%this.gameConfig.fps==0&&this.refreshCountDown();var t=!0,e=!1,r=void 0;try{for(var i,s=this.drops[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var n=i.value;this.drawDrops(this.ctx,n)}}catch(t){e=!0,r=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw r}}this.drawPlus1(),this.drawBoomsExplosion(),this.ctx.draw()}}; 
 			}); 
		define("components/raindrop/stage/request.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../common/service/user.js")),o=e(require("../../../common/m")).default.MWP;exports.default={timeListener:function(){var e=this,t=e.GLOBAL.collectNo>e.gameConfig.intervalMaxNum?e.gameConfig.intervalMaxNum:e.GLOBAL.collectNo;e.data.duration%e.gameConfig.timeSpan==0&&t>0&&(e.requestMWP(t),e.GLOBAL.collectNo=0)},requestMWP:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this;t.default.uid&&o.request("mwp.diana.couponLaunch","3",{relationKey:a.gameConfig.RELATION_KEY,platform:"sp",collectNo:e}).then(function(e){e.data&&a.collectRedPackets(e.data)})},collectRedPackets:function(e){var t=this,o="";if(e&&e.promotionInfo&&e.promotionInfo.promotionType?o=e.promotionInfo.promotionType:console.log("后端结果返回失败",e),t.lotterys=t.data.lotterys.length>0?t.data.lotterys:[],"coupon"===o){var a=e.promotionInfo,n=a.couponType,r=a.cutPriceYuan,i=a.limitPriceYuan;t.lotterys.push({type:o,couponType:n,cutPriceYuan:r,limitPriceYuan:i}),t.setData({lotterys:t.lotterys})}else if("payPackage"===o){var c=e.promotionInfo.payPackageMoneyYuan;t.lotterys.push({type:o,payPackageMoneyYuan:c}),t.setData({lotterys:t.lotterys})}}}; 
 			}); 
		define("components/redPacket/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../common/m")),o=t(require("../../components/gamePop/index")),n=t(require("../../components/gameUtil/index")),i=t(require("../../components/toast/index")),a=t(require("../../components/countdown/index")),s=t(require("../../common/utils/cache")),c=e.default.MWP,r=e.default.MCE,l=(e.default.logger,e.default.fn.sendMsg),d=!1,u={coupon:"https://s10.mogucdn.com/mlcdn/c45406/170911_62bhb4lh4e2l16464a4jl76ljclld_630x714.png",couponPackage:"https://s10.mogucdn.com/mlcdn/c45406/170920_507hk0c1ggha2jekba9k83l5kllah_630x714.png"},h={coupon:"https://s10.mogucdn.com//mlcdn/c45406/171024_00flkc73iekdb4hdja6lhgei18e2l_630x714.png",couponPackage:"https://s10.mogucdn.com//mlcdn/c45406/171024_88agk22cce0g8bi4e90a32ee16e0j_630x714.png"};exports.default={_redPacketShowCount:0,mceInfo:{pid:"",lotteryRule:"",environment:"",countdownTime:"",activityCode:"",showXcx:"",failMsg:"",guideMsg:"",copyright:""},components:{gamePop:o.default,countdown:a.default,gameUtil:n.default,toast:i.default},data:function(){return{btnStatus:"",showRedPacket:!1,isTimeOut:!1}},onLoad:function(t){var e=this;switch(this.$on("popClose",function(){e.close()}),t.mwp){case"mock":this.env=c.Env.Mock;break;case"dev":this.env=c.Env.Develop;break;case"pre":this.env=c.Env.PreRelease}this.optionsEnvt=t.environment},methods:{render:function(t){var e=this;t&&t.pid&&(this.mceInfo.pid=t.pid,this._getMceInfo(function(){var t=s.default.get("appName");e.mceInfo.showXcx.indexOf(t)>-1&&e.canPlayedToday(function(t){t&&e._renderRPInfo()})}))},_getMceInfo:function(t){var e=this;d=!0,r.get({pid:this.mceInfo.pid}).then(function(o){if(d=!1,o.list&&o.list.length>0){var n=o.list[0];e.mceInfo=Object.assign(e.mceInfo,n),e.mceInfo.lotteryRule=n.lotteryRule?n.lotteryRule.split(";"):"",e.mceInfo.guideMsg=n.guideMsg?n.guideMsg.split(";"):"",e.mceInfo.showXcx=n.showXcx||"蘑菇街女装",t&&t()}}).catch(function(t){d=!1,console.log(t),l(t,{_author:"qiaoyi",threshold:1})})},_renderRPInfo:function(){var t=this.mceInfo,e=!1;this._redPacketShowCount>0&&this.resetRedPacket(),e="online"===t.environment||"test"===this.optionsEnvt,this.showFirstPop(t.lotteryRule,e)},showFirstPop:function(t,e){var o=this;this.$root.$logE("016000563",{activityCode:this.mceInfo.activityCode});var n={bg:"https://s10.mogucdn.com/mlcdn/c45406/170911_7cljhbi5gd2jbb1kge7h5i04i53ih_630x714.png"},i=this.mceInfo.countdownTime;this.setData({lotteryRule:t,showRedPacket:e,copyright:this.mceInfo.copyright}),e&&(this.setHasShowedToday(),this.$countdown.init({format:"ss",countdown:i,endCallback:function(){o.setData({isTimeOut:!0,guideMsg:o.mceInfo.guideMsg})}}),this.showGamePop(n,!1))},_doLottery:function(t){var e=this;this.$gameUtil.listenData({name:"mwp.aston.simpleGamePort",version:"2"},{activityCode:this.mceInfo.activityCode},function(o){switch(d=!1,o.status){case"noLogin":e.$gamePop.close();break;case"win":t&&t(o.data);break;case"limit":case"risk":case"noQual":e.$gamePop.close(),o.msg&&e.$toast.show(o.msg);break;case"noWin":e.$gamePop.close(),e.mceInfo.failMsg&&e.$toast.show(e.mceInfo.failMsg,3e3);break;default:e.$gamePop.close()}},{isShowTip:!1,needLogin:!0,loginSuccess:function(){console.log("授权成功"),d=!1},loginFail:function(){console.log("拒绝授权"),d=!1}})},clickStartBtn:function(t){var e=this;if(!d){var o=t.detail.formId;this.$root.$logForm(o,1);var n="front";this.setData({btnStatus:"front"}),this.$root.$logE("016000564",{activityCode:this.mceInfo.activityCode}),this.$countdown.stop(),this.btnAimationTimer=setInterval(function(){"front"===n?(e.setData({btnStatus:"back"}),n="back"):(e.setData({btnStatus:"front"}),n="front")},150),setTimeout(function(){e._doLottery(function(t){clearInterval(e.btnAimationTimer);var o=t.giftContent,n={status:"win",giftType:t.giftType,bg:u.couponPackage,btnType:1,btnLink:"close",data:t,activityCode:e.mceInfo.activityCode};switch(t.giftType){case"shopCoupon":n.title=o.hitPopTitle||"不错哦，店铺优惠券到手啦",n.text=o.shopName?o.shopName+"优惠券":"-店铺优惠券-",o.picUrl?(n.bg=u.coupon,n.btnLink=o.picUrl):n.bg=h.coupon;break;case"platformCoupon":n.title=o.hitPopTitle||"人品爆发，平台优惠券到手",n.text=o.description?o.description:"-平台通用优惠券-",o.picUrl?(n.bg=u.coupon,n.btnLink=o.picUrl):n.bg=h.coupon;break;case"platPackage":n.title=o.hitPopTitle||"恭喜你获得平台券大礼包",n.text=o.description?o.description:"-可到我的优惠券列表查看-",o.couponPackageUrl?(n.bg=u.couponPackage,n.btnLink=o.couponPackageUrl):n.bg=h.couponPackage;break;default:n.title=o.hitPopTitle||"恭喜中奖",n.text=o.description?o.description:"",n.bg=h.couponPackage}e.close(),e.showGamePop(n)})},500)}},showGamePop:function(t,e){void 0===e?this.$gamePop.render(t):this.$gamePop.render(t,e),this.$gamePop.open()},getNowDate:function(){var t=new Date;return t.getMonth()+1+"_"+t.getDate()},setHasShowedToday:function(){var t=this.getNowDate();s.default.put("hasPlayRedPacket_"+this.mceInfo.activityCode,t,{persistent:!0})},canPlayedToday:function(t){var e=this;t&&(this.hasShowedToday()?t(!1):c.request("mwp.aston.gameStockInfo","2",{activityCode:this.mceInfo.activityCode,isJoinUserCount:1},{method:"POST",env:this.env}).then(c.filterResult).then(function(o){o&&o.dailyLeftCount>0?t(!0):(e.setHasShowedToday(),t(!1))}).catch(function(e){console.error(e),t(!1)}))},hasShowedToday:function(){var t=s.default.get("hasPlayRedPacket_"+this.mceInfo.activityCode);return!!t&&t===this.getNowDate()},resetRedPacket:function(){this.$countdown.reset(),clearInterval(this.btnAimationTimer),this.setData({btnStatus:"",showRedPacket:!1,isTimeOut:!1})},close:function(){this.$countdown.stop(),this.setData({showRedPacket:!1})}}}; 
 			}); 
		define("components/salesEntry/fn.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=function(e){return e&&e.__esModule?e:{default:e}}(require("../../common/utils/imgUrlTool")),i=function(e){var t={};for(var i in e)e[i]&&""!==e[i]&&(t[i]=e[i]);return t};exports.default={activeEntryTansData:function(r,n){var o=r&&r.list||[],a=r&&r.info||{},l=[],g=[],d={},u=[],f=i(n);Object.assign(a,f);var s=function(){var e="",t="";if(1===arguments.length)e=arguments[0],t=arguments[0];else{if(!(arguments.length>=2))return;e=arguments[0],t=arguments[1]}void 0!==a[e]&&null!==a[e]&&""!==a[e]&&(d[t]=a[e])};if(a&&(s("title","$headingTitle"),s("titleColor","$headingColor"),s("titleIcon","$headingTitleIcon"),s("moreTitle","$headingMoreText"),s("moreLink","$headingMoreLink"),s("moreColor","$headingMoreTextColor"),s("wxaMoreLink","$headingWxaMoreLink"),s("wxaMoreAppId","$headingAppId"),s("boxBgColor"),a.boxBgImage&&(d.boxBgImage=t.default.getWidthSuffix(a.boxBgImage,750)),s("boxMargin"),s("boxPadding"),s("boxHeight"),s("boxMinHeight"),s("justifyContent"),s("listMargin"),s("listPadding"),s("itemWidth"),s("itemHeight"),s("itemPadding"),s("itemMargin"),s("itemBorderRadius"),s("itemBgColor"),s("imageWidth"),s("imageHeight"),s("imageMargin"),s("itemBorderRadius","imageBorderRadius"),s("titleIsShow"),s("titleWidth"),s("titleHeight"),s("titleTextAlign"),s("titleFontSize"),s("titleFontWight"),s("titleTop"),s("titleLeft"),s("descriptionIsShow"),s("descriptionWidth"),s("descriptionHeight"),s("descriptionTextAlign"),s("descriptionFontSize"),s("descriptionTop"),s("descriptionLeft"),s("minCount"),s("maxCount")),o&&o.length>=1){o=o.slice(0,100);var h=!0,m=!1,c=void 0;try{for(var x,p=o.entries()[Symbol.iterator]();!(h=(x=p.next()).done);h=!0){var v=e(x.value,2),y=v[0],b=v[1];l.push(b.acm||""),g.push(y);var I=b.width||500;b.suffixImage=b.image?t.default.getWidthSuffix(b.image,I):"",b.wxa_suffixImage=b.wxa_image?t.default.getWidthSuffix(b.wxa_image,I):""}}catch(e){m=!0,c=e}finally{try{!h&&p.return&&p.return()}finally{if(m)throw c}}u=o}return{activeEntryItem:u,headingConfig:d,loggerAcms:l,loggerIndexs:g}},deleteEmptyValue:i,arrayToObject:function(e){var t={};return e.map(function(e,i){e.key&&(t[e.key]=e)}),t}}; 
 			}); 
		define("components/salesEntry/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},i=(t(require("../../common/utils/imgUrlTool")),t(require("./fn"))),n=t(require("../../components/activeEntry/index"));exports.default={components:{activeEntry:n.default},data:function(){return{activeEntryList:[],collectFormId:!0,preMakeupKey:"activeEntry_",bgColor:"#ffe6ed",margin:0,padding:0,listPadding:"0 0 0 24rpx",ptpC:"",$activeEntry:{isActive:!0,boxBgColor:"none",boxHeight:"auto",boxMinHeight:"auto",boxPadding:0,boxMargin:0,$headingName:"heading_icon_line",$headingBgColor:"none",itemPadding:0,itemBorderRadius:"6rpx",imageWidth:"100%",imageHeight:"100%",imageBorderRadius:"6rpx",titleIsShow:!1,descriptionIsShow:!1,minCount:1,maxCount:100}}},onLoad:function(){this.makeup()},onReady:function(){},methods:{makeup:function(){var t=this;this.$on("__makeup_done__",function(e,i,n){n&&i&&t._activeEntry(i)})},_activeEntry:function(t){for(var n=!1,a=1,o=[],r=[],c=[],s=this.data.preMakeupKey||"activeEntry_",d=t[s+"config"]&&t[s+"config"].list||[],u=i.default.arrayToObject(d);!n;){var g=s+a,l=u[g]||{};if(t[g]&&t[g].list&&t[g].list.length>0){var p=i.default.activeEntryTansData(t[g],l),f=p.activeEntryItem||[],m=p.headingConfig||{};c.push(e({},m,{list:f})),o=o.concat(p.loggerAcms),r=r.concat(p.loggerIndexs)}++a>20&&(n=!0)}this.setData({activeEntryList:c}),this.$root.$logE("0x00000000",{modName:"____"+this.data.ptpC+"____",acms:o,indexs:r})}}}; 
 			}); 
		define("components/scrollGoods/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../common/utils/imgUrlTool")),i=t(require("../countdown/index")),a=t(require("../../common/m")).default.MCE;exports.default={data:function(){return{pids:[],makeupKey:"",boxBgColor:"#ffffff",boxMargin:"0",$headingTitle:"",$headingTitleIcon:"",$headingHeight:"70rpx",$headingBgColor:"none",$headingMargin:0,$headingPadding:"20rpx 0 0 0",$headingColor:"#666",$headingMoreText:"",$headingMoreTextColor:"",$headingMoreLink:"",$headingWxaMoreLink:"",$headingAppId:"",leftTimeDes:"本场仅剩",titleColor:"#333333",priceColor:"rgba(252, 60, 100, .8)",minGoods:4,maxGoods:100,type:2,showDiscount:!0,showCountDown:!0,list:[],centerClass:"none",ptpC:""}},components:{countdown:i.default},onLoad:function(){this.makeup(),this.lazyData()},methods:{init:function(t,e){e=!!e,this.mce(t,e)},idtourl:function(t){if(t)return 1+(2*t+56).toString(36)},switchType:function(t,e){switch(t){case 1:this.transData(e);break;case 2:this.transDataSpike(e);break;case 3:this.transDataGroup(e);break;case 4:this.transDataQuick(e)}},mce:function(t,e){var i=this;a.get({pid:t},!e).then(function(t){if(t&&t.list&&t.list.length>0){var e=t.list;i.switchType(i.data.type,e)}}).catch(function(t){i.setData({list:[]}),console.error("scrollGoods组件请求数据失败"+t)})},makeup:function(){var t=this;this.$on("__makeup_done__",function(e,i,a){if(a&&t.data&&t.data.makeupKey&&i&&i[t.data.makeupKey]){var n=i[t.data.makeupKey].list||[],o=i[t.data.makeupKey].info||{};t.switchType(t.data.type,n),t.setHeading(o)}})},lazyData:function(){var t=this;this.$on("__lazy-data__",function(e,i,a){if(a&&t.data&&t.data.pids&&t.data.pids.length>0&&i){var n=t.data.pids[0];if(i&&i[n]&&i[n].list&&i[n].list.length>0){var o=i[n].list||[];t.switchType(t.data.type,o)}}})},transDataSpike:function(t){var e=this,i=parseInt((new Date).getTime()/1e3,10),a=t.filter(function(t,e,a){return parseInt(t.effectETime)>=i&&parseInt(t.effectSTime)<=i});if(a&&a.length>0){var n=a[0].effectETime-i;a.map(function(t){if(t.item_id&&t.secKillId){var i="/pages/detail/pages/seckill/index?itemId="+t.item_id+"&activityId="+e.idtourl(t.secKillId);t.item_xcx_url_backup=i}t.price=t.killPrice||""}),this.transData(a,n)}},transDataGroup:function(t){t.map(function(t){t.price=t.discountPrice||""}),this.transData(t)},transDataQuick:function(t){if(t&&t[0]&&t[0].list&&t[0].list.length>0){var e=t[0]||{},i=e.time||0,a=e.list||[];a.map(function(t){t.price=t.salePrice||"",t.image=t.img||"",t.item_xcx_url=t.listUrl||""}),this.setData({$headingTitle:e.title,leftTimeDes:e.viceTitle,$headingMoreText:e.moreTitle||"",$headingMoreLink:e.moreLink||""}),this.transData(a,i)}},transData:function(t,i){i&&this.$countdown.init({format:"hh:mm:ss",countdown:i});var a=parseInt(this.data.minGoods),n=parseInt(this.data.maxGoods);if(t.length>=a){var o=[],r=[],s=[];(s=t.slice(0,n)).map(function(t,i){t.suffix_img=e.default.getGoodsRatioSuffix(t.image,160,"1:1"),t.acm&&o.push(t.acm),r.push(i)});var l="none";s.length<=4&&(l="center"),o.length>0&&this.$root.$logE("0x00000000",{modName:"____"+this.data.ptpC+"____",acms:o,indexs:r}),this.setData({list:s,centerClass:l})}else this.setData({list:[]})},setHeading:function(t){if(t&&t.title){var e=t||{},i={};e.title&&(i.$headingTitle=e.title),e.titleColor&&(i.$headingColor=e.titleColor),e.titleIcon&&(i.$headingTitleIcon=e.titleIcon),e.moreTitle&&(i.$headingMoreText=e.moreTitle),e.moreLink&&(i.$headingMoreLink=e.moreLink),e.moreColor&&(i.$headingMoreTextColor=e.moreColor),e.wxaMoreLink&&(i.$headingWxaMoreLink=e.wxaMoreLink),e.wxaMoreAppId&&(i.$headingAppId=e.wxaMoreAppId),this.setData(i)}}}}; 
 			}); 
		define("components/searchBar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../common/m")),a=e(require("../imcall/index")),o=(require("../../common/service/route"),t.default.MWP);exports.default={components:{imcall:a.default},data:function(){return{placeholder:"",sbQueryWord:"",needRedirect:!0,needChange:!0,isFixed:!0,ptpC:""}},onLoad:function(e){this.options=e},onShow:function(){this.acm="";var e=this.options&&this.options.q?this.options.q:"";e=decodeURIComponent(e);var t=this.options&&this.options.placeholder?this.options.placeholder:this.options&&this.options.q?this.options.q:"";t=decodeURIComponent(t),e?this.setPlaceholder(t,e):this.requestWord()},failedEvent:function(){this.setPlaceholder("搜索你想要的宝贝","")},requestWord:function(){var e=this;o.request("mwp.pagani.moduleFacade","1",{code:"sketch"}).then(function(t){var a="",o="";t&&t.data&&t.data.sketch&&t.data.sketch.data&&t.data.sketch.data.frontword?(a=t.data.sketch.data.frontword,o=t.data.sketch.data.query,e.setPlaceholder(a,o)):e.failedEvent(),e.eLogger(t)}).catch(function(t){e.failedEvent()})},eLogger:function(e){var t=e.data.sketch.data.acm?e.data.sketch.data.acm:"",a=[];t&&(this.acm=t,a.push(t),this.$root.$logE("0x00000000",{acms:a}))},methods:{setPlaceholder:function(e,t){this.setData({placeholder:e,sbQueryWord:t})},goMiddlePage:function(e){var t=this,a="/pages/searchMiddle/index";this.acm&&(e.currentTarget.dataset.acm=this.acm),this.data.needChange&&(e.currentTarget.dataset.needChange=this.data.needChange),t.data.needRedirect?(e.currentTarget.dataset.fromPage=t.$root.query.fromPage,this.$root.$redirect(a,e.currentTarget.dataset)):this.$root.$navigate(a,e.currentTarget.dataset)}}}; 
 			}); 
		define("components/sku/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../common/utils/imgUrlTool")),s=e(require("../../common/m")),i=s.default.MCE,l=s.default.fn.sendMsg;exports.default={data:function(){return{number:1,minNumber:1,maxNumber:-1,originMaxNumber:-1,isNumberShow:!0,fullProps:null,skuInfo:null,choose:null,defaultImage:"",defaultInstallment:[]}},formatPrice:function(e){return(e/100).toFixed(2)},getPriceRange:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).skus||[],t=e[0]&&e[0].nowprice,s=e[0]&&e[0].nowprice,i=e[0]&&e[0].price,l=e[0]&&e[0].price;return e.forEach(function(e){var o=e.nowprice,a=e.price;o<t&&(t=o),o>s&&(s=o),a<i&&(i=a),a>l&&(l=a)}),t=this.formatPrice(t),s=this.formatPrice(s),i=this.formatPrice(i),l=this.formatPrice(l),{defaultNowPrice:"¥"+t+(t!==s&&"~¥"||"")+(t!==s&&s||""),defaultOldPrice:"¥"+i+(i!==l&&"~¥"||"")+(i!==l&&l||"")}},getChoose:function(e,s,i,l,o){var a=o.originMaxNumber,n=o.maxNumber,r=o.minNumber,u=o.number,d=i.totalStock,c=i.canInstallment,m=this.getPriceRange(i),h=m.defaultNowPrice,f=m.defaultOldPrice;if(e.sku){e.goods.stock=e.sku.stock,e.goods.price="¥"+(e.sku.nowprice/100).toFixed(2),e.goods.oldPrice="¥"+(e.sku.price/100).toFixed(2),e.goods.img=e.sku.img||l;var g=this.getNumberRange(e.goods.stock,a,n,r,u);e.number=g.number,e.numberRange=g;var b=this.getInstallment(e.number,e.sku);e.installment=this.getInstallmentByNum(b,e.installmentNum),e.installmentAll=b,e.message.title="已选择：",e.message.class="goods-choose";var y=[];e.style&&y.push("“"+e.style.name+"”"),e.size&&y.push("“"+e.size.name+"”"),e.size||e.style||y.push("“默认”"),c&&e.installmentNum&&b&&b.length>0&&y.push("“分期购"+e.installment.perPriceText+"”"),e.message.text=y.join(" ")}else{e.style?e.goods.stock=s.style.list[e.style.styleId].stock:e.size?e.goods.stock=s.size.list[e.size.sizeId].stock:e.goods.stock=d;var I=this.getNumberRange(e.goods.stock,a,n,r,u);e.number=I.number,e.numberRange=I;var p=this.getInstallment(e.number,e.sku);e.installment=this.getInstallmentByNum(p,e.installmentNum),e.installmentAll=p,e.style?e.goods.img=s.style.list[e.style.styleId].img||l:e.goods.img=l,e.message.title="请选择：",e.message.class="";var k=[];!e.style&&s.style.count>0&&k.push(s.style.label),!e.size&&s.size.count>0&&k.push(s.size.label),e.message.text=k.join(" "),e.goods.price=h,e.goods.oldPrice=f}var v=(e.goods.price||"").split("~"),P=v[0],z=v[1]||"",N=z&&"~"||"";e.goods.lowPrice=P.slice(1),e.goods.lowPriceUnit=P.slice(0,1),e.goods.highPrice=z.slice(1),e.goods.highPriceUnit=z.slice(0,1),e.goods.priceSplit=N;var x=(e.goods.oldPrice||"").split("~"),S=x[0],T=x[1]||"",w=T&&"~"||"";return e.goods.lowOldPrice=S.slice(1),e.goods.lowOldPriceUnit=S.slice(0,1),e.goods.highOldPrice=T.slice(1),e.goods.highOldPriceUnit=T.slice(0,1),e.goods.oldPriceSplit=w,e.goods.smallImg=t.default.getGoodsRatioSuffix(e.goods.img,200,"2:3"),"function"==typeof this.$root.setSkuChoose&&this.$root.setSkuChoose(e),e},getFullProps:function(e,t){var s=this,i=this.getStyleIdSkus(t),l={dimension:2,types:["style","size"],style:{list:{},count:0,label:""},size:{list:{},count:0,label:""}};return 0===e.length&&t.length>0?l.dimension=0:e.forEach(function(e){var o=e.label,a=e.list.length;e.list.forEach(function(e){var n=e[e.type+"Id"],r=null;"style"===e.type&&(r=(i[n]||{}).img||null),"style"===e.type?(l.style.list[n]=s.getStyleSkus(n,t,e,r),l.style.label=o,l.style.count=a,l.style.type="style",l.style.reverseType="size"):"size"===e.type&&(l.size.list[n]=s.getSizeSkus(n,t,e),l.size.label=o,l.size.count=a,l.size.type="size",l.size.reverseType="style")})}),l},getStyleSkus:function(e,t,s,i){var l={},o=0,a=!1;return t.forEach(function(t){t.sizeId&&t.styleId===e?(l[t.sizeId]=t,o+=t.stock):t.styleId===e&&(l=t,o+=t.stock)}),0===o&&(a=!0),{filter:l,stock:o,propItem:s,selected:!1,disabled:a,img:i}},getSizeSkus:function(e,t,s){var i={},l=0,o=!1;return t.forEach(function(t){t.styleId&&t.sizeId===e?(i[t.styleId]=t,l+=t.stock):t.sizeId===e&&(i=t,l+=t.stock)}),0===l&&(o=!0),{filter:i,stock:l,propItem:s,selected:!1,disabled:o}},getStyleIdSkus:function(e){var t={};return e.forEach(function(e){void 0!==e.styleId&&void 0===t[e.styleId]&&(t[e.styleId]=e)}),t},getNumberRange:function(e,t,s,i,l){return i=i||this.data.minNumber,s=s||this.data.maxNumber,l=l||this.data.number,t=t||this.data.originMaxNumber,s=t>e?e:t>0?t:e,l>s&&(l=s),i>s&&(i=s),l<i&&(l=i),{minNumber:i,maxNumber:s,number:l}},setChooseProp:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="size"===t?"style":"size",l=s.fullProps||this.data.fullProps,o=s.choose||this.data.choose,a=s.skuInfo||this.data.skuInfo,n=s.defaultImage||this.data.defaultImage||"";if(!l[t].list[e].disabled){if(o[t]&&o[t][t+"Id"]==e?(o[t]=null,l[t].list[e].selected=!1,o.sku=null):(o[t]=l[t].list[e].propItem,l[t].list[e].selected=!0),l[t].list[e].filter.stockId?o.style||o.size?o.sku=l[t].list[e].filter:o.sku=null:o.style&&o.size&&(o.sku=l.size.list[o.size.sizeId].filter[o.style.styleId]),o.style){var r=Object.keys(l.style.list),u=o.style.styleId;r.forEach(function(e){e==u||o.size?e==u&&l.size.count>0?Object.keys(l.style.list[e].filter).forEach(function(t){0===l.style.list[e].filter[t].stock?l.size.list[t].disabled=!0:l.size.list[t].disabled=!1}):e!=u&&(l.style.list[e].selected=!1):(l.style.list[e].selected=!1,0===l.style.list[e].stock?l.style.list[e].disabled=!0:l.style.list[e].disabled=!1)})}if(o.size){var d=Object.keys(l.size.list),c=o.size.sizeId;d.forEach(function(e){e==c||o.style?e==c&&l.style.count>0?Object.keys(l.size.list[e].filter).forEach(function(t){0===l.size.list[e].filter[t].stock?l.style.list[t].disabled=!0:l.style.list[t].disabled=!1}):e!=c&&(l.size.list[e].selected=!1):(l.size.list[e].selected=!1,0===l.size.list[e].stock?l.size.list[e].disabled=!0:l.size.list[e].disabled=!1)})}if(!o.style&&!o.size){var m=Object.keys(l[t].list),h=Object.keys(l[i].list);m.forEach(function(e){0===l[t].list[e].stock?l[t].list[e].disabled=!0:l[t].list[e].disabled=!1}),h.forEach(function(e){0===l[i].list[e].stock?l[i].list[e].disabled=!0:l[i].list[e].disabled=!1})}var f=(o=this.getChoose(o,l,a,n,{})).numberRange;this.setData({fullProps:l,choose:o,minNumber:f.minNumber,maxNumber:f.maxNumber,number:f.number})}},setChooseInstallment:function(e){var t=this.data.choose;t.installmentNum=t.installmentNum===e?null:e,t=this.getChoose(t,this.data.fullProps,this.data.skuInfo,this.data.defaultImage,{}),this.setData({choose:t})},setInstallmentTag:function(e){var t=this;i.get({pid:50418}).then(function(s){if(s.list&&s.list.length>0){var i=s.list[0];e.freePhases&&i.freePhasesText&&(i.text=i.freePhasesText.replace("{phases}",e.freePhases)),t.setData({installmentTag:i})}}).catch(function(e){console.log(e),l(e,{_author:"changsheng",threshold:1})})},setDefaultInstallment:function(e){var t=void 0,s=void 0;(e.skus||[]).forEach(function(e){var i=e.nowprice,l=e.installment;(!s||s>i)&&l&&(t=l,s=i)}),this.defaultInstallment=t},getInstallment:function(e,t){var s=this,i=[];return(i=t?t.installment||[]:this.defaultInstallment||[])&&i.length>0&&(i=i.map(function(i){var l=s.getFormatPrice(e*i.fee),o=s.getFormatPrice(e*i.perPrice),a=i.num;return{feeText:"含服务费"+l+"元/期",perPriceText:"¥"+o+"×"+a+"期",num:a,disabled:!t,fee:i.fee,perPrice:i.perPrice,originPerPrice:o,originFee:i.fee>0?l:"0"}})),i},getInstallmentByNum:function(e,t){for(var s=0;s<e.length;s++)if(e[s].num===t)return e[s];return null},getFormatPrice:function(e){return(e/100).toFixed(2)},initInstallment:function(e){this.setInstallmentTag(e),this.setDefaultInstallment(e)},methods:{onPropClick:function(e){var t=e.currentTarget,s=t.dataset.type,i=t.dataset.id;this.setChooseProp(i,s)},onInstallment:function(e){var t=e.currentTarget,s=t.dataset.num;t.dataset.disabled||this.setChooseInstallment(s)},reduceNumber:function(){var e=this.data.minNumber,t=this.data.number,s=this.data.choose;t<=e?t===e&&this.showLimitTips&&this.$toast.show("很抱歉，该商品至少购买"+e+"份"):(t--,s=this.getChoose(s,this.data.fullProps,this.data.skuInfo,this.data.defaultImage,{number:t}),this.setData({number:t,choose:s}))},increaseNumber:function(){var e=this.data.maxNumber,t=this.data.number,s=this.data.choose;t>=e&&e>-1?t===e&&this.showLimitTips&&this.$toast.show("很抱歉，该商品每位用户至多只能购买"+e+"份"):(t++,s=this.getChoose(s,this.data.fullProps,this.data.skuInfo,this.data.defaultImage,{number:t}),this.setData({number:t,choose:s}))},getChooseData:function(){return this.data.choose},init:function(e){var t=this;this.$toast=e.$toast||this.data.$toast,this.showLimitTips=e.showLimitTips;var s=e.minNumber||1,i=e.maxNumber||0,l=i,o=e.defaultNumber||this.data.number;o<1&&(o=1);var a=e.skuInfo||{},n=a.props||[],r=a.skus||[],u=a.totalStock,d=a.defaultPrice,c=a.canInstallment,m=a.img||e.defaultImage||"",h=a.itemId,f=a.activityId,g=a.outType;c?this.initInstallment(a):this.defaultInstallment=[];var b={goods:{stock:u,price:d,img:m},message:{},itemId:h,activityId:f,outType:g},y=this.data.choose,I=this.getFullProps(n,r);0===n.length&&r.length>0&&(b.sku=r[0]),n.forEach(function(e){if(e.list&&1===e.list.length){var s=e.list[0].type;t.setChooseProp(e.list[0][s+"Id"],s,{skuInfo:a,fullProps:I,choose:b,defaultImage:m})}else e.list.forEach(function(e){var s=e.type;y&&y.itemId===b.itemId&&y.activityId===b.activityId&&y[s]&&e[s+"Id"]===y[s][s+"Id"]&&e.name===y[s].name&&t.setChooseProp(e[s+"Id"],s,{skuInfo:a,fullProps:I,choose:b,defaultImage:m})})}),o=y&&y.itemId===b.itemId&&y.activityId===b.activityId?o:e.defaultNumber||1,y&&y.installmentNum&&(b.installmentNum=y.installmentNum);var p=(b=this.getChoose(b,I,a,m,{originMaxNumber:l,maxNumber:i,minNumber:s,number:o})).numberRange;this.setData({fullProps:I,skuInfo:a,choose:b,defaultImage:m,minNumber:p.minNumber,maxNumber:p.maxNumber,number:p.number,originMaxNumber:l})}}}; 
 			}); 
		define("components/skudialog/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var s=t(require("../sku/index")),i=t(require("../../common/utils/imgUrlTool"));exports.default={data:function(){return{isSkuShow:null,cartShow:!1,confirmText:"确认",zIndex:200}},components:{sku:s.default},onLoad:function(){},methods:{hideSku:function(){var t=this;this.$mask&&this.$mask.hide(),this.setData({isSkuShow:!1}),setTimeout(function(){t.setData({isSkuShow:null}),t.closeSkuEnd&&t.closeSkuEnd(),"function"==typeof t.context.closeSkuEnd&&t.context.closeSkuEnd()},300),this.closeSkuStart&&this.closeSkuStart(),"function"==typeof this.context.closeSkuStart&&this.context.closeSkuStart()},showSku:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.isCartShow,i=t.isBuyShow,o=t.buttonStatus,e=t.isDisabled,u=t.type,a=t.zIndex,n=t.buyType,h=t.cartType;a=a||this.data.zIndex,this.$mask&&this.$mask.show(),this.setData({isSkuShow:!0,cartShow:"banner"===u,isCartShow:s,isBuyShow:i,buttonStatus:o,isDisabled:e,type:u,zIndex:a,buyType:n,cartType:h})},onInnerClick:function(){},onConfirmSku:function(t){var s=t.detail.formId;this.$root.$logForm(s,2);var i=t.currentTarget.dataset.type,o=this.$sku.data.choose,e=o&&o.sku;this.data.isDisabled||(e?(this.confirmSku&&this.confirmSku(),"function"==typeof this.context.confirmSku&&this.context.confirmSku(o,i)):this.$toast&&this.$toast.show("请选择商品规格"))},init:function(t){this.context=this.context||t.context,this.$toast=this.$toast||t.$toast,this.$mask=this.$mask||t.$mask,this.confirmSku=this.confirmSku||t.confirmSku,this.closeSkuStart=this.closeSkuStart||t.closeSkuStart,this.closeSkuEnd=this.closeSkuEnd||t.closeSkuEnd;var s=t.isPresale,i=t.deposit,o=t.totalPrice,e=t.isSkuShow||this.data.isSkuShow||null;e?this.$mask.show():this.$mask.forceHide(),this.$sku.init({skuInfo:t.skuInfo,defaultImage:t.defaultImage,maxNumber:t.maxNumber,$toast:this.$toast,showLimitTips:t.showLimitTips}),this.setData({isPresale:s,deposit:i,totalPrice:o,isSkuShow:e})},setOptions:function(t){this.init(t)},showBigImage:function(){var t=this.$sku.data.choose,s=t&&t.goods&&t.goods.img;if(s){var o=i.default.getWidthSuffix(s,750);wx.previewImage({current:o,urls:[o]})}}}}; 
 			}); 
		define("components/steps/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"steps",data:function(){return{stepsList:[],current:0}}}; 
 			}); 
		define("components/toast/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default={_timer:null,data:function(){return{show:!1,message:""}},methods:{show:function(t,e,i){var s=this;"function"==typeof e?(i=e,e=2e3):void 0===e&&(e=2e3),clearTimeout(this._timer),this.setData({show:!0,message:t}),e>0&&e!==1/0&&(this._timer=setTimeout(function(){s.hide(),i&&i()},e))},hide:function(){this._timer=clearTimeout(this._timer),this.setData({show:!1})}}}; 
 			}); 
		define("components/wall/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function a(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(exports,"__esModule",{value:!0});var t=a(require("../../common/m")),e=a(require("../../common/utils/imgUrlTool")),o=a(require("../../components/imcall/index")),s=t.default.MWP,i=t.default.MCE,r=t.default.fn.sendMsg;exports.default={components:{imcall:o.default},initComSetting:function(){var a=this;a=Object.assign(a,{defDataSource:{source:"pagani",api:"mwp.pagani.search",ver:"11"},defaultParams:{cKey:"xcx-cate",fcid:"",page:1,sort:"pop",mwpVersion:11,isGoBackup:!0},wallParams:{},isLoading:!0,isAjaxEnd:!1,ajaxData:{},endContent:!1,emptyClick:0,itemPackage:null,itemPackageList:null,itemPackageNum:0,itemInsertNum:0,itemPackageNumMax:24,itemPackageListMaxLen:29,scrollLogData:[],scrollLogedFlag:{},itemIndex:0,ajaxErrorNum:0,itemIds:null,itemTotalNum:0,timeFlag:0,logSetTimeFlag:0,scrollIndTime:200,urlParamNames:!1,itemImgWidth:350,itemImgRatio:"3:4",isAndroidPlat:!1,imShopIds:[],navData:{},firstBackNavFlag:!1,scrollIntoViewId:!1,scrollNavRpxTop:!1,scrollNavPxTop:!1,scrollNavFixedClass:"",scrollNavStickyClass:"",showImType:0,cparamTask:null,cparamFinsh:!1,cparamReplayCount:0})},data:function(){return{itemPackageList:[],scrollBoxHeight:wx.getSystemInfoSync().windowHeight,bottomHeight:1500}},methods:{_now:Date.now||function(){return(new Date).getTime()},initWallNav:function(){},firstBackNavInit:function(a){},scrollNavEvent:function(){var a=this;a.isSupportSelector&&a.getInViewItems()},setDataSource:function(a){this.userDataSource=a},initWall:function(a){var t=this;t.initComSetting(),t.isSupportSelector=wx.canIUse&&wx.canIUse("createSelectorQuery"),t.wallParams=Object.assign({},t.defaultParams,a),t.wallParams.pageSize=t.itemPackageNumMax,t.userDataSource=Object.assign({},t.defDataSource,t.userDataSource),a.version&&(t.wallParams.mwpVersion=a.version,t.userDataSource.ver=a.version),t.sysInfo=wx.getSystemInfoSync(),t.isAndroidPlat="android"===t.sysInfo.platform||"devtools"===t.sysInfo.platform,t.initWallNav(),t.resetWallParams(),t.pushData(),t.isAllowAjax()},isAllowAjax:function(){var a=this;a.isAjaxEnd||a.isLoading||(a.timeFlag=a._now(),a.getGoodsAjax())},getGoodsAjax:function(){var a=this;a.isLoading=!0;a.wallParams.api,a.wallParams.ver;var t=Object.assign({},a.wallParams),e=[];for(var o in t)e.push(t[o]);var r=e.join("_");if(a.ajaxData[r]){a.isLoading=!1;var n=a.ajaxData[r];n.isOldAjax=!0,a.setBackParams(n),a.loadCallBack(n),a.pushResultData(n)}else{var l=t.cKey;if("mwp_mait"===a.userDataSource.source)i.get(t,!1===a.userDataSource.goCdn).then(function(e){var o=e;o.cKey=l,o.dataKey=r,o.wallParams=t,a.handleAjaxResData(o),a.isLoading=!1}).catch(function(e){a.isLoading=!1;var o=Object.assign({},t,{cKey:l,api:"mwp.darwin.get",ver:"3",err:e});a.pushMaitErrorLog("麦田请求返回数据失败",o),console.log("mwp回调出错"),console.log(e)});else{var c="pagani"===a.userDataSource.source,m={};c&&(m.headers={"mw-ckey":t.cKey}),s.request(a.userDataSource.api,a.userDataSource.ver,t,m).then(s.filterResult).then(function(e){if(e.ret="SUCCESS"){var o=e;o.cKey=l,o.dataKey=r,o.wallParams=t,a.handleAjaxResData(o)}a.isLoading=!1}).catch(function(e){if(console.log("mwp回调出错"),t.isGoBackup){var o=a.userDataSource.source+"请求返回数据失败",s="";c&&(s="https://backup.mogucdn.com/list/"+a.getWallParamsMD5(t));var i=Object.assign({},t,{cKey:l,api:a.userDataSource.api,ver:a.userDataSource.ver,err:e,backupurl:s});if(a.pushCDNElog(t,s),a.pushErrorLog(o,i)&&c&&t.page<=10){console.log("图墙进入cdn容灾");var n={};n.cKey=l,n.dataKey=r,n.wallParams=t,n.backupurl=s,a.getWallBack(n)}else console.log(e),a.isLoading=!1}else a.resetWallParams(),a.endContent="empty",a.pushData(),a.$broadcast("notGoBackup")})}}},pushCDNElog:function(a,t){this.$root.$logE("000051802",{name:"mwp cdn point",recovery_url:t,mwp_api:this.userDataSource.api,mwp_version:this.userDataSource.ver,mwp_parameter:{cKey:a.cKey,page:a.page,fcid:a.fcid}})},pushMaitErrorLog:function(a,t){var e=this,o=Object.assign(t,{_author:"huaishuo,yanqi,qiyun",threshold:80});return r(new Error(a),o),e.ajaxErrorNum++,!(e.ajaxErrorNum>2)||(e.endContent="end",e.scrollEnd(),!1)},pushErrorLog:function(a,t){var e=this,o=Object.assign(t,{_author:"huaishuo,yanqi,changgong,qiaoyu,shunfeng",threshold:80});return r(new Error(a),o),e.ajaxErrorNum++,!(e.ajaxErrorNum>2)||(e.endContent="end",e.scrollEnd(),!1)},getWallBack:function(a){var e=this;t.default.requestManager.sendRequest({url:a.backupurl,data:{},header:{"content-type":"application/json"},success:function(t){var o=t.data.data;o&&o.param?(o.cKey=a.cKey,o.dataKey=a.dataKey,o.wallParams=a.wallParams,e.updateParams(o.param._mgjuuid,o,function(a){e.cparamFinsh?e.cparamFinsh=!1:(e.cparamFinsh=!0,e.cparamReplayCount=0,e.handleAjaxResData(a),e.isLoading=!1)}),e.cparamTask=setInterval(function(){e.cparamFinsh&&(e.isLoading=!1,e.cparamFinsh=!1,e.cparamReplayCount=0,clearInterval(e.cparamTask)),e.cparamReplayCount>=100&&(console.log("mwp更新cparam参数超时"),e.isLoading=!1,e.cparamFinsh=!0,e.cparamReplayCount=0,clearInterval(e.cparamTask),e.handleAjaxResData(o)),e.cparamReplayCount++},20)):e.isLoading=!1},fail:function(){console.log("容灾也请求失败，没救了"),e.isLoading=!1},complete:function(a){404===a.statusCode&&(e.isLoading=!1,e.cparamFinsh=!1,e.cparamReplayCount=0,clearInterval(e.cparamTask),e.isAllowAjax())}})},updateParams:function(a,t,e){console.log("调用mwp参数cparams回调");for(var o=this,i={},r={},n=t.wall.docs,l=0;l<n.length;l++){var c=n[l].cparam;if(c){var m=n[l].tradeItemId;i[m]||(r[m]=n[l],i[m]=c)}}Object.keys(i).length>0?s.request("mwp.admwp.updateCParam",1,{uuid:a,fakecparams:i}).then(s.filterResult).then(function(a){t.wall.docs=o.parseParamsData(a,r,t),e(t)}).catch(function(a){console.log("mwp获取cparams回调出错"),e(t)}):(console.log("mwp获取cparams回调为空"),e(t))},parseParamsData:function(a,t,e){var o=e.wall.docs;for(var s in t)t[s].cparam=a[s],t[s].link=this.parseParamsItemLink(t[s].link,a[s]);for(var i=[],r=0;r<o.length;r++)t[o[r].tradeItemId]?i.push(t[o[r].tradeItemId]):i.push(o[r]);return i},parseParamsItemLink:function(a,t){var e=a;if(-1!==a.indexOf("?")){for(var o=a.split("?"),s=[],i=o[1].split("&"),r=0;r<i.length;r++)if(-1!==i[r].indexOf("cparam")){var n="cparam="+t;s.push(n)}else s.push(i[r]);o[1]=s.join("&"),e=o.join("?")}return e},getWallParamsMD5:function(a){for(var e=["cKey","fcid","q","pid","shopId","uname","shopname","promotionId","page","mwpVersion"],o="",s=0;s<e.length;s++){var i=a[e[s]];"q"===e[s]&&i&&(i=decodeURI(i)),o+=(void 0===i?"":i)+"-"}var r=t.default.fn.md5(o);return console.log("本次容灾请求的cdnKey为",o),console.log("本次容灾请求的md5Key为",r),r},handOtherItem:function(a,t){return a},handMaitItem:function(a,t){var o=this;if(a.imgOrg=a.image,a.img=e.default.getGoodsRatioSuffix(a.image,o.itemImgWidth,o.itemImgRatio),a.link=a.item_xcx_url||a.item_url||a.link,a.orgPrice=a.price,a.price=a.discountPrice,a.sale=a.itemSale,a.botRight=a.itemLikes,a.itemLikes||0===a.itemLikes){var s=a.itemLikes;s>1e4&&(s=(s/1e4).toFixed(1)+"w"),a.botRight=s+" 收藏"}if(a.sale||0===a.sale){var i=a.sale;i>1e4&&(i=(i/1e4).toFixed(1)+"w"),a.saleText=i}if(a.pintuanAvatar&&(a.pintuanAvatar=e.default.getGoodsRatioSuffix(a.pintuanAvatar,50,"1:1")),a.pintuanAvatarList&&a.pintuanAvatarList.length>0){a.ptAvatarArr=a.pintuanAvatarList.split(","),a.pintuanAvatarArr=[];for(var r=0,n=a.ptAvatarArr.length;r<n;r++)a.ptAvatarArr[r]&&a.pintuanAvatarArr.push(e.default.getGoodsRatioSuffix(a.ptAvatarArr[r],50,"1:1"))}return a.tradeItemId=a.item_id,a},getRandomTradeItemId:function(a){for(var t="",e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=0;o<a;o++)t+=e[Math.round(Math.random()*(e.length-1))];return t},handPaganiItem:function(a,t){var o=this;if(a.type){if(a.wallType=parseInt(a.type,10),!o.showPaganiOther&&2!==a.wallType)return!1;1===a.wallType&&a.clientUrl&&a.show&&a.show.img&&(a.bannerLink=a.clientUrl,a.tradeItemId=o.getRandomTradeItemId(10),a.bannerImg=e.default.getWidthSuffix(a.show.img,o.itemImgWidth))}var s=!(!t.param||!t.param.ptpPartC)&&t.param.ptpPartC;if(t.param&&!1===t.param.duplicate&&a.tradeItemId&&o.itemIds[a.tradeItemId]&&!a.cparam)return console.log("前端进行商品去重，商品信息如下："),console.log(a),!1;if(a.tradeItemId&&(o.itemIds[a.tradeItemId]=!0),a.onSaleTime&&a.onSaleTime.length>0)a.botRight=a.onSaleTime;else{var i=a.cfav;i>1e4&&(i=(i/1e4).toFixed(1)+"w"),a.botRight=i+" 收藏"}if(a.sale||0===a.sale){var r=a.sale;r>1e4&&(r=(r/1e4).toFixed(1)+"w"),a.saleText=r}if(a.lefttop_taglist&&a.lefttop_taglist.length&&(a.leftTop=a.lefttop_taglist[0].img),a.showWordBanner=!1,a.wordBanner&&a.wordBanner.content&&a.wordBanner.image&&(a.showWordBanner=!0),a.nameTags=[],a.leftbottom_taglist&&a.leftbottom_taglist.length)for(n=0;n<a.leftbottom_taglist.length;n++){l=a.leftbottom_taglist[n];a.nameTags.push(l)}if(a.props&&a.props.length)for(var n=0;n<a.props.length;n++){var l={bgColor:"#eff3f6",color:"#5a6f85",content:a.props[n]};a.nameTags.push(l)}if(a.pintuanAvatar&&(a.pintuanAvatar=e.default.getGoodsRatioSuffix(a.pintuanAvatar,50,"1:1")),a.imgOrg=a.img,a.img=e.default.getGoodsRatioSuffix(a.img,o.itemImgWidth,o.itemImgRatio),a.ptpC=s?s+"_"+a.index:"",a.bkey="."+(a._b_key?a._b_key:"")+"."+a.index,a.useTags=[],a.showUseTitle=!1,a.useTitle&&(a.showUseTitle=!0,a.leftbottom_taglist&&a.leftbottom_taglist.length))for(var c="",m=0;m<a.leftbottom_taglist.length&&!((c+=a.leftbottom_taglist[m].content).length>10);m++)a.useTags.push(a.leftbottom_taglist[m]);return a.showImState=!1,a.showImType&&0!==a.showImType&&(a.showImState=!0,o.showImType=a.showImType,o.imShopIds.push(a.shopId)),a},handleAjaxResOtherCallback:function(a){},handleAjaxResData:function(a){var t=this;t.$broadcast("wallResBack",a),t.ajaxData[a.dataKey]=a;var o=t.userDataSource.source;if("other"===o||"mwp_mait"===o){var s=(parseInt(a.nextPage)||2)-1;a.param={},a.param.page=s,a.wall={},a.wall.isEnd=a.isEnd,a.wall.docs=a.list}else"resOther"===o&&t.handleAjaxResOtherCallback(a);if(a.wall&&a.wall.docs){var i=a.wall.docs,r=[];i.length>0&&(t.itemTotalNum+=i.length);for(var n=0;n<i.length;n++){var l=i[n];l&&(l.index=t.itemIndex,"pagani"===o?l=t.handPaganiItem(l,a):"mwp_mait"===o&&(l=t.handMaitItem(l,a)),l&&((l=t.handOtherItem(l,a)).imgOrg&&(l.mainImg11=e.default.getGoodsRatioSuffix(l.imgOrg,t.itemImgWidth,"1:1"),l.mainImg79=e.default.getGoodsRatioSuffix(l.imgOrg,t.itemImgWidth,"7:9"),l.mainImg34=e.default.getGoodsRatioSuffix(l.imgOrg,t.itemImgWidth,"3:4"),l.mainImg23=e.default.getGoodsRatioSuffix(l.imgOrg,t.itemImgWidth,"2:3")),l.showIm&&l.tradeItemId&&l.shopId?l.showImFlag=!0:l.showImFlag=!1,r.push(l),t.itemIndex++))}a.wall.docs=r}t.isSureBack(a.wallParams)&&(t.ajaxErrorNum=0,t.setBackParams(a),t.loadCallBack(a),t.pushResultData(a),a.wall&&a.wall.isEnd&&t.$broadcast("wallEnd",a))},reloadWall:function(){var a=this;a.setWallParam({page:1}),a.resetWallParams(),a.isAllowAjax()},loadCallBack:function(a){var t=this;t.firstBackNavFlag||(t.firstBackNavFlag=!0,a.wall.isEnd&&1===parseInt(a.param.page,10)&&a.wall&&a.wall.docs&&0===a.wall.docs.length||t.firstBackNavInit(a));var e=a.wall.docs||[];t.packageItems(e),console.log("目前加载商品总数"+t.itemPackageList.length*t.itemPackageNumMax+"个"),(a.wall.isEnd||t.itemPackageList.length>=t.itemPackageListMaxLen||t.maxItemNum>0&&t.itemInsertNum>=t.maxItemNum)&&(t.endContent="end",1===parseInt(a.param.page,10)&&a.wall&&a.wall.docs&&0===a.wall.docs.length&&(t.endContent="noResult"),t.scrollEnd()),t.wallParams.page++},setBackParams:function(a){var t=this;a.wall&&a.wall.cpc_offset&&(t.wallParams.cpc_offset=a.wall.cpc_offset),a.param&&a.param.offset&&(t.wallParams.offset=a.param.offset)},packageItems:function(a){var t=this,e=!1;if(!a||!a.length)return t.emptyClick++,t.emptyClick>5&&(t.scrollEnd(),t.emptyClick=0),!1;t.emptyClick=0;for(var o=0;o<a.length;o++){var s=a[o];if(t.itemPackage.push(s),s.tradeItemId&&(s.index||0===s.index)&&(s.logID="pagani_log_"+s.tradeItemId+"_"+s.index,t.scrollLogData.push(s),t.scrollLogedFlag[s.logID]=!1),t.itemPackageNum++,t.itemInsertNum++,s.showImFlag&&t.imShopIds.push(s.shopId),t.maxItemNum>0&&t.itemInsertNum>=t.maxItemNum)break;t.itemPackageNum>=t.itemPackageNumMax&&(t.pushPackageData(),e=!0)}e||setTimeout(function(){t&&t.isAllowAjax&&t.isAllowAjax()},50)},pushPackageData:function(){var a=this;if(a.itemPackage&&a.itemPackageNum){var t=a.itemPackageList.length;a.itemPackageList.push({name:"itemPackage"+t,isShow:!0,activeTop:0,activeBot:0});var e={};e["itemPackage"+t]=a.itemPackage,console.log("本次新增图墙的数据包："),console.log(a.itemPackage),a.pushData(e),a.getImData(),a.itemPackage=[],a.imShopIds=[],a.itemPackageNum=0,a.isSupportSelector&&a.getInViewItems()}},getImData:function(){var a=this;a.imShopIds&&0===a.imShopIds.length||a.$imcall.setImOpts({type:a.showImType,class:"im_icon",text:"",style:"",allocateType:1,shopIds:a.imShopIds.slice(0)})},scrollEnd:function(){var a=this;a.isAjaxEnd=!0,a.pushPackageData(),a.setData({endContent:a.endContent})},isSureBack:function(a){var t=this.wallParams;for(var e in a)if(t[e]!=a[e])return!1;return!0},resetWallParams:function(){var a=this;a.itemPackage=[],a.itemPackageList=[],a.scrollLogData=[],a.scrollLogedFlag={},a.itemPackageNum=0,a.itemInsertNum=0,a.isAjaxEnd=!1,a.endContent=!1,a.isLoading=!1,a.emptyClick=0,a.ajaxErrorNum=0,a.itemTotalNum=0,a.itemIds={},a.imShopIds=[],a.wallParams.cpc_offset=0,a.wallParams.offset="",a.goodsExposeData={eventid:"0x00000000",acms:[],cpcs:[],iids:[],indexs:[],properties:{},ptpPartC:"",fcid:""},a.cpcExposeData={eventid:!1,cparams:[],ptpPartC:"",fcid:""},a.itemIndex=0},setWallParam:function(a){var t=this;t.wallParams=Object.assign(t.wallParams,a)},wallScrollEvent:function(a){var t=this;t._now()-t.timeFlag>t.scrollIndTime&&(t.isSupportSelector&&t.getInViewItems(),t.isAllowAjax())},pushData:function(a){var t=this,e=Object.assign({},{endContent:t.endContent,scrollNavFixedClass:t.scrollNavFixedClass,scrollNavStickyClass:t.scrollNavStickyClass,navData:t.navData,itemPackageList:t.itemPackageList},a);this.setData(e)},pushResultData:function(a){var t=this;if(a.param&&a.wallParams&&a.param.ptpPartC&&(t.goodsExposeData.ptpPartC=a.param.ptpPartC,t.goodsExposeData.eventid=a.param.eventId||"0x00000000",t.goodsExposeData.fcid=a.param.fcid||"",t.goodsExposeData.properties={tableName:a.wallParams.sort||"",fcid:a.wallParams.fcid||"",q:a.wallParams.q||""},t.cpcExposeData.ptpPartC=a.param.ptpPartC,t.cpcExposeData.eventid=a.param.cpcEventId||"70004",t.cpcExposeData.fcid=a.param.fcid||""),!t.isSupportSelector){var e=a.wall.docs||[];t.pushItemListLog(e)}},getInViewItems:function(){var a=this;this.$root&&this.$root.$expose&&this.$root.$expose(),clearTimeout(a.logSetTimeFlag),a.logSetTimeFlag=setTimeout(function(){for(var t=[],e="",o={},s=0;s<a.scrollLogData.length;s++){var i=a.scrollLogData[s],r=i.logID;a.scrollLogedFlag[r]||(o[r]=i,t.push("#"+r))}t.length&&(e=t.join(","),wx.createSelectorQuery().selectAll(e).boundingClientRect(function(t){var e=[];t.forEach(function(t){t.top<a.sysInfo.windowHeight&&(e.push(o[t.id]),a.scrollLogedFlag[t.id]=!0)}),a.pushItemListLog(e)}).exec())},400)},pushItemListLog:function(a){for(var t=this,e=0,o=0;o<a.length;o++){var s=a[o];s.wallType&&1===s.wallType&&e++,t.getItemLogData(s)}(t.goodsExposeData.iids.length||e>0&&e===a.length)&&(console.log("触发图墙曝光打点"),console.log(t.goodsExposeData),t.$root.$logE(t.goodsExposeData.eventid,t.goodsExposeData)),t.cpcExposeData.cparams.length&&(console.log("触发cpc商品曝光打点."),console.log(t.cpcExposeData),t.$root.$logE(t.cpcExposeData.eventid,t.cpcExposeData)),t.goodsExposeData.acms=[],t.goodsExposeData.cpcs=[],t.goodsExposeData.iids=[],t.goodsExposeData.indexs=[],t.cpcExposeData.cparams=[]},getItemLogData:function(a){var t=this;a.tradeItemId&&(t.goodsExposeData.acms.push(a.acm),t.goodsExposeData.indexs.push(a.index),1!==a.wallType&&t.goodsExposeData.iids.push(a.tradeItemId),a.cparam&&(t.goodsExposeData.cpcs.push(a.tradeItemId),t.cpcExposeData.cparams.push(a.cparam)))},linkClick:function(a){var t=this,e=a.currentTarget.dataset;if(e.link){var o={};e.acm&&(o.acm=e.acm),e.ptpC&&(o.ptpC=e.ptpC),t.useRedirect||"detail"===t.$root.query.fromPage?(a.currentTarget.dataset.fromPage=t.$root.query.fromPage,t.$root.$redirect(e.link,o)):t.$root.$navigate(e.link,o)}}},onReady:function(){var a=this;wx.getSystemInfo({success:function(t){a.setData({scrollBoxHeight:t.windowHeight})}}),setTimeout(function(){wx.getSystemInfo({success:function(t){a&&a.setData&&a.setData({scrollBoxHeight:t.windowHeight})}})},300),setTimeout(function(){wx.getSystemInfo({success:function(t){a&&a.setData&&a.setData({scrollBoxHeight:t.windowHeight})}})},600)}}; 
 			}); 
		define("components/wall/index_sortNav.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=function(a){return a&&a.__esModule?a:{default:a}}(require("/index")),t={setWallNav:function(a){this.userNavObj=a||{}},initWallNav:function(){var a=this;a.defPriceFilter=[{min:"0",max:"50",percent:0},{min:"50",max:"80",percent:0},{min:"80",max:"200",percent:0}],a.min="",a.max="",a.tabOnClass="item_on",a.userNavObj=a.userNavObj||{},(a.userNavObj.scrollNavRpxTop||0===a.userNavObj.scrollNavRpxTop)&&(a.scrollNavRpxTop=a.userNavObj.scrollNavRpxTop),a.navData=a.userNavObj.navData||!1,!1!==a.scrollNavRpxTop&&(a.scrollNavPxTop=a.scrollNavRpxTop/750*a.sysInfo.windowWidth,"ios"==a.sysInfo.platform&&(a.scrollNavStickyClass="wall_nav_top_sticky")),0===a.scrollNavPxTop&&(a.scrollNavFixedClass="nav_fixed")},scrollReLoadAjax:function(){var a=this;a.setWallParam({page:1}),a.resetWallParams();var t=!1===a.scrollNavRpxTop?"false":"scrollIntoViewId";a.pushData({scrollIntoViewId:t}),setTimeout(function(){a.setData({scrollIntoViewId:"middleNameFixBug"})},100),a.isAllowAjax()},firstBackNavInit:function(a){var t=this,e=a.sortFilter,s=a.priceFilter||t.defPriceFilter;if(e&&e.length>1){for(var r=0;r<e.length;r++){var l=e[r];l.sortKey==a.param.sort?l.onClass=t.tabOnClass:l.onClass=""}t.navData={sortFilter:e,priceFilter:s,priceTabOnClass:"",priceMin:t.min,priceMax:t.max}}},scrollNavEvent:function(a){var t=this,e=a.detail;if(t.scrollNavPxTop&&t.isAndroidPlat){var s="";s=e.scrollTop>t.scrollNavPxTop?"nav_fixed":"",t.scrollNavFixedClass!=s&&(t.scrollNavFixedClass=s,t.pushData())}t.isSupportSelector&&t.getInViewItems()},sortTab:function(a){for(var t=this,e=a.currentTarget.dataset,s=t.navData.sortFilter,r=0;r<s.length;r++){var l=s[r];l.sortKey==e.sort?l.onClass=t.tabOnClass:l.onClass=""}t.navData.priceTabOnClass="",t.setWallParam({sort:e.sort}),t.scrollReLoadAjax()},priceOpenTab:function(a){var t=this;t.navData.priceTabOnClass=""==t.navData.priceTabOnClass?t.tabOnClass:"",t.pushData()},priceSubmitTab:function(a){var t=this,e=a.currentTarget.dataset;e.min&&(t.min=e.min),e.max&&(t.max=e.max),t.navData.priceTabOnClass="",t.navData.priceMin=t.min,t.navData.priceMax=t.max,t.setWallParam({minPrice:t.min,maxPrice:t.max}),t.scrollReLoadAjax()},priceInputChange:function(a){var t=this,e=a.currentTarget.dataset,s=a.detail.value;isNaN(s)&&(s=""),t[e.type]=s}};exports.default={components:a.default.components,initComSetting:a.default.initComSetting,data:a.default.data,methods:Object.assign({},a.default.methods,t),onReady:a.default.onReady}; 
 			}); 
		define("components/wall/index_tabNav.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var a=function(a){return a&&a.__esModule?a:{default:a}}(require("/index")),s={setWallNav:function(a){this.userNavObj=a||{}},initWallNav:function(){var a=this;a.tabOnClass="tab_on",a.userNavObj=a.userNavObj||{},(a.userNavObj.scrollNavRpxTop||0===a.userNavObj.scrollNavRpxTop)&&(a.scrollNavRpxTop=a.userNavObj.scrollNavRpxTop),a.navData=a.userNavObj.navData||!1,a.navData&&(a.navData[0].onClass=a.tabOnClass),!1!==a.scrollNavRpxTop&&(a.scrollNavPxTop=a.scrollNavRpxTop/750*a.sysInfo.windowWidth,"ios"==a.sysInfo.platform&&(a.scrollNavStickyClass="wall_nav_top_sticky")),0===a.scrollNavPxTop&&(a.scrollNavFixedClass="nav_fixed")},scrollNavEvent:function(a){var s=this,l=a.detail;if(s.scrollNavPxTop&&s.isAndroidPlat){var t="";t=l.scrollTop>s.scrollNavPxTop?"nav_fixed":"",s.scrollNavFixedClass!=t&&(s.scrollNavFixedClass=t,s.pushData())}s.isSupportSelector&&s.getInViewItems()},scrollReLoadAjax:function(){var a=this;a.setWallParam({page:1}),a.resetWallParams();var s=!1===a.scrollNavRpxTop?"false":"scrollIntoViewId";a.pushData({scrollIntoViewId:s}),setTimeout(function(){a.setData({scrollIntoViewId:"middleNameFixBug"})},100),a.isAllowAjax()},sortTab:function(a){for(var s=this,l=a.currentTarget.dataset,t=s.navData,o=0;o<t.length;o++){var e=t[o];o==l.tabIndex?e.onClass=s.tabOnClass:e.onClass=""}s.setWallParam({pid:l.pid||"",fcid:l.fcid||""}),s.scrollReLoadAjax()}};exports.default={components:a.default.components,initComSetting:a.default.initComSetting,data:a.default.data,methods:Object.assign({},a.default.methods,s),onReady:a.default.onReady}; 
 			}); 
		define("cube-core/componentClass/api.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),a=require("./observer/index"),i=t(require("./observer/watcher")),u=require("./utils/index"),l=require("./init/initWatch"),s=t(require("../../common/base/Events.js")),c=function(t){function c(t,o,n,a,i,u){return e(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t,o,n,a,i,u))}return o(c,s.default),n(c,[{key:"$watch",value:function(t,e,r){var o=this;if((0,u.isPlainObject)(e))return(0,l.createWatcher)(o,t,e,r);r=r||{};var n=new i.default(o,t,e,r);return r.immediate&&e.call(o,n.value),function(){n.teardown()}}},{key:"$set",value:function(t,e,r){a.set.call(this,t,e,r)}},{key:"$del",value:function(t,e){a.del.call(this,t,e)}},{key:"$nextTick",value:function(t){(0,u.nextTick)(t,this)}},{key:"setData",value:function(t){this.$vm.setData(t)}},{key:"throtleSetData",value:function(t,e){this.__hasKilled||(this.$root.$wrapper.__throttleSetDataQueue.push({vm:this,obj:t}),e&&!this.$root.$wrapper["throtleSetData_"+e]?(this.$root.$wrapper["throtleSetData_"+e]=this.$root.$wrapper.__throtleSetData(e),this.$root.$wrapper["throtleSetData_"+e]()):e&&this.$root.$wrapper["throtleSetData_"+e]?this.$root.$wrapper["throtleSetData_"+e]():this.$root.$wrapper.throtleSetData())}}]),c}();exports.default=c; 
 			}); 
		define("cube-core/componentClass/business.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=function t(e,r,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,r);if(void 0===a){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,r,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},i=t(require("./api")),u=require("./internalComponents/index"),c=require("../../common/m"),l=t(c).default.fn.debounce(function(t,e,r){t.call(e,r)},1e3,!0),s=function(t){function s(t,n,a,o,i,f){e(this,s);var _=r(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,n,a,o,i,f));_._vx_components={};for(var v in u.internalComponents)_._vx_components[u.internalComponents[v].componentOptions.name]=u.internalComponents[v];return _._vx_lazyData={},_._vx_lazyDataCtx={},_.businessMethods={$vx_redirect:function(t){l(_.vx_redirect,_,t)},$vx_navigate:function(t){l(_.vx_navigate,_,t)},$vx_launch:function(t){l(_.vx_launch,_,t)},$logE:function(t,e){_.$root.$logE(t,e)},getShieldParam:function(){return{platform:"sp"}},$vx_getSystemInfo:function(){return c.System.getSync("systemInfo")},$vx_formSubmitHandler:function(t){_.vx_formSubmitHandler(t)}},_}return n(s,i.default),a(s,[{key:"initBusiness",value:function(){this.initLazyData()}},{key:"initLazyData",value:function(){var t=this;this.$vm.$on("vx:__lazy-data__",function(e,r,n){t._vx_lazyData[r]=e,t._vx_lazyDataCtx[r]=n,t.$emit("__lazy-data__",e,r,n)})}},{key:"transformStyleCode",value:function(t){if(!t||!t.split)return t;var e=t.split(";");return(e=(e||[]).map(function(t){var e=t.split(":");if(e&&e.length>1){var r=e[1].split(" ");r=(r||[]).map(function(t){return-1!=t.indexOf("rem")?t.replace(/(([+-]?)\d*(\.?\d*))rem/g,function(t,e){return 100*e+"rpx"}):-1!=t.indexOf("px")?t.replace(/px/g,"rpx").replace(/rrpx/g,"rpx"):t}),e[1]=r.join(" ")}return e.join(":")})).join(";")}},{key:"_removeDupDataset",value:function(t){var e=["cubeacm","anchorindex","pitindex","datalogcontent","datalogiid","cubeacmnode"],r={};return(t&&Object.keys(t)||[]).forEach(function(n){-1===e.indexOf(n.toLowerCase())&&(r[n]=t[n])}),r}},{key:"_handleLogAcm",value:function(t){var e=t.currentTarget&&t.currentTarget.dataset||{},r=this.$root.$wrapper.__hasLogged,n=0,a=r["m"+this._vx_moduleId]&&r["m"+this._vx_moduleId].__len||0,o=this._vx_moduleAcm;if(!o)return"";var i=o.split(".");e.cubeAcm?(n=r["m"+this._vx_moduleId][e.cubeAcm],o=e.cubeAcm+"-"+i[6]+"-idx_"+n+"-mfs_"+a):e.anchorIndex?o+="-idx_"+(n=r["m"+this._vx_moduleId]["anchor"+e.anchorIndex])+"-mfs_"+a:e.pitIndex&&(o+="-idx_"+(n=r["m"+this._vx_moduleId]["pit"+e.pitIndex])+"-mfs_"+a);try{return o}catch(t){return console.log("acm format error"),""}}},{key:"vx_redirect",value:function(t,e,r){var n=r,a=t;"string"!=typeof t&&(n=a,a=null);var o=n&&n.currentTarget&&n.currentTarget.dataset;if(o){o=this._removeDupDataset(o);var i=this._handleLogAcm(n);if(o.acm=i,a&&(o.href=a),n.currentTarget.dataset=Object.assign(o,e),!o.href&&!o.page)return;this.$root.$redirect(n)}else{if(!t)return;this.$root.$redirect(t,e)}}},{key:"vx_navigate",value:function(t,e,r){var n=r,a=t;"string"!=typeof t&&(n=a,a=null);var o=n&&n.currentTarget&&n.currentTarget.dataset;if(o){o=this._removeDupDataset(o);var i=this._handleLogAcm(n);if(o.acm=i,a&&(o.href=a),n.currentTarget.dataset=Object.assign(o,e),!o.href&&!o.page)return;this.$root.$navigate(n)}else{if(!t)return;this.$root.$navigate(t,e)}}},{key:"vx_launch",value:function(t,e,r){var n=r,a=t;"string"!=typeof t&&(n=a,a=null);var o=n&&n.currentTarget&&n.currentTarget.dataset;if(o){o=this._removeDupDataset(o);var i=this._handleLogAcm(n);if(o.acm=i,a&&(o.href=a),n.currentTarget.dataset=Object.assign(o,e),!o.href&&!o.page)return;this.$root.$launch(n)}else{if(!t)return;this.$root.$launch(t,e)}}},{key:"vx_formSubmitHandler",value:function(t){var e=t.detail.formId;this.$root.$logForm(e,1)}},{key:"$on",value:function(t,e){if("__lazy-data__"===t)for(var r in this._vx_lazyData)e(this._vx_lazyData[r],r,this._vx_lazyDataCtx[r]);o(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"$on",this).call(this,t,e)}}]),s}();exports.default=s; 
 			}); 
		define("cube-core/componentClass/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=require("../../common/base/PageFactory"),a=e(require("./observer/watcher")),s=require("./utils/index"),l=e(require("./utils/mcomponent")),c=e(require("./init/initData")),u=e(require("./init/initProps")),h=e(require("./init/initEvent")),d=e(require("./init/initComponents")),f=e(require("./init/initComputed")),_=e(require("./init/initMethods")),p=e(require("./init/initMixins")),v=require("./init/initWatch"),m=e(require("./init/initWxMethod")),x=e(require("./business")),b=0,y=function(e){function y(e,o,i,r,a,l){t(this,y);var c=n(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,e,o,i,r,a,l)),u=o.moduleId;c._vx_uid=b++,c._vx_moduleId=u,c._vx_moduleAcm=o.acm,c._globalVM=e,c._vx_moduleConfig=o,o.isShopData?(c.moduleInfo=(0,s.formatModuleConfig)(o),c.formData=(0,s.formatModuleConfig)(o.content)):c.config=(0,s.formatModuleConfig)(o.schema),c._vx_watchers=[],c._vx_data=null,c._vx_dirtyData=[],c._vx_props={},c._events={},c.options=i.componentOptions,c.renderComponentsFunc=i.renderComponentsFunc,c.parent=r,c._vx_components=(0,s.extend)(c._vx_components||{},c.options.components),c._vx_children=[],c._vx_oldChildren=[],c.setComponents.call(c),(0,s.extend)(c,c.options);var h=(0,s.extend)(c.businessMethods,c.options.methods);return(0,s.extend)(c,{components:{},methods:h}),a&&a.props&&(c._vx_props=a.props,(0,s.extend)(c,a.props)),a&&a.events&&(Object.keys(a.events).forEach(function(e){c._events[e]=[a.events[e]]}),c.methods=c.methods||{},(0,s.extend)(c.methods,a.events)),a&&a.key&&(c.key=a.key),c.setScrollInfo=l.setScrollInfo,c.setShareInfo=l.setShareInfo,c.setGlobal=l.setGlobal,c.getGlobal=l.getGlobal,c.setGlobalCssInfo=l.setGlobalCssInfo,c.triggerLazyMotion=l.triggerLazyMotion,c.setOnShare=l.setOnShare,c.showToast=l.showToast,c.hideToast=l.hideToast,c.env=l.env,c.methods&&c.methods.onShare&&l.setOnShare((0,s.bind)(c.methods.onShare,c)),c.name=c.name||"m"+u,c._init(),c.initBusiness(),(0,s.callHook)(c,"created"),(0,s.callHook)(c,"beforeMount"),c}return o(y,x.default),i(y,[{key:"_init",value:function(){var e=this;(0,s.callHook)(this,"beforeCreate"),p.default.call(this),h.default.call(this),u.default.call(this),_.default.call(this),c.default.call(this),d.default.call(this,y,this.parent),f.default.call(this),v.initWatch.call(this),this._vx_watchers.push(new a.default(this,function(){if(!e.__hasKilled){var t={};e._vx_dirtyData.forEach(function(n){e._vx_data&&(t[n]=e._vx_data[n])});for(var n in e.computed)t[n]=e[n];for(var o in e.props){var i=e.props[o];(0,s.isObject)(i)||(0,s.isNative)(i)?t[o]=e[o]:t[i]=e[i]}if(["__vx_class","__vx_style"].forEach(function(n){t[n]=e[n]||""}),e.$vm){var r=function(){e.__hasKilled||(0,s.callHook)(e,"updated")};if((0,s.isLargerVersion)("1.5.0"))e.$vm.setData(t,r);else{e.$vm.setData(t);setTimeout(r,0)}(0,s.callHook)(e,"beforeUpdate")}return e.mountedInParent(),e.renderComponents.call(e,e.renderComponentsFunc),e._vx_dirtyData=[],e._vx_data}},function(){},{deep:!0})),m.default.call(this)}},{key:"setComponents",value:function(){var e=this._vx_components,t={};for(var n in e)e[n].componentOptions||(e[n]=(0,l.default)(e[n],function(){return{}})),e[n].componentOptions.name||(e[n].componentOptions.name=n),t[e[n].componentOptions.name]=e[n];this._vx_components=t}},{key:"setProps",value:function(e){for(var t in e)this[t]=e[t]}},{key:"mountedInParent",value:function(){var e=this;if(!this.parent.$children||-1==this.parent.$children.findIndex(function(t){return t.name=="$"+e.label})){this.parent.$children=(this.parent.$children||[]).concat(new r.MComponent(Object.assign({},this,{name:this.label}),this.parent)),function(){var t={label:e.label};e._vx_dirtyData.forEach(function(n){e._vx_data&&(t[n]=e._vx_data[n])});for(var n in e.computed)t[n]=e[n];for(var o in e.props){var i=e.props[o];(0,s.isObject)(i)||(0,s.isNative)(i)?t[o]=e[o]:t[i]=e[i]}["__vx_class","__vx_style"].forEach(function(n){t[n]=e[n]||""});var r=function(){e.__hasKilled||((0,s.callDirHook)(e,{},"bind"),(0,s.callHook)(e,"mounted"))};(0,s.isLargerVersion)("1.5.0")?e.$vm.setData(t,r):(e.$vm.setData(t),setTimeout(r,0))}()}}},{key:"destroy",value:function(){var e=this;if((0,s.callHook)(this,"beforeDestroy"),this.parent.$children){var t=this.parent.$children.findIndex(function(t){return t.name=="$"+e.label});-1!=t&&this.parent.$children.splice(t,1)}this._vx_children&&this._vx_children.length&&this._vx_children.forEach(function(e){e.destroy()}),this.$vm.$children=[];try{this.$vm.$kill()}catch(e){}this.__hasKilled=this.$vm.__hasKilled=!0,(0,s.callHook)(this,"destroyed")}},{key:"label",get:function(){return this.key?this.name+"_"+this.key:this.__isCommonComponent?this.name:this.name+"_"+this._vx_uid}},{key:"$vm",get:function(){return this.parent&&this.parent["$"+this.label]}},{key:"$root",get:function(){return this.$vm.$root}}]),y}();exports.default=y; 
 			}); 
		define("cube-core/componentClass/init/initComponents.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function o(o,n,e,t,s){var l={setScrollInfo:this.setScrollInfo,setGlobalCssInfo:this.setGlobalCssInfo,setShareInfo:this.setShareInfo,setGlobal:this.setGlobal,getGlobal:this.getGlobal,triggerLazyMotion:this.triggerLazyMotion,setOnShare:this.setOnShare,showToast:this.showToast,hideToast:this.hideToast,env:this.env};return new i(this._globalVM,this._vx_moduleConfig,this._vx_components[n],this.$vm,{props:e,events:t,key:s},l)}function n(n,e,t,s,i){var l=this,_=void 0,r=void 0,h=0;for(var c in this._vx_oldChildren)this._vx_oldChildren[c].key==i&&(_=this._vx_oldChildren[c],r=h),h++;_?(_.setProps(t),this._vx_children.push(_),this._vx_oldChildren.splice(r,1)):this._vx_children.push(o.call(l,n,e,t,s,i))}function e(){for(var o in this._vx_oldChildren)this._vx_oldChildren[o].destroy();this._vx_oldChildren.splice(0)}function t(n){var e=this;this._vx_components&&Object.keys(this._vx_components).forEach(function(t){if(e._vx_components[t]&&e._vx_components[t].componentOptions&&e._vx_components[t].componentOptions.__isCommonComponent){var s=void 0,i=void 0,l=0;for(var _ in e._vx_oldChildren)e._vx_oldChildren[_].name==t&&(s=e._vx_oldChildren[_],i=l),l++;var r={};if(e._vx_components[t].componentOptions.__propsFunc){r=e._vx_components[t].componentOptions.__propsFunc.call(e);var h=[];h=Object.keys(r),e._vx_components[t].componentOptions.props=h}s?(s.setProps(r),e._vx_children.push(s),e._vx_oldChildren.splice(i,1)):e._vx_children.push(o.call(e,n,t,r,{}))}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(l,_){var r=this;i=l,this.renderComponent=function(e,t,s,i){r._vx_components[e]&&r._vx_components[e].componentOptions&&(i?n.call(r,_,e,t,s,i):r._vx_children.push(o.call(r,_,e,t,s)))},this.renderComponents=function(o){r._vx_oldChildren=r._vx_children,r._vx_children=[],t.call(r,_),o.call(r,(0,s.bind)(r.renderComponent,r)),e.call(r)}};var s=require("../utils/index"),i=void 0; 
 			}); 
		define("cube-core/componentClass/init/initComputed.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,o){"function"==typeof o?(a.get=r(t),a.set=u.noop):(a.get=o.get?!1!==o.cache?r(t):o.get:u.noop,a.set=o.set?o.set:u.noop),Object.defineProperty(e,t,a)}function r(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),n.default.target&&t.depend(),t.value}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=this,r=e._computedWatchers=Object.create(null),n=e.computed;for(var a in n){var c=n[a],s="function"==typeof c?c:c.get;r[a]=new o.default(e,s,u.noop,i),a in e||t(e,a,c)}},exports.defineComputed=t;var o=e(require("../observer/watcher")),n=e(require("../observer/dep")),u=require("../utils/index"),i={lazy:!0},a={enumerable:!0,configurable:!0,get:u.noop,set:u.noop}; 
 			}); 
		define("cube-core/componentClass/init/initData.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e,n){a.get=function(){return this[e][n]},a.set=function(t){this[e][n]=t},Object.defineProperty(t,n,a)}function e(t,e){return t.call(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.proxy=t,exports.default=function(){var a=this;if(this.data){"Function"===(0,n.typeOf)(this.data)&&(this.data=e(this.data,this)),this._vx_data=this.data,this.data=function(){return Object.assign({},a._vx_data)};var o=Object.keys(this._vx_components)||[];o=o.map(function(t){return"$"+t}),Object.keys(this._vx_data).forEach(function(e){a._vx_dirtyData.push(e);var n=o.indexOf(e),i=o[n];-1!==n&&a._vx_components[i].componentOptions.__isCommonComponent||t(a,"_vx_data",e)}),(0,i.observe)(this._vx_data,this,null)}};var n=require("../utils/index"),i=require("../observer/index"),a={enumerable:!0,configurable:!0,get:n.noop,set:n.noop}; 
 			}); 
		define("cube-core/componentClass/init/initEvent.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var r=this;Object.keys(t).forEach(function(o){var d=r[o]||e.noop;r[t[o]]=function(){d.call(r)}})};var e=require("../utils/index"),t={beforeCreate:"beforeCreate",created:"created",beforeMount:"beforeMount",mounted:"mounted",beforeUpdate:"beforeUpdate",updated:"updated",beforeDestroy:"beforeDestroy",destroyed:"destroyed"}; 
 			}); 
		define("cube-core/componentClass/init/initMethods.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var t=this,e=function(e){return function(t){var o=arguments.length,s=void 0;return s=this.__isCommonComponent?this.$vm:this,o?o>1?e.apply(s,arguments):e.call(s,t):e.call(s)}.bind(t)};this.methods&&Object.keys(this.methods||{}).forEach(function(o){t[o]=t.methods[o]=e(t.methods[o])})}; 
 			}); 
		define("cube-core/componentClass/init/initMixins.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var e=this;this.mixins&&Object.keys(this.mixins||{}).forEach(function(t){e[t]=(0,i.bind)(e.mixins[t],e)})};var i=require("../utils/index"); 
 			}); 
		define("cube-core/componentClass/init/initProps.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){var i=this;for(var t in this.props){var o=this.props[t];!(0,s.isObject)(o)||(0,s.isNative)(o)||this[t]||(this[t]=o.default)}this._vx_props&&(Object.keys(this._vx_props).forEach(function(r){(0,e.proxy)(i,"_vx_props",r)}),(0,r.observe)(this._vx_props,this,null))};var e=require("./initData"),r=require("../observer/index"),s=require("../utils/index"); 
 			}); 
		define("cube-core/componentClass/init/initWatch.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function r(r,t,i,a){return(0,e.isPlainObject)(i)&&(a=i,i=i.handler),"string"==typeof i&&(i=r[i]),r.$watch(t,i,a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initWatch=function(){var e=this,t=e.watch;for(var i in t){var a=t[i];if(Array.isArray(a))for(var n=0;n<a.length;n++)r(e,i,a[n]);else r(e,i,a)}},exports.createWatcher=r;var e=require("../utils/index"); 
 			}); 
		define("cube-core/componentClass/init/initWxMethod.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){for(var o=0;o<t.length;o++)if(t[o].test(e))return o;return-1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){if(this.methods&&Object.keys(this.methods).length)for(var t in this.methods)-1!=e(t)&&this.$vm.$on("vx:"+t,(0,o.bind)(this.methods[t],this))};var o=require("../utils/index"),t=[/^onLoad$/,/^onReady$/,/^onShow$/,/^onHide$/,/^onUnload$/,/^onPullDownRefresh$/,/^onReachBottom$/,/^onPageScroll$/,/^scroll$/,/^scroll_[\s\S]*/,/^upper$/,/^upper_[\s\S]*/,/^lower$/,/^lower_[\s\S]*/,/^onGlobal$/,/^modInView$/,/^modNotInView$/]; 
 			}); 
		define("cube-core/componentClass/internalComponents/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.internalComponents=void 0;var e=function(e){return e&&e.__esModule?e:{default:e}}(require("./mvwImage/index"));exports.internalComponents={mvwImage:e.default}; 
 			}); 
		define("cube-core/componentClass/internalComponents/mvwImage/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("./renderOptions")),t=e(require("./renderFunc"));exports.default={componentOptions:r.default,renderComponentsFunc:t.default}; 
 			}); 
		define("cube-core/componentClass/internalComponents/mvwImage/renderFunc.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){}; 
 			}); 
		define("cube-core/componentClass/internalComponents/mvwImage/renderOptions.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("../../../../common/utils/imgUrlTool.js")),e=t(require("../../utils/switch"));exports.default={name:"mvw-image",props:["src","__vx_class","mode","__vx_style","v-suffix","lazy-load"],data:function(){return{inView:!e.default.lazyload,lazyLoad:this["lazy-load"],classId:"",exUrl:this["v-suffix"]?this.imgUrlTool(this.src,this["v-suffix"]):this.src}},watch:{src:function(t){this.exUrl=this["v-suffix"]?this.imgUrlTool(t,this["v-suffix"]):t}},computed:{transStyle:function(){var t=this;if("[object Object]"===Object.prototype.toString.call(this.__vx_style)){var i=[];return(Object.keys(this.__vx_style)||[]).forEach(function(e){i.push(e+":"+t.style[e])}),i.join(";")}return this.__vx_style}},methods:{imgUrlTool:function(t,e){switch(e.mode){case"width":return i.default.getWidthSuffix(t,e["suffix-width"]);case"goods":return i.default.getGoodsRatioSuffix(t,e["suffix-width"],e["suffix-ratio"]);case"def":return i.default.getDefSuffix(t);case"no-resize":return i.default.getNoResizeSuffix(t);default:return i.default.getDefSuffix(t)}},handleError:function(t){this.binderror&&this.binderror(t)},handleLoad:function(t){this.bindload&&this.bindload(t)},modInView:function(){!this.inView&&e.default.lazyload&&(this.inView=!0)},modNotInView:function(){this.inView&&e.default.lazyload&&(this.inView=!1)}}}; 
 			}); 
		define("cube-core/componentClass/observer/array.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.arrayMethods=void 0;var r=require("../utils/index"),e=Array.prototype,t=exports.arrayMethods=Object.create(e);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(s){var o=e[s];(0,r.def)(t,s,function(){for(var r=arguments.length,e=new Array(r);r--;)e[r]=arguments[r];var t=o.apply(this,e),a=this.__ob__,i=void 0;switch(s){case"push":case"unshift":i=e;break;case"splice":i=e.slice(2)}return i&&a.observeArray(i,a.rootProps),a.rootProps&&a.vm._vx_dirtyData.push(a.rootProps),a.dep.notify(),t})}); 
 			}); 
		define("cube-core/componentClass/observer/dep.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();exports.pushTarget=function(e){u.target&&a.push(u.target),u.target=e},exports.popTarget=function(){u.target=a.pop()};var n=require("../utils/index"),r=0,u=function(){function u(){e(this,u),this.id=r++,this.subs=[]}return t(u,[{key:"addSub",value:function(e){this.subs.push(e)}},{key:"removeSub",value:function(e){(0,n.remove)(this.subs,e)}},{key:"depend",value:function(){u.target&&u.target.addDep(this)}},{key:"notify",value:function(){for(var e=this.subs.slice(),t=0,n=e.length;t<n;t++)e[t].update()}}]),u}();exports.default=u,u.target=null;var a=[]; 
 			}); 
		define("cube-core/componentClass/observer/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function r(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function e(r,e){r.__proto__=e}function t(r,e,t){for(var o=0,n=t.length;o<n;o++){var a=t[o];(0,u.def)(r,a,e[a])}}function o(r,e,t){if((0,u.isObject)(r)){var o=void 0;return(0,u.hasOwn)(r,"__ob__")&&r.__ob__ instanceof v?o=r.__ob__:p.shouldConvert&&(Array.isArray(r)||(0,u.isPlainObject)(r))&&Object.isExtensible(r)&&!r._isVue&&(o=new v(r,e,t)),o}}function n(r,e,t,n){var s=new i.default,_=Object.getOwnPropertyDescriptor(r,e);if(!_||!1!==_.configurable){var f=_&&_.get,p=_&&_.set,l=void 0;(0,u.hasOwn)(r,"__ob__")&&r.__ob__ instanceof v&&(l=r.__ob__);var c=o(t,l.vm,l.rootProps?l.rootProps:e);Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:function(){var e=f?f.call(r):t;return i.default.target&&(s.depend(),c&&c.dep.depend(),Array.isArray(e)&&a(e)),e},set:function(n){var a=f?f.call(r):t;if(n!==a&&(n===n||a===a)){p?p.call(r,n):t=n;var i=void 0;(0,u.hasOwn)(r,"__ob__")&&r.__ob__ instanceof v&&(i=r.__ob__),i.vm._vx_dirtyData.push(i.rootProps?i.rootProps:e),c=o(n,i.vm,i.rootProps?i.rootProps:e),s.notify()}}})}}function a(r){for(var e,t=0,o=r.length;t<o;t++)(e=r[t])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&a(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Observer=exports.observerState=void 0;var s=function(){function r(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}();exports.observe=o,exports.defineReactive=n,exports.set=function(r,e,t){if(Array.isArray(r)&&"number"==typeof e)return r.length=Math.max(r.length,e),r.splice(e,1,t),t;if((0,u.hasOwn)(r,e))return r[e]=t,t;var o=r.__ob__;return o?(n(o.value,e,t),o.vm._vx_dirtyData.push(o.rootProps?o.rootProps:e),o.dep.notify(),t):(r[e]=t,t)},exports.del=function(r,e){if(Array.isArray(r)&&"number"==typeof e)r.splice(e,1);else{var t=r.__ob__;(0,u.hasOwn)(r,e)&&(delete r[e],t&&(t.vm._vx_dirtyData.push(t.rootProps?t.rootProps:e),t.dep.notify()))}};var i=function(r){return r&&r.__esModule?r:{default:r}}(require("./dep")),_=require("./array"),u=require("../utils/index"),f=Object.getOwnPropertyNames(_.arrayMethods),p=exports.observerState={shouldConvert:!0,isSettingProps:!1},v=exports.Observer=function(){function a(o,n,s){r(this,a),this.value=o,this.dep=new i.default,this.vm=n,this.rootProps=s,(0,u.def)(o,"__ob__",this),Array.isArray(o)?((u.hasProto?e:t)(o,_.arrayMethods,f),this.observeArray(o,this.rootProps)):this.walk(o)}return s(a,[{key:"walk",value:function(r){for(var e=Object.keys(r),t=0;t<e.length;t++)n(r,e[t],r[e[t]])}},{key:"observeArray",value:function(r,e){for(var t=0,n=r.length;t<n;t++)o(r[t],this.vm,e)}}]),a}(); 
 			}); 
		define("cube-core/componentClass/observer/scheduler.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(){s=t.length=n.length=0,o={},l=u=!1}function r(){u=!0;var r=void 0,i=void 0;t.sort(function(e,r){return e.id-r.id});try{for(s=0;s<t.length;s++)i=(r=t[s]).id,o[i]=null,r.run()}catch(e){console.error(e)}finally{e()}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MAX_UPDATE_COUNT=void 0,exports.queueWatcher=function(e){var n=e.id;if(null==o[n]){if(o[n]=!0,u){for(var c=t.length-1;c>s&&t[c].id>e.id;)c--;t.splice(c+1,0,e)}else t.push(e);l||(l=!0,(0,i.nextTick)(r,e.vm))}};var i=require("../utils/index"),t=(exports.MAX_UPDATE_COUNT=100,[]),n=[],o={},l=!1,u=!1,s=0; 
 			}); 
		define("cube-core/componentClass/observer/watcher.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e){d.clear(),s(e,d)}function s(e,t){var i=void 0,h=void 0,n=Array.isArray(e);if((n||(0,r.isObject)(e))&&Object.isExtensible(e)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(n)for(i=e.length;i--;)s(e[i],t);else for(i=(h=Object.keys(e)).length;i--;)s(e[h[i]],t)}}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),h=require("./scheduler"),n=require("./dep"),r=(function(e){e&&e.__esModule}(n),require("../utils/index")),a=0,u=function(){function s(t,i,h,n){e(this,s),this.vm=t,t._vx_watchers.push(this),n?(this.deep=!!n.deep,this.lazy=!!n.lazy,this.sync=!!n.sync):this.deep=this.lazy=this.sync=!1,this.cb=h,this.id=++a,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new r._Set,this.newDepIds=new r._Set,this.expression="","function"==typeof i?this.getter=i:(this.getter=(0,r.parsePath)(i),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()}return i(s,[{key:"get",value:function(){(0,n.pushTarget)(this);var e=void 0,s=this.vm;return e=this.getter.call(s,s),this.deep&&t(e),(0,n.popTarget)(),this.cleanupDeps(),e}},{key:"addDep",value:function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))}},{key:"cleanupDeps",value:function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var s=this.depIds;this.depIds=this.newDepIds,this.newDepIds=s,this.newDepIds.clear(),s=this.deps,this.deps=this.newDeps,this.newDeps=s,this.newDeps.length=0}},{key:"update",value:function(){this.lazy?this.dirty=!0:this.sync?this.run():(0,h.queueWatcher)(this)}},{key:"run",value:function(){if(this.active){var e=this.get();if(e!==this.value||(0,r.isObject)(e)||this.deep){var t=this.value;this.value=e,this.cb.call(this.vm,e,t)}}}},{key:"evaluate",value:function(){this.value=this.get(),this.dirty=!1}},{key:"depend",value:function(){for(var e=this.deps.length;e--;)this.deps[e].depend()}},{key:"teardown",value:function(){if(this.active){this.vm._isBeingDestroyed||(0,r.remove)(this.vm._vx_watchers,this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1}}}]),s}();exports.default=u;var d=new r._Set; 
 			}); 
		define("cube-core/componentClass/utils/global.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(a,e,n){return e&&t(a.prototype,e),n&&t(a,n),a}}(),e=function(){function e(a,n){t(this,e),this.data=a||{},this.callback=n}return a(e,[{key:"setGlobal",value:function(t){this.data=Object.assign(this.data,t),this.callGlobal(this.data)}},{key:"getGlobal",value:function(){return this.data}},{key:"callGlobal",value:function(t){this.callback&&this.callback(t)}}]),e}();exports.default=e; 
 			}); 
		define("cube-core/componentClass/utils/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t){return"function"==typeof t&&/native code/.test(t.toString())}Object.defineProperty(exports,"__esModule",{value:!0}),exports._Set=exports.nextTick=exports.hasProto=exports.noop=void 0;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.typeOf=function(t){var e=/\[object (\S*)?\]/g,n=f.call(t);return e.exec(n)[1]},exports.def=function(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})},exports.isObject=function(t){return null!==t&&"object"===(void 0===t?"undefined":r(t))},exports.isPlainObject=function(t){return"[object Object]"===f.call(t)},exports.hasOwn=function(t,e){return a.call(t,e)},exports.remove=function(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}},exports.parsePath=function(t){if(!s.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}},exports.isNative=e,exports.bind=function(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n},exports.extend=function(t,e){for(var n in e)t[n]=e[n];return t},exports.toArray=function(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r},exports.callHook=function(t,e){var n=t[e];n&&n.call(t)},exports.callDirHook=function(t,e,n){var r=e.def&&e.def[n];r&&r(t,e)},exports.formatModuleConfig=function(t){return t&&t.formData&&Object.keys(t.formData).forEach(function(e){e&&t.formData[e]&&(t[e]=t.formData[e])}),t},exports.isLargerVersion=function(t){if(!t||!u)return!1;var e=t.split("."),n=u.split(".");return e[0]!=n[0]?e[0]>n[0]:e[1]!=n[1]?e[1]>n[1]:e[2]>=n[2]};var o=require("../../../common/m"),i=function(t){return t&&t.__esModule?t:{default:t}}(o),u=!1;try{var c=o.System.getSync("systemInfo");u=c.version}catch(t){}var f=Object.prototype.toString,a=(exports.noop=function(){},exports.hasProto="__proto__"in{},Object.prototype.hasOwnProperty),s=/[^\w.$]/,l=void 0;"undefined"!=typeof Set&&e(Set)?exports._Set=l=Set:exports._Set=l=function(){function e(){t(this,e),this.set=Object.create(null)}return n(e,[{key:"has",value:function(t){return!0===this.set[t]}},{key:"add",value:function(t){this.set[t]=!0}},{key:"clear",value:function(){this.set=Object.create(null)}}]),e}();exports.nextTick=function(){function t(){try{n=!1;var t=e.slice(0);e.length=0;for(var r=0;r<t.length;r++)t[r]()}catch(t){}}var e=[],n=!1,r=void 0;return r=function(e){setTimeout(function(){e&&e.__hasKiled||t()},0)},function(t,o){var u=void 0;if(e.push(function(){t?t.call(o):u&&u(o)}),n||(n=!0,r(o)),!t&&void 0!==i.default.Promise)return new i.default.Promise(function(t,e){u=t})}}();exports._Set=l; 
 			}); 
		define("cube-core/componentClass/utils/lazyData.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return(e||[]).filter(function(e){return e.requestFirst}).length}function n(e){var t="";if(e&&"[object Object]"==Object.prototype.toString.call(e)){var r=Object.keys(e);r&&r.length&&r.sort().forEach(function(r){t+=r+"="+e[r]+";"})}return t}function i(e,t,r){var n=[];(e||[]).forEach(function(e){e.isReceive||e.isPending||(e.isPending=!0,n.push("#m"+e.instId))});var i=function(){(e||[]).forEach(function(e){e.isReceive=!0})},a=function(){(e||[]).forEach(function(e){e.isPending=!1})};n&&n.length&&(0===t?(r&&r(),i(),a()):(0,c.selectorInView)(n.join(","),function(){r&&r(),i(),a()},function(){a()}))}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=require("../../../common/m"),s=function(e){return e&&e.__esModule?e:{default:e}}(o),c=require("./scrollFunc"),u=s.default.MCE,l=s.default.fn.sendMsg,f=!0;try{var p=o.System.getSync("systemInfo");f=/(iPhone 5)|(iPhone 4s)/gi.test(p.model)}catch(e){}var h={mce:{method:"multiget",param:"pids",realtime:!1},mceonly:{method:"get",param:"pid",realtime:!1},mceats:{method:"multiget",param:"pids",realtime:!1},mceonline:{method:"multiget",param:"pids",realtime:!0},mceonlyonline:{method:"get",param:"pid",realtime:!0},mcereconline:{method:"multiget",param:"pids",realtime:!0,noNeedRealTime:!0},mcereconlyonline:{method:"get",param:"pid",realtime:!0,noNeedRealTime:!0}},m=function(){function o(e){t(this,o),this.$wrapper=e,this.items=[],this.preparedBlocks=[],this.MOD_ITEM_SIZE=20,this.MAX_MERGE_ITEM_SIZE=f?20:40}return a(o,[{key:"collect",value:function(e){var t=e.inst,r=e.instId,n=t.config.formData;for(var i in n){var a=n[i];if(a&&a.length){var o=!0,s=!1,c=void 0;try{for(var u,l=a[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var f=u.value;if(f){var p=f.sourceKey;p&&!f["request-self"]&&this.items.push({inst:t,instId:r,sourceKey:p,sourceType:f.sourceType,size:f.size,sourceAlone:f.sourceAlone,extraParam:f.extraParam,requestFirst:f.requestFirst,isReceive:!1,isPending:!1})}}}catch(e){s=!0,c=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw c}}}}}},{key:"prepare",value:function(){var e=this,t={};this.items.forEach(function(r,n){r.sourceAlone||r.requestFirst||0==n?e.preparedBlocks.push([r]):r.sourceType&&(t[r.sourceType]=t[r.sourceType]||[],t[r.sourceType].push(r))});var r={};Object.keys(t).forEach(function(e){t[e].forEach(function(t){if(t.extraParam){var i=n(t.extraParam);r[e+"_"+i]=r[e+"_"+i]||[],r[e+"_"+i].push(t)}else r[e]=r[e]||[],r[e].push(t)})});var i=0,a=[];Object.keys(r).forEach(function(t){r[t].forEach(function(t){i>=e.MAX_MERGE_ITEM_SIZE?(e.preparedBlocks.push(a),i=t.size?parseInt(t.size):e.MOD_ITEM_SIZE,a=[t]):(a.push(t),i+=t.size?parseInt(t.size):e.MOD_ITEM_SIZE)}),a.length&&(e.preparedBlocks.push(a),i=0,a=[])})}},{key:"receiveData",value:function(e,t,r){var n=this,i=this;if(!i.$wrapper.__hasKilled){e.forEach(function(e){var r=e.inst,n=e.sourceKey,i=t&&t[n]&&JSON.parse(JSON.stringify(t[n].list||[])),a=t&&t[n]&&JSON.parse(JSON.stringify(t[n].context||[]));!i&&t&&t.list&&(i=t.list,a=t.context),r.$vm.$broadcast("vx:__lazy-data__",i,n,a)}),this.send(r);setTimeout(function(){i.$wrapper.__hasKilled||(r&&r(),setTimeout(function(){i.$wrapper.__hasKilled||n.send(r)},200))},1e3)}}},{key:"sendData",value:function(t,r){var n=this,i="multiget",a=!1,o=!1,s="pids",c=t.map(function(e,t){if(0==t){var r=h[e.sourceType];i=r.method,a=r.realtime,o=r.noNeedRealTime,s=r.param}return e.sourceKey}),f={};c=c.filter(function(e){return!f[e]&&(f[e]=!0,!0)});var p=function(t,r,n,i){if(i){var a;return u[t]((a={},e(a,s,n.join(",")),e(a,"appPlat","sapp"),a))}var o;return u[t]((o={},e(o,s,n.join(",")),e(o,"appPlat","sapp"),o),r)};p(i,a,c,o).then(function(e){n.receiveData(t,e,r)}).catch(function(e){p(i,a,c,o).then(function(e){n.receiveData(t,e,r)}).catch(function(e){n.receiveData(t,{},r),l(new Error("小程序 lazyData 请求失败！"+e),{_author:"xixing",threshold:5})})})}},{key:"send",value:function(e){if(!(this.preparedBlocks.length<=0)){var t=0,n=!1;this.preparedBlocks.forEach(function(e,i){r(e)||n||(t=i,n=!0)});var a=this;this.preparedBlocks.forEach(function(n,o){i(n,o===t||r(n)?0:o,function(){a.sendData(n,e)})})}}}]),o}();exports.default=m; 
 			}); 
		define("cube-core/componentClass/utils/mcomponent.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function n(n){var e={};return o.forEach(function(o){n[o]&&(e[o]=n[o],delete n[o])}),n.methods=Object.assign({},n.methods,e),n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(o,e){return o=n(o),o.__isCommonComponent=!0,o.__propsFunc=e||function(){return{}},{componentOptions:o,renderComponentsFunc:function(){}}};var o=["onLoad","onShow","onReady","onHide","onUnload"]; 
 			}); 
		define("cube-core/componentClass/utils/scrollFunc.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,o){var i=this;switch(m[t]=m[t]||{acms:[],indexs:[],type:0,iids:[]},t){case"module":m[t].type=5;break;case"mce":m[t].type=4;break;case"anchor":case"pit":m[t].type=5}m[t].acms.push(e.acm),void 0!==e.index&&m[t].indexs.push(e.index),e.iid&&m[t].iids.push(e.iid);!function e(){clearTimeout(f),f=setTimeout(function(){o.__hasKilled||(Object.keys(m)||[]).forEach(function(o){if(m[o]&&m[o].acms.length){var a=[];if(2===c.default.read().level&&"mce"===o){var n=m[o].acms,d=m[o].iids;if(n.length>0){var s=0;n.forEach(function(e,t){var o=e.split("-mf_")[0],i=e.split("-mf_")[1],n=i.split("_")[1].split("-")[0],c="";o.indexOf(d[s])>0&&(c=d[s],s+=1),"3.mf.1_0_0.0.0.0"===o&&(o="error"),a.push({mun:p[n],moduleAcm:i,mceAcm:o,iid:c})}),console.table(a)}}i.$root.$logE("0x00000000",{acms:m[o].acms.splice(0,g),indexs:m[o].indexs.splice(0,g),type:m[o].type,iids:m[o].iids.splice(0,g)},{force:!0}),m[o].acms?e():m[t]={acms:[],indexs:[],type:0,iids:[]}}})},1e3)}()}function o(e,o,i){var a=this,n=o._vx_moduleAcm,c=o.$root.$wrapper;if(!c.__hasKilled&&n){var d=n.split("."),s=wx.createSelectorQuery();s.selectAll("#"+e+" "+v).boundingClientRect(),s.selectAll("#"+e+" .anchor").boundingClientRect(),s.exec(function(s){if(s){var l=(s[0]||[]).concat(s[1]||[]),r=l.length;if(!a.__hasLogged[e].__mod){a.__hasLogged[e].__mod=!0,a.__hasLogged[e].__len=r;try{c.data.modules.forEach(function(e,t){p[e.instId]=t+1})}catch(e){console.log(e)}t.call(a,{acm:o._vx_moduleAcm+"-mfs_"+r,index:i},"module",c)}l.forEach(function(i,s){if(_(i,0)||o._alwaysShow){var l=i.dataset;if(l&&l.cubeAcmNode&&void 0===a.__hasLogged[e][l.dataLogContent]){a.__hasLogged[e][l.dataLogContent]=s,a.__hasLogged[e].__len=r;var h={acm:l.dataLogContent+"-"+d[6]+"-idx_"+s+"-mfs_"+r,index:s};l.dataLogIid&&(h.iid=l.dataLogIid),t.call(a,h,"mce",c)}else l&&void 0!=l.anchorIndex&&void 0===a.__hasLogged[e]["anchor"+l.anchorIndex]?(a.__hasLogged[e]["anchor"+l.anchorIndex]=s,a.__hasLogged[e].__len=r,t.call(a,{acm:n+"-idx_"+s+"-mfs_"+r,index:s},"anchor",c)):l&&void 0!=l.pitIndex&&void 0===a.__hasLogged[e]["pit"+l.pitIndex]&&(a.__hasLogged[e]["pit"+l.pitIndex]=s,a.__hasLogged[e].__len=r,t.call(a,{acm:n+"-idx_"+s+"-mfs_"+r,index:s},"pit",c))}})}})}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.showLog=o,exports.callModInView=function(){var e=this,t=!1,a=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return!(e.realBottom<t-r*o||e.realTop>t+r*(o+1))};if(this.__handleLazyRes||(this.__handleLazyRes=n.default.fn.throttle(function(n,c){if(!e.__hasKilled&&n){if(c)return void(e.__lazyModCache=n.map(function(t){return Object.assign(t,{realTop:e.__scrollPos+t.top,realBottom:e.__scrollPos+t.bottom})}));var s=!1,l=function(t,o,i,n,c,d){(!e.__lazyModCache&&_(t,i)||e.__lazyModCache&&a(t,e.__scrollPos,n))&&t.id?c(t,o):t.id&&d(t,o)};n.forEach(function(t,i){if(t){var a=u(e.data.modules,t.id);l.call(e,t,i,1,0,function(t,i){var a=e.moduleInst[t.id];a&&a.parent&&a.label&&a.$vm&&(a.$vm.$broadcast("vx:modInView"),o.call(e,t.id,a,i))},function(t,i){var a=e.moduleInst[t.id];a&&a.parent&&a.label&&a.$vm&&(a.$vm.$broadcast("vx:modNotInView"),a._alwaysShow&&o.call(e,t.id,a,i))}),l.call(e,t,i,3,3,function(e,t){a.isShow||(a.isShow=s=!0),a.modHeight=e.height,a.modWidth=e.width},function(t,o){e.moduleInst[t.id]._alwaysShow||a.isShow&&(a.isShow=!1,s=!0),a.modHeight=t.height,a.modWidth=t.width})}}),(i.default.lazymod||t)&&e.__openLazyMod&&s&&(!d&&wx.showLoading&&wx.showLoading({title:"正在加载中..."}),e.setData({modules:e.data.modules},function(){d||setTimeout(function(){wx.hideLoading&&wx.hideLoading()},300)}))}},500)),i.default.useModInView&&wx.createSelectorQuery&&wx.getSystemInfoSync){this.__lazyModCache&&this.__handleLazyRes(this.__lazyModCache);var c=wx.createSelectorQuery();this.moduleInst&&Object.keys(this.moduleInst).forEach(function(e){c.select("#"+e).boundingClientRect()});try{d&&c&&c.select(".wrapper-scroll-view").scrollOffset()}catch(e){}c.exec(function(o){if(!e.__hasKilled){e.__handleLazyRes(o,!!e.__lazyModCache);try{d&&(o[o.length-1].scrollTop||0)+(o[o.length-2]&&o[o.length-2].top||0)>4e4&&(t=!0)}catch(e){}}})}},exports.selectorInView=function(e,t,o){if(i.default.lazydata&&wx.createSelectorQuery&&wx.getSystemInfoSync){var a=wx.createSelectorQuery();a.selectAll(e).boundingClientRect(),a.exec(function(e){var i=!1;e&&e[0]&&(e[0].forEach(function(e){_(e,6)&&(i=!0)}),i?t&&t():o&&o())})}else t&&t()};var i=e(require("./switch")),a=require("../../../common/m"),n=e(a),c=e(require("../../../common/utils/debug")),d=!1;try{var s=a.System.getSync("systemInfo");d=/ios/gi.test(s.system)}catch(e){}var l=wx.getSystemInfoSync();l.screenHeight||l.screenWidth||(l.screenHeight=l.windowHeight,l.screenWidth=l.windowWidth);var r=l.screenHeight,h=l.screenWidth,_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e&&e.top<=l.screenHeight+r*t&&e.bottom>=-r*t&&e.width&&e.left<=l.screenWidth+h*t&&e.right>=-h*t},u=function(e,t){var o=void 0;return(e||[]).forEach(function(e){"m"+e.instId===t&&(o=e)}),o},m={},f=void 0,g=20,v=".log-item",p={}; 
 			}); 
		define("cube-core/componentClass/utils/switch.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../../common/m.js"),t=!1;try{var s=e.System.getSync("systemInfo");t=/ios/gi.test(s.system)}catch(e){}exports.default={lazyload:!1,lazydata:!0,lazymod:!t,useModInView:!0}; 
 			}); 
		define("mixins/cps.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){(0,i.updateCPS)(a.getMWPCookies(d,m))}function r(e){return a.request(d,m,e).then(a.filterResult).then(t).catch(function(e){n.default.warn("Fail to fetch cps cookies:",e.message)})}function o(e){if(!e)return Promise.resolve();if(e[l]){var t={};return Object.keys(e).forEach(function(r){r.startsWith(s)&&(t[r.slice(f)]=e[r])}),r(t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkCPS=o;var u=e(require("../common/m")),n=e(require("../common/utils/debug")),i=require("./logger/index"),c=e(require("../common/base/PageFactory")),a=u.default.MWP,s="_uni_",f=s.length,l=s+"uid",d="mwp.cpstrack.cpsTrackActionlet",m="1";t();var p={onLoad:function(e){o(e)}};exports.default=p,c.default.addDefaultMixin(p); 
 			}); 
		define("mixins/debug.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.switchMCERealTime=void 0;var t=e(require("../common/m")),a=e(require("../common/utils/debug")),n=t.default.qs,o=t.default.MWP,l=t.default.MCE,u=exports.switchMCERealTime=function(){var e=l.get,t=l.multiget;return function(a){a?(l.get=function(t){return e.call(l,t,!0)},l.multiget=function(e){return t.call(l,e,!0)}):(l.get=e,l.multiget=t)}}(),r=a.default.read();r.forceMceRealTime&&u(!0),void 0===o._setGlobalEnv?o.setGlobalEnv(r.env):o.setGlobalEnv(!0,r.env),exports.default={onShow:function(){if(!a.default.scanning){var e=a.default.read(),t=[];e.showDepth&&t.push("page depth: "+getCurrentPages().length);var o=this.route,l=this.query;Object.keys(l).length>0&&(o+="?"+n.stringify(l)),e.showPath&&t.push('page path: "'+o+'"'),e.copyPath&&wx.canIUse&&wx.canIUse("setClipboardData")&&(wx.setClipboardData({data:o}),t.push("page path copied")),t.length>0&&wx.showModal({content:t.join(", "),showCancel:!1})}}}; 
 			}); 
		define("mixins/logger/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};module.exports=require("../../common/lib")([5],{28:function(e,n,o){function r(t){return"function"==typeof t?t():t}function i(t){return t?r(R[t]):R}function a(t){Object.assign(R,t)}function c(t){return H[t]?H[t]:0}function p(t){if(void 0===t&&(t={}),t.ptp){var e=t.ptp.match(/^_qd\.\w+?(\d+)(\.[^.]+){3}$/);e&&(P=Date.now(),Q=e[1],A.default.put(z,P+"::"+Q,{persistent:!0}))}}function s(){return void 0===Q&&(e=(t=(A.default.get(z)||"").split("::"))[0],P=void 0===e?0:e,n=t[1],Q=void 0===n?"":n),Q?Date.now()-parseInt(P,10)<=G?Q:(Q="0",A.default.remove(z,{persistent:!0}),Q):"0";var t,e,n}function u(){var t=K.a.getSync("systemInfo");return t?"小程序=>型号:"+t.model+",微信版本:"+t.version+",操作系统:"+t.system+",客户端平台:"+t.platform+",基础库版本:"+t.SDKVersion+",像素比:"+t.pixelRatio:"小程序=>未知版本"}function f(e,n){if(!e)return null;var o={};if("object"===(void 0===e?"undefined":t(e)))o.msg=e.message||"",o.stack=e.stack||"","string"!=typeof o.stack&&(o.stack=""+o.stack);else if("string"==typeof e){var r=e.split("\n");o.msg=r[1],o.stack=e}return o.ua=u(),o.type=1,n&&n._author?o:void 0}function l(){var t=getCurrentPages();if(t.length){var e=t[t.length-1];return Object.assign({},e.$getPtpData())}}function d(t){V._author=t}function g(t,e){var n={url:"wxa://error",refer:"",ptp_cnt:"",ptp_url:"",ptp_ref:""};Object.assign(n,l());var o=f(t,e=Object.assign({},V,e));o&&(o.formatUrl=n.url.split("?")[0],o.extra=JSON.stringify(e),k(n,"016000011",o))}function h(){F||(F=setTimeout(function(){i("pause")||x({force:!0})},2e3))}function m(){J.default.read().splitLog&&(X=1,et="https://log.mogujie.com/spot?web=1")}function v(){clearTimeout(F),F=null}function _(){W.length+B.length>50&&!tt&&(tt=!0,nt=3,g(new Error("日志队列超过50条，需要调整策略"),{_author:"qiyun",threshold:1}));try{wx.setStorage({key:"pendingLogQueue",data:{QUEUE:W,PENDING_QUEUE:B}})}catch(t){}}function w(){if(W.length>=X)return W.splice(0,X);var t=W.splice(0,W.length),e=B.splice(0,X-W.length);return t.concat(e)}function y(t){B=B.concat(t),_(),wx.getNetworkType({success:function(t){Z="none"===t.networkType}})}function x(t){if(!(Y>=nt||Z))if(!t.force&&W.length+B.length<X)W.length+B.length&&h();else{var e=w();if(e.length){_();var n=Date.now();v(),Y++,q.default.requestManager.sendRequest({url:et,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{v:2,pt:n,pf:i("platform"),data:e.join("\n")},success:function(t){200!=t.statusCode&&y(e)},complete:function(){Y--,i("pause")||x({})},fail:function(){y(e)}})}}}function D(){J.default.$on("update",function(){m()}),m(),wx.getStorage({key:"pendingLogQueue",success:function(t){var e=t.data;B=B.concat(e.PENDING_QUEUE),B=B.concat(e.QUEUE)}})}function S(t,e){e.force?W.unshift(t):W.push(t),_(),x(e)}function E(){if("number"!=typeof ot){var t=A.default.get("logId",{persistent:!0})||"",e=t.split("::"),n=e[0],o=e[1],r=void 0===o?"0":o;t&&rt===n?rt===n&&(ot=parseInt(r,10)+1):ot=1}else if(ot++,3===++it){it=0;var i=Date.format(new Date,"MMdd");i!==rt&&(rt=i,ot=1)}return A.default.put("logId",rt+"::"+ot,{persistent:!0}),ot}function $(t,e,n){void 0===n&&(n={});var o=[E(),i("uuid"),t,JSON.stringify(e)];"p"===t&&(n.force=!0),"n"===t&&(n.pending=!0),S(o.join("\t"),n)}function I(t,e,n){var o=Date.now(),r=K.a.getSync("systemInfo")||{};return{time:o,ver:i("v"),uid:i("uid"),_channel:"","tid-token":"",launchTime:i("lt"),active:0,deviceName:r.model,os_ver:r.system,root:0,network:0,provider:"",url:t.url,refer:t.refer,ptp_cnt:t.ptp_cnt,ptp_url:t.ptp_url,ptp_ref:t.ptp_ref,eid:e,ext:Object.assign({_notNative:!0,StartScene:i("scene"),cpsinfo:i("cpsinfo"),cpsparam:i("cpsparam"),_fromId:s()},n)}}function b(t){var e=I(t,"0",{});e.ext._pagelogid=t.pid,$("p",e)}function k(t,e,n,o){$("e",I(t,e,n),o)}function j(t){void 0===t&&(t=0),K.a.get("networkType").then(function(e){var n=c(e),o=K.a.getSync("systemInfo")||{},r="devtools"===o.platform?"dev":"";$("d",{time:Date.now(),ver:i("v"),uid:i("uid"),launchTime:i("lt"),_channel:"",new_did:"","tid-token":"",deviceName:r||o.model,os_ver:r||o.system,root:0,network:n,provider:"",wh:o.windowWidth+"x"+o.windowHeight,ext:{wx_ver:o.version,wxa_ver:o.SDKVersion||"",setupTime:t}})})}function T(t,e){var n=[],o=[],r=[],i=[],a=[],c={};t.forEach(function(t){n.push(t.acm),r.push(t.index),t.iid&&o.push(t.iid),t.cparam&&(a.push(t.cparam),i.push(t.iid))}),e&&e.getExposeInfo&&(c=e.getExposeInfo()),this.$logE(ct,Object.assign({},c,{acms:n,iids:o,indexs:r,cpcs:i})),a.length&&(delete c.properties,this.$logE(pt,Object.assign(c,{cparams:a})))}function O(t){var e=this,n=i("acmExt")&&i("acmExt").acmExtendFn;if(at){this.$exposeLog||(this.$exposeLog={cached:{}});var o=this.$exposeLog;clearTimeout(o.lockFlag),o.lockFlag=setTimeout(function(){var r=Date.now();wx.createSelectorQuery().selectAll(st).boundingClientRect(function(i){var a=[],c=[];i.forEach(function(t){if(t.top<ut().windowHeight){var e=t.dataset,r=e.acm,i=e.logIid,p=e.logIndex,s=e.logWall,u=e.cparam;if(r&&!o.cached[r]){o.cached[r]=!0;var f={acm:n?n(t.dataset):r,iid:i,index:parseInt(p)||0,cparam:u};s?c.push(f):a.push(f)}}}),c.length&&!t?(console.error("自动曝光打点需要传入图墙实例!"),T.call(e,a.concat(c))):(a.length&&T.call(e,a),c.length&&T.call(e,c,t)),console.log("自动曝光耗时:",Date.now()-r)}).exec()},400)}}function U(t){t.cparams&&(this.$logE(pt,{cparams:t.cparams}),delete t.cparams),this.$logE(ct,t)}function N(t,e){void 0===e&&(e=!0);for(var n,o="",r=0,i=0;i<t;i++)n=Math.floor(Math.random()*dt),o+=lt.charAt(n),r+=lt.charCodeAt(n);return e&&(o+=lt.charAt(r%dt)),o}function L(t){var e=A.default.get("TABS");if(!e)throw new Error("请在setup.js中设置小程序的Tab配置@奇云");return t.split("?")[0].replace("wxa:/","")in e}function C(t,e,n){if(L(t)&&n){if(gt)return!0;if(L(e))return!0}return!1}function M(t,e){var n=t.split("."),o=e.split(".");if(n[1]===o[1]&&n[4]===o[4])return!0}Object.defineProperty(n,"__esModule",{value:!0});var P,Q,F,q=o(11),A=o(3),R={pause:!1,uuid:"",platform:"57",uid:"",cpsinfo:"",cpsparam:"",scene:"9999"},H={wifi:4,"2g":1,"3g":2,unknown:0,none:-1},z="_fromId",G=864e5,J=o(6),K=o(1),V={threshold:10,_type:"wxa",_author:"nanzhu,qiyun"},W=[],B=[],X=10,Y=0,Z=!1,tt=!1,et="https://log.mogujie.com/log?web=1",nt=2;wx.onNetworkStatusChange&&wx.onNetworkStatusChange(function(t){Z=!1===t.isConnected});var ot,rt=Date.format(new Date,"MMdd"),it=0,at=wx.canIUse&&wx.canIUse("createSelectorQuery"),ct="0x00000000",pt="70005",st=".expose-log",ut=function(){var t;return function(){return t||(t=K.a.getSync("systemInfo")||{}),t}}(),ft=o(7);n.stopLogger=function(t){a({pause:t})},n.updateCPS=function(t){t&&a({cpsinfo:(t.__cpsinfo||"").replace("-",","),cpsparam:t.__cps||""})},n.nextPeventOnShow=function(t){gt=t},n.setScene=function(t){t&&a({scene:t})},n.getScene=function(){return i("scene")},n.setFromId=function(t){p(t)},n.getFromId=function(){return s()},n.initializeLogger=function(t){t&&(t.v=q.default.v,t.lt=q.performance.st,a(t))},n.setDefaultReporter=function(t){d(t)},n.reportMsg=function(t,e){g(t,e)},n.initQueue=function(){D()},o.d(n,"Logger",function(){return yt});var lt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",dt=lt.length,gt=!1,ht="",mt="",vt="",_t="",wt=!0,yt={onLoad:function(t){this.$root.ptpData=this.ptpData={pid:Date.now()+N(3,!1),ptp_cnt:"",ptp_url:"",ptp_ref:"",url:"",refer:""};var e=this.$root.route||this.$root.__route__,n=e.replace(/^pages\/(.+)\/index$/,"$1").replace(/\//g,"_"),o=[i("platform"),n,0,0,N(6)].join("."),r=this.ptpData;r.ptp_cnt=o,t.ptp?(r.ptp_url=decodeURIComponent(t.ptp),r.ptp_ref=mt):(r.ptp_url=ht,r.ptp_ref=mt);var a=Object(ft.stringify)(t,!1);a.length>0&&(a="?"+a),r.url="wxa://"+e+a,r.refer=_t,ht=o,mt=r.ptp_url,vt=r.ptp_ref,_t=r.url,b(this.ptpData)},onShow:function(){var t=this;this.ptpData.st=Date.now(),a({pause:!1});var e=this.ptpData;if(C(e.url,_t,this.$notFirstShow)){var n=e.ptp_cnt.split(".");5===n.length&&(n[4]=N(6)),e.ptp_cnt=n.join("."),e.ptp_url=ht,e.ptp_ref=mt,e.refer=_t,e.ptp_lst="",e.pid=Date.now()+N(3,!1),b(e)}else M(e.ptp_cnt,mt)?e.ptp_lst=ht:e.ptp_lst="";if(ht=e.ptp_cnt,mt=e.ptp_url,vt=e.ptp_ref,_t=e.url,this.$notFirstShow=!0,gt=!1,wt){var o=Date.now()-i("lt");wt=!1,setTimeout(function(){j(o)},0)}setTimeout(function(){t.$root&&t.$root.$expose()},200)},onHide:function(){this.$logE("013000002",{_pagelogid:this.ptpData.pid,sys_page_time:Date.now()-this.ptpData.st},{force:!0})},onUnload:function(){this.$logE("013000002",{_pagelogid:this.ptpData.pid,sys_page_time:Date.now()-this.ptpData.st},{force:!0})},methods:{$getPtpData:function(){return this.ptpData},$logForm:function(t,e,n){void 0===e&&(e=1),t||console.error("formId打点无效，请排查！"),this.$logE("000000244",Object.assign({formId:t,scene:e},n),{force:!0})},$logE:function(t,e,n){if(!t||"0"===t)throw new Error("event ID is invalid");k(this.ptpData,t,e,n)},$expose:function(t){O.call(this,t)},$logExpose:function(t){U.call(this,t)}}}}},[28]); 
 			}); 
		define("mixins/navigation.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e){if(t.ptpC||t.ptpD){var n=e.split(".");return n[2]=t.ptpC||"0",n[3]=t.ptpD||"0",t.ptp=n.join("."),m(t,"ptpC","ptpD")}return t.ptp=e,t}function n(t,e){var n=t.split("?"),a={};return 2===n.length&&(a=v(n[1])),e=Object.keys(e).reduce(function(t,n){return void 0!==e[n]&&""!==e[n]&&(t[n]=e[n]),t},{}),a=Object.assign(a,e),t=n[0]+"?"+h(a)}function a(t,e){t(n(y,e),function(){throw new Error("没有404页面，请升级navigation sdk！")})}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return Object.keys(t).map(function(e){/^log[A-Z]/.test(e)?n.push(e):""!==t[e]&&void 0!==t[e]||n.push(e)}),m(t,n)}function i(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?d.redirect:d.navigate,c=void 0;if("object"===(void 0===t?"undefined":s(t))){c=t.currentTarget.dataset;var f=this.$getPtpData(c);if(f.acm&&(c.acm=f.acm),c=e(c,f.ptp_cnt),Object.assign(c,b),c.href){var u=c.href;c=r(c,"href"),u=n(u,c),o(u,function(){a(o,Object.assign(c,{url:u}))})}else{if(!c.page)throw new Error("$navigate回调需要指定data-href或data-page参数");var l=c.page,g=p.default[l];c=r(c,"page"),g?o(g(c)):a(o,Object.assign(c,{page:l,msg:"不存在指定page"}))}}else{if("string"!=typeof t)throw new Error("$navigate参数异常，请指定跳转页");var v=this.$getPtpData(i);v.acm&&(i.acm=v.acm),i=e(i,v.ptp_cnt),Object.assign(i,b);var h=r(i);if(t in p.default){var m=p.default[t];"function"==typeof m&&o(m(h))}else{var y=n(t,h);o(y,function(){a(o,Object.assign(h,{url:y}))})}}}function o(t){var a=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"===(void 0===t?"undefined":s(t))&&(t=(i=t.currentTarget.dataset).href||"");var o=i,c=o.appId,u=o.fallback,p=o.errMsg,d=r(i,"appId","href","fallback","errMsg"),g=this.$canLaunch();d=e(d,this.ptpData.ptp_cnt),c===l.default.get("APPID")?this.$navigate(t,d):g?(d.__mgjuuid=f.System.getSync("deviceId"),t=n(t,d),wx.navigateToMiniProgram({appId:c,path:t,extraData:d,success:function(t){a.$logE("016000177",{suc:!0}),console.log(t)},fail:function(){a.$logE("016000177",{suc:!1,fallback:u}),u&&a.$navigate(u,d,!0),!u&&p&&wx.showModal({title:"唤起失败",content:p,showCancel:!1})}})):(u&&this.$navigate(u,d,!0),!u&&p&&wx.showModal({title:"唤起失败",content:p,showCancel:!1}))}function c(t,e){if(!t)return!1;for(var n=t.split("."),a=e.split("."),r=0;r<5;r++)if(parseInt(n[r])>parseInt(a[r]))return!0;return!1}Object.defineProperty(exports,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.initPersistentParams=function(t){t&&Object.keys(b).map(function(e){t[e]&&(b[e]=t[e])})};var f=require("../common/m"),u=t(f),l=t(require("../common/utils/cache")),p=t(require("../common/service/url")),d=require("../common/service/route"),g=u.default.qs,v=g.parse,h=g.stringify,m=u.default.fn.omit,y="/pages/404/index",b={mlf:"",f:"",f2:"",_fu:""},j=u.default.fn.debounce(i,1e3,!0),w=u.default.fn.debounce(o,1e3,!0);f.System.get("systemInfo").then(function(t){t&&"ios"===t.platform&&(j=u.default.fn.debounce(i,300,!0),w=u.default.fn.debounce(o,300,!0))});var $=void 0;exports.default={methods:{$redirect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=getCurrentPages().length>1;try{(e.forceRedirect||t.currentTarget.dataset.forceRedirect)&&(a=!0)}catch(t){}n?i.call(this,t,e,a):j.call(this,t,e,a)},$navigate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments.length>2&&void 0!==arguments[2]&&arguments[2]?i.call(this,t,e):j.call(this,t,e)},$canLaunch:function(){if(void 0===$&&($=!1,wx.navigateToMiniProgram)){var t=f.System.getSync("systemInfo");"android"===t.platform&&c(t.version,"6.5.9")?$=!0:"ios"===t.platform&&c(t.version,"6.5.8")&&($=!0)}return $},$launch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments.length>2&&void 0!==arguments[2]&&arguments[2]?o.call(this,t,e):w.call(this,t,e)}}}; 
 			}); 
		define("mixins/options.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function r(e){return i.request("mwp.cpsunion.cpsTransferUrlActionlet","1",{shortUrl:e}).then(i.filterResult).then(function(e){var r=e.match(/^(?:\w+:\/\/)?([^?]*?)\??([^?]+)$/),t=r[1],o=r[2];return{url:t,options:o?n.parse(o):{}}})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transferShortQuery=r;var t=e(require("../common/m")),o=require("./cps"),s=e(require("../common/base/PageFactory")),i=t.default.MWP,n=t.default.qs,u={_optionsPromise:null,methods:{$getOptions:function(e){var t=this;if(void 0===e&&(e=!0),null!==this._optionsPromise)return this._optionsPromise;var s=this.query._shortQuery;if(!s){var i=this.query.scene;if("string"==typeof i){var u={};if(i=decodeURIComponent(i),!(s=i.indexOf("=")<0?i:(u=n.parse(i))._shortQuery))return(0,o.checkCPS)(u),this._optionsPromise=Promise.resolve(u)}}return this._optionsPromise=s?r(s).then(function(r){var s=r.url,i=r.options,n=t.route;return s&&s!==n?(e&&("pages/home/index"===n?t.$navigate("/"+s,i,!0):t.$redirect("/"+s,i,!0)),Promise.reject({url:s,options:i})):((0,o.checkCPS)(i),i)}):Promise.resolve(this.query)}}};exports.default=u,s.default.addDefaultMixin(u); 
 			}); 
		define("mixins/share.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=require("../common/lib")([4],{30:function(e,t,n){function a(e,t){var n=e.split("?"),a={};2===n.length&&(a=Object(c.parse)(n[1])),Object.assign(a,t);var i=Object.keys(a).reduce(function(e,t){return void 0!==a[t]&&""!==a[t]&&(e[t]=a[t]),e},{});return i.f?i.f2="1002":i.f="1002",e=n[0]+"?"+Object(c.stringify)(i)}function i(e,t){return function(n){var i=this,c=e.call(t,n),o=this.ptpData,u=o.url,p=o.ptp_cnt,f=c.listPath,h=c.path||u;h=h.replace(/^wxa:\/+/,"/");var d={ptp:p,share_channel:l,_fu:s.default.uid,_mgjuuid:r.a.getSync("deviceId")};return f&&(f=f.replace(/^wxa:\/+/,"/"),d._surl=0===h.indexOf("/")?h:"/"+h,h=f),h=a(h,d),this.$logE("000000045",Object.assign({},c.eventParams),{force:!0}),{title:c.title,path:h,imageUrl:c.imageUrl,success:function(e){i.$logE("700700",Object.assign({title:c.title},c.eventParams),{force:!0}),c.success&&c.success.call(t,e)},fail:function(e){c.fail&&c.fail.call(t,e)},complete:function(e){c.complete&&c.complete.call(t,e)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.initShareScene=function(e){1036!==e&&1007!==e&&1008!=e||(o=!0)};var s=n(9),r=n(1),c=n(7),l=1,o=!1;t.default={onLoad:function(e){if("share_channel"in e){var t=e.share_channel;if(!/^\d+$/.test(t))return;l=parseInt(t,10)+1}this.onShareAppMessage&&(this.onShareAppMessage=i(this.onShareAppMessage,this),Object.defineProperty(this.$root,"onShareAppMessage",{value:this.onShareAppMessage}))},onShow:function(){if(this.query._surl&&o){var e=decodeURIComponent(this.query._surl);this.$navigate(e,{},!0)}o=!1}}}},[30]); 
 			}); 
		define("pages/coupon/common/constants.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.TAB_TYPE_CASH="platform",exports.TAB_TYPE_SHOP="shop"; 
 			}); 
		define("pages/coupon/components/banner/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},a=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/m")).default.MCE;exports.default={data:function(){return{isShow:!1,img:"",link_xcx:"",wxa_link:"",wxa_appId:"",acm:"",h:"150",w:"750"}},methods:{navigate:function(t){var a=t.currentTarget.dataset,e=void 0===a?{}:a;e.fallback="/pages/home/index",e.appId?this.$root.$launch(t):this.$root.$navigate(e.href||e.fallback)}},onShow:function(){var e=this;a.get({pid:"85033"},!0).then(function(a){var n=(a||{}).list,o=!1,r=(void 0===n?[]:n)[0]||{};r&&r.img&&(o=!0),r.w=r.w||"750",r.h=r.h||"150",e.setData(t({isShow:o},r))}).catch(function(t){e.setData({isShow:!1})})}}; 
 			}); 
		define("pages/coupon/components/list/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/utils/imgUrlTool")),t=require("../../common/constants");exports.default={data:function(){return{tabType:t.TAB_TYPE_SHOP,list:[],enums:{TAB_TYPE_SHOP:t.TAB_TYPE_SHOP,TAB_TYPE_CASH:t.TAB_TYPE_CASH}}},methods:{refresh:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.data.list=t.map(function(t,a){switch(t.shopLogo=e.default.getGoodsRatioSuffix(t.shopLogo,80,"1:1"),t.status){case 1:t.statusClass="used",t.tagImg="https://s10.mogucdn.com/mlcdn/c45406/170517_3ldcjhk9fh57l67ie55k5kk44k94d_252x180.png";break;case 2:t.statusClass="expired",t.tagImg="https://s10.mogucdn.com/mlcdn/c45406/170517_46hdg321884df6918j4keal57kjl7_252x180.png";break;default:t.statusClass="available"}return t}),this.setData(this.data)},platformNavigate:function(e){function t(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.some(function(e){return t.some(function(t){return t===e})})}var a=e.currentTarget.dataset,o=void 0===a?{}:a,n=o.channels;n&&0!==n.length?(delete o.promotionId,n=n||[],o.fallback="/pages/home/index",t(1)?(o.appId="wxca3957e5474b3670",o.href="/pages/qiang/index"):t(2,2017)?(o.appId="wx9d2c626c7ee86531",o.href="/pages/outfit/index"):t(2012)?(o.appId="wxca3957e5474b3670",o.href="/pages/pintuanIndex/index"):t(2005)?(o.appId="wx21c17841db9593cd",o.href="/pages/live/liveList/index"):t(3)&&(o.appId="wxca3957e5474b3670",o.href="/pages/charge/index"),o.appId?this.$root.$launch(e):this.$root.$navigate(o.href||o.fallback)):this.$root.$navigate("/pages/wallPackage/index",{promotionId:o.promotionId,promotionCode:"platformCoupon"})}},onLoad:function(){this.$on("refresh",this.refresh)}}; 
 			}); 
		define("pages/detail/components/base/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){return"object"==(void 0===t?"undefined":s(t))&&null!==t}function o(t){if(!e(t)||"[object Object]"!=Object.prototype.toString.call(t))return!1;var o=Object.getPrototypeOf(t);if(null===o)return!0;var n=Object.prototype.hasOwnProperty.call(o,"constructor")&&o.constructor;return"function"==typeof n&&n instanceof n&&Function.prototype.toString.call(n)==Function.prototype.toString.call(Object)}function n(t){var e=0;for(var o in t)t.hasOwnProperty(o)&&e++;return 0===e}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var i in e)e.hasOwnProperty(i)&&(o(e[i])&&!n(e[i])?t[i]=r(t[i],e[i]):t[i]=e[i]);return t}function i(t){var e=/^http\:\/\/i\.meilishuo\.net\//;return!(!/\/([a-zA-Z0-9]{28})_/.test(t)&&!e.test(t))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.responseErrorhandle=exports.responseSuccessHandle=exports.handleRequestError=exports.setWindowHeight=exports.fn=exports.PageStatus=exports.Constant=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.getAddCartLottery=function(t,e,o){var n=this;u.request("mwp.aston.simpleGamePort","2",{activityCode:t}).then(u.filterResult).then(function(t){t.giftId;var r=t.giftContent,i=(t.giftType,t.dailyLeftCount,r&&r.giftName||""),s=e.filter(function(t){return t.giftKey===i});s.length<=0&&(s=e.filter(function(t){return"0"===t.giftKey}));var a=s.filter(function(t){return t.itemTag&&o&&o.length>0&&o.indexOf(t.itemTag)});a.length<=0&&(a=s.filter(function(t){return!t.itemTag}));var l=a,u=l&&l.length>0&&l[0].image||"";n.$mask.show(),n.setData({lotteryResultImage:u,isLotteryResultShow:!0})}).catch(function(t){console.log(t),c(t,{_author:"changsheng",threshold:1})})};var a=t(require("../../../../common/m")),l=t(require("../../../../common/service/user")),u=a.default.MWP,c=a.default.fn.sendMsg,h=(exports.Constant={ANIMATION_TIME:400},exports.PageStatus={NO_REQUEST:"NO_REQUEST",REQUEST_SUCCESS:"REQUEST_SUCCESS",REQUEST_ERROR:"REQUEST_ERROR",ITEM_ERROR:"ITEM_ERROR"});exports.fn={getFullUrl:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return null;t=t.split("?").slice(0,2).join("?");var o=[];Object.keys(e).forEach(function(t){e[t]&&o.push(t+"="+e[t])});var n="";return o&&o.length>0&&(n=t.indexOf("?")>-1?"&":"?"),""+t+n+o.join("&")},getImageSize:function(t){var e=0,o=0;if(t){var n=t.match(/_(\d+)x(\d+)\./);i(t)||(o=Number(n[1]),e=Number(n[2]))}return{width:o,height:e}}},exports.setWindowHeight=function(){var t=this;wx.getSystemInfo({success:function(e){t.setData({windowHeight:e.windowHeight+"px"})},fail:function(t){console.log(t),c(t,{_author:"changsheng",threshold:1})}})},exports.handleRequestError=function(t){console.log(t),c(t,{_author:"changsheng",threshold:1}),l.default.showUserError(t)||(void 0).$toast.show(t.message)},exports.responseSuccessHandle=function(t,e){var o=t.success,n=t.fail,i=t.done,s=t.itemId,a=t.activityId,l=e.result&&e.result.esi||"";try{e=r(e,JSON.parse(l))}catch(t){}if(e.status&&1001===e.status.code)o&&"function"==typeof o&&o.call(this,e.result);else{var f=e.status&&e.status.msg||"商品信息错误";this.$toast.show(f),this.setData({pageStatus:h.ITEM_ERROR}),this.$errorPage.init({type:"NOT_FOUND",title:u.getGlobalEnv()===u.Env.Release?"":f}),"商品不存在"!==f&&(f+="itemId:"+s+";activityId:"+a,c(new Error(f),{_author:"changsheng,xiaoyao",threshold:1})),n&&"function"==typeof n&&n.call(this,f)}this.$loading.hide(),wx.hideNavigationBarLoading(),this.loadingFlag=!1,i&&"function"==typeof i&&i.call(this,e)},exports.responseErrorhandle=function(t,e){var o=t.itemId,n=t.activityId,r=t.done;console.log("error",e.code+":"+e.message),this.setData({pageStatus:h.REQUEST_ERROR}),this.$errorPage.init({type:"REQUEST_ERROR",callback:this.getItemData.bind(this,o,n),title:u.getGlobalEnv()===u.Env.Release?"":e.toString()}),c(e,{_author:"changsheng",threshold:1}),this.$loading.hide(),wx.hideNavigationBarLoading(),this.loadingFlag=!1,r&&"function"==typeof r&&r.call(this,e)}; 
 			}); 
		define("pages/detail/components/coupon/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},onLoad:function(){},methods:{onCouponClick:function(t){var e=t.currentTarget,o=e.dataset.id,a=e.dataset.diabled,r=e.dataset.index;if(!a){var d=t.detail.formId;this.$root.$logForm(d,2),this.$parent.$emit("getShopCoupon",o,r)}}}}; 
 			}); 
		define("pages/detail/components/entrybar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},methods:{init:function(t){this.setData(t)},onClick:function(){this.data.linkUrl&&this.$root.$navigate(this.data.linkUrl)}}}; 
 			}); 
		define("pages/detail/components/express/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},methods:{init:function(t){t&&this.setData(t)}}}; 
 			}); 
		define("pages/detail/components/graphic/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/utils/imgUrlTool")),t=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(require("../base/index")).fn.getImageSize;exports.default={data:function(){return{}},onLoad:function(){},methods:{init:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i;i.detailImage&&i.detailImage.length>0&&i.detailImage.forEach(function(i,r){i.list&&i.list.length>0&&(n.detailImage[r].list=i.list.map(function(i){var n=e.default.getWidthSuffix(i,750),r=t(n);return{img:n,width:750,height:750*r.height/r.width}}))}),this.setData(n)}}}; 
 			}); 
		define("pages/detail/components/head/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{cartImage:"https://s10.mogucdn.com/mlcdn/c45406/170614_0ceeid321e00bc1la8h7b40a9jea3_80x80.png"}},onLoad:function(){},methods:{init:function(t){},showCart:function(){this.$root.showCart&&this.$root.showCart()}}}; 
 			}); 
		define("pages/detail/components/middlebanner/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var o=t(require("../../../../common/m")),e=t(require("../../../../common/service/user.js")),i=o.default.MWP,n=o.default.MCE,s=o.default.fn.sendMsg;exports.default={data:function(){return{}},getBannerData:function(){var t=this;n.get({pid:73570}).then(function(o){if(o.list&&o.list.length>0){var e=o.list[0],i=e.couponPid,n=e.bgImage,s=e.link;t.couponPid=i,t.link=s,n&&t.setData({image:n})}}).catch(function(t){console.log(t),s(t,{_author:"changsheng",threshold:1})})},getCoupon:function(){var t=this;this.$loading&&this.$loading.show(),i.request("mwp.diana.couponLaunch","3",{relationKey:this.couponPid,platform:"app"}).then(i.filterResult).then(function(o){t.$loading&&t.$loading.hide();t.$toast&&t.$toast.show("领券成功！快去我的-优惠券-全场优惠券查看")}).catch(this.handleRequestError.bind(this))},handleRequestError:function(t){this.$loading&&this.$loading.hide(),console.log(t),s(t,{_author:"changsheng",threshold:1}),e.default.showUserError(t)||this.$toast&&this.$toast.show(t.message)},methods:{init:function(t){this.$toast=t.$toast,this.$loading=t.$loading,this.getBannerData()},couponSubmitHandler:function(t){var o=t.detail.formId;if(this.$root.$logForm(o,2),this.couponPid)this.getCoupon();else{if(!this.link)return;this.$root.$redirect(this.link)}}}}; 
 			}); 
		define("pages/detail/components/moresku/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},onLoad:function(){},methods:{init:function(t){this.$footbar=t.$footbar,this.setData({message:t.skuMessage})},onMoreSkuClick:function(t){this.$footbar.callMoreSkuClick(t,"banner")}}}; 
 			}); 
		define("pages/detail/components/parameter/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},onLoad:function(){},methods:{init:function(t){this.setData(t)}}}; 
 			}); 
		define("pages/detail/components/pintuan/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./rule/index")),u=e(require("./success/index")),n=e(require("./join/index")),i=e(require("./lotteryrule/index"));exports.default={data:function(){return{}},components:{pintuanRule:t.default,pintuanSuccess:u.default,pintuanJoin:n.default,lotteryRule:i.default},onLoad:function(){},methods:{init:function(e){var t=e.pintuanInfo,u=e.$footbar;t&&(this.$pintuanRule.init({tuanNum:t.tuanNum}),this.$pintuanJoin.init({joinTuanList:t.joinTuanList}),this.$pintuanSuccess.init({successTuan:t.successTuan,successTuanNum:t.successTuanNum,$footbar:u}),this.$lotteryRule.init({startTime:t.startTime,endTime:t.endTime,awardNum:t.awardNum,tuanType:t.tuanType,openAwardNum:t.progressDTO&&t.progressDTO.openAwardNum||""}),this.setData(t))}}}; 
 			}); 
		define("pages/detail/components/pintuan/join/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../../../components/countdown/index")),n=t(require("../../../../../common/utils/imgUrlTool")),o=(t(require("../../../../../common/live/index")),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(require("../../base/index")).fn.getFullUrl);exports.default={data:function(){return{}},components:{countdown0:e.default,countdown1:e.default},onLoad:function(){},getFormat:function(t){return t<60?"hh:mm:ss":t<3600?"hh:mm:ss":t<86400?"hh:mm:ss":"dd:hh:mm:ss"},methods:{init:function(t){var e=this;if(t.joinTuanList&&t.joinTuanList.length>0){var o=t.joinTuanList.map(function(t,o){var r=t.time,a=t.avatar;return e["$countdown"+o].init({format:e.getFormat(r),countdown:r}),Object.assign({},t,{avatar:n.default.getGoodsRatioSuffix(a,100,"1:1")})});this.setData({joinTuanList:o})}},onJoinClick:function(t){var e=t.currentTarget.dataset.href;this.$root.$redirect(o(e,{liveParams:this.$root.query.liveParams,cparam:this.$root.query.cparam,fromPage:"detail",acm:this.$root.query.acm}))}}}; 
 			}); 
		define("pages/detail/components/pintuan/lotteryrule/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{titleIcon:"https://s10.mogucdn.com/mlcdn/c45406/170703_4a491lk897i064468cja3dg53l851_128x32.png"}},components:{},onLoad:function(){},methods:{init:function(t){var e=1e3*t.startTime,n=1e3*t.endTime,i=t.awardNum,o=t.tuanType,a=t.openAwardNum,d=3==o?"活动结束后24小时内，从有资格抽奖的用户中，随机抽取中奖者。":"抽奖商品成团数每满"+a+"，就开奖一次，每次一个中奖名额，库存开完为止。",l=3==o?"4.":"5.",r=3==o?"5.":"6.",m={text:"支付成功的1分钱交易订单不代表中奖，中奖的用户名单会在“我的拼团-拼团成功-中奖详情”、“蘑菇街拼团”公众号、抽奖商品详情页等多个地方展示，请及时查看。",title:"4."},s=[{text:"活动时间："+new Date(e).toFormattedString("yyyy年M月d日hh:mm")+" - "+new Date(n).toFormattedString("yyyy年M月d日hh:mm"),title:""},{text:"只有参加拼团，而且拼团成功的用户，才有资格参与抽奖。",title:"1. "},{text:d,title:"2. "},{text:"参与活动一等奖为本商品（"+i+"人），未中奖者会退还付款金额。",title:"3. "},{text:"抽奖活动结束后，中奖商品3天内发货。",title:l},{text:"本活动真实有效，有任何疑问请联系蘑菇街官方客服。",title:r}];8==o&&s.splice(5,0,m),this.setData({rules:s})}}}; 
 			}); 
		define("pages/detail/components/pintuan/rule/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{titleIcon:"http://s3.mogucdn.com/mlcdn/c45406/171215_3e5l0leb58lbb0341ceieh15ebf69_124x31.png"}},components:{},onLoad:function(){},methods:{init:function(t){var e=t.tuanNum;this.setData({tuanNum:e})}}}; 
 			}); 
		define("pages/detail/components/pintuan/success/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../../common/utils/imgUrlTool"));exports.default={data:function(){return{}},components:{},onLoad:function(){},formatTimeStamp:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd hh:mm:ss",s=((t=Math.abs(t))-t%86400)/86400,a=((t%=86400)-t%3600)/3600,n=((t%=3600)-t%60)/60,o=((t%=60)-t%1)/1,u=(t%=1,(e=e.toLowerCase()).match(/([a-z])(\1)*/gi));-1===u.indexOf("d")&&-1===u.indexOf("dd")&&(a+=24*s),-1===u.indexOf("h")&&-1===u.indexOf("hh")&&(n+=60*a),-1===u.indexOf("m")&&-1===u.indexOf("mm")&&(o+=60*n);var i={dd:s>9?s:"0"+s,hh:a>9?a:"0"+a,mm:n>9?n:"0"+n,ss:o>9?o:"0"+o,d:s,h:a,m:n,s:o};return e.replace(/([a-z])(\1)*/gi,function(t){return i[t]})},getFormatTime:function(t){var e="";return e=t<60?"s秒前":t<3600?"m分s秒前":t<86400?"h小时mm分s秒前":"d天h小时m分s秒前",this.formatTimeStamp(t,e)},methods:{init:function(e){var s=this;if(this.$footbar=e.$footbar,e.successTuan&&e.successTuan.length>0){var a=e.successTuan.map(function(e,a){e.time=s.getFormatTime(e.time);var n=e.avatar;return Object.assign({},e,{avatar:t.default.getGoodsRatioSuffix(n,100,"1:1")})}),n=e.successTuanNum||0;this.setData({successTuan:a,successTuanNum:n})}},showSku:function(){this.$footbar.showSku()}}}; 
 			}); 
		define("pages/detail/components/presaleinfo/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../base/index");exports.default={data:function(){return{isShow:null}},onLoad:function(){},methods:{init:function(e){if(this.$mask=e.$mask,e.preSaleInfo&&e.preSaleInfo.ruleDesc){var t=e.preSaleInfo,s=t.ruleDesc;s.rule=s.rules.map(function(e){return e.replace(/<(\/)?[\w\d\s="']+>/g,"")}),t.ruleDesc=s,this.setData(t)}},onInnerClick:function(){},onCloseClick:function(){var t=this;this.$mask.hide(),this.setData({isShow:!1}),setTimeout(function(){t.setData({isShow:null})},e.Constant.ANIMATION_TIME)},showDetail:function(){this.$mask.show(),this.setData({isShow:!0})}}}; 
 			}); 
		define("pages/detail/components/price/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../share/index"));exports.default={data:function(){return{}},components:{share:e.default},onLoad:function(){},methods:{init:function(e,t){this.$share.init({isShareHide:t}),this.setData(e)}}}; 
 			}); 
		define("pages/detail/components/primarybanner/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../../common/m")),n=t(require("../../../../common/utils/houston")),a=(e.default.MWP,e.default.MCE),i=e.default.fn.sendMsg;exports.default={data:function(){return{}},getBannerData:function(t){var e=this;t&&a.get({pid:t}).then(function(t){if(t.list&&t.list.length>0){var n=t.list[0];e.setData(n)}}).catch(function(t){console.log(t),i(t,{_author:"changsheng",threshold:1})})},methods:{init:function(t){var e=this;n.default.getConfig({groupName:"detail",key:"primaryBannerPid",defaultValue:86227,listener:this.getBannerData.bind(this)}).then(function(t){e.getBannerData(t)}).catch(function(t){console.log(t)})},handleBannerClick:function(t){var e=t.currentTarget.dataset.link;e&&this.$root.$redirect(e)}}}; 
 			}); 
		define("pages/detail/components/progress/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},methods:{init:function(t){this.setData(t)}}}; 
 			}); 
		define("pages/detail/components/promotion/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var o=e(require("../coupon/index")),t=require("../base/index"),s=e(require("../../../../common/m")).default.MWP;exports.default={data:function(){return{isDetailShow:null,promotions:{},$coupon:{couponCardImage:"https://s10.mogucdn.com/p2/170213/117603130_6i5767h706g683dj35febbc2c37a4_176x116.png",disabledCardImage:"https://s10.mogucdn.com/p2/170213/117603130_4a8d76d1e2l7b854b0hk76lg97g3a_176x116.png",specialCardImage:"https://s10.mogucdn.com/p2/170213/117603130_6i5767h706g683dj35febbc2c37a4_176x116.png"}}},components:{coupon:o.default},onLoad:function(){this.$on("getShopCoupon",this.getShopCoupon)},init:function(e){this.$toast=e.$toast,this.$mask=e.$mask,this.$loading=e.$loading;var o={},t=0,s=0;(e.promotionData&&e.promotionData.list||[]).forEach(function(e,n){e.isNeedGet?o.needGet&&o.needGet.length>0?o.needGet.push(e):o.needGet=[e]:(o[e.proType]&&o[e.proType].list.length>0?(o[e.proType].list.push(e),o[e.proType].desc+="，"+e.limitDesc+e.effectDesc+(1===e.scope?"(指定商品享受)":"")):o[e.proType]={list:[e],desc:e.limitDesc+e.effectDesc+(1===e.scope?"(指定商品享受)":"")},o[e.proType]),e.isNeedGet||"packageSale"===e.proType||t++,s++}),t>0&&(o.isReduceContentShow=!0),o.count=s,this.setData({promotions:o})},getShopCoupon:function(e,o){var t=this;this.$loading.show(),s.request("mwp.ford.getShopCoupon","1",{campId:e,source:13}).then(s.filterResult).then(function(s){var n=t.data.promotions;n.needGet[o].isAlreadGet=!0,t.setData({promotions:n}),t.$toast.show("领取成功"),t.$root.$logE("016000502",{CouponID:e,IsSuccess:1}),t.$loading.hide()}).catch(function(o){console.log("error",o),t.$toast.show(o.message),t.$root.$logE("016000502",{CouponID:e,IsSuccess:0}),t.$loading.hide()})},methods:{onCloseClick:function(){var e=this;this.$mask.hide(),this.setData({isDetailShow:!1}),setTimeout(function(){e.setData({isDetailShow:null})},t.Constant.ANIMATION_TIME)},showDetail:function(){this.$mask.show(),this.setData({isDetailShow:!0})},onInnerClick:function(){},setSpecialCardImage:function(e){this.$coupon.setData({specialCardImage:e||this.data.specialCardImage})}}}; 
 			}); 
		define("pages/detail/components/rate/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/utils/imgUrlTool"));exports.default={data:function(){return{}},onLoad:function(){},methods:{init:function(e){var a=e.rateInfo,i=e.itemId;e.rateInfo&&e.rateInfo.list&&e.rateInfo.list.length>0&&(e.rateInfo.list.forEach(function(e,i){e.images&&e.images.length>0&&(a.list[i].images=e.images.map(function(e,a){return t.default.getGoodsRatioSuffix(e,140,"1:1")})),a.list[i].created=new Date(1e3*e.created).toFormattedString("yyyy-MM-dd"),a.list[i].user.avatar=t.default.getGoodsRatioSuffix(e.user.avatar,50,"1:1")}),this.setData(Object.assign({},a,{itemId:i})))}}}; 
 			}); 
		define("pages/detail/components/recommend/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/utils/imgUrlTool"));exports.default={data:function(){return{}},onLoad:function(){},methods:{init:function(e){var i=e.list,u=[],o=[],n=[];i&&i.length>0&&(e.list=i.map(function(e,i){return u.push(e.item_id),n.push(e.acm),o.push(i),e.image=t.default.getGoodsRatioSuffix(e.image,200,"2:3"),e}),this.setData(e))}}}; 
 			}); 
		define("pages/detail/components/service/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../base/index");exports.default={data:function(){return{isServiceShow:null}},onLoad:function(){},methods:{showServices:function(){this.$mask.show(),this.setData({isServiceShow:!0})},onCloseClick:function(){var t=this;this.$mask.hide(),this.setData({isServiceShow:!1}),setTimeout(function(){t.setData({isServiceShow:null})},e.Constant.ANIMATION_TIME)},onInnerClick:function(){},setBackgroundImage:function(e){this.setData({backgroundImage:e})},init:function(e){this.$mask=e.$mask;var t=e.itemServices;t&&this.setData(t)}}}; 
 			}); 
		define("pages/detail/components/share/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/m"));t.default.MCE,t.default.fn.sendMsg;exports.default={data:function(){return{}},getShareData:function(){this.setShareData()},setShareData:function(t){var e={icon:"https://s10.mogucdn.com/mlcdn/c45406/170908_6h0918i3b8l82650jh00li88fk5ea_40x40.png",title:"分享",isShareShow:wx.canIUse&&wx.canIUse("button.open-type.share"),titleColor:"#999999"};this.setData(Object.assign({},e,t))},methods:{init:function(t){this.getShareData()}}}; 
 			}); 
		define("pages/detail/components/shop/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/utils/imgUrlTool")),t=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(require("../base/index")).fn.getImageSize;exports.default={data:function(){return{}},onLoad:function(){},getImageSize:function(e){},methods:{init:function(o){if(o){o.shopLogo=e.default.getGoodsRatioSuffix(o.shopLogo,50,"1:1"),o.levelArr=new Array(o.level);var i={tagWidth:0,tagHeight:0};o.tag&&(i=t(o.tag)),this.setData(Object.assign({},o,{tagWidth:i.width,tagHeight:i.height}))}}}}; 
 			}); 
		define("pages/detail/components/swiper/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/utils/imgUrlTool"));exports.default={data:function(){return{}},onLoad:function(){},methods:{init:function(t,i){var a=this;if(this.isPreventPreview=!!i,t.topImages){this.topImages=t.topImages.map(function(t){return e.default.getGoodsRatioSuffix(t,375,"2:3")}),this.realTopImages=t.topImages.map(function(t){return e.default.getWidthSuffix(t,750)});var r=[];this.topImages.forEach(function(e,t){t%2==0&&r.push(a.topImages.slice(t,t+2))});var s=r[r.length-1];s.length<=1&&s.push(s[0]),this.setData({topImagesList:r})}},showBigImage:function(e){if(this.isPreventPreview)return!1;var t=e.currentTarget,i=+t.dataset.index,a=+t.dataset.itemIndex,r=this.realTopImages,s=2*a+i;s>=r.length&&(s=r.length-1),wx.previewImage({current:r[s],urls:r})}}}; 
 			}); 
		define("pages/detail/components/tabpanel/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{configs:[{title:"图文详情",elementId:"moduleTabpanelGrighic"},{title:"商品参数",elementId:"moduleTabpanelParameter"},{title:"热卖推荐",elementId:"moduleTabpanelRecommend"}]}},onLoad:function(){},methods:{init:function(e){if(e&&e.isHideRecommend){var t=this.data.configs;t=t.filter(function(e){return"热卖推荐"!==e.title}),this.setData({configs:t})}},onTabClick:function(e){var t=e.currentTarget,n=t.dataset.elementId,i=t.dataset.title;this.$root.$logE("016000104",{tableName:i}),this.$root.onTabClick(n)}}}; 
 			}); 
		define("pages/detail/components/title/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},onLoad:function(){},methods:{init:function(t){this.setData({itemInfo:t.itemInfo})}}}; 
 			}); 
		define("pages/detail/components/topbanner/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../components/countdown/index"));exports.default={data:function(){return{}},components:{countdown:t.default},onLoad:function(){},methods:{init:function(t){var n=t.topCountdown;n&&(this.$countdown.init({format:"dd天hh时mm分ss秒",countdown:n.countdown}),this.setData(n))}}}; 
 			}); 
		define("pages/detail/pages/normal/components/footbar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../../../../components/skudialog/index")),i=t(require("../../../../../../components/countdown/index")),s=t(require("../../../../../../common/m")),a=t(require("../../../../../../common/trade/index")),o=t(require("../../../../../../common/service/user")),r=t(require("../../../../../../common/live/index")),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(require("../../../../components/base/index")),n=d.getAddCartLottery,u=d.fn.getFullUrl,c=s.default.MWP,h=s.default.fn.sendMsg;exports.default={data:function(){return{}},components:{skuDialog:e.default,countdown:i.default},onLoad:function(t){this.$on("confirmSku",this.confirmSku)},init:function(t){var e=this;this.itemId=t.itemId,this.ptp=t.ptp;var i=t.shopInfo.shopId,s=t.itemInfo,o=s.state,d=s.isFaved,n=s.numTags,u=s.virtualItemType,c=!!t.preSaleInfo,h=t.preSaleInfo,l=s.saleStartTime,m=new Date(1e3*l).toFormattedString("yyyy年MM月dd日 HH:mm"),f=this.getCountdownTime(l),p=3===o&&f>0,y=this.isCartShow(c,p,u),b=this.isBuyShow(c,p),g=this.getButtonStatus(o,p,c),$=g.isDisabled,w=t.nonsupportReasonRefound,S=t.addCartLottery,v=S&&S.addCartTip,k=v&&v.tipTimes,x=S&&S.lotteryResult,I=S&&S.activityId;this.lotteryResult=x,this.addCartActivityId=I,this.numTags=n,this.addCartShowLeftTimes=k-1||0,v&&v.image&&wx.getStorage({key:"footbar.date",success:function(t){var i=t.data,s=i.date,a=i.times;(a=s!==(new Date).toFormattedString("yyyy-MM-dd")||void 0===a?e.addCartShowLeftTimes:a-1)>=0&&e.initAddCartTip(a)},fail:function(t){e.initAddCartTip()}}),this.$toast=t.$toast,this.$loading=t.$loading,this.$mask=t.$mask,this.tradeApi=new a.default(this.$toast,this.$loading,Object.assign({},this.$root.query,{isPresale:c,liveParams:r.default.decodeLiveParams(this.$root.query.liveParams)}),this.$root),this.$skuDialog.init({maxNumber:u?1:-1,skuInfo:t.skuInfo,defaultImage:t.defaultImage,context:this,isPresale:c,deposit:h&&h.deposit,totalPrice:h&&h.totalPrice,$toast:t.$toast,$mask:t.$mask}),this.$countdown.init({format:"hh:mm:ss",countdown:f}),this.setData({state:o,isFaved:d,isPresale:c,saleStartTime:l,saleStartTimeText:m,countdownTime:f,isSaleStartTimeShow:p,isCartShow:y,isBuyShow:b,buttonStatus:g,isDisabled:$,nonsupportReasonRefound:w,shopId:i,addCartTip:v})},initAddCartTip:function(t){var e=this;this.setData({isAddCartShow:!0}),wx.setStorage({key:"footbar.date",data:{date:(new Date).toFormattedString("yyyy-MM-dd"),times:"number"==typeof t?t:this.addCartShowLeftTimes}}),setTimeout(function(){e.setData({isAddCartShow:!1})},6e3)},showBuyConfirm:function(t,e){var i=this;wx.showModal({content:"此商品不支持7天无理由退货，请知晓哦",cancelColor:"#666666",confirmColor:"#FF5777",cancelText:"放弃购买",confirmText:"继续购买",success:function(s){s.confirm?i.confirmProcess(t,e):s.cancel}})},confirmSku:function(t,e){this.data.nonsupportReasonRefound?this.showBuyConfirm(t,e):this.confirmProcess(t,e)},confirmProcess:function(t,e){var i=this,s=t.sku,a=t.number;switch(e){case"buy":this.$root.$logE("016000112",{num:a,disprice:(s.nowprice/100).toFixed(2),price:(s.price/100).toFixed(2),stockId:s.stockId,itemid:this.itemId}),this.tradeApi.buy(t).then(function(t){"success"===t.result&&(i.$skuDialog.hideSku(),i.$root.$navigate(u("/pages/buy/index",{liveParams:i.$root.query.liveParams,cparam:i.$root.query.cparam,acm:i.$root.query.acm})))}).catch(function(t){i.handleRequestError(t)});break;case"cart":this.$root.$logE("016000111",{num:a,disprice:(s.nowprice/100).toFixed(2),price:(s.price/100).toFixed(2),stockId:s.stockId,itemid:this.itemId}),this.tradeApi.addCart(t).then(function(t){"success"===t.result&&(i.$skuDialog.hideSku(),i.addCartActivityId&&i.lotteryResult&&i.lotteryResult.length>0&&n.bind(i)(i.addCartActivityId,i.lotteryResult,i.numTags))}).catch(function(t){i.handleRequestError(t)})}},handleRequestError:function(t){console.log(t),h(t,{_author:"changsheng",threshold:1}),o.default.showUserError(t)||this.$toast.show(t.message)},getButtonStatus:function(t,e,i){var s={cart:{text:"加入购物车",disabled:!0},buy:{text:"已下架",disabled:!0},isDisabled:!0};switch(t){case 0:s={cart:{text:"加入购物车",disabled:!1},buy:{text:i?"付定金":"立即购买",disabled:!1},isDisabled:!1};break;case 1:s={cart:{text:"加入购物车",disabled:!0},buy:{text:"已下架",disabled:!0},isDisabled:!0};break;case 2:s={cart:{text:"加入购物车",disabled:!0},buy:{text:"卖光啦",disabled:!0},isDisabled:!0};break;case 3:s=e?{cart:{text:"加入购物车",disabled:!1},buy:{text:"卖光啦",disabled:!1},isDisabled:!1}:{cart:{text:"加入购物车",disabled:!0},buy:{text:"已下架",disabled:!0},isDisabled:!0};break;default:s={cart:{text:"加入购物车",disabled:!0},buy:{text:"已下架",disabled:!0},isDisabled:!0}}return s},getCountdownTime:function(t){var e=parseInt((new Date).getTime()/1e3,10);if(t>0){var i=t-e;return i>0?i:null}return null},isCartShow:function(t,e,i){return!i&&(!(!t||!e)||!(t&&!e))},isBuyShow:function(t,e){return(!t||!e)&&(!(!t||e)||!(!t&&e))},addFavItem:function(){var t=this;this.$loading.show(),c.request("mwp.shopfavorite.itemLike","1",{pf:"xcx",mids:this.itemId}).then(c.filterResult).then(function(e){t.setData({isFaved:!0}),t.$loading.hide()}).catch(function(e){t.$loading.hide(),t.handleRequestError(e)})},delFavItem:function(){var t=this;this.$loading.show(),c.request("mwp.shopfavorite.itemUnLike","1",{pf:"xcx",mids:this.itemId}).then(c.filterResult).then(function(e){t.setData({isFaved:!1}),t.$loading.hide()}).catch(function(e){t.$loading.hide(),t.handleRequestError(e)})},methods:{callMoreSkuClick:function(t,e){this.showSku(t,e)},showSku:function(t,e){var i=(t=t||{}).detail.formId;i&&this.$root.$logForm(i,1);var s=t.currentTarget;if(e=e||s.dataset.type,!this.data.isDisabled||"banner"===e){switch(e){case"buy":this.$root.$logE("016000100");break;case"cart":this.$root.$logE("016000102")}this.$skuDialog.showSku({isCartShow:this.data.isCartShow,isBuyShow:this.data.isBuyShow,buttonStatus:this.data.buttonStatus,isDisabled:this.data.isDisabled,type:e})}},hideSku:function(){this.$skuDialog.hideSku()},onFavClick:function(t){var e=t.detail.formId;this.$root.$logForm(e,2),this.data.isFaved?(this.$root.$logE("016000012",{ops:"1",id:this.itemId,type:"goods"}),this.delFavItem()):(this.$root.$logE("016000012",{ops:"0",id:this.itemId,type:"goods"}),this.addFavItem())},onShopClick:function(t){var e=t.detail.formId;this.$root.$logForm(e,2),this.$root.$redirect("shop",t.currentTarget.dataset)},hideLotteryResult:function(){this.$mask.hide(),this.setData({isLotteryResultShow:!1})}}}; 
 			}); 
		define("pages/detail/pages/normal/components/pintuanfootbar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("../../../../../../components/skudialog/index")),e=t(require("../../../../../../common/m")),o=t(require("../../../../../../common/trade/index")),s=t(require("../../../../../../common/service/user")),a=t(require("../../../../../../common/live/index")),n=function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i}(require("../../../../components/base/index")),r=n.getAddCartLottery,u=n.fn.getFullUrl,d=e.default.MWP,h=e.default.fn.sendMsg;exports.default={data:function(){return{}},components:{skuDialog:i.default},onLoad:function(t){this.$on("confirmSku",this.confirmSku)},init:function(t){var i=this;this.itemId=t.itemId,this.ptp=t.ptp,this.pintuanInfo=t.pintuanInfo;var e=this.pintuanInfo.tuanType;this.skuInfo=this.pintuanInfo.skuInfo||{},this.normalSkuInfo=t.skuInfo,this.defaultImage=t.defaultImage;var s=t.shopInfo.shopId,n=t.itemInfo,r=n.numTags,u=n.state,d=n.isFaved,h=n.virtualItemType,c=!h,m=t.nonsupportReasonRefound,l=t.addCartLottery,f=l&&l.addCartTip,p=f&&f.tipTimes,$=l&&l.lotteryResult,k=l&&l.activityId;this.lotteryResult=$,this.addCartActivityId=k,this.numTags=r,this.addCartShowLeftTimes=p-1||0,f&&f.image&&wx.getStorage({key:"footbar.date",success:function(t){var e=t.data,o=e.date,s=e.times;(s=o!==(new Date).toFormattedString("yyyy-MM-dd")||void 0===s?i.addCartShowLeftTimes:s-1)>=0&&i.initAddCartTip(s)},fail:function(t){i.initAddCartTip()}}),this.$toast=t.$toast,this.$loading=t.$loading,this.$mask=t.$mask;var g={cart:{text:"加入购物车"},buy:{text:"拼团购买"},isDisabled:!1};this.tradeApi=new o.default(this.$toast,this.$loading,Object.assign({},this.$root.query,{liveParams:a.default.decodeLiveParams(this.$root.query.liveParams),tuanType:e}),this.$root),this.$skuDialog.init({skuInfo:this.skuInfo,defaultImage:t.defaultImage,context:this,$toast:t.$toast,$mask:t.$mask,maxNumber:h?1:this.pintuanInfo.maxNumber,showLimitTips:!0}),this.setData({state:u,isFaved:d,isDisabled:!1,isCartShow:c,nonsupportReasonRefound:m,shopId:s,pintuanInfo:this.pintuanInfo,buttonStatus:g,addCartTip:f})},initAddCartTip:function(){var t=this;this.setData({isAddCartShow:!0}),wx.setStorage({key:"footbar.date",data:{date:(new Date).toFormattedString("yyyy-MM-dd"),times:"number"==typeof times?times:this.addCartShowLeftTimes}}),setTimeout(function(){t.setData({isAddCartShow:!1})},6e3)},showBuyConfirm:function(t,i){var e=this;wx.showModal({content:"此商品不支持7天无理由退货，请知晓哦",cancelColor:"#666666",confirmColor:"#FF5777",cancelText:"放弃购买",confirmText:"继续购买",success:function(o){o.confirm?e.confirmProcess(t,i):o.cancel}})},confirmSku:function(t,i){this.data.nonsupportReasonRefound?this.showBuyConfirm(t,i):this.confirmProcess(t,i)},confirmProcess:function(t,i){var e=this,s=t.sku,a=t.number;switch(i){case"buy":this.$root.$logE("016000112",{num:a,disprice:(s.nowprice/100).toFixed(2),price:(s.price/100).toFixed(2),stockId:s.stockId}),this.tradeApi.buy(t,{type:o.default.getPromotionType().Normal}).then(function(t){"success"===t.result&&(e.$skuDialog.hideSku(),e.$root.$navigate(u("/pages/buy/index",{liveParams:e.$root.query.liveParams,cparam:e.$root.query.cparam,acm:e.$root.query.acm})))}).catch(function(t){e.handleRequestError(t)});break;case"tuan":this.$root.$logE("016000112",{num:a,disprice:(s.nowprice/100).toFixed(2),price:(s.price/100).toFixed(2),stockId:s.stockId}),this.tradeApi.buy(t,{type:o.default.getPromotionType().NormalPintuan}).then(function(t){"success"===t.result&&(e.$skuDialog.hideSku(),e.$root.$navigate(u("/pages/buy/index",{liveParams:e.$root.query.liveParams,cparam:e.$root.query.cparam,acm:e.$root.query.acm})))}).catch(function(t){e.handleRequestError(t)});break;case"cart":this.$root.$logE("016000111",{num:a,disprice:(s.nowprice/100).toFixed(2),price:(s.price/100).toFixed(2),stockId:s.stockId}),this.tradeApi.addCart(t).then(function(t){"success"===t.result&&(e.$skuDialog.hideSku(),e.addCartActivityId&&e.lotteryResult&&e.lotteryResult.length>0&&r.bind(e)(e.addCartActivityId,e.lotteryResult,e.numTags))}).catch(function(t){e.handleRequestError(t)})}},handleRequestError:function(t){console.log(t),h(t,{_author:"changsheng",threshold:1}),s.default.showUserError(t)||this.$toast.show(t.message)},addFavItem:function(){var t=this;this.$loading.show(),d.request("mwp.shopfavorite.itemLike","1",{pf:"xcx",mids:this.itemId}).then(d.filterResult).then(function(i){t.setData({isFaved:!0}),t.$loading.hide()}).catch(function(i){t.$loading.hide(),t.handleRequestError(i)})},delFavItem:function(){var t=this;this.$loading.show(),d.request("mwp.shopfavorite.itemUnLike","1",{pf:"xcx",mids:this.itemId}).then(d.filterResult).then(function(i){t.setData({isFaved:!1}),t.$loading.hide()}).catch(function(i){t.$loading.hide(),t.handleRequestError(i)})},methods:{callMoreSkuClick:function(t,i){this.$skuDialog.init({skuInfo:this.skuInfo,defaultImage:this.defaultImage,context:this,$toast:this.$toast,$mask:this.$mask,maxNumber:this.pintuanInfo.maxNumber,showLimitTips:!0}),this.showSku(t,i)},showSku:function(t,i){var e=(t=t||{}).detail.formId;e&&this.$root.$logForm(e,1);var o=t.currentTarget;if(i=i||o.dataset.type,!this.data.isDisabled||"banner"===i){switch(i){case"cart":this.$root.$logE("016000102");break;case"buy":this.$root.$logE("016000100");break;case"tuan":this.$root.$logE("016000178")}this.$skuDialog.showSku({isCartShow:this.data.isCartShow,isBuyShow:!0,buttonStatus:this.data.buttonStatus,isDisabled:this.data.isDisabled,type:i,buyType:"tuan",cartType:"cart"})}},onNormalBuyClick:function(t,i){this.$skuDialog.init({skuInfo:this.normalSkuInfo,defaultImage:this.defaultImage,context:this,$toast:this.$toast,$mask:this.$mask,maxNumber:-1}),this.showSku(t,i)},onPintuanBuyClick:function(t,i){this.$skuDialog.init({skuInfo:this.skuInfo,defaultImage:this.defaultImage,context:this,$toast:this.$toast,$mask:this.$mask,maxNumber:this.pintuanInfo.maxNumber,showLimitTips:!0}),this.showSku(t,i)},onPintuanCartClick:function(t,i){this.$skuDialog.init({skuInfo:this.skuInfo,defaultImage:this.defaultImage,context:this,$toast:this.$toast,$mask:this.$mask,maxNumber:this.pintuanInfo.maxNumber,showLimitTips:!0}),this.showSku(t,i)},hideSku:function(){this.$skuDialog.hideSku()},onFavClick:function(t){var i=t.detail.formId;this.$root.$logForm(i,2),this.data.isFaved?(this.$root.$logE("016000012",{ops:"1",id:this.itemId,type:"goods"}),this.delFavItem()):(this.$root.$logE("016000012",{ops:"0",id:this.itemId,type:"goods"}),this.addFavItem())},onShopClick:function(t){var i=t.detail.formId;this.$root.$logForm(i,2),this.$root.$redirect("shop",t.currentTarget.dataset)},hideLotteryResult:function(){this.$mask.hide(),this.setData({isLotteryResultShow:!1})}}}; 
 			}); 
		define("pages/detail/pages/shopkill/components/footbar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../../../../components/skudialog/index")),i=t(require("../../../../../../components/countdown/index")),s=t(require("../../../../../../common/m")),r=t(require("../../../../../../common/trade/index")),o=t(require("../../../../../../common/utils/ItemReminder")),n=t(require("../../../../../../common/service/user")),a=t(require("../../../../../../common/live/index")),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(require("../../../../components/base/index")).fn.getFullUrl,h=(s.default.MWP,s.default.fn.sendMsg);exports.default={data:function(){return{refreshing:!1}},components:{skuDialog:e.default,countdown:i.default},onLoad:function(t){this.$on("confirmSku",this.confirmSku)},init:function(t){this.itemId=t.itemId,this.ptp=t.ptp,this.activityId=t.activityId;var e=t.shopInfo;this.shopInfo=e;var i=e.shopId,s=(t.itemInfo,t.shopSeckillInfo);this.shopSeckillInfo=s,this.activityIdInt=s.activityId;var n=t.userInfo;this.userInfo=n,this.$toast=t.$toast,this.$loading=t.$loading,this.tradeApi=new r.default(this.$toast,this.$loading,Object.assign({},this.$root.query,{type:r.default.getPromotionType().ShopKill,activityId:this.activityId,liveParams:a.default.decodeLiveParams(this.$root.query.liveParams)}),this.$root),this.reminder=new o.default(this.$toast,this.$loading);this.hasReminded=this.reminder.isReminded({itemId:this.itemId,activityId:this.activityIdInt});this.eventId=getApp().data.eventId,this.scatter=180,this.startTime=s.startTime,this.time=s.startTime-300;var d=this.getButtonStatus(s);this.isDisabled=d.isDisabled,this.refresh=d.refresh,this.needAlert=d.needAlert;this.$skuDialog.init({skuInfo:t.skuInfo,defaultImage:t.defaultImage,context:this,maxNumber:1,$toast:t.$toast,$mask:t.$mask}),this.setData({buttonStatus:d,shopId:i})},showBuyConfirm:function(t){var e=this;wx.showModal({content:"此商品不支持7天无理由退货，请知晓哦",cancelColor:"#666666",confirmColor:"#FF5777",cancelText:"放弃购买",confirmText:"继续购买",success:function(i){i.confirm?e.confirmProcess(t):i.cancel}})},confirmSku:function(t){this.shopInfo&&this.shopInfo.nonsupportReasonRefound?this.showBuyConfirm(t):this.confirmProcess(t)},confirmProcess:function(t){var e=this,i=t.sku,s=t.number;this.$root.$logE("016000112",{num:s,disprice:(i.nowprice/100).toFixed(2),price:(i.price/100).toFixed(2),stockId:i.stockId,itemid:this.itemId}),this.tradeApi.buy(t).then(function(t){"success"===t.result&&(e.$skuDialog.hideSku(),e.$root.$navigate(d("/pages/buy/index",{liveParams:e.$root.query.liveParams,cparam:e.$root.query.cparam,acm:e.$root.query.acm})))}).catch(function(t){e.handleRequestError(t)})},handleRequestError:function(t){console.log(t),h(t,{_author:"changsheng",threshold:1}),n.default.showUserError(t)||this.$toast.show(t.message)},getButtonStatus:function(t,e){var i={text:"活动结束",isDisabled:!0,refresh:!1,needAlert:!1};switch(t&&t.state){case 0:var s=this.hasReminded;i={text:s?"即将开始，已设提醒":"即将开始，设置提醒",isDisabled:s,refresh:!1,needAlert:!s};break;case 1:i={text:"立即抢购",isDisabled:!1,refresh:!1,needAlert:!1};break;case 2:i={text:"已抢光",isDisabled:!0,refresh:!1,needAlert:!1};break;case 3:i={text:"活动结束",isDisabled:!0,refresh:!1,needAlert:!1};break;case 4:i={text:e?"刷新中…":"还有机会，点击刷新",isDisabled:!1,refresh:!0,needAlert:!1};break;case 5:i={text:e?"刷新中…":"即将开始，点击刷新",isDisabled:!1,refresh:!0,needAlert:!1};break;case 6:i={text:"已下架",isDisabled:!1,refresh:!0,needAlert:!1};break;default:i={text:"活动结束",isDisabled:!0,refresh:!1,needAlert:!1}}return i},refreshProcess:function(){this.$root.refresh()},addAlert:function(){var t=this;this.reminder.addReminder({eventId:this.eventId,itemId:this.itemId,scatter:this.scatter,time:this.time,startTime:this.startTime,activityIdNum:this.activityIdInt}).then(function(e){if("success"===e.result){t.hasReminded=!0;var i=t.getButtonStatus(t.shopSeckillInfo),s=t.isDisabled=i.isDisabled;t.setData({buttonStatus:i,isDisabled:s})}}).catch(function(e){t.handleRequestError(e)})},methods:{callMoreSkuClick:function(t,e){this.showSku(t,e)},onBuyClick:function(t,e){var i=(t=t||{}).detail.formId,s=t.currentTarget;if(e=e||s.dataset.type,!this.isDisabled)return this.needAlert?(this.$root.$logForm(i,2),void this.addAlert()):this.refresh?(this.$root.$logForm(i,1),void this.refreshProcess()):(this.$root.$logForm(i,1),this.$root.$logE("016000100"),void this.showSku())},showSku:function(){this.$skuDialog.showSku({isDisabled:!this.isDisabled&&this.needAlert||!this.isDisabled&&this.refresh||this.isDisabled})},hideSku:function(){this.$skuDialog.hideSku()},onShopClick:function(t){var e=t.detail.formId;this.$root.$logForm(e,2),this.$root.$redirect("shop",t.currentTarget.dataset)},setRefreshing:function(t){this.setData({buttonStatus:this.getButtonStatus(this.shopSeckillInfo,t)})}}}; 
 			}); 
		define("pages/detail/pages/shopkill/components/priceBanner/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=function(o){return o&&o.__esModule?o:{default:o}}(require("../../../../../../components/countdown/index"));exports.default={data:function(){return{}},components:{countdown:o.default},onLoad:function(){},methods:{init:function(o){var n=o.shopSeckillPrice,t=o.shopSeckillCountdown;t&&(this.$countdown.init({format:"dd天hh时mm分ss秒",countdown:t.countdown}),this.setData({shopSeckillPrice:n,shopSeckillCountdown:t}))}}}; 
 			}); 
		define("pages/detail/pages/shopkill/components/shopTitle/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../components/share/index"));exports.default={data:function(){return{}},components:{share:e.default},onLoad:function(){},methods:{init:function(e,t){this.$share.init({isShareHide:t}),this.setData({itemInfo:e.itemInfo})}}}; 
 			}); 
		define("pages/hongbao/components/balance/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"hongbao-balance",data:function(){return{amount:"0.00",maitResource:{}}}}; 
 			}); 
		define("pages/hongbao/components/topBanner/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"hongbao-topbanner",data:function(){return{topBanners:[],interval:3e3,duration:500}}}; 
 			}); 
		define("pages/hongbao/constant.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.appTitle="我的支付红包",exports.pageSize=10;var e=exports.walletAppId="wx26550136c4b70208",a={SHOP:{ID:"2",TITLE:"蘑菇街女裝"},BAIHUO:{ID:"68",TITLE:"小店微商城"}},t={SHOP:{BANNER:"82583",BALANCE:"82587"},BAIHUO:{BANNER:"82584",BALANCE:"82588"},WALLET:{BANNER:"77800",BALANCE:"79869"}};exports.wxAppList=[{name:"mgj",id:"wxca3957e5474b3670",bannerPid:t.SHOP.BANNER,balancePid:t.SHOP.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE}]},{name:"nordstrom",id:"wx1139ad0275dd69c3",bannerPid:t.BAIHUO.BANNER,balancePid:t.BAIHUO.BALANCE,market:a.BAIHUO.TITLE,tabs:[{merchantId:a.BAIHUO.ID,text:a.BAIHUO.TITLE}]},{name:"mgjLive",id:"wx21c17841db9593cd",bannerPid:t.SHOP.BANNER,balancePid:t.SHOP.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE}]},{name:"meiliqianbao",id:e,bannerPid:t.WALLET.BANNER,balancePid:t.WALLET.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE},{merchantId:a.BAIHUO.ID,text:a.BAIHUO.TITLE}]},{name:"fastFish",id:"wx2dcd55d55e472a98",bannerPid:t.SHOP.BANNER,balancePid:t.SHOP.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE}]},{name:"belly",id:"",bannerPid:t.SHOP.BANNER,balancePid:t.SHOP.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE}]},{name:"chaojihongbao",id:"wx446e3ce0ede2e766",bannerPid:t.WALLET.BANNER,balancePid:t.WALLET.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE},{merchantId:a.BAIHUO.ID,text:a.BAIHUO.TITLE}]},{name:"outfit",id:"wx9d2c626c7ee86531",bannerPid:t.SHOP.BANNER,balancePid:t.SHOP.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE}]},{name:"promotion",id:"wxca3957e5474b3670",bannerPid:t.SHOP.BANNER,balancePid:t.SHOP.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE}]},{name:"moguSelection",id:"wx6a366ee63446446b",bannerPid:t.SHOP.BANNER,balancePid:t.SHOP.BALANCE,market:a.SHOP.TITLE,tabs:[{merchantId:a.SHOP.ID,text:a.SHOP.TITLE}]}]; 
 			}); 
		define("pages/hongbao/service.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function o(e){var o=this;if(e.url){if(e.version)return e.data||console.warn("接口无请求数据，请确认"),this.$loading&&this.$loading.show(),n.request(e.url,e.version,e.data).then(n.filterResult).then(function(e){return o.$loading&&o.$loading.hide(),e});console.error("接口无指定版本号")}else console.error("接口无指定地址")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.mwpRequest=o,exports.handleRequestError=function(e){this.$loading&&this.$loading.hide(),console.log(e),s(e,{_author:"roushan",threshold:1}),r.default.showUserError(e)||this.$toast&&this.$toast.show(e.message)};var t=e(require("../../common/m")),r=e(require("../../common/service/user")),n=t.default.MWP,i=t.default.MCE,s=t.default.fn.sendMsg,a=(n.Env.Mock,{getMaitResource:function(e,o){return i.get({pid:e},!o)},hongbaoList:function(e){return o.bind(this)({url:"mwp.payhongbao.hongbaolist11",version:1,data:e})},hongbaoDetail:function(e){return o.bind(this)({url:"mwp.payhongbao.hongbaodetail11",version:1,data:{id:e}})},hongbaoWithdraw:function(e){return o.bind(this)({url:"mwp.payhongbao.withdraw",version:1,data:{id:e}})}});exports.default=a; 
 			}); 
		define("pages/hongbao/utils.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};exports.getConfig=function(n){n=n||t.default.get("APPID")||r.wxAppList[0].id;var o=r.wxAppList.find(function(e){return n===e.id});return o=e({},o,{showTab:o.tabs.length>1})};var t=function(e){return e&&e.__esModule?e:{default:e}}(require("../../common/utils/cache")),r=require("./constant"); 
 			}); 
		define("pages/im/components/input/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/service/upload"));exports.default={name:"InPut",data:function(){return{msg:""}},onLoad:function(){},onReady:function(){},methods:{moreHandle:function(e){this.$emit("show-more")},keyInputHandle:function(e){this.msg=e.detail.value},sendImgHandle:function(t){var n=this;e.default.chooseAndUploadImage().then(function(e){if(console.log(e),e&&e.surl){var t=e.url;n.$emit("sendMsg",{message_type:502,message_content:{url:t}})}}).catch(function(e){console.log(e)})},sendImage:function(e){var t={message_type:501,message_content:{url:e}};this.$emit("sendMsg",t)},blurHandler:function(){console.log("blur")},sendTextHandle:function(){var e=this.msg;"string"==typeof e&&(e=e.trim()),e&&(this.$emit("sendMsg",{message_type:501,message_content:e}),this.setData({msg:""}),this.msg="")}}}; 
 			}); 
		define("pages/im/components/msgbox/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../../common/im/p2pmsg")),s=e(require("../../../../common/im/msg")),a=e(require("../../../../common/im/util")),i=e(require("../../../../common/m"));exports.default={name:"MsgBox",descs:["非常不满意","不满意","一般","满意","非常满意"],data:function(){return{list:[],hasGoods:!1,end:!1,msgId:null}},onLoad:function(){},onReady:function(){},methods:{scoreHandle:function(e){var t=e.currentTarget.dataset,s=t.index,a=t.score,i=this.getScoreMsg(s);i.hasRate||(i.score=a,i.desc=this.descs[a-1]||"",this.setScoreMSg(s,i))},resendHandle:function(e){var t=e.currentTarget.dataset,s=t.reqid;1!==t.result&&this.$emit("resend",{request_id:s})},tagHandle:function(e){var t=e.currentTarget.dataset,s=t.index,a=t.tag,i=this.getScoreMsg(s);i.hasRate||(i.tag==a?i.tag="":i.tag=a,this.setScoreMSg(s,i))},reasonTap:function(e){var t=e.currentTarget.dataset.disabled;console.log(t),this.setData({reasonShow:!0})},reasonHandle:function(e){var t=e.detail.value;this.setData({reason:t,reasonShow:!1})},submitHandle:function(e){var s=this,a=e.currentTarget.dataset,n=a.index,r=a.isorigin,o=a.scoreid,c=a.convid,d=this.getScoreMsg(n),u=d.score,g=d.hasRate,m=d.tag,l=this.data.reason;if(!g&&u){var h=u;r&&(h=u<3?6:u<5?7:8),console.log({score:u,content:l,tag:m,encBizObjectId:o}),i.default.MWP.request("mwp.imcenter.appActionDo","1",{id:o,score:h}).then(function(){t.default.clearP2PMsg(c),d.hasRate=!0,s.setData({reason:""}),s.setScoreMSg(n,d)}),r&&(u>3&&(l="",tagSelect=""),i.default.MWP.request("mwp.cscenter.addRate","1",{bizKey:"imCustomerRate",score:u,content:l,tag:m,encBizObjectId:o}))}},getScoreMsg:function(e){return this.data.list[e]},setScoreMSg:function(e,t,s){var a=this.data.list;a[e]=t,this.setData({list:a},s)},refreshMsg:function(e){var t=e.client_message_id,s=e.result,a=e.msgStatus,i=e.request_id,n=this.data.list,r=n&&n.map(function(e){return(e.client_message_id===t||i&&e.request_id===i)&&(e.msgStatus=a,e.request_id=i,e.result=s),e});this.setData({list:r})},appendMsg:function(e){var t=this,i=this.data,n=i.list,r=i.msgId;r="msg"+e.client_message_id;var o=n.length>0?n[n.length-1]:{},c=o.timestamp||0;e.timestamp-o.timestamp>=s.default.diffTime&&n.push({conversation_id:e.conversation_id,client_message_id:e.client_message_id+".1",conversation_message_id:e.conversation_message_id+".1",message_content:a.default.dayTime(e.timestamp),message_type:511,user:{},timestamp:c}),n&&n.push(e),this.setData({list:n},function(){t.setData({msgId:r})})},navigate:function(e){var t=e.currentTarget.dataset.url;t&&/^\/pages/.test(t)&&this.$root.$navigate(t)},prewImg:function(e){var t=e.currentTarget.dataset.url;wx.previewImage({current:t,urls:[t]})},goodsHandle:function(e){var t=e.currentTarget.dataset.id;this.$root.$navigate("/pages/detail/pages/normal/index?itemId="+t)},moreHandle:function(e){this.$emit("show-more")}}}; 
 			}); 
		define("pages/insurance/action.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,o,r){e.url?e.version?(e.data||console.warn("接口无请求数据，请确认"),t.request(e.url,e.version,e.data).then(t.filterResult).then(function(e){o(e)}).catch(function(e){r(e)})):console.error("接口无指定版本号"):console.error("接口无指定地址")}function o(e,o){for(var t in e){var n=e[t];if(!o[t]&&n.isMust)return void console.error("必要参数"+t+"遗漏");if(n.isMust&&r(o[t])!==n.type)return void console.error("必要参数"+t+"类型不符合要求")}return o}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFreightDetail=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e){return e&&e.__esModule?e:{default:e}}(require("../../common/m")).default.MWP;console.log(t.Env);exports.getFreightDetail=function(r,t,n){e({url:"mwp.pay_insurance.freightdetail",version:"1",data:o({orderId:{type:"number",isMust:!0},refundId:{type:"number"},platformType:{type:"number"}},r)},t,n)}; 
 			}); 
		define("pages/insurance/freight/faqList.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=[{question:"退货完成后，如何查看运费补贴的到账情况？",answer:"订单退货完成后，运费补贴会在 48 小时内退到微信钱包余额或美丽联合钱包余额里。\n    \n退到微信余额的，您可以在【微信】—【我】—【钱包】查看和提现。\n退到钱包余额的，您可以在“小程序 [美丽联合钱包] - 我的余额”查看和提现。\n\n进度查询：【我的】—【全部订单】—找到退货的订单点击进去—点击【退货运费补贴】，可以查看下运费补贴的到账情况\n\n    "},{question:"运费补贴退到哪里？",answer:"退到微信余额的，您可以在【微信】—【我】—【钱包】查看和提现。\n退到钱包余额的，您可以在“小程序 [美丽联合钱包] - 我的余额”查看和提现。\n\n    "},{question:"什么是“退货补运费”服务？",answer:"退货运费补贴服务是由官方提供解决消费者退货运费问题的服务，是一种消费者保障服务。\n符合补贴规则的买家在享受该服务保障的店铺购买商品，买家在商家发货后通过线上申请退货并填写物流单号，在商家确认收到退货后48小时内可享受运费补贴。仅退款的订单不享受此服务。\n\n*温馨提醒：\n海淘市场、红人市场等，暂不支持此服务。\n\n    "},{question:"退货运费补贴买家能获得多少补贴？",answer:"1、使用上门揽件退货：\n买家使用上门揽件退货，补贴快递的首重价格（以上门揽件申请页展示的价格为准，根据买卖双方退货地址的不同，补贴6元－18元不等），跨境物流不享受补贴。\n使用上门揽件服务退货的买家，在快递员揽件成功48小时内，可获得现金补贴，届时可前往【我的】—【我的钱包】—【钱和卡】提现。\n\n2、自找物流退货：\n退货补运费服务补贴价格依据买卖双方的退货地址区间，补贴5-18元不等，实际补贴价格请以系统补贴为准，跨境物流不享受补贴。发起退货申请并且填写了物流单号信息的买家，在商家确认收到退货后48小时内，可获得现金补贴。\n\n*温馨提醒：\n同一订单多件商品发起多次退货，仅可获得一次补贴；\n同一商家多个订单多款货物集中退货，一个物流单号可获补贴一次。\n    "},{question:"退货补运费服务（买家版）",answer:"1.什么是退货运费补贴服务 ？\n退货运费补贴服务是由官方提供解决消费者退货运费问题的服务，是一种消费者保障服务。符合补贴规则的买家购买享受该服务保障的商品，买家在发货后通过线上申请退货并填写物流单号，在商家确认收到退货后48小时内可享受运费补贴。仅退款的订单不享受此服务。\n注：使用上门揽件退货无需填写物流单号，在快递员揽件成功48小时内即可享受运费补贴。\n红人市场暂不支持退货运费补贴服务。\n\n2.在哪些店铺购买可以享受退货补运费的服务？\n目前针对星级且符合平台业务规则的店铺开放该服务，符合补贴规则的买家购买时在店铺信息栏看到［退货补运费］字样的店铺即可享受补运费的服务 。\n\n3.“退货运费服务 ”申请成功后，买家能获得多少补贴？\n（1）使用上门揽件退货：\n买家使用上门揽件退货，官方补贴快递的首重价格（以上门揽件申请页展示的价格为准，根据买卖双方退货地址的不同，补贴6元－18元不等），跨境物流不享受补贴。使用上门揽件服务退货的买家，在快递员揽件成功48小时内，可获得现金补贴。\n（2）自找物流退货：\n退货补运费服务补贴价格依据买卖双方的退货地址区间，补贴5-18元不等，实际补贴价格请以系统补贴为准，跨境物流不享受补贴。发起退货申请并且填写了物流单号信息的买家，在商家确认收到退货后48小时内，可获得现金补贴。\n同一订单多件商品发起多次退货，仅可获得一次补贴；同一商家多个订单多款货物集中退货，一个物流单号可获补贴一次。\n\n4.符合规则的买家是平台随意认定的吗，会不会随随便便就不补贴了？\n99%的买家都是符合规则的买家，正常进行购买和退换货的买家可以安心的享受该服务保障。仅针对退换货过于频繁可能大幅超出正常范围，存在一些其他被风控规则限制的买家，才会暂时或永久性的限制使用该服务。具体规则以平台设立为准，但该服务旨在为广大优质买家提供便利和保障希望为大家所了解\n\n5.获得退货运费补贴服务的时效\n自商家发货起60日内发起的退货并填写物流单号，可获得相应补贴；大促期间会根据实际情况做调整，该调整以平台的公示的为准。\n\n6.为什么买家退货后没获得退货运费补贴服务的现金补贴？\n场景一：买家发起的是仅退款；\n场景二：线上退货流程未完成或商家未收到退货，但该情况在商家系统确认后，若未超过期限，仍然可以获得补贴；\n场景三：买家退货未填写物流单号或一个物流单号申请多次补贴或被重复使用；\n场景四：其他按照规则无法获得补贴的情况。\n\n7.官方在某些场景下对特定订单将不提供运费补贴服务（包含但不仅限于以下情况）：\n（1）买家账号为恶意注册；\n（2）买家退货情况异常等。\n\n品牌官方对该协议中的所有条款有解释权，有权以修改、更新等方式不时调整本协议和相关规则的内容，相关内容将公布于官方小程序上或以其他方式通知买家。\n\n    "},{question:"小程序的订单可以享受运费补贴吗？",answer:"您好，微信市场（小店微商城）、红人市场暂不支持退货补运费服务"}];exports.default=n; 
 			}); 
		define("pages/order/common/action.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.orderRemind=exports.deleteOrder=exports.cancelOrder=exports.callWeichatWallet=exports.orderConfirm=void 0;var r=e(require("../../../common/m")),t=e(require("../../../common/pay/index.js")),n=r.default.MWP;exports.orderConfirm=function(e){return n.request("mwp.OrderManagement.confirmReceivedbyUserAction","1",{orderId:e.orderId,marketType:getApp().data.marketType}).then(n.filterResult).then(function(e){return{success:!0,response:e}}).catch(function(e){return{success:!1,message:e.message}})},exports.callWeichatWallet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new t.default({payId:e.payId}).exec().then(function(e){return e}).catch(function(e){return e})},exports.cancelOrder=function(e){return n.request("mwp.OrderManagement.closeOrderAction","1",{orderId:e.orderId,marketType:getApp().data.marketType}).then(n.filterResult).then(function(e){return{success:!0,response:e}}).catch(function(e){return{success:!1,message:e.message}})},exports.deleteOrder=function(e){return n.request("mwp.OrderManagement.deleteCanceledOrderAction","1",{orderId:e.orderId,marketType:getApp().data.marketType}).then(n.filterResult).then(function(e){return{success:!0,response:e}}).catch(function(e){return{success:!1,message:e.message}})},exports.orderRemind=function(e){return n.request("mwp.OrderManagement.tipShipAction","1",{orderId:e.orderid,marketType:getApp().data.marketType}).then(n.filterResult).then(function(e){return{success:!0,response:e}}).catch(function(e){return{success:!1,message:e.message}})}; 
 			}); 
		define("pages/order/common/base.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.orderDeleteOpt=exports.cancelOrderOpt=exports.orderRemindOpt=exports.orderConfirmOpt=exports.payOrderOpt=void 0;var e=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../common/m")),t=require("./action.js"),n=r.default.MWP;exports.payOrderOpt=function(r,t,s,o){return n.request("mwp.TradeWebBuy.createPayActionlet","1",{payOrderId:t,marketType:getApp().data.marketType}).then(n.filterResult).then(function(t){!!s&&s.hide();var n=t.payId;return n?(r.show(e({},o,{payId:n})),Promise.resolve({success:!0})):Promise.resolve({success:!1})}).catch(function(e){return!!s&&s.hide(),e.code,n.Code.SessionInvalid,{message:e.message,success:!1}})},exports.orderConfirmOpt=function(e,r){return(0,t.orderConfirm)({orderId:e}).then(function(e){return e}).catch(function(e){return e.code,n.Code.SessionInvalid,{message:e.message,success:!1}})},exports.orderRemindOpt=function(e){return(0,t.orderRemind)({orderid:e}).then(function(e){return e}).catch(function(e){return e.code,n.Code.SessionInvalid,{message:e.message,success:!1}})},exports.cancelOrderOpt=function(e){return(0,t.cancelOrder)({orderId:e}).then(function(e){return e}).catch(function(e){return e.code,n.Code.SessionInvalid,{message:e.message,success:!1}})},exports.orderDeleteOpt=function(e){return(0,t.deleteOrder)({orderId:e}).then(function(e){return e}).catch(function(e){return e.code,n.Code.SessionInvalid,{message:e.message,success:!1}})}; 
 			}); 
		define("pages/order/common/common.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=function(r){var e=""+r;return 1==e.length?"0"+e:e};exports.transformRemainTime=function(e){if(!e||e<0)return"00小时00分00秒";var t=r(Math.floor(e/86400)),o=r(Math.floor(e%86400/3600)),n=r(Math.floor(e%3600/60)),a=r(e%60);return t="00"!==t?t+"天":"",o=o?o+"小时":"00小时",n=n?n+"分":"00分",a=a?a+"秒":"00秒",""+t+o+n+a}; 
 			}); 
		define("pages/order/common/parseData/orderStatus.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(a,e){var _=a.split("&&"),s=_[0],c="";switch(s){case"ORDER_CREATED":c="待付款";break;case"ORDER_PAID":c="待发货";break;case"ORDER_SHIPPED":c="待收货";break;case"ORDER_COMPLETED":case"ORDER_RECEIVED":c="交易完成";break;case"ORDER_CLOSED":case"ORDER_CANCELLED":c="交易关闭";break;case"tuan_notPay":c="待付款";break;case"tuan_cancle":c="交易关闭";break;case"PIN_TUAN_AFTER_PAID":case"tuan_tuaning":c="拼团中",+_[1]&&(c+="，还差"+_[1]+"人成团");break;case"tuan_waitPay":c="拼团中，等待团员完成付款";break;case"PIN_TUAN_SUCCESS_AFTER_PAID":case"tuan_tuanSuccess":c="拼团成功";break;case"PIN_TUAN_LOCKED":case"tuan_lotterying":case"tuan_notLottery":c="拼团成功，待开奖";break;case"tuan_prize":case"PIN_TUAN_SUCCESS_AFTER_LOCK":c="拼团成功，恭喜中奖";break;case"PIN_TUAN_FAILED_AFTER_LOCK":case"tuan_coupon":c="参与奖，退款并送券";break;case"tuan_tuanFailed":case"PIN_TUAN_FAILED":c="拼团失败"}if("ORDER_CREATED"===s&&e)switch(e.stageStatus){case"UN_PRE_PAY":c="待付定金";break;case"WAITING_TAIL_PAY_OPEN":c="已付定金";break;case"UN_TAIL_PAY":c="待付尾款"}return c}; 
 			}); 
		define("pages/order/common/parseData/parseData.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("./orderStatus.js")),t=e(require("../../../../common/utils/imgUrlTool.js")),a=function(e){return e&&Date.format(new Date(1e3*e),"MM.dd")};exports.default=function(e,i){if(!e||!e.buyerOrderList)return[];var o=e.buyerOrderList,n=[];for(var d in o)!function(e){var i=o[e],d=[],s=i.payOrder,u=i.shopOrderList[0],p=!0,_=!1,m=void 0;try{for(var O,c=i.shopOrderList[Symbol.iterator]();!(p=(O=c.next()).done);p=!0){var I=O.value,f=I.orderTags||[],l=-1!==f.indexOf("PT"),y=l&&-1!==f.indexOf("LOTTERY");if(l&&I.pintuanInfo){var h=I.pintuanInfo||{};void 0!==h.pintuanRemainTime&&(I.remainTime=h.pintuanRemainTime);var T=["tuan_cancle","tuan_notPay","tuan_tuaning","tuan_waitPay","tuan_lotterying","tuan_coupon","tuan_prize","tuan_notLottery","tuan_tuanSuccess","tuan_tuanFailed"];h.pintuanStatus&&(/tuan_tuaning|PIN_TUAN_AFTER_PAID/.test(h.pintuanStatus)?I.orderStatus=h.pintuanStatus+"&&"+h.remainNums:T.indexOf(h.pintuanStatus)>=0?I.orderStatus=h.pintuanStatus:(/PIN_TUAN_AFTER_PAID|PIN_TUAN_LOCKED|PIN_TUAN_FAILED_AFTER_LOCK|PIN_TUAN_SUCCESS_AFTER_LOCK/.test(h.pintuanStatus)&&/ORDER_PAID/.test(I.orderStatus)||"ORDER_CLOSED"==I.orderStatus&&"PIN_TUAN_FAILED_AFTER_LOCK"==h.pintuanStatus||"ORDER_CLOSED"==I.orderStatus&&"PIN_TUAN_FAILED"==h.pintuanStatus)&&(I.orderStatus=h.pintuanStatus))}var S=[],P=!0,g=!1,E=void 0;try{for(var v,L=I.itemOrders[Symbol.iterator]();!(P=(v=L.next()).done);P=!0){var A=v.value,N=l?y?"抽奖团":"拼团":"",x=!!A.itemOrderOperations&&A.itemOrderOperations.length>0&&A.itemOrderOperations.map(function(e){var r=e.operationName;return e.isRefundShow="opt_show_detail_refund"===r||"opt_show_detail_complaint"===r||"opt_pintuan_detail"===r,e});S.push({orderTag:N,itemOrderId:A.itemOrderId,itemIdEsc:A.itemIdEsc,itemOrderIdEsc:A.itemOrderIdEsc,imgUrl:t.default.getWidthSuffix(A.imgUrl,144),title:A.title,skuAttributes:A.skuAttributes,price:(A.price/100).toFixed(2),nowPrice:(A.nowPrice/100).toFixed(2),number:A.number,redPacketDesc:A.itemPromotionInfo&&A.itemPromotionInfo.redPacketDesc,itemOrderOperations:x})}}catch(e){g=!0,E=e}finally{try{!P&&L.return&&L.return()}finally{if(g)throw E}}d.push({isShowMore:!1,payOrderId:s&&s.payOrderId,isWaitPay:s&&s.isWaitPay,shopOrderId:I.shopOrderId,shopOrderIdEsc:I.shopOrderIdEsc,shopName:I.shopInfo.shopName,productLength:I.itemOrders.length,productList:S,marketType:I.marketType,outId:I.extraInfo&&I.extraInfo.outId||""})}}catch(e){_=!0,m=e}finally{try{!p&&c.return&&c.return()}finally{if(_)throw m}}var R=void 0;if(i.orderStageInfo&&i.orderStageInfo.orderStageList&&i.orderStageInfo.orderStageList.length>0){var D=i.orderStageInfo.orderStageList;R={payBeginTime:a(D[0].beginTime),payEndTime:a(D[0].endTime),payGoodsPrice:(D[0].goodsPrice/100).toFixed(2),tailBeginTime:a(D[1].beginTime),tailEndTime:a(D[1].endTime),tailGoodsPrice:(D[1].goodsPrice/100).toFixed(2),stageStatus:i.orderStageInfo.stageStatus}}var F=i.shopOrderList[0]||{},w=s.isWaitPay?s.payOrderOperations:u.shopOrderOperations,b=u.remainTime>0?u.remainTime:0,U=(0,r.default)(u.orderStatus,R),k=/opt_show_delivery_order|opt_pintuan_detail|opt_cancel_order|opt_remind_ship_order/,C=[];w.length>0&&w.map(function(e){var r=e.operationName;e.isWhite=k.test(r),"market_meilishuo"===u.marketType?"opt_show_delivery_order"===r&&C.push(e):s.isWaitPay?"opt_pay_order"!==r&&"opt_prepay_order"!==r&&"opt_tailpay_order"!==r&&"opt_cancel_order"!==r&&"opt_pintuan_pay_order"!==r||C.push(e):"opt_delete_order"!==r&&"opt_rate_completed"!==r&&"opt_rate_score"!==r&&"opt_rate_share"!==r&&C.push(e)}),C.sort(function(e){return k.test(e.operationName)?-1:1});var W=u.orderTags.indexOf("PT")>=0&&-1==u.orderTags.indexOf("customPt"),M=-1!==u.orderTags.indexOf("PT_HB");n.push({isPintuanRed:M,sortOrderOperations:C,isChannel:W,payOrderId:s&&s.payOrderId,payOrderIdEsc:s&&s.payOrderIdEsc,isWaitPay:s&&s.isWaitPay,payOrderPrice:((s&&s.payOrderPrice)/100).toFixed(2),orderOperations:w,shopOrderId:u&&u.shopOrderId,shopOrderIdEsc:u&&u.shopOrderIdEsc,orderStatus:u&&u.orderStatus,orderStatusDesc:U,orderTags:u&&u.orderTags,isShowLottery:u.orderTags.indexOf("LOTTERY")>=0,remainTime:b,shopOrderPriceRemark:u&&u.shopOrderPriceRemark,orderStageList:R,shopList:d,tuanId:F.pintuanInfo&&F.pintuanInfo.tuanId||"",activityId:F.pintuanInfo&&F.pintuanInfo.activityId||"",itemId:F.itemOrders&&F.itemOrders[0]&&F.itemOrders[0].itemId||""})}(d);return n}; 
 			}); 
		define("pages/order/detail/components/shopItem/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../../../common/service/url.js")),a=e(require("../../../../../common/utils/cache.js"));exports.default={name:"shopItem",data:function(){return{isRefundLink:!0,isShowRedPacket:!1,redPacketNum:void 0,inWhiteList:!0}},onLoad:function(){"100084"!==getApp().data.appKey&&"100082"!==getApp().data.appKey||this.setData({inWhiteList:!1})},onReady:function(){},methods:{gotoDetail:function(e){var a=e.currentTarget.dataset,i=a.itemname||{},r=a.ischannel;if("market_mogujie"===i.marketType){var d=i.tuanId,n=i.itemIdEsc,u=i.activityIdEsc,o=this.$root.$navigate;o(i.isPintuanRed?t.default.pintuanRed({activityId:u,itemId:n}):d&&r?t.default.pintuanDetail({itemId:n,activityId:u}):t.default.detail({itemId:n}))}},operateClick:function(e){var i=e.currentTarget.dataset,r=i.operationname,d=i.itemname&&i.itemname.itemOrderId,n=i.itemname&&i.itemname.tuanId,u=i.itemname&&i.itemname.itemIdEsc,o=this.$root.$navigate,p=this.$root.$redirect,s=n?"PT_Detail_Operate":"Order_Detail_Operate";switch(r){case"opt_create_complaint":case"opt_show_detail_complaint":t.default.refundApplyDetail?(a.default.put(s,"opt_refund"),p(t.default.refundApplyDetail({orderId:d}))):(e.currentTarget.dataset.href="/pages/refund/applydetail/index?orderId="+d,this.$root.$launch(e));break;case"opt_create_refund":case"opt_show_detail_refund":t.default.refundIM?(a.default.put(s,"opt_refund"),p(t.default.refundIM({orderId:d}))):(e.currentTarget.dataset.href="/pages/refund/im/index?orderId="+d,this.$root.$launch(e));break;case"opt_pintuan_detail":o(t.default.pinshare({tuanId:n}));break;case"opt_pintuan_detail_red":case"opt_invite_pintuan_red":o(t.default.pintuanRed({tuanId:n,itemId:u}))}return!1}}}; 
 			}); 
		define("pages/order/detail/components/shopList/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../shopItem/index")),a=t(require("../../../../../components/imcall/index"));exports.default={name:"shopList",components:{shopItem:e.default,imcall:a.default},data:function(){return{taxId:"",inWhiteList:!0}},onLoad:function(){"100084"!==getApp().data.appKey&&"100082"!==getApp().data.appKey||this.setData({inWhiteList:!1})},onReady:function(){},methods:{setOption:function(t){if(t.shopList){var e=t.shopList.map(function(t){return t.shopIdEsc});this.$imcall.setImOpts({shopIds:e})}},doRefundSubsidy:function(t){var e=t.currentTarget.dataset;this.$root.$navigate("/pages/insurance/freight/index?orderId="+e.shoporderid)},showTaxTips:function(t){var e=this,a=t.currentTarget.dataset;a.istaxcompliance&&!this.data.taxId&&this.setData({taxId:a.shoporderid},function(){setTimeout(function(){e.setData({taxId:""})},3e3)})}}}; 
 			}); 
		define("pages/order/detail/module/parseData.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/utils/dataProtect/index.js")),r=function(e,r){return r=r&&r.length>0?r:"yyyy-MM-dd hh:mm:ss",e&&Date.format(new Date(1e3*e),r)};exports.default=function(t){var o=[],i=null,a=t.payOrder.isWaitPay,n=e.default.get(t.payOrder,"payOrderPromotionInfo.modouInfo.modouUseCount"),s=e.default.get(t.payOrder,"payOrderPromotionInfo.payDiscountInfo.discountAmount"),d=t.payOrder.payChannel,p=t.orderStageInfo,u=void 0;if(e.default.get(t,"orderStageInfo.orderStageList")&&p.orderStageList.length>0){var m=p.orderStageList,c=p.stageStatus,f="",l="";switch(c){case"UN_PRE_PAY":f="等待付款",l="";break;case"WAITING_TAIL_PAY_OPEN":f="(已付)",l="";break;case"ORDER_CANCELLED_UNPREPAID":f="未付款",l="";break;case"UN_TAIL_PAY":f="(已付)",l="等待付款";break;case"TAIL_PAY_SUCCESS":f="(已付)",l="(已付)";break;case"ORDER_CANCELLED_PREPAID":f="(已付)",l="未付款"}u={payGoodsPrice:(m[0].goodsPrice/100).toFixed(2),tailGoodsPrice:(m[1].goodsPrice/100).toFixed(2),payGoodsText:f,tailGoodsText:l,beginTime:r(m[1].beginTime,"MM月dd日 hh:mm:ss"),stageStatus:c}}var h=!0,I=!1,O=void 0;try{for(var _,y=t.shopOrderList[Symbol.iterator]();!(h=(_=y.next()).done);h=!0){var P=_.value,T=P.shopInfo,g="",v="";T.shopIdEsc&&(g="1qfnyw"===T.shopIdEsc?"javascript:;":"//m.mogujie.com/x6/shop/"+T.shopIdEsc);var E=P.priceInfo.originalShipExpense;v=P.priceInfo.currentShipExpense?P.shipExpressNameRemark:P.shopOrderPriceRemark;var x=P.orderTags||[],S=-1!==x.indexOf("PT"),A=-1!==x.indexOf("PT_HB"),L=-1!==x.indexOf("taxCompliance"),R=-1!==x.indexOf("freight");if(S&&P.pintuanInfo){var b=P.pintuanInfo||{};void 0!==b.pintuanRemainTime&&(P.remainTime=b.pintuanRemainTime),b.pintuanStatus&&("PIN_TUAN_AFTER_PAID"===b.pintuanStatus&&(P.orderStatus=b.pintuanStatus+"&&"+b.remainNums),(/PIN_TUAN_LOCKED|PIN_TUAN_FAILED_AFTER_LOCK|PIN_TUAN_SUCCESS_AFTER_LOCK/.test(b.pintuanStatus)&&/ORDER_PAID/.test(P.orderStatus)||"ORDER_CLOSED"==P.orderStatus&&"PIN_TUAN_FAILED"==b.pintuanStatus||"ORDER_CLOSED"==P.orderStatus&&"PIN_TUAN_FAILED_AFTER_LOCK"==b.pintuanStatus)&&(P.orderStatus=b.pintuanStatus))}var D=[],C="",N=!0,k=!1,F=void 0;try{for(var U,w=P.itemOrders[Symbol.iterator]();!(N=(U=w.next()).done);N=!0){var M=U.value,Y="";if(e.default.get(M,"itemPromotionInfo.redPacketMap")){var G=M.itemPromotionInfo.redPacketMap;for(var j in G)C=j,Y=G[j]}var K="";if(P.orderTags&&P.orderTags.length>0){var W=!0,q=!1,B=void 0;try{for(var H,z=P.orderTags[Symbol.iterator]();!(W=(H=z.next()).done);W=!0){var J=H.value;"LOTTERY"===J?K="抽奖订单":"YS"===J?K="预售":"PT"===J&&(K="")}}catch(e){q=!0,B=e}finally{try{!W&&z.return&&z.return()}finally{if(q)throw B}}P.orderTags.indexOf("PT")>=0&&P.orderTags.indexOf("LOTTERY")>=0&&(K="抽奖团")}M.itemOrderOperations=!!M.itemOrderOperations&&M.itemOrderOperations.map(function(e){var r=e.operationName;return e.isRefundShow=["opt_create_complaint","opt_create_refund","opt_show_detail_refund","opt_show_detail_complaint","opt_show_detail_refund","opt_show_detail_complaint","opt_pintuan_detail"].indexOf(r)>=0,e}),D.push({isPintuanRed:A,marketType:P.marketType,orderTag:K,itemOrderId:M.itemOrderId,itemIdEsc:M.itemIdEsc,itemOrderIdEsc:M.itemOrderIdEsc,imgUrl:M.imgUrl,title:M.title,skuAttributes:M.skuAttributes,price:(M.price/100).toFixed(2),nowPrice:(M.nowPrice/100).toFixed(2),number:M.number,redPacketDesc:e.default.get(M,"itemPromotionInfo.redPacketDesc"),redPacketText:C,redPacketNum:(Y/100).toFixed(2),itemOrderOperations:M.itemOrderOperations,activityIdEsc:P.pintuanInfo&&P.pintuanInfo.activityId||"",tuanId:P.pintuanInfo&&P.pintuanInfo.tuanId||""})}}catch(e){k=!0,F=e}finally{try{!N&&w.return&&w.return()}finally{if(k)throw F}}var Q=P.priceInfo.currentShipExpense-P.priceInfo.originalShipExpense,V=P.priceInfo.currentPrice-P.priceInfo.originalPrice,X=V>0?"+":"-",Z=Q>0?"+":"-",$=Math.abs(V)?X+"￥"+(Math.abs(V)/100).toFixed(2):"",ee=Math.abs(Q)?Z+"￥"+(Math.abs(Q)/100).toFixed(2):"",re=void 0,te=void 0;if(P.promotionDetailInfoList&&P.promotionDetailInfoList.length>0){var oe=!0,ie=!1,ae=void 0;try{for(var ne,se=P.promotionDetailInfoList[Symbol.iterator]();!(oe=(ne=se.next()).done);oe=!0){var de=ne.value;switch(de.promoType){case"promo_type_shop":re=de;break;case"promo_type_platform":te=de}}}catch(e){ie=!0,ae=e}finally{try{!oe&&se.return&&se.return()}finally{if(ie)throw ae}}}o.push({isTaxCompliance:L,isFreight:R,isWaitPay:a,sellerUserId:P.sellerUserId,sellerUserIdEsc:P.sellerUserIdEsc,shopOrderId:P.shopOrderId,shopIdEsc:T.shopIdEsc,shopId:T.shopId,shopLogoUrl:T.shopLogoUrl,shopName:T.shopName,titleLink:g,imLink:"",buyerItemOrderPrice:(P.buyerItemOrderPrice/100).toFixed(2),redPacketText:C,shipRemark:v,originalShipExpense:(E/100).toFixed(2),promoShopInfo:re,promoPlatformInfo:te,discountAmount:(s/100).toFixed(2),modouUseCount:n,shareOrderIds:e.default.get(P,"shopOrderPromotionInfo.shareOrderIds"),priceChangedRemark:$,expenseChangedRemark:ee,shopPrice:a?(P.shopOrderPrice/100).toFixed(2):(P.buyerFinalPrice/100).toFixed(2),shopPriceTitle:a?"店铺合计":"实付金额",created:r(P.created),payTime:r(P.payTime),shipTime:r(P.shipTime),receiveTime:r(P.receiveTime),buyerComment:P.buyerComment,productList:D,useAmount:(e.default.get(P,"shopOrderPromotionInfo.payReturnInfo.useAmount")/100).toFixed(2)})}}catch(e){I=!0,O=e}finally{try{!h&&y.return&&y.return()}finally{if(I)throw O}}var pe=t.shopOrderList[0];if(pe.shopOrderOperations&&pe.shopOrderOperations.length){var ue=[],me=[];pe.shopOrderOperations.forEach(function(e){"opt_pintuan_detail"===e.operationName?(e.isRefundShow=!0,ue.push(e)):me.push(e)}),pe.shopOrderOperations=me,ue.length&&pe.itemOrders.length&&pe.itemOrders[0].itemOrderOperations.unshift(ue[0])}var ce=e.default.get(pe,"shopOrderPromotionInfo.payReturnInfo.useAmount"),fe=e.default.get(t.payOrder,"platformPromoAmount");return i={isWaitPay:a,shopOrderId:pe.shopOrderId,promotionDesc:e.default.get(t.payOrder,"payOrderPromotionInfo.promotionDesc"),platformPromoAmount:(fe/100).toFixed(2),created:r(pe.created),payTime:r(pe.payTime),shipTime:r(pe.shipTime),receiveTime:r(pe.receiveTime),buyerComment:pe.buyerComment,useAmount:(ce/100).toFixed(2),payChannel:d},{shopList:o,orderStageList:u,discountList:i}}; 
 			}); 
		define("pages/order/detail/module/parseFootData.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(e){if(!e)return[];var r=e.payOrder,t=e.shopOrderList[0],o=t?t.itemOrders[0]:{},a=e.payOrder.isWaitPay,d=r.payOrderOperations.concat(t.shopOrderOperations);return{isWaitPay:a,operationsList:d.filter(function(e){return"opt_rate_completed"!==e.operationName&&"opt_show_delivery_order"!==e.operationName&&"opt_cancel_order"!==e.operationName&&"opt_delete_order"!==e.operationName&&"opt_rate_score"!==e.operationName&&"opt_rate_share"!==e.operationName}),orderOperations:d,shopOrderId:t&&t.shopOrderId,shopOrderIdEsc:t&&t.shopOrderIdEsc,payOrderId:r&&r.payOrderId,itemId:o.itemIdEsc,payOrderIdEsc:r&&r.payOrderIdEsc,payOrderPrice:a?(r.buyerFinalPrice/100).toFixed(2):(t.buyerFinalPrice/100).toFixed(2),tuanId:t.pintuanInfo&&t.pintuanInfo.tuanId||"",activityId:t.pintuanInfo&&t.pintuanInfo.activityId||""}}; 
 			}); 
		define("pages/order/detail/module/parseLogistics.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&Date.format(new Date(1e3*e),"yyyy-MM-dd hh:mm:ss")};exports.default=function(r,a){if(r&&r.length>0){var t=!0,s=!1,d=void 0;try{for(var i,l=r[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var o=i.value;"其它"===o.expressName&&(o.expressNameType="other"),o.expressId=o.expressId,o.createdTime=e(o.created),o.expressPhone=o.expressPhone;var n=o.deliveryNodeDetails;o.deliveryNodeDetails=n&&n.length>0?n.reverse():n,o.deliveryNodeDetails&&o.deliveryNodeDetails.length>0&&(o.deliveryNodeDetails[0].nodeTimeString=e(o.deliveryNodeDetails[0].nodeTime))}}catch(e){s=!0,d=e}finally{try{!t&&l.return&&l.return()}finally{if(s)throw d}}}var v=null;return a&&(v={mobile:Number(a.mobile),realName:a.realName,address:""+a.province+a.city+a.area+a.address}),{packageTrackInfos:r,receiverAddressInfo:v}}; 
 			}); 
		define("pages/order/detail/module/parseStatus.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default=function(e,a){var _=e.split("&&"),s=_[0],E="",c="",t="";switch(s){case"ORDER_CREATED":E="等待买家付款",t="后自动取消订单";break;case"ORDER_PAID":E="待发货";break;case"ORDER_SHIPPED":E="卖家已发货",t="后自动确认收货";break;case"ORDER_COMPLETED":case"ORDER_RECEIVED":E="交易完成";break;case"ORDER_CANCELLED":case"ORDER_CLOSED":E="交易关闭";break;case"tuan_notPay":E="待付款";break;case"tuan_cancle":E="交易关闭";break;case"PIN_TUAN_AFTER_PAID":case"tuan_tuaning":E="拼团中",+_[1]&&(E+="，还差"+_[1]+"人成团"),c="还剩";break;case"tuan_waitPay":E="拼团中，等待团员完成付款",c="还剩";break;case"PIN_TUAN_SUCCESS_AFTER_PAID":case"tuan_tuanSuccess":E="拼团成功，等待卖家发货";break;case"PIN_TUAN_LOCKED":E="拼团成功，待开奖";break;case"PIN_TUAN_SUCCESS_AFTER_LOCK":E="拼团成功，恭喜中奖";break;case"PIN_TUAN_FAILED_AFTER_LOCK":E="参与奖，退款并送券";break;case"tuan_tuanFailed":case"PIN_TUAN_FAILED":E="拼团失败"}if("ORDER_CREATED"===s&&a)switch(a.stageStatus){case"UN_PRE_PAY":E="等待买家付定金",t="自动取消订单";break;case"WAITING_TAIL_PAY_OPEN":case"UN_TAIL_PAY":E="定金已付，等待支付尾款",t="";break;case"TAIL_PAY_SUCCESS":E="尾款已付，等待发货",t=""}return{statusTitle:E,prevTimeText:c,timeText:t}}; 
 			}); 
		define("pages/order/list/components/orderCard/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../shopItem/index")),r=require("../../../common/base.js"),a=e(require("../../../../../common/service/url.js")),o=e(require("../../../../../common/utils/cache.js")),n=!1;exports.default={name:"orderCard",components:{shopItem:t.default},data:function(){return{}},onLoad:function(){},onReady:function(){},methods:{pintuanDetail:function(e){this.$parent.$navigate(a.default.pinshare({tuanId:e}))},pintuanRed:function(e,t){this.$parent.$navigate(a.default.pintuanRed({tuanId:e,itemId:t}))},lotteryResult:function(e,t){this.$parent.$navigate("/pages/pintuan/lotteryresult/index",{activityId:e,orderId:t})},gotoDetail:function(e){var t=e.currentTarget.dataset,r=t.iswaitpay?t.payorderid:t.shoporderid;this.$parent.$navigate(a.default.orderDetail({orderId:r}))},logisticsOpt:function(e){this.$parent.$navigate(a.default.logisticsList({orderId:e,shopOrderId:e,type:"order"}))},orderRateOpt:function(e){o.default.put("Order_Detail_Operate","orderRateOpt"),this.$parent.$navigate(a.default.rateAdd({orderId:e}))},orderAddRateOpt:function(e){o.default.put("Order_Detail_Operate","orderRateOpt"),this.$parent.$navigate(a.default.rateAppend({orderId:e}))},operateClick:function(e){var t=this,o=e.currentTarget.dataset,s=e.detail&&e.detail.formId,i=this.$parent.$toast,d=o.operationname||"",p=o.shoplist||{},c=o.ischannel;switch(d){case"opt_pay_order":case"opt_prepay_order":case"opt_tailpay_order":if(this.$root.$logForm(s,1),n)return;n=!0,setTimeout(function(){n=!1},3e3),this.$root.$loading.show(),(0,r.payOrderOpt)(this.$root.$cashier,p.payOrderId,this.$root.$loading,{successCb:function(){var e=this;n=!1,i.show("支付成功",2e3,function(){e.$emit("reloadPage"),c?e.$parent.$navigate(a.default.pinshare({tuanId:p.tuanId})):e.$parent.$navigate(a.default.payresult({payOrderId:p.payOrderId}))})}.bind(this),cancelCb:function(e){n=!1,i.show("您已取消支付")}});break;case"opt_show_delivery_order":this.logisticsOpt(p.shopOrderId);break;case"opt_confirm_order":this.$root.$logForm(s,1),wx.showModal({title:"提示",confirmColor:"#ff5777",content:"请您收到货后再点击“确定”，否则可能钱货两空！",success:function(e){e.confirm&&(0,r.orderConfirmOpt)(p.shopOrderId,p.shopOrderIdEsc).then(function(e){e.success?i.show(e.message||"确认收货成功",function(){t.orderRateOpt(p.shopOrderIdEsc)}):i.show(e.message||"确认收货失败，请稍后再试")})}});break;case"opt_rate_order":this.orderRateOpt(p.shopOrderIdEsc);break;case"opt_append_rate_order":this.orderAddRateOpt(p.shopOrderIdEsc);break;case"opt_cancel_order":this.$root.$logForm(s,1),wx.showModal({title:"",confirmColor:"#ff5777",content:"这么好的宝贝，确定不要了吗？",success:function(e){e&&e.confirm?(0,r.cancelOrderOpt)(p.payOrderId||p.shopOrderId).then(function(e){e.success?(i.show(e.message||"取消订单成功"),t.$emit("reloadPage")):i.show(e.message||"取消订单失败，请稍后再试")}):e&&e.cancel}});break;case"opt_remind_ship_order":this.$root.$logForm(s,1),(0,r.orderRemindOpt)(p.shopOrderId).then(function(e){e.success?i.show(e.message||"提醒商家发货成功"):i.show(e.message||"提醒失败，请稍后再试")});break;case"opt_pintuan_detail":case"opt_invite_pintuan":this.pintuanDetail(p.tuanId);break;case"opt_pintuan_detail_red":case"opt_invite_pintuan_red":this.pintuanRed(p.tuanId,p.itemId);break;case"opt_choujiang_detail":this.lotteryResult(p.activityId,p.shopOrderId)}},showMoreProducts:function(e){var t=e.currentTarget.dataset,r=t.orderindex,a=t.shopindex;this.$emit("showMore",r,a)}}}; 
 			}); 
		define("pages/order/list/components/shopItem/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"shopItem",data:function(){return{isRefundLink:!1,isShowRedPacket:!1,redPacketNum:void 0,inWhiteList:!0}},onLoad:function(){"100084"!==getApp().data.appKey&&"100082"!==getApp().data.appKey||this.setData({inWhiteList:!1})},onReady:function(){},methods:{}}; 
 			}); 
		define("pages/order/ptlist/components/orderCard/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../shopItem/index")),r=require("../../../common/base.js"),a=e(require("../../../../../common/service/url.js")),o=e(require("../../../../../common/utils/cache.js")),i=!1;exports.default={name:"orderCard",components:{shopItem:t.default},data:function(){return{}},onLoad:function(){},onReady:function(){},methods:{gotoDetail:function(e){var t=e.currentTarget.dataset,r=t.iswaitpay?t.payorderid:t.shoporderid;this.$parent.$navigate(a.default.orderDetail({orderId:r}))},lotteryResult:function(e,t){this.$parent.$navigate("/pages/pintuan/lotteryresult/index",{activityId:e,orderId:t})},logisticsOpt:function(e){this.$parent.$navigate(a.default.logisticsList({orderId:e,shopOrderId:e,type:"order"}))},orderRateOpt:function(e){o.default.put("PT_Detail_Operate","orderRateOpt"),this.$parent.$navigate(a.default.rateAdd({orderId:e}))},orderAddRateOpt:function(e){o.default.put("PT_Detail_Operate","orderAddRateOpt"),this.$parent.$navigateRed(a.default.rateAppend({orderId:e}))},pintuanDetail:function(e){this.$parent.$navigate(a.default.pinshare({tuanId:e}))},pintuanRed:function(e,t){this.$parent.$navigate(a.default.pintuanRed({tuanId:e,itemId:t}))},operateClick:function(e){var t=this,o=e.currentTarget.dataset,s=e.detail&&e.detail.formId,d=this.$parent.$toast,n=o.operationname||"",p=o.shoplist||{};o.orderindex;switch(n){case"opt_pay_order":case"opt_prepay_order":case"opt_tailpay_order":if(this.$root.$logForm(s,1),i)return;i=!0,setTimeout(function(){i=!1},3e3),this.$root.$loading.show(),(0,r.payOrderOpt)(this.$root.$cashier,p.payOrderId,this.$root.$loading,{successCb:function(){var e=this;i=!1,d.show("支付成功",function(){e.$emit("reloadPage"),e.$parent.$navigate(a.default.pinshare({tuanId:p.tuanId}))})}.bind(this),cancelCb:function(e){i=!1,d.show("您已取消支付")}});break;case"opt_show_delivery_order":this.logisticsOpt(p.shopOrderId);break;case"opt_confirm_order":this.$root.$logForm(s,1),wx.showModal({title:"提示",confirmColor:"#ff5777",content:"请您收到货后再点击“确定”，否则可能钱货两空！",success:function(e){var t=this;e.confirm&&(0,r.orderConfirmOpt)(p.shopOrderId,p.shopOrderIdEsc).then(function(e){e.success?d.show(e.message||"确认收货成功",function(){t.orderRateOpt(p.shopOrderIdEsc)}):d.show(e.message||"确认收货失败，请稍后再试")})}});break;case"opt_rate_order":this.orderRateOpt(p.shopOrderIdEsc);break;case"opt_append_rate_order":this.orderAddRateOpt(p.shopOrderIdEsc);break;case"opt_cancel_order":this.$root.$logForm(s,1),wx.showModal({title:"",confirmColor:"#ff5777",content:"这么好的宝贝，确定不要了吗？",success:function(e){e&&e.confirm?(0,r.cancelOrderOpt)(p.payOrderId||p.shopOrderId).then(function(e){e.success?(t.$emit("reloadPage"),d.show(e.message||"取消订单成功")):d.show(e.message||"取消订单失败，请稍后再试")}):e&&e.cancel}});break;case"opt_remind_ship_order":this.$root.$logForm(s,1),(0,r.orderRemindOpt)(p.shopOrderId).then(function(e){e.success?d.show(e.message||"提醒商家发货成功"):d.show(e.message||"提醒失败，请稍后再试")});break;case"opt_pintuan_detail":case"opt_invite_pintuan":this.pintuanDetail(p.tuanId);break;case"opt_pintuan_detail_red":case"opt_invite_pintuan_red":this.pintuanRed(p.tuanId,p.itemId);break;case"opt_choujiang_detail":this.lotteryResult(p.activityId,p.shopOrderId);break;case"opt_order_detail":case"opt_pintuan_pay_order":var c=p.isWaitPay?p.payOrderId:p.shopOrderId;this.$parent.$navigate(a.default.orderDetail({orderId:c}))}},showMoreProducts:function(e){}}}; 
 			}); 
		define("pages/order/ptlist/components/shopItem/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"shopItem",data:function(){return{isRefundLink:!1,isShowRedPacket:!1,redPacketNum:void 0}},onLoad:function(){},onReady:function(){},methods:{}}; 
 			}); 
		define("pages/payresult/components/totalMount/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"totalMount",data:function(){return{isShow:!1,rightStatus:!1,status:-1,ammountDotLeftArray:[0],ammountDotRightArray:[0,0],info:{}}},init:function(t){for(var o={defaultImage:"",miniAppGoUrl:""},a=(this.data.ammountDotLeftArray,this.data.ammountDotRightArray,Object.assign(o,t.info||{})),i=Math.floor(t.info.remain/100).toString().split(""),n=Math.floor(t.info.remain%100).toString().split(""),r=(i.length,n.length),s=0;s<2-r;s++)n.unshift(0);this.setData({ammountDotLeftArray:i,ammountDotRightArray:n,isShow:!0,rightStatus:t.rightStatus,status:t.status,info:a||{}})},onReady:function(){},methods:{gotoGround:function(){this.$root.$navigate(this.data.info.miniAppGoUrl)}}}; 
 			}); 
		define("pages/pinshare/components/detail-dialog/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(require("../../../../common/m")),e=t(require("../../../../common/service/user.js")),n=t(require("../../../../common/utils/cache")),i=t(require("../modal/index")),s=t(require("../../../../components/countdown/index")),o=t(require("../../../../components/skudialog/index")),u=t(require("../../../../components/mask/index")),r=t(require("../../../../components/toast/index")),d=t(require("../../../../components/loading/index")),h=require("tuanClass.js"),l=t(require("../../../../common/live/index")),f=t(require("../../../../common/utils/imgUrlTool")),c=a.default.MWP;exports.default={components:{modal:i.default,countdown:s.default,skuDialog:o.default,mask:u.default,toast:r.default,loading:d.default,imgUrlTool:f.default},data:function(){return{tuanData:{},itemData:{},isShowRuleArea:!1,userInfo:{}}},onLoad:function(t){this.options=t,this.ptp=t.ptp||""},initDialog:function(t,a){this.tuanInfo=t,this.FailMessage="",this.tuanInfo.isGoodsEmpty=!1,this.tuanTypeValue=this.tuanInfo.tuanTypeValue,this.isNewTuan=1===this.tuanTypeValue,this.activityId=this.tuanInfo.activityId,this.itemId=this.tuanInfo.itemId,this.tuanData=this.operateData(this.tuanInfo),this.itemData={totalNum:this.tuanInfo.totalNum},this.userInfo=this.initUsers(this.tuanInfo),this.setData({tuanData:this.tuanData,itemData:this.itemData,isShowRuleArea:a,userInfo:this.userInfo}),this.fetchSkuInfo(),this.$modal.initModal(this.tuanInfo)},operateData:function(t){var a=this.initTuanClass(t)[t.tuanStatus+"_"+(t.isJoin?"join":"unJoin")]();return{proInfo:a.proInfo,isCount:a.isCount,butInfo:a.butInfo}},initTuanClass:function(t){var a={};switch(t.tuanTypeValue){case 1:a=new h.NewTuan(t,this);break;case 6:a=new h.CouponTuan(t,this);break;case 10:case 11:a=new h.NewCouponTuan(t,this);break;case 3:case 8:a=new h.LotteryTuan(t,this);break;case 9:a=new h.LoopTuan(t,this);break;default:a=new h.NormalTuan(t,this)}return a},fetchSkuInfo:function(){var t=this,a={};a=7!=this.tuanInfo.tuanTypeValue?{actId:this.activityId,iid:this.itemId,channelId:"2012"}:{iid:this.itemId||""},c.request("mwp.detailskipmwp.skus.info","v2",a).then(function(a){if(a.ret==c.Code.Success){var e=t.tuanInfo.tuanTypeValue,n=0;t.tuanInfo.isNew||3==e||8==e||5==e||6==e?n=1:t.tuanInfo.isLimit&&(n=t.tuanInfo.limitNum),t.$skuDialog.init({skuInfo:a.data.data,defaultImage:t.tuanInfo.itemInfo.pic,context:t,$mask:t.$mask,$toast:t.$toast,maxNumber:n,minNumber:1,showLimitTips:!0})}else t.FailMessage=a.msg,t.tuanInfo.isGoodsEmpty=!0,t.tuanData=t.operateData(t.tuanInfo),t.setData({tuanData:t.tuanData})})},confirmSku:function(t){var a=this.tuanInfo,e=a.tuanTypeValue,i=(a.tuanType,this.$root.data.$pinshareInfo.extra),s={};s=7!=e?{channel:"channel_pintuan",pinTuan:{isOwner:!1,isNew:this.tuanInfo.isNew,tuanId:this.tuanInfo.tuanId||"",tuanType:e,extra:i},marketType:getApp().data.marketType,activityId:this.activityId,activityType:t.outType||4,shops:[{skus:[{stockId:t.sku.stockId,number:t.number,ptp:this.ptp,liveParams:l.default.decodeLiveParams(this.$root.query.liveParams)}]}],orderFrom:"detail"}:{orderFrom:"detail",shops:[{skus:[{stockId:t.sku.stockId,number:t.number||1,ptp:this.ptp||"",liveParams:l.default.decodeLiveParams(this.$root.query.liveParams),pinTuan:{tuanId:this.tuanInfo.tuanId||"",tuanType:e||0,extra:i}}]}]};try{n.default.put("buy.buyParams",s)}catch(t){}var o=t.sku,u=t.number;this.$root.$logE("016000112",{num:u,disprice:(o.nowprice/100).toFixed(2),price:(o.price/100).toFixed(2),stockId:o.stockId}),this.$skuDialog.hideSku(),this.$root.$navigate(l.default.getFullUrl("/pages/buy/index",{liveParams:this.$root.query.liveParams,cparam:this.$root.query.cparam}))},isNewTuanAndNewUser:function(){var t=this;this.tuanInfo.tuanTypeValue;if(this.tuanInfo.isNew){if(!this.tuanInfo.newUser)return void this.$modal.show();this.FailMessage?this.$toast.show(this.FailMessage):t.$skuDialog.showSku({})}else this.FailMessage?this.$toast.show(this.FailMessage):t.$skuDialog.showSku({})},methods:{clickSKU:function(){var t=this,a=this.tuanInfo.tuanId;this.$root.$logE("016000152",{tuanId:a});var n=this;n.tuanInfo.isLogin?n.isNewTuanAndNewUser():(n.$loading.show(),e.default.refreshSign().then(function(){var a=t.options,e=a.tuanId,i=a.activityId,s=a.market,o=t.data.extra=decodeURIComponent(a.extra||"");t.extra=o;var u={};console.log("unlogin",e,i,o),u=e?{tuanId:e,platform:"WXXCX"}:i?{activityId:i,market:s,platform:"WXXCX"}:{extra:o,platform:"WXXCX"},c.request("mwp.enzo.pinTuanInfo","1",u).then(function(a){t.tuanInfo=a&&a.data?a.data:{},t.tuanData=t.operateData(t.tuanInfo),t.setData({tuanData:t.tuanData}),t.isNewTuanAndNewUser()}).catch(function(a){t.$toast.show("网络异常，请稍后再试")}),n.$loading.hide()}).catch(function(t){n.$loading.hide(),e.default.showUserError(t)||console.error(t.message)})),setTimeout(function(){n.$loading.hide()},6e3)},goodNavigate:function(t){t.currentTarget.dataset.cparam=this.$root.query.cparam||"",t.currentTarget.dataset.acm=this.$root.query.acm||"",this.$root.$navigate(t)},initUsers:function(t){for(var a=t.users,e=t.totalNum,n={},i=0,s=a.length;i<s;i++)a[i].avatar=f.default.getGoodsRatioSuffix(a[i].avatar,400,"1:1");n=a;var o=t.remainNum;return{isFold:!0,totalNum:e,userInfoList:n=this.getRemainList(n,o),remainNum:o,isLoop:9==t.tuanTypeValue&&e>7}},getRemainList:function(t,a){for(var e={},n=0;n<a;n++)e.avatar=f.default.getGoodsRatioSuffix("https://s10.mogucdn.com/mlcdn/c45406/170704_4b1l3128173hl48cgi414h635b472_80x80.png",400,"1:1"),e.unJoin=!0,t.push(e);return t},handleShowMore:function(){this.userInfo.isFold=!this.userInfo.isFold,this.setData({userInfo:this.userInfo})}}}; 
 			}); 
		define("pages/pinshare/components/detail-dialog/tuanClass.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var o=function(){function t(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,i,o){return i&&t(n.prototype,i),o&&t(n,o),n}}(),e=exports.NormalTuan=function(){function t(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.tuanInfo=n,this.obj=o,this.$countdown=this.obj.$countdown}return o(t,[{key:"tuaning_join",value:function(){return this.initCountdown(),{proInfo:{leftText:"仅剩",content:this.tuanInfo.remainNum,rightText:"人，",cls:"pin-dialog-red pin-dialog-big"},isCount:!0,butInfo:{butType:"share"}}}},{key:"tuaning_unJoin",value:function(){var t={};if(this.initCountdown(),this.tuanInfo.isGoodsEmpty){var n=this.initlinkMap().goodsEmpty;t={butType:"linkTo",title:n.title,link:n.link}}else t={butType:"buy",title:"一键参团"};return{proInfo:{leftText:"仅剩",content:this.tuanInfo.remainNum,rightText:"人，",cls:"pin-dialog-red pin-dialog-big"},isCount:!0,butInfo:t}}},{key:"waitPay_join",value:function(){var t=this.initlinkMap().checkOrder,n=t.title,i=t.link;return{proInfo:{leftText:"已有"+this.tuanInfo.joinNum+"人参加，",content:"等待团员完成付款",rightText:"",cls:"pin-dialog-green"},isCount:!1,butInfo:{butType:"linkTo",link:i,title:n}}}},{key:"waitPay_unJoin",value:function(){var t=this.unJoin(),n=t.title,i=t.link;return{proInfo:{leftText:"已有"+this.tuanInfo.joinNum+"人参加，",content:"等待团员完成付款",rightText:"",cls:"pin-dialog-green"},isCount:!1,butInfo:{butType:"linkTo",link:i,title:n}}}},{key:"tuanSuccess_join",value:function(){var t=this.initlinkMap().checkOrder,n=t.title,i=t.link;return{proInfo:{leftText:"已有"+this.tuanInfo.joinNum+"人参加，",content:"拼团成功",rightText:"",cls:"pin-dialog-green"},isCount:!1,butInfo:{butType:"linkTo",link:i,title:n}}}},{key:"tuanSuccess_unJoin",value:function(){var t=this.unJoin(),n=t.title,i=t.link;return{proInfo:{leftText:"已有"+this.tuanInfo.joinNum+"人参加，",content:"拼团成功",rightText:"",cls:"pin-dialog-green"},isCount:!1,butInfo:{butType:"linkTo",title:n,link:i}}}},{key:"tuanFailed_join",value:function(){var t=this.initlinkMap().checkmore;return{proInfo:{leftText:"超过有效时间，",content:"拼团失败",rightText:"",cls:"pin-dialog-red"},isCount:!1,butInfo:{butType:"linkTo",title:t.title,link:t.link}}}},{key:"tuanFailed_unJoin",value:function(){var t=this.unJoin();return{proInfo:{leftText:"超过有效时间，",content:"拼团失败",rightText:"",cls:"pin-dialog-red"},isCount:!1,butInfo:{butType:"linkTo",title:t.title,link:t.link}}}},{key:"unJoin",value:function(){var t=void 0,n=void 0;return this.tuanInfo.isActivityExpire?(t=this.initlinkMap().checkmore.title,n=this.initlinkMap().checkmore.link):(t=this.initlinkMap().openNew.title,n=this.initlinkMap().openNew.link),{title:t,link:n}}},{key:"initlinkMap",value:function(){return{goodsEmpty:{link:"/pages/shop/home/index",title:"哎呀商品太抢手卖光了，去逛逛其他拼团"},checkmore:{link:"/pages/shop/home/index",title:"去逛逛其他拼团"},openNew:{link:this.tuanInfo.itemInfo.link,title:"我也来开这个团"},checkOrder:{link:this.tuanInfo.orderLink,title:"查看订单详情"},checkCoupon:{link:"/pages/coupon/index",title:"查看我的优惠券"},attendOther:{link:"",title:"去参加其他小伙伴的团"}}}},{key:"initCountdown",value:function(){this.$countdown.init({format:"hh:mm:ss",countdown:this.tuanInfo.remainTime})}}]),t}();exports.NewTuan=function(u){function r(n,o){i(this,r);var e=t(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.tuanInfo=n,e.obj=o,e.$countdown=e.obj.$countdown,e}return n(r,e),o(r,[{key:"tuaning_join",value:function(){return this.initCountdown(),{proInfo:{leftText:"仅剩",content:this.tuanInfo.remainNum,rightText:"位新人，",cls:"pin-dialog-red pin-dialog-big"},isCount:!0,butInfo:{butType:"share"}}}},{key:"tuaning_unJoin",value:function(){var t={};if(this.initCountdown(),this.tuanInfo.isGoodsEmpty){var n=this.initlinkMap().goodsEmpty;t={butType:"linkTo",title:n.title,link:n.link}}else t={butType:"buy",title:"新人一键参团"};return{proInfo:{leftText:"仅剩",content:this.tuanInfo.remainNum,rightText:"位新人，",cls:"pin-dialog-red pin-dialog-big"},isCount:!0,butInfo:t}}}]),r}(),exports.CouponTuan=function(u){function r(n,o){i(this,r);var e=t(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.tuanInfo=n,e.obj=o,e.$countdown=e.obj.$countdown,e}return n(r,e),o(r,[{key:"tuanSuccess_join",value:function(){return{proInfo:{leftText:"已有"+this.tuanInfo.joinNum+"人参加，",content:"拼团成功",rightText:"",cls:"pin-dialog-green"},isCount:!1,butInfo:{butType:"linkTo",link:"/pages/coupon/index",title:"查看我的优惠券"}}}}]),r}(),exports.NewCouponTuan=function(u){function r(n,o){i(this,r);var e=t(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.tuanInfo=n,e.obj=o,e.$countdown=e.obj.$countdown,e}return n(r,e),o(r,[{key:"tuanSuccess_join",value:function(){return{proInfo:{leftText:"已有"+this.tuanInfo.joinNum+"人参加，",content:"拼团成功",rightText:"",cls:"pin-dialog-green"},isCount:!1,butInfo:{butType:"linkTo",link:"/pages/coupon/index",title:"查看我的优惠券"}}}},{key:"tuaning_join",value:function(){return this.initCountdown(),{proInfo:{leftText:"仅剩",content:this.tuanInfo.remainNum,rightText:"位新人，",cls:"pin-dialog-red pin-dialog-big"},isCount:!0,butInfo:{butType:"share"}}}},{key:"tuaning_unJoin",value:function(){var t={};if(this.initCountdown(),this.tuanInfo.isGoodsEmpty){var n=this.initlinkMap().goodsEmpty;t={butType:"linkTo",title:n.title,link:n.link}}else t={butType:"buy",title:"新人一键参团"};return{proInfo:{leftText:"仅剩",content:this.tuanInfo.remainNum,rightText:"位新人，",cls:"pin-dialog-red pin-dialog-big"},isCount:!0,butInfo:t}}}]),r}(),exports.LotteryTuan=function(u){function r(n,o){i(this,r);var e=t(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.tuanInfo=n,e.obj=o,e.$countdown=e.obj.$countdown,e}return n(r,e),o(r,[{key:"tuanSuccess_join",value:function(){return{proInfo:{leftText:"已有"+this.tuanInfo.joinNum+"人参加，",content:"拼团成功",rightText:"",cls:"pin-dialog-green"},isCount:!1,butInfo:{butType:"wechat"}}}}]),r}(),exports.LoopTuan=function(u){function r(n,o){i(this,r);var e=t(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return e.tuanInfo=n,e.obj=o,e.$countdown=e.obj.$countdown,e}return n(r,e),o(r,[{key:"unJoin",value:function(){var t=void 0,n=void 0;if(this.tuanInfo.isActivityExpire)n="/pages/pintuanIndex/index",t="去逛逛其他拼团";else if(this.tuanInfo.isGoodsEmpty){var i=this.initlinkMap().goodsEmpty;t=i.title,n=i.link}else n=this.tuanInfo.joinLink,t="去参加其他小伙伴的团";return{title:t,link:n}}}]),r}(); 
 			}); 
		define("pages/pinshare/components/detail/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/utils/imgUrlTool"));exports.default={components:{imgUrlTool:t.default},data:function(){return{status:"",itemInfo:{},tagContent:"",isJoin:!1,itemServices:[]}},methods:{initDetail:function(e,i){var a=e.itemInfo;a&&a.pic&&(a.pic=t.default.getGoodsRatioSuffix(a.pic,400,"1:1"));var o="",s=!1;e.isNew?o="老带新":3!=e.tuanTypeValue&&8!=e.tuanTypeValue||(o="抽奖团",s=!0);var u="";"tuanSuccess"==e.tuanStatus?u="success":"tuanFailed"==e.tuanStatus&&(u="fail"),this.setData({itemInfo:a,status:u,tagContent:o,isShowRuleArea:s,isJoin:i,itemServices:e.itemServices||[]})},goodRedirect:function(){var t=this.data.itemInfo.link;this.$root.$redirect(t,{cparam:this.$root.query.cparam||"",acm:this.$root.query.acm||""})}}}; 
 			}); 
		define("pages/pinshare/components/modal/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{isShowModal:!1,itemId:"",activityId:""}},methods:{initModal:function(t){this.data.itemId=t.itemId,this.data.activityId=t.activityId,this.setData({itemId:this.data.itemId,activityId:this.data.activityId})},show:function(){this.setData({isShowModal:!0}),this.$root.$pinshareInfo.$dialog.$mask.show()},clickCancel:function(){this.hideModal(),this.$root.$logE("016000153",{})},hideModal:function(){this.setData({isShowModal:!1}),this.$root.$pinshareInfo.$dialog.$mask.hide()},navigateToDetail:function(t){var i=this;this.$root.$navigate("/pages/detail/pages/pintuan/index",t.currentTarget.dataset),setTimeout(function(){i.hideModal()},500)}}}; 
 			}); 
		define("pages/pinshare/components/pinshareInfo/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(require("../../../../common/m")),e=t(require("../detail/index")),i=t(require("../detail-dialog/index")),n=t(require("../rule/index")),o=require("../../../../common/utils/cpcutil"),r=a.default.MWP;exports.default={components:{detail:e.default,dialog:i.default,rule:n.default},data:function(){return{flagTuanInfo:!1,isShowRuleArea:!1}},onLoad:function(t){this.acm=t.acm,this.cparam=t.cparam,this.tuanId=t.tuanId},initPinshareInfo:function(t){var a=this,e=t.tuanId,i=t.activityId,n=t.market,o=this.data.extra=decodeURIComponent(t.extra||"");this.extra=o;var u={};console.log(e,i,o),u=e?{tuanId:e,platform:"WXXCX"}:i?{activityId:i,market:n,platform:"WXXCX"}:{extra:o,platform:"WXXCX"},r.request("mwp.enzo.pinTuanInfo","1",u).then(function(t){if(t.ret==r.Code.Success){var e=t&&t.data?t.data:{};console.log(e),a.$root.$logE("016000257",{businessId:e.activityId||""}),a.tuanInfo=e,a.itemId=e.itemId;var i=e.tuanTypeValue,n=1===i||3===i;a.initCpcParams(),a.setData({flagTuanInfo:!0});var o=e.isJoin;a.$root.setData({joinInfo:{isJoin:o,isLowPrice:n},tuanInfo:e}),o?a.$root.initJoinInfo():a.$root.initUnJoinInfo();a.$rule.initRule(e),a.setData({isShowRuleArea:!0}),a.$detail.initDetail(e,o),a.$dialog.initDialog(e,!0),a.$root.setData({tuanInfo:e})}}).catch(function(t){console.error(t)})},initCpcParams:function(){var t=this;this.cparam&&!this.hasCparamLogged&&(0,o.requestCparam)({itemId:this.itemId,cparam:this.cparam,acm:this.acm,businessStyle:"pintuan",custom:{tuanType:this.tuanInfo.tuanTypeValue,tuanId:this.tuanId}}).then(function(a){"success"===a.result&&(t.hasCparamLogged=!0)}).catch(function(t){sendMsg(t,{_author:"changsheng",threshold:1})})}}; 
 			}); 
		define("pages/pinshare/components/rule/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{tuanTypeValue:"",personNum:"",rules:[]}},methods:{initRule:function(t){var e=t.tuanTypeValue,l=[];l=3==e?[{title:"限时开团"},{title:"一等奖发货"},{title:"未中奖退款"}]:8==e?[{title:"团满开奖"},{title:"一等奖发货"},{title:"未中奖退款"}]:[{title:"好友参团"},{title:"人满发货"},{title:"人不满退款"}],this.setData({rules:l})}}}; 
 			}); 
		define("pages/pinshare/data.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={$pinshareInfo:{},tuanInfo:{},$salesEntry:{bgColor:"#fff",ptpC:"mod_home_salesEntry"},$wallPtMore:{link:"/pages/pintuanIndex/index",name:"更多拼团",marginTop:16,marginBottom:0},wallList:[],categoryEntryTitle:"促销热卖",$activeEntryCategory:{makeupKey:"hotSale",itemWidth:"168rpx",itemHeight:"180rpx",ptpC:"pinshare_isJoin"},$activeEntry:{collectFormId:!0,makeupKey:"topBanner",boxHeight:"auto",boxMinHeight:"auto",boxPadding:0,boxMargin:0,justifyContent:"flex-start",listPadding:0,itemMargin:0,itemBorderRadius:0,imageWidth:"100%",imageHeight:"100%",imageBorderRadius:0,titleIsShow:!1,descriptionIsShow:!1,minCount:0,maxCount:1,ptpC:"pinshare_isJoin"},$wallHeading:{height:"50rpx",color:"#999999",bgColor:"none",margin:"20rpx 0 14rpx 0",padding:0},joinInfo:{isJoin:!0,isLowPrice:!1},isShowReturn:!1,showTopBanner:!1,showCoupon:!1,showActiveEntry:!1,isWxshop:void 0}; 
 			}); 
		define("pages/pintuanIndex/components/ptBroadcast/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(require("../../../../common/utils/imgUrlTool")),e=t(require("../../../../common/m")).default.MWP;exports.default={data:function(){return{isShow:!1,avatar:"",nick:"",number:2}},onLoad:function(){},onReady:function(){var t=this;this.interval=null,e.request("mwp.enzo.pinTuanTips","1",{}).then(function(e){if(e&&e.data&&e.data.length>0){var n=0,o=0,r=e.data,i=r.length;t.interval=setInterval(function(){if(o%2==0&&n<i){var e=Math.round(9*Math.random()+1);t.setData({isShow:!0,avatar:a.default.getGoodsRatioSuffix(r[n].avatar||"",60,"1:1"),nick:r[n].nick||"",number:e||2}),n++}else t.setData({isShow:!1});++o>=2*i&&(clearInterval(t.interval),t.setData({isShow:!1}))},5e3)}}).catch(function(t){})},onUnload:function(){clearInterval(this.interval)},methods:{}}; 
 			}); 
		define("pages/pintuanLottery/components/ptWallCount/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var a=function(){function t(t,a){var e=[],n=!0,i=!1,o=void 0;try{for(var s,r=t[Symbol.iterator]();!(n=(s=r.next()).done)&&(e.push(s.value),!a||e.length!==a);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw o}}return e}return function(a,e){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return t(a,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=t(require("../../../../components/countdown/index")),n=t(require("../../../../common/utils/imgUrlTool")),i=t(require("../../../../common/m.js")).default.MCE;exports.default={components:{countdown:e.default,navData:[]},data:function(){return{wallList:[]}},onLoad:function(){this.wallLists=[],this.lazyData(),this.makeup()},lazyData:function(){var t=this;this.$on("__lazy-data__",function(a,e,n){var i=t.data&&t.data.pids&&t.data.pids[0]||"";if(n&&i&&e&&e[i]&&e[i].list&&e[i].list.length>0){var o=e[i].list||[];t.setTab(o)}})},makeup:function(){var t=this;this.$on("__makeup_done__",function(a,e,n){var i=t.data.makeupKey;if(n&&e&&e[i]&&e[i].list&&e[i].list.length>0){var o=e[i].list||[];t.setTab(o)}})},setTab:function(t){var e=t||[],n=[];if(e&&e.length>0){var i=!0,o=!1,s=void 0;try{for(var r,l=e.entries()[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var u=a(r.value,2),f=(u[0],u[1]);n.push({name:f.cateName,pid:f.pid})}}catch(t){o=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}n[0].onClass="tab_on",this.wallNavData=n,n&&n.length>1&&this.setData({navData:n}),this.setWall(n[0].pid)}},setTabHighlight:function(t){for(var a=0;a<this.wallNavData.length;a++)this.wallNavData[a].onClass=a==t?"tab_on":"";this.setData({navData:this.wallNavData})},setWall:function(t){this.wallLists[t]?this.setData({wallList:this.wallLists[t]}):this.getGoodsInfo(t)},getGoodsInfo:function(t){var a=this;i.get({pid:t}).then(function(e){var i=e.list||[];if(i&&i.length>0){for(var o="",s=e.context.currentTime,r=[],l="",u=0,f=i.length;u<f;u++)(l=i[u]).image&&(l.image=n.default.getGoodsRatioSuffix(l.image,200,"1:1")),l.effectETime?(o=l.effectETime-s,r.push({format:"d天hh:mm:ss",countdown:o})):r.push({format:"d天hh:mm:ss",countdown:0});a.$countdown.initList({countdownList:r}),a.wallLists[t]=i,a.setData({wallList:i})}}).catch(function(t){console.error(t.message)})},methods:{sortTab:function(t){var a=t.currentTarget.dataset,e=a.pid,n=a.tabIndex;this.setWall(e),this.setTabHighlight(n)}}}; 
 			}); 
		define("pages/rate/components/average/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={components:{},data:function(){return{averageScore:0,rateScore:[],isShow:!1}},methods:{refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:props,r=e.averageScore,o=void 0===r?0:r,t=e.rateScore,a=void 0===t?[]:t;this.setData({isShow:!0,averageScore:o,rateScore:a})}},onLoad:function(){this.$on("refresh",this.refresh)}}; 
 			}); 
		define("pages/rate/components/comment/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{state:"close",placeholder:"",cursorSpacing:150,content:"",counter:0,autoFocus:!1,isShow:!1,ok:function(){}}},tempData:{content:"",options:null},methods:{show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tempData.content=e,this.tempData.options=o,this.setData({state:"show",content:e,counter:e.length}),setTimeout(function(){t.setData({isShow:!0,autoFocus:!0})},200)},hide:function(){var t=this;this.tempData.content="",this.tempData.options=null,this.setData({state:"hide",content:"",counter:0,isShow:!1,autoFocus:!1}),setTimeout(function(){t.setData({state:"close"})},500)},changeHandler:function(t){var e=t.detail.value;this.tempData.content=e,this.setData({counter:e.length})},touchMoveHandler:function(){},cancelHandler:function(){this.hide()},okHandler:function(){var t=this.data,e=t.ok;if(t.isShow){var o=this.tempData,n=o.content,a=void 0===n?"":n,s=o.options,i=void 0===s?{}:s;a=a.replace(/(^\s*)|(\s*$)/g,""),"function"==typeof e&&e(a,i),this.hide()}}},onLoad:function(){var t=this;wx.getSystemInfo({success:function(e){var o=150-.416*(672-e.windowHeight);t.setData({cursorSpacing:o})}})}}; 
 			}); 
		define("pages/rate/components/list/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../../common/utils/imgUrlTool"));exports.default={data:function(){return{list:[]}},methods:{refresh:function(e){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e?this.data.list:[];a=a.map(function(e,a){return e.append=e.append||{},e.computed=Object.assign({},e.computed||{},{userUrl:e.user?e.user.profileUrl:"javascript:;",hidePartName:e.user?e.user.uname:"",smallAvatar:function(){var a=e.user?e.user.avatar:"";return i.isMatchMlsCdn(a)?a:t.default.getWidthSuffix(a,160)}(),isShowAppend:!(!e.append.content&&!e.append.images)}),e.images=(e.images||[]).map(function(e,i){return{originUrl:e,defSuffixUrl:t.default.getWidthSuffix(e,160)}}),e.append.images=(e.append.images||[]).map(function(e,i){return{originUrl:e,defSuffixUrl:t.default.getWidthSuffix(e,160)}}),e}),this.data.list=r.concat(a),this.setData(this.data)},isMatchMlsCdn:function(t){var e=/^http:\/\/i\.meilishuo\.net\//;return!(!/\/([a-zA-Z0-9]{28})_/.test(t)&&!e.test(t))},showSwiper:function(e){this.$root.$logE("016000109");var i=e.target.dataset,a=i.itemIndex,r=i.imgIndex,n=i.type,s=this.data.list[a],u=s.images,d=void 0===u?[]:u,o=s.append.images,f=void 0===o?[]:o,l="main"===n?d:f;l=l.map(function(e){return t.default.getWidthSuffix(e.originUrl,750)}),wx.previewImage({current:l[r],urls:l})}},onLoad:function(){this.$on("refresh",this.refresh)}}; 
 			}); 
		define("pages/rate/components/score/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../star/index"));exports.default={components:{rateStar:e.default},data:function(){return{$rateStar:{changeScoreFn:function(){}},unique:"",label:"",changeScoreFn:function(){},score:0}},onLoad:function(){var e=this;this.$rateStar.setData({changeScoreFn:function(t){var n=e.data.changeScoreFn;e.setData({score:t}),"function"==typeof n&&n(t,e.data.unique)}})}}; 
 			}); 
		define("pages/rate/components/sku-head/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},methods:{},onLoad:function(){}}; 
 			}); 
		define("pages/rate/components/star/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{}},methods:{refresh:function(e){},clickItem:function(e){}},onLoad:function(){}}; 
 			}); 
		define("pages/rate/mixins/form.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("../../../common/service/upload"));t(require("../../../common/utils/imgUrlTool"));exports.default={data:{},postData:{},methods:{filterPrice:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t?"￥"+(t/100).toFixed(2):""},getDetail:function(t){return this.postData.detail[t]||{}},getSku:function(t){return this.data.skus[t]||{}},setSubmitActive:function(){if("append"===this.pageType){var t=this.postData.detail.every(function(t){var e=t.comment,i=void 0===e?"":e,a=t.imgUrls,s=void 0===a?[]:a;return!!i||s.length>0});this.setData({isSubmitActive:t})}},addImgUrlData:function(t,i,a){var s=this.getDetail(t),r=this.getSku(t);s.imgUrls.push(i),this.setSubmitActive(),r.imgUrls=r.imgUrls.concat([{originUrl:i,defSuffixUrl:a}]),this.setData(e({},"skus["+t+"].imgUrls",r.imgUrls))},delImgUrlData:function(t,i){var a=this.getDetail(t),s=this.getSku(t);a.imgUrls.splice(i,1),this.setSubmitActive(),s.imgUrls.splice(i,1),this.setData(e({},"skus["+t+"].imgUrls",s.imgUrls))},addImgHandler:function(t){var e=this,a=t.currentTarget.dataset.skuIndex,s=this.getSku(a).imgUrls,r=this.data.extraOptions.image.maxUpload,n=this.data.extraOptions.text.maxUpload,o=r-s.length;o<=0?this.$toast.show(n.replace("%d",r)):i.default.chooseAndUploadImages(o).then(function(t){if(t)return e.$loading.show(),new Promise(function(i,s){var r=0;t.$on("upload",function(t){e.addImgUrlData(a,t.surl,t.localPath)}).$on("fail",function(t,e){r++}).$on("finish",function(){r>0?s({message:"有"+r+"张图片上传失败，请重新上传~"}):i(),e.$loading.hide()})})}).catch(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:err).message;e.$loading.hide(),t&&e.$toast.show(t)})},delImgHandler:function(t){var e=t.currentTarget.dataset,i=e.skuIndex,a=e.imgIndex;this.delImgUrlData(i,a)}}}; 
 			}); 
		define("pages/rate/mixins/range.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function r(r,t){var e=[],n=!0,i=!1,o=void 0;try{for(var u,a=r[Symbol.iterator]();!(n=(u=a.next()).done)&&(e.push(u.value),!t||e.length!==t);n=!0);}catch(r){i=!0,o=r}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.default={getRangeList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=r(t,2),n=e[0],i=e[1];if(void 0===n||void 0===i)return[];for(var o=[],u=n;u<=i;u++)o.push(u);return o},getRangeIndex:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];t=/^[\d]+$/.test(t)?Number(t)||0:t;for(var e=0;e<r.length;e++)if(r[e]===t)return e;return 0}}; 
 			}); 
		define("pages/refund/action.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,n,t){e.url?e.version?(e.data||console.warn("接口无请求数据，请确认"),o.request(e.url,e.version,e.data).then(o.filterResult).then(function(e){n(e)}).catch(function(e){t(e)})):console.error("接口无指定版本号"):console.error("接口无指定地址")}function n(e,n){for(var r in e){var o=e[r];if(void 0==n[r]&&o.isMust)return void console.error("必要参数"+r+"遗漏");if(o.isMust&&t(n[r])!==o.type)return void console.error("必要参数"+r+"类型不符合要求")}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.complaintScoreReason=exports.refundConfer=exports.cancelRefund=exports.getRundLogInfo=exports.submitComplainScore=exports.submitRecordProof=exports.cancelComplain=exports.getComplainDetail=exports.submitComplainInfo=exports.getComplainFactor=void 0;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};exports.requestExpress=function(){return new r.default.Promise(function(n,t){e({url:"mwp.TradeRefundWeb.refundExpressList",version:"1"},n,t)})},exports.deliverGoods=function(n){return new r.default.Promise(function(t,r){e({url:"mwp.TradeRefundWeb.deliverGoods",version:"1",data:n},t,r)})},exports.freightReApplyClaim=function(n){return new r.default.Promise(function(t,r){e({url:"mwp.pay_insurance.freightReApplyClaim",version:"1",data:n},t,r)})},exports.modifyExpress=function(n){return new r.default.Promise(function(t,r){e({url:"mwp.TradeRefundWeb.modifyExpress",version:"1",data:n},t,r)})},exports.refundModifyRequest=function(n){return new r.default.Promise(function(t,r){e({url:"mwp.TradeRefundWeb.refundModifyRequest",version:"1",data:n},t,r)})},exports.refundConfirm=function(n){return new r.default.Promise(function(t,r){e({url:"mwp.TradeRefundWeb.refundConfirm",version:"1",data:n},t,r)})},exports.refundApply=function(n){return new r.default.Promise(function(t,r){e({url:"mwp.TradeRefundWeb.refundApply",version:"1",data:n},t,r)})},exports.refundFundDetail=function(n){return new r.default.Promise(function(t,r){e({url:"mwp.TradeRefundWeb.refundFundDetail",version:"1",data:n},t,r)})};var r=function(e){return e&&e.__esModule?e:{default:e}}(require("../../common/m")),o=r.default.MWP;exports.getComplainFactor=function(t,r,o){e({url:"mwp.cscenter.complaintPreInit4SubmitComplaint",version:"1",data:n({orderId:{type:"number",isMust:!0}},t)},r,o)},exports.submitComplainInfo=function(t,r,o){e({url:"mwp.cscenter.submitComplaint",version:"1",data:n({orderId:{type:"number",isMust:!0}},t)},r,o)},exports.getComplainDetail=function(t,r,o){e({url:"mwp.cscenter.complaintDetail",version:"1",data:n({itemOrderId:{type:"number",isMust:!0}},t)},r,o)},exports.cancelComplain=function(t,r,o){e({url:"mwp.cscenter.cancelComplaint",version:"1",data:n({complaintId:{type:"number",isMust:!0}},t)},r,o)},exports.submitRecordProof=function(t,r,o){e({url:"mwp.cscenter.submitComplaintProof",version:"1",data:n({complaintId:{type:"number",isMust:!0},content:{type:"string",isMust:!1},images:{type:"string",isMust:!1}},t)},r,o)},exports.submitComplainScore=function(t,r,o){e({url:"mwp.cscenter.submitComplaintScore",version:"1",data:n({complaintId:{type:"number",isMust:!0},evalValue:{type:"number",isMust:!0},reasonCode:{type:"string"},comment:{type:"string"}},t)},r,o)},exports.getRundLogInfo=function(t,r,o){e({url:"mwp.TradeRefundWeb.refundLog",version:"1",data:n({itemOrderId:{type:"number",isMust:!0}},t)},r,o)},exports.cancelRefund=function(t,r,o){e({url:"mwp.TradeRefundWeb.cancelRefund",version:"1",data:n({refundId:{type:"number",isMust:!0}},t)},r,o)},exports.refundConfer=function(t,r,o){e({url:"mwp.TradeRefundWeb.refundConfer",version:"1",data:n({result:{type:"string",isMust:!0},refundId:{type:"number",isMust:!0}},t)},r,o)},exports.complaintScoreReason=function(t,r,o){e({url:"mwp.cscenter.complaintScoreReasonList",version:"1",data:n({type:{type:"number",isMust:!0}},t)},r,o)}; 
 			}); 
		define("pages/refund/apis.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.requestExpressList=function(t,s){(0,e.requestExpress)().then(function(e){return e.unshift({expressName:"请选择物流公司",expressCode:""}),t.setData({companyList:e}),s.hide(),!0}).catch(function(e){return s.hide(),wx.showModal({title:"出错了",content:e.message,showCancel:!1}),!1})};var e=require("./action"); 
 			}); 
		define("pages/refund/applydetail/components/im/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../components/im/score/index")),t=require("./utils.js");exports.default={components:{score:e.default},data:function(){return{imdata:{},fullTimelineLogDTOList:[],adminInfo:{},buttons:[{text:"协商一致",type:"agree"},{text:"未协商一致",type:"disagree"}],maskWidth:"0",bigImg:"",bigImgStyle:""}},methods:{parseIM:function(e){return(0,t.parseIM)(e)},parseImage:function(e){return(0,t.parseImage)(e)},showBigImg:function(e){var t=e.target.dataset.img;t&&wx.previewImage({urls:[t]})},closeBigImg:function(){this.setData({bigImg:""})},operateLink:function(e){var t=e.currentTarget.dataset,r=t.clickFlag,a=t.logType,i=this.data.itemOrderId,n=this.data.refundId;if("chat-link-disable"!==r){switch(a){case"APPLY_REFUND":t.page="refundRequest",t.orderId=i;break;case"WIAT_TO_BUYER_SHIP":t.page="refundLogistics",t.orderId=i,t.refundId=n;break;case"REFUND_COMPLETED":t.page="refundProtocol";break;case"APPLY_COMPLAINT":t.page="refundApply",t.orderId=i}this.$root.$redirect(e)}},confirmSame:function(e){var t=e.target.dataset.buttonType;"button-item-disabled"!==e.target.dataset.buttonClickflag&&this.$emit("confirm-same",{type:t,refundId:this.data.refundId,itemOrderId:this.data.itemOrderId})}},onReady:function(){var e=this;this.$score.$on("commit-score",function(t){e.$emit("commit-score",t)}),this.$score.$on("get-reason-list",function(t){e.$parent.$emit("get-reason-list",t)})}}; 
 			}); 
		define("pages/refund/applydetail/components/im/utils.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../../common/utils/imgUrlTool")),a=function(e,a){return a=a&&a.length>0?a:"yyyy.MM.dd hh:mm:ss",e&&Date.format(new Date(1e3*e),a)},t=function(e){var a="";switch(e){case 1:a="非常不满意";break;case 2:a="不满意";break;case 3:a="一般";break;case 4:a="满意";break;case 5:a="非常满意";break;default:a=""}return a},i=function(a){var t=!1,i=a.showContent;i&&i.length>0&&(t=1!==i.length||!/^\s*$/g.test(i[0]));var r="";if(!t&&a.images&&a.images.length>0){var n=a.images.length;2==n?r="chat-pic-lensmall2":3==n?r="chat-pic-lensmall3":n>3&&(r="chat-pic-lensmallmore")}var l=[];if(a.images&&a.images.length>0){var o=!0,s=!1,m=void 0;try{for(var c,u=a.images[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var g=c.value;l.push({imgSmall:e.default.getWidthSuffix(g,100),img:g})}}catch(e){s=!0,m=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw m}}}return{isShowMixContent:t,imgClassName:r,imagesArr:l}};module.exports={formatTime:a,getScoreText:t,parseIM:function(e){if(e&&e.timeLines){var r=e.timeLines,n="",l=r.length,o=r.map(function(e,r){var o=e.showContent,s=!(!o||!o[0])&&o,m=0;"REFUND_CHANNEL"!==e.logType&&"WEIQUAN_RATE"!==e.logType||((s=o.length>0?JSON.parse(o):o).amount=(Number(s.amount)/100).toFixed(2)),"CREATED_COMPLAINT"===e.logType&&(s={complainCause:s[0].split("：")[1],complainName:s[2].split("：")[1],complainPhone:s[3].split("：")[1],complainExtra:s[1].split("：")[1]}),"WEIQUAN_RATE"===e.logType&&o.length>0&&(m=Number(s.starLevel)),r==l-1&&(n="scrollViewItem"+r);var c=i(e),u="";if("REFUND_CHANNEL"===e.logType)switch(s.type){case"WECHAT":u="m-icon-weixin";break;case"ALIPAY":u="m-icon-zhifubao";break;case"BANK":u="m-icon-rmb";break;case"MGJ":u="m-icon-mogujie"}return e.actionTitle="",e.showContentList=s,e.starLevel=e.starLevel||m,e.created=a(e.created),e.clickFlag=Number(e.clickType)?"chat-link-operate":"chat-link-disable",e.buttonClickFlag=Number(e.clickType)?"button-item":"button-item-disabled",e.scoreText=t(e.starLevel),e.maskWidth=e.maskWidth||m/5*100+"%",e.showIconClass=e.showIconClass||u,e.id="scrollViewItem"+r,e=Object.assign({},e,c)});return{itemOrderId:e.orderInfo&&e.orderInfo.itemOrderId,complaintId:e.complaintId,fullTimelineLogDTOList:o,adminInfo:e.adminInfo,buyerAvatar:e.buyerInfo.avatar,canEvaluate:e.canEvaluate,canLeavewords:e.canLeaveMessage,lastItemId:n}}},parseImage:i}; 
 			}); 
		define("pages/refund/components/comment/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../../common/service/upload.js")),i=t(require("../../../../components/loading/index"));exports.default={data:function(){return{setText:"",complaintId:0,itemOrderId:0,imagesList:[]}},components:{loading:i.default},methods:{uploadPic:function(t){var i=this,a=t.detail.formId;this.$root.$logForm(a,1);var o=[],n={type:0,images:[],inputText:"",msg:"",complaintId:this.data.complaintId,itemOrderId:this.data.itemOrderId};e.default.chooseAndUploadImages(8-this.data.imagesList.length).then(function(t){if(t){i.$root.$loading.show();var e=0;t.$on("upload",function(t){o.push(t.path)}).$on("fail",function(t,i){n.msg=t.message,e++}).$on("finish",function(){e>0&&(n.msg="有"+e+"张图片上传失败，请重新上传~"),n.images=o,i.$emit("comment",n)})}}).then(function(){i.setData({images:o})})},escapeHtml:function(t){if(t)return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},setText:function(t){this.data.inputText=t.detail.value},commentText:function(t){var e=t.detail.formId;this.$root.$logForm(e,1),this.$root.$loading.show();var i=this.escapeHtml(this.data.inputText),a={type:1,images:"",inputText:i,msg:"",complaintId:this.data.complaintId,itemOrderId:this.data.itemOrderId};i||(a.msg="请输入内容"),this.$emit("comment",a),this.setData({inputText:""})}}}; 
 			}); 
		define("pages/refund/components/form/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../../common/service/upload")),a=e(require("../textarea/index")),s=void 0,o=void 0;exports.default={components:{comment:a.default},data:function(){return{}},onLoad:function(){var e=this;this.$comment.setData({ok:function(t,a){e.setData({specificationText:t})},placeholder:"请填写退款说明，退款处理更快捷"})},initData:function(e){this.setData(Object.assign({type:e.refundType?e.refundType:e.isShipped?"":"refund_money",choiceSelected:e.orderGoodsStatus,checkShipped:e.refundType?"return_goods"===e.refundType?"checkShipped":"checkUnShipped":"",causeCodeSelected:e.causeCode||"",secondaryFlag:!0,specificationText:e.specification,loading:!1,picturesList:e.pictures||[],causeNoReason:e.causeNoReason||!1,hongbaoAmount:e.dedectHongbaoAmount,hongbaoPrice:(e.dedectHongbaoAmount/100).toFixed(2),obtainHongbaoPrice:(e.obtainHongbaoAmount/100).toFixed(2),error:"",price:e.expense||e.maxRefundExpense,checkCauseColor:!1,checkSecondCauseColor:!1,choiceColor:!1,areaTextColor:!0,areaText:"请填写退款说明，退款处理更快捷",choiceList:[{name:"请填选择是否收到商品",code:""},{name:"未收到商品",code:"0"},{name:"已收到商品",code:"1"}],choiceSelectedIndex:0,refundCauseDTOList:[{causeName:"请填选择"+e.refundName+"原因",causeCode:""}],refundCauseDTOIndex:0,secondCauseList:[],secondCauseIndex:0},e)),s=this.data.price,o=this.data.causeNoReason?this.data.maxRefundExpenseWithoutShip:this.data.maxRefundExpense,this.updateRelativeData(),this.initIndex()},updateRelativeData:function(){this.refundCauseDTOList(),this.showChoiceSelect(),this.causeDesc(),this.secondCauseList()},initIndex:function(){var e=this.data,t={};e.choiceSelected&&e.choiceList.forEach(function(a,s){a.code==e.choiceSelected&&(t.choiceSelectedIndex=s,t.choiceColor=!0)}),e.causeCodeSelected&&e.refundCauseDTOList.forEach(function(a,s){a.causeCode==e.causeCodeSelected&&(t.refundCauseDTOIndex=s,t.checkCauseColor=!0)}),e.secondaryCauseCodeSelected&&e.secondCauseList.forEach(function(a,s){a.causeCode==e.secondaryCauseCodeSelected&&(t.secondCauseIndex=s,t.checkSecondCauseColor=!0)}),this.setData(t)},refundCauseDTOList:function(){var e=[];switch(this.data.type){case"return_goods":e=this.data.returnGoodsCauseList;break;case"refund_money":e=this.data.refundMoneyCauseList}e=[{causeName:"请填选择"+this.data.refundName+"原因",causeCode:""}].concat(e),this.setData({refundCauseDTOList:e})},causeDesc:function(){var e={};e.causeDesc="";var t=!0,a=!1,s=void 0;try{for(var o,c=this.data.refundCauseDTOList[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var i=o.value;i.causeCode===this.data.causeCodeSelected&&(e.causeDesc=i.causeDesc||"",e.causeNoReason=i.isNoReason||!1)}}catch(e){a=!0,s=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw s}}e.secondaryCauseCodeSelected=this.data.secondaryFlag?this.data.secondaryCauseCode:"",e.secondaryFlag=!1,this.setData(e)},secondCauseList:function(){var e=[],t=!0,a=!1,s=void 0;try{for(var o,c=this.data.refundCauseDTOList[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var i=o.value;i.causeCode===this.data.causeCodeSelected&&(e=i.secondaryRefundCauseDTOList||[])}}catch(e){a=!0,s=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw s}}e.length&&!e[0].causeCode||e.unshift({causeName:"请填选择具体原因",causeCode:""}),this.setData({secondCauseList:e})},showChoiceSelect:function(){var e=this.data,t=e.isShipped&&"refund_money"===e.type;this.setData({isShowChoice:t,showChoiceSelect:t&&e.choiceList&&e.choiceList.length>1})},mounted:function(){},methods:{choiceSelectedChange:function(e){var t=e.detail.value;this.setData({choiceSelectedIndex:t,choiceSelected:this.data.choiceList[t].code,choiceColor:0!==t})},refundCauseDTOChange:function(e){var t=e.detail.value,a=this.data.refundCauseDTOList[t].isNoReason;s=o=a?this.data.maxRefundExpenseWithoutShip:this.data.maxRefundExpense;var c={price:o,refundCauseDTOIndex:t,causeCodeSelected:this.data.refundCauseDTOList[t].causeCode,checkCauseColor:0!=t,secondaryCauseCodeSelected:"",secondCauseIndex:0,checkSecondCauseColor:!1,error:""};0==t&&(c.causeNoReason=!1),this.setData(c),this.causeDesc(),this.secondCauseList(),this.$emit("change-money",Number(s))},secondCauseChange:function(e){var t=e.detail.value;this.setData({secondCauseIndex:t,secondaryCauseCodeSelected:this.data.secondCauseList[t].causeCode,checkSecondCauseColor:0!==t})},checkType:function(e){var t=e.currentTarget.dataset.type;if(this.data.type!==t){var a=this.data.maxRefundExpense,s={price:a,type:t,choiceSelected:"",choiceSelectedIndex:0,causeCodeSelected:"",refundCauseDTOIndex:0,choiceColor:!1,checkCauseColor:!1,secondaryCauseCodeSelected:"",checkShipped:"return_goods"===t?"checkShipped":"checkUnShipped",error:"",causeNoReason:!1};this.setData(s),this.updateRelativeData(),o=a,this.$emit("change-money",Number(a))}},checkDetail:function(){this.$emit("no-reason-detail",this.data.causeCodeSelected)},handlerUploadStart:function(){this.setData({loading:!0})},deletePicture:function(e){var t=e.currentTarget.dataset.imgindex;this.data.picturesList.splice(t,1),this.setData({picturesList:this.data.picturesList})},changeMoney:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(s=e.detail.value);this.data;!s||s<0||!/^[0-9]+([.]{1}[0-9]{1,2})?$/.test(s)?this.setData({error:"退款金额为大于0小于"+o+"的数字，最多保留两位小数"}):Number(s)>Number(o)?this.setData({error:"退款额度不能超过退款商品总价￥"+o}):(this.setData({error:""}),t||this.$emit("change-money",Number(s)))},commitRequest:function(e){var t=e.detail.formId;this.$root.$logForm(t,2);var a=this.data,o={refundId:a.refundId,refundType:a.type,orderGoodsStatus:a.choiceSelected,refundCause:a.causeCodeSelected,secondaryRefundCause:a.secondaryCauseCodeSelected,pictures:a.picturesList,specification:a.specificationText,number:a.number,expense:parseInt((100*s).toFixed()),msg:""};a.isShipped&&!a.type?o.msg="请选择退款类型":a.showChoiceSelect&&!a.choiceSelected?o.msg="请选择是否收到商品":a.causeCodeSelected?("QUALITY_PROBLEM"===a.causeCodeSelected||"DIFFERENT_GOODS"===a.causeCodeSelected)&&a.picturesList.length<=0?o.msg="请上传具体照片":a.secondCauseList&&a.secondCauseList.length>1&&!a.secondaryCauseCodeSelected?o.msg="请选择具体原因":s||(o.msg="请填写退款金额"):o.msg="请选择原因",this.changeMoney(null,!0),this.data.error||this.$emit("commit-request",o)},uploadFile:function(){var e=this,a=8-this.data.picturesList.length;t.default.chooseAndUploadImages(a).then(function(t){t?(e.$emit("show-loading"),t.$on("upload",function(t){e.data.picturesList.push(t.surl),e.setData({picturesList:e.data.picturesList})}).$on("fail",function(e,t){wx.showToast({title:e.message,duration:1e3})}).$on("finish",function(){e.$emit("hide-loading")})):e.$emit("hide-loading")})},openTextArea:function(e){var t=this.data.specificationText;this.$comment.show(t)}}}; 
 			}); 
		define("pages/refund/components/im/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("./score/index")),t=require("./utils.js");exports.default={components:{score:e.default},data:function(){return{imdata:{},fullTimelineLogDTOList:[],adminInfo:{},buttons:{WAIT_TO_CONFER:[{text:"协商一致",type:"agree"},{text:"未协商一致",type:"disagree"}],WAIT_TO_AGREE_SHIP:[{text:"同意发货",type:"agree_ship"},{text:"不同意发货",type:"disagree_ship"}]},maskWidth:"0",bigImg:"",bigImgStyle:""}},methods:{parseIM:function(e){return(0,t.parseIM)(e)},formatTime:function(e){return(0,t.formatTime)(e)},parseImage:function(e){return(0,t.parseImage)(e)},showBigImg:function(e){var t=e.target.dataset.img;t&&wx.previewImage({urls:[t]})},closeBigImg:function(){this.setData({bigImg:""})},operateLink:function(e){var t=e.currentTarget.dataset,r=t.clickFlag,a=t.logType,i=this.data.itemOrderId,s=this.data.refundId;if("chat-link-disable"!==r){switch(a){case"APPLY_REFUND":t.page="refundRequest",t.orderId=i;break;case"WIAT_TO_BUYER_SHIP":t.page="refundLogistics",t.orderId=i,t.refundId=s;break;case"REFUND_COMPLETED":t.page="refundProtocol";break;case"APPLY_COMPLAINT":t.page="refundApply",t.orderId=i}this.$root.$navigate(e)}},confirmSame:function(e){var t=e.detail.formId;this.$root.$logForm(t,1);var r=e.target.dataset.buttonType;"button-item-disabled"!==e.target.dataset.buttonClickflag&&this.$emit("confirm-same",{type:r,refundId:this.data.refundId,itemOrderId:this.data.itemOrderId})},goCashDetail:function(e){var t=e.currentTarget.dataset,r=t.fundType;if("claim"===r){switch(r){case"claim":t.page="refundFreight",t.orderId=this.data.shopOrderId,t.refundId=this.data.refundId}this.$root.$navigate(e)}}},onReady:function(){var e=this;this.$score.$on("commit-score",function(t){e.$emit("commit-score",t)}),this.$score.$on("get-reason-list",function(t){e.$parent.$emit("get-reason-list",t)})}}; 
 			}); 
		define("pages/refund/components/im/score/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../star/index")),a=require("../utils"),s=e(require("../../textarea/index"));exports.default={components:{star:t.default,comment:s.default},data:function(){return{starLevel:0,score:5,scoreText:"非常满意",scoreTitle:"",canEvaluate:!1,hasReasonList:!1,scoreReasonList:[],isShowReasonList:!1,choicedName:"",areaTextColor:!0,areaText:"请填写退款说明，退款处理更快捷",resonText:""}},methods:{commitScore:function(e){var t={score:this.data.score,complaintId:e.target.dataset.complaintid,itemOrderId:e.target.dataset.itemorderid,choicedName:this.data.choicedName,resonText:this.data.resonText,msg:""};t.score?this.data.isShowReasonList&&!this.data.choicedName&&(t.msg="请选择原因"):t.msg="请您对官方客服本次服务进行评价",this.$parent.$emit("commit-score",t)},choiceReason:function(e){this.setData({choicedName:e.target.dataset.value})},bindAreaInput:function(e){this.data.resonText=e.detail.value},openTextArea:function(e){var t=this.data.resonText;this.$comment.show(t)}},onLoad:function(){var e=this;this.$comment.setData({ok:function(t,a){e.setData({resonText:t})},placeholder:"请填写退款说明，退款处理更快捷"})},onReady:function(){var e=this;this.$star.$on("click-star",function(t){t=Number(t),e.setData({scoreText:(0,a.getScoreText)(t),score:t}),t>3?e.setData({isShowReasonList:!1,resonText:"",choicedName:""}):(e.data.hasReasonList||e.$parent.$emit("get-reason-list",{callback:function(t){e.setData({hasReasonList:!0,scoreReasonList:t})}}),e.setData({isShowReasonList:!0}))})}}; 
 			}); 
		define("pages/refund/components/im/utils.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/utils/imgUrlTool")),t=function(e,t){return t=t&&t.length>0?t:"yyyy.MM.dd hh:mm:ss",e&&Date.format(new Date(1e3*e),t)},a=function(e){var t="";switch(e){case 1:t="非常不满意";break;case 2:t="不满意";break;case 3:t="一般";break;case 4:t="满意";break;case 5:t="非常满意";break;default:t=""}return t},r=function(e){var t=e.split(/\{[^\{\}]*\}/g),a=e.match(/\{[^\{\}]*\}/g),r=[];return t.forEach(function(e,t){r.push({text:e});var n=(a[t]||"").replace(/\{|\}/g,"");r.push({text:n,colorFlag:!0})}),r},n=function(t){var a=!1,r=t.showContent;r&&r.length>0&&(a=1!==r.length||!/^\s*$/g.test(r[0]));var n="";if(!a&&t.images&&t.images.length>0){var i=t.images.length;2==i?n="chat-pic-lensmall2":3==i?n="chat-pic-lensmall3":i>3&&(n="chat-pic-lensmallmore")}var o=[];if(t.images&&t.images.length>0){var l=!0,s=!1,c=void 0;try{for(var u,m=t.images[Symbol.iterator]();!(l=(u=m.next()).done);l=!0){var d=u.value;o.push({imgSmall:e.default.getWidthSuffix(d,100),img:d})}}catch(e){s=!0,c=e}finally{try{!l&&m.return&&m.return()}finally{if(s)throw c}}}return{isShowMixContent:a,imgClassName:n,imagesArr:o}};module.exports={formatTime:t,getScoreText:a,parseIM:function(e){if(e&&(e.fullTimelineLogDTOList||e.timeLines)){var i=e.fullTimelineLogDTOList||e.timeLines,o="",l=i.length,s=i.map(function(e,i){var s=e.showContent,c=s,u=0,m="";if("REFUND_CHANNEL"!==e.logType&&"WEIQUAN_RATE"!==e.logType||((c=s.length>0?JSON.parse(s):s).amount=(Number(c.amount)/100).toFixed(2)),"REFUND_REQUESTED"==e.logType)switch(e.actionType){case"REFUND_BUYER_ADD":case"REFUND_BUYER_EDIT":m="退款信息";break;case"RETURN_GOODS_BUYER_ADD":case"RETURN_GOODS_BUYER_EDIT":m="退货且退款"}"WEIQUAN_RATE"===e.logType&&s.length>0&&(u=Number(c.starLevel));var d=n(e),f="";if("REFUND_CHANNEL"===e.logType)switch(c.type){case"WECHAT":f="m-icon-weixin";break;case"ALIPAY":case"BANK":f="m-icon-rmb";break;case"MGJ":f="m-icon-mogujie"}return"link_tips"===e.contentType&&(c[0]=r(c[0])),i==l-1&&(o=e.id),e.actionTitle=m,e.showContentList=c,e.starLevel=e.starLevel||u,e.created=t(e.created),e.clickFlag=Number(e.clickType)?"chat-link-operate":"chat-link-disable",e.buttonClickFlag=Number(e.clickType)?"button-item":"button-item-disabled",e.scoreText=a(e.starLevel),e.maskWidth=e.maskWidth||u/5*100+"%",e.showIconClass=e.showIconClass||f,e=Object.assign({},e,d)});return{shopOrderId:e.refundShopOrderDTO&&e.refundShopOrderDTO.shopOrderId,itemOrderId:e.refundItemOrderDTO&&e.refundItemOrderDTO.itemOrderId,refundId:e.refundDTO&&e.refundDTO.refundId,refundIdEsc:e.refundDTO&&e.refundDTO.refundIdEsc,purseIdEsc:e.fundDetailDTO&&e.fundDetailDTO.purseIdEsc,complaintId:e.complaintInfoDTO&&e.complaintInfoDTO.complaintId,fullTimelineLogDTOList:s,adminInfo:e.adminInfo,buyerAvatar:e.refundShopOrderDTO&&e.refundShopOrderDTO.buyerAvatar,canEvaluate:e.complaintInfoDTO&&e.complaintInfoDTO.canEvaluate,canLeavewords:e.complaintInfoDTO&&e.complaintInfoDTO.canLeavewords,lastItemId:o}}},parseImage:n}; 
 			}); 
		define("pages/refund/components/logistics/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e="",s="";exports.default={name:"Logistics",data:function(){return{showCause:!1,hasShipService:!1,selectedCode:"",expressId:"",cause:"",index:0,companyList:[{expressName:"请选择物流公司",expressCode:""}]}},methods:{updateInfo:function(s){var t=0,o=!0,a=!1,d=void 0;try{for(var i,n=this.data.companyList[Symbol.iterator]();!(o=(i=n.next()).done)&&i.value.expressCode!=s.expressCode;o=!0)t++}catch(e){a=!0,d=e}finally{try{!o&&n.return&&n.return()}finally{if(a)throw d}}s.index=t,e=s.expressId,s.selectedCode=s.expressCode||"",this.setData(s)},bindPickerChange:function(e){var s=this.data.companyList[e.detail.value].expressCode;this.setData({index:e.detail.value,selectedCode:s}),"others"==s&&wx.showModal({content:"物流公司选择“其他”，可能会影响运费补贴哦~",showCancel:!1,confirmColor:"#ff4422"})},bindInputChange:function(s){e=s.detail.value},bindAreaInput:function(e){s=e.detail.value},openRules:function(e){wx.previewImage({urls:["https://s10.mogucdn.com//mlcdn/c45406/170927_04elj977j7l1je9b6hi3ka82eagbe_750x10728.jpg"]})},commitLogistics:function(t){var o=t.detail.formId||"",a=this.data,d={shopOrderId:a.shopOrderId,refundId:a.refundId,expressCode:a.selectedCode,expressId:e,msg:"",cause:s};a.selectedCode?e?/^[a-z0-9]+$/i.test(e)?a.showCause&&!s?d.msg="请填写申请原因":s.length>200&&(d.msg="申请原因最多200字"):d.msg="订单号填写不正确请重新填写":d.msg="请填写物流单号":d.msg="请选择物流公司",this.$root.$logForm(o,2),this.$emit("commit-logistics",d)},bindQR:function(){var s=this;this.$root.$logE("016000220"),wx.scanCode({success:function(t){e=t.result,s.setData({expressId:e})}})}}}; 
 			}); 
		define("pages/refund/components/star/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{maskWidth:"100%",canEvaluate:!1,nowStar:5}},methods:{clickItem:function(t){if(this.nowStar!=t.target.dataset.starItem){this.nowStar=t.target.dataset.starItem;var a=t.target.dataset.starItem;t.currentTarget.dataset.canevaluate&&(this.setData({maskWidth:a/5*100+"%"}),this.$emit("click-star",a))}}},onLoad:function(){}}; 
 			}); 
		define("pages/refund/components/status/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/utils/dataProtect/index"));exports.default={methods:{operationFunc:function(e){var t=e.currentTarget.dataset,r=t.operationType,a=this.data.refundId,d=this.data.itemOrderId,s=(this.data.shopOrderId,this.data.hasShipService),u=!0;switch(r){case"request":t.page="refundRequest",t.orderId=d;break;case"logistics":t.page="logisticsList",t.orderId=d,t.type="refund";break;case"logisticsrequest":t.page="refundLogistics",t.orderId=d,t.refundId=a,t.hasShipService=s;break;case"logisticsedit":t.page="refundLogisticsEdit",t.orderId=d;break;case"cash":t.page="refundCash",t.orderId=d;break;case"cancel":this.$emit("cancel-handler",a,d),u=!1;break;default:return}u&&this.$root.$navigate(e)},getText:function(e){return"agree"===e?"协商一致，退款已取消":"agree_ship"===e?"同意商家发货，退款取消":"退款已取消"},parseStatusData:function(t){if(t&&t.refundItemOrderDTO){var r=e.default.get(t,"refundDTO.refundStatus"),a="return_goods"===e.default.get(t,"refundDTO.refundType"),d=!!t.logisticsDeliverySimpleDetailDTOs,s=e.default.get(t,"refundTagDTO.canCancelRefund"),u=t.expressOrderInfoDTO,n="",i=[],o="";switch(e.default.get(t,"detailOperateDTO.fundDetail.enable")&&i.push({text:"钱款去向",type:"cash"}),r){case"refund_cancelled":o=e.default.get(t,"refundDTO.conferResult"),n=this.getText(o),e.default.get(t,"refundDTO.canRefund")&&i.push({text:"申请退款",type:"request"});break;case"return_goods_requested":case"refund_requested":n="退款处理中，请等待",i.push({text:"修改申请",type:"request"}),s&&i.push({text:"取消退款",type:"cancel"});break;case"refund_or_return_seller_refused":n="退款处理中，请等待",s&&i.push({text:"取消退款",type:"cancel"});break;case"return_goods_agreed":n="请退货，上传物流单号",s&&i.push({text:"取消退款",type:"cancel"}),u&&"CANCELED"!==u.orderStatusCode&&"PURCHASE_FAILED"!==u.orderStatusCode&&"PICK_UP_FAILED"!==u.orderStatusCode||i.push({text:"填写物流信息",type:"logisticsrequest"});break;case"return_goods_shipped":n="等待商家确认收货",d&&i.push({text:"查看物流",type:"logistics"}),i.push({text:"修改物流",type:"logisticsedit"});break;case"return_goods_seller_declare_not_received":n="退款处理中，请等待",d&&i.push({text:"查看物流",type:"logistics"}),s&&i.push({text:"取消退款",type:"cancel"});break;case"refund_or_return_deal_agreed":n="退款完成",d&&i.push({text:"查看物流",type:"logistics"});break;case"refund_completed":n="退款完成",a&&d&&i.push({text:"查看物流",type:"logistics"})}var c=e.default.get(t,"fundDetailDTO.cashExpense"),p=e.default.get(t,"fundDetailDTO.cashExpenseShip"),f=e.default.get(t,"fundDetailDTO.couponAmount"),l=e.default.get(t,"fundDetailDTO.modouAmount"),g=e.default.get(t,"fundDetailDTO.hongbaoExpense"),h=e.default.get(t,"fundDetailDTO.hongbaoExpenseShip");return{itemOrderId:e.default.get(t,"refundItemOrderDTO.itemOrderId"),refundId:e.default.get(t,"refundDTO.refundId"),title:e.default.get(t,"refundItemOrderDTO.itemTitle"),skus:e.default.get(t,"refundItemOrderDTO.stockMappingDTO.stockMapping"),src:e.default.get(t,"refundItemOrderDTO.itemImage")+"_100x100.jpg",price:e.default.get(t,"refundItemOrderDTO.nowPrice"),amountList:[{name:"现金",type:"cash",amount:c&&(c/100).toFixed(2),expenseName:"含运费",expenseAmount:p?(p/100).toFixed(2):0},{name:"全场优惠券",type:"coupon",amount:f&&(f/100).toFixed(2)},{name:"蘑豆",type:"modou",amount:l&&(l/100).toFixed(2)},{name:"支付红包",type:"hongbao",amount:g&&(g/100).toFixed(2),expenseName:"含运费",expenseAmount:h?(h/100).toFixed(2):0}],status:n,operations:i,hasShipService:"SUBSCRIBED"===t.refundTagDTO.shipServiceSubscribeTag}}}}}; 
 			}); 
		define("pages/refund/components/textarea/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{state:"close",placeholder:"",cursorSpacing:150,content:"",counter:0,autoFocus:!1,isShow:!1,ok:function(){}}},tempData:{content:"",options:null},methods:{show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tempData.content=e,this.tempData.options=o,this.setData({state:"show",content:e,counter:e.length}),setTimeout(function(){t.setData({isShow:!0,autoFocus:!0})},200)},hide:function(){var t=this;this.tempData.content="",this.tempData.options=null,this.setData({state:"hide",content:"",counter:0,isShow:!1,autoFocus:!1}),setTimeout(function(){t.setData({state:"close"})},500)},changeHandler:function(t){var e=t.detail.value;this.tempData.content=e,this.setData({counter:e.length})},touchMoveHandler:function(){},cancelHandler:function(){this.hide()},okHandler:function(){var t=this.data,e=t.ok;if(t.isShow){var o=this.tempData,n=o.content,a=void 0===n?"":n,s=o.options,i=void 0===s?{}:s;a=a.replace(/(^\s*)|(\s*$)/g,""),"function"==typeof e&&e(a,i),this.hide()}}},onLoad:function(){var t=this;wx.getSystemInfo({success:function(e){var o=150-.416*(672-e.windowHeight);t.setData({cursorSpacing:o})}})}}; 
 			}); 
		define("pages/shop/components/customComponent/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../../common/m")),a=require("../../../../common/base/PageFactory"),o=(e(require("../../../../common/utils/cache")),e(require("../../../../cube-core/componentClass/index")),require("../../../../shopModules/wrapper/index")),r=t.default.MWP;t.default.logger;exports.default={data:function(){return{shopId:"",templateId:"",appId:"",showDecorate:!1}},onLoad:function(e){this.setData({shopId:this.$root.data.params.shopId,templateId:this.$root.data.params.templateId,appId:this.$root.data.params.appId}),this._initWrapper()},onReady:function(){this._requestBodyData()},_initWrapper:function(){var e=new a.MComponent((0,o.WrapperInit)(),this);this.$children=(this.$children||[]).concat(e),this.$root.$wrapper=e},_requestBodyData:function(){var e=this,t={shopId:this.data.shopId,templateId:this.data.templateId,shopType:"xcx",appId:this.data.appId};r.request("mwp.shopappservice.decorateAppIndex","3",t).then(r.filterResult).then(function(t){t.templateName&&e.data.templateName!==t.templateName&&wx.setNavigationBarTitle({title:t.templateName}),e.setData({showDecorate:!0}),e.$wrapper.setPageInfo(e,t)}).catch(function(e){})},methods:{}}; 
 			}); 
		define("pages/shop/components/quickNavigation/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{isNeedTopBtn:!1}},methods:{setScrollTop:function(t){t>=600&&!this.data.isNeedTopBtn?this.setData({isNeedTopBtn:!0}):t<600&&this.data.isNeedTopBtn&&this.setData({isNeedTopBtn:!1})}}}; 
 			}); 
		define("pages/shop/components/searchComponent/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(require("../../../../common/m")),e=t(require("../../../../common/utils/imgUrlTool")),o=t(require("../wallSortBar/index")),l=(a.default.MWP,{page:1,categoryId:"",q:"",appId:""}),i="";exports.default={components:{wallSortBar:o.default},data:function(){return{tabShow:!1}},onLoad:function(t){l.shopId=this.$root.data.params.shopId,l.q=this.$root.data.params.q,l.categoryId=this.$root.data.params.categoryId,l.appId=this.$root.data.params.appId},onReady:function(){},methods:{init:function(t){i=t,this._requestWallData()},_requestWallData:function(){i.setDataSource({source:"shopPagani",api:"mwp.shopappservice.goodsAllXCX",ver:"1"}),i.useRedirect=!0,i.initWall(l);var t=this;i.firstBackNavInit=function(a){a.total>0&&t.setData({tabShow:!0})},i.handOtherItem=function(t,a){var o=this;if(t.onSaleTime&&t.onSaleTime.length>0)t.botRight=t.onSaleTime;else{var l=t.cfav;l>1e4&&(l=(l/1e4).toFixed(1)+"w"),t.botRight=l+" 收藏"}if(t.sale||0===t.sale){var i=t.sale;i>1e4&&(i=(i/1e4).toFixed(1)+"w"),t.saleText=i}if(t.lefttop_taglist&&t.lefttop_taglist.length&&(t.leftTop=t.lefttop_taglist[0].img),t.nameTags=[],t.leftbottom_taglist&&t.leftbottom_taglist.length)for(r=0;r<t.leftbottom_taglist.length;r++){s=t.leftbottom_taglist[r];t.nameTags.push(s)}if(t.props&&t.props.length)for(var r=0;r<t.props.length;r++){var s={bgColor:"#eff3f6",color:"#5a6f85",content:t.props[r]};t.nameTags.push(s)}return t.imgOrg=t.img,t.img=e.default.getGoodsRatioSuffix(t.img,o.itemImgWidth,o.itemImgRatio),t}},updateWallSort:function(t){l.sort=t,i.setWallParam(l),i.resetWallParams(),i.pushData({scrollIntoViewId:"scrollIntoViewId"}),i.isAllowAjax()}}}; 
 			}); 
		define("pages/shop/components/wallSortBar/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={data:function(){return{sortNavs:[{name:"综合",sort:""},{name:"销量",sort:"sell"},{name:"新品",sort:"new"},{name:"价格",sort:"price"}],priceSort:"",activeSort:"",fixTopSortNav:!1}},methods:{_switchWallSortNav:function(t){var e=t.target.dataset.sort||"",a=this.data.priceSort,r="";"price"===e&&(r=""===a||"desc"===a?"asc":"desc"),this.setData({activeSort:e,priceSort:r});var o=e+r;this.$parent.updateWallSort(o)},setWallSortNav:function(t,e){this.setData({activeSort:t,priceSort:e})},setStickTop:function(t,e){t>e?this.setData({fixTopSortNav:!0}):this.setData({fixTopSortNav:!1})}}}; 
 			}); 
		define("pages/tabs/common/params.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={getCurrentPageParams:function(){var t=getCurrentPages()[getCurrentPages().length-1].route;t=this.addLeadingSlash(t);var e=getApp().data.tabbar[t];return e&&e.length>0?this.objectFromQueryString(e):null},setCurrentPageTitleWithParams:function(t){var e=t.title;e&&this.setCurrentPageTitle(e)},setCurrentPageTitle:function(t){wx.setNavigationBarTitle({title:t})},addLeadingSlash:function(t){return"/"!=t.charAt(0)&&(t="/"+t),t},objectFromQueryString:function(t){var e={};return t.split("&").forEach(function(t){e[t.split("=")[0]]=decodeURIComponent(t.split("=")[1])}),e}}; 
 			}); 
		define("pages/tabs/shop/custom/js/page.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../../shop/components/customComponent/index")),a=t(require("../../../common/params"));exports.default={components:{customComponent:e.default},onLoad:function(t){var e=a.default.getCurrentPageParams();e&&(e.appId=getApp().data.appId,this.setData({params:e}),a.default.setCurrentPageTitleWithParams(e))},data:{},onShareAppMessage:function(){var t=getCurrentPages()[getCurrentPages().length-1].route,e=this.data.params.title||this.$customComponent.data.templateName||getApp().data.appName;return{title:e,path:t+"?shopId="+this.data.params.shopId+"&templateId="+this.data.params.templateId+"&title="+e}}}; 
 			}); 
		define("pages/tabs/shop/search/js/page.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../../shop/components/searchComponent/index")),a=e(require("../../../common/params")),r=e(require("../../../../../components/wall/index"));exports.default={components:{wall:r.default,searchComponent:t.default},onLoad:function(e){var t=a.default.getCurrentPageParams();t&&(t.appId=getApp().data.appId,this.setData({params:t}),a.default.setCurrentPageTitleWithParams(t))},data:{},onReady:function(e){this.$searchComponent.init(this.$wall)},onShareAppMessage:function(){var e=getCurrentPages()[getCurrentPages().length-1].route;return{title:this.data.params.title||getApp().data.appName,path:e+"?shopId="+this.data.params.shopId+"&categoryId="+this.data.params.categoryId+"&title="+this.data.params.title}}}; 
 			}); 
		define("shopModules/modules/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.MOD_MAP=void 0;var r=e(require("./vx-shop-wxcoupon/index")),u=e(require("./vx-shop-title/index")),i=e(require("./vx-shop-wxmultipicture/index")),d=e(require("./vx-shop-anchorpicture/index")),t=e(require("./vx-shop-wxheader/index")),x=e(require("./vx-shop-singlepicture/index")),o=e(require("./vx-shop-wxslider/index")),s=e(require("./vx-shop-doublegoods/index")),l=e(require("./vx-shop-wxanchorpicture/index"));exports.MOD_MAP={130103:r.default,3000:u.default,130202:i.default,1019:d.default,130101:t.default,1001:x.default,130203:o.default,1004:s.default,130201:l.default}; 
 			}); 
		define("shopModules/modules/vx-shop-anchorpicture/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(t){t&&t.__esModule}(require("../../../common/m.js"));var t={props:["formData","moduleInfo"],data:function(){var t=wx.isH5?"h5":"xcx",o=!1;"h5"===t&&(o=window.isRender||!1);var i=this.formData.form.models[0].content,a="auto";return i._src&&i._src.w&&(a=i._src.h/i._src.w*7.18),{platform:t,isRender:o,pictureData:{},title:this.formData.moduleTitle.models[0].title||"",subTitle:this.formData.moduleTitle.models[0].subTitle||"",initWidth:this.formData.form.models[0].content._src.w||0,initHeight:this.formData.form.models[0].content._src.h||0,layoutId:"layoutId_"+this.moduleInfo.id,isShowBottomMargin:this.formData.moduleTitle.models[0].isShowBottomMargin||"0",w:7.18,h:a}},mounted:function(){var t=this,o=0,i=0,a=0,e=0;if(t.pictureData=t.formData.form.models[0].content,t.pictureData.src=t.formData.form.models[0].content.src||"",t.pictureData.map&&0!==t.pictureData.map.length)for(var r=0;r<t.pictureData.map.length;r++){var s=t.pictureData.map[r];o=(s.coords[2]-s.coords[0])/t.initWidth*7.18,i=(s.coords[3]-s.coords[1])/t.initWidth*7.18,a=s.coords[0]/t.initWidth*7.18,e=s.coords[1]/t.initWidth*7.18,t.pictureData.map[r].maskWidth=o,t.pictureData.map[r].maskHeight=i,t.pictureData.map[r].maskLeft=a,t.pictureData.map[r].maskTop=e}},components:{}};exports.default={componentOptions:t,renderComponentsFunc:function(t){"xcx"===this.platform&&t("mvw-image",{src:this.pictureData.src,lazyLoad:!0,mode:"widthFix","v-suffix":{mode:"width"},__vx_style:"display:block;width:"+100*this.w+"rpx;height:"+100*this.h+"rpx;"},{},"15144652097380")}}; 
 			}); 
		define("shopModules/modules/vx-shop-doublegoods/components/vxgoodsItem.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(e){e&&e.__esModule}(require("../../../../common/m.js"));var e={name:"vx-goodsItem",data:function(){return{item:this.goodsItem||{}}},props:{goodsItem:{type:Object}},computed:{},mounted:function(){},methods:{},components:{}};exports.default={componentOptions:e,renderComponentsFunc:function(e){e("mvw-image",{lazyload:!0,src:this.item.img||this.item.show.img,mode:"widthFix","v-suffix":{mode:"goods","suffix-width":348,"suffix-ratio":"3:4"},__vx_class:"itemwall-image"},{},"15144652101830")}}; 
 			}); 
		define("shopModules/modules/vx-shop-doublegoods/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=t(require("../../../common/m.js")),e=t(require("./components/vxgoodsItem.js")),i={props:{formData:{type:Object},moduleInfo:{type:Object}},data:function(){var t=this,o=s.default.MWP,e=wx.isH5?"h5":"xcx",i=!1;"h5"===e&&(i=__DEV__&&o.setGlobalEnv(o.Env.PreRealse)),o.request(this.moduleInfo.api,"1",this.moduleInfo.data,{useJSONP:i}).then(o.filterResult).then(function(o){t.goodsList=o.list||[],t.title=o.title||"",t.subTitle=o.subTitle||""});var d=!1;return"h5"===e&&(this.$options.components["sd-goodsItem"]=window.MeiliShoph5ModuleItemwall.default||window.MeiliShoph5ModuleItemwall,d=window.isRender||!1),{goodsList:[],title:this.formData.moduleTitle.models[0].title||"",subTitle:this.formData.moduleTitle.models[0].subTitle||"",isShowBottomMargin:this.formData.moduleTitle.models[0].isShowBottomMargin||"0",layoutId:"layoutId_"+this.moduleInfo.id,platform:e,isRender:d}},computed:{},watch:{},methods:{},components:{"vx-goodsItem":e.default}};exports.default={componentOptions:i,renderComponentsFunc:function(t){if(this.goodsList.length>0){if(this.goodsList){var s=this.goodsList;"object"===o(this.goodsList)&&"[object Array]"==Object.prototype.toString.call(this.goodsList)?s=this.goodsList.concat():"object"===o(this.goodsList)&&"[object Object]"==Object.prototype.toString.call(this.goodsList)&&(s=Object.assign({},this.goodsList));for(var e in s)t("sd-goodsItem",{goodsItem:this.goodsList[e]},{},"15144652099810_"+e)}if(this.goodsList){var i=this.goodsList;"object"===o(this.goodsList)&&"[object Array]"==Object.prototype.toString.call(this.goodsList)?i=this.goodsList.concat():"object"===o(this.goodsList)&&"[object Object]"==Object.prototype.toString.call(this.goodsList)&&(i=Object.assign({},this.goodsList));for(var d in i)t("vx-goodsItem",{goodsItem:this.goodsList[d]},{},"15144652099811_"+d)}}}}; 
 			}); 
		define("shopModules/modules/vx-shop-singlepicture/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(o){o&&o.__esModule}(require("../../../common/m.js"));var o={props:["formData","moduleInfo"],data:function(){var o=wx.isH5?"h5":"xcx",t=this.formData.form.models[0],e="auto";return t._src&&t._src.w&&(e=t._src.h/t._src.w*7.18),{platform:o,titles:this.formData.moduleTitle.models[0],img:this.formData.form.models[0],layoutId:"layoutId_"+this.moduleInfo.id,isShowBottomMargin:this.formData.moduleTitle.models[0].isShowBottomMargin||"0",h:e,w:7.18}},mounted:function(){},components:{}};exports.default={componentOptions:o,renderComponentsFunc:function(o){"xcx"===this.platform&&o("mvw-image",{src:this.img.src,lazyLoad:!0,mode:"widthFix","v-suffix":{mode:"width"},__vx_style:"width:"+100*this.w+"rpx;height:"+100*this.h+"rpx;"},{},"15144652098990")}}; 
 			}); 
		define("shopModules/modules/vx-shop-title/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(t){t&&t.__esModule}(require("../../../common/m.js"));var t={props:{formData:{type:Object}},data:function(){return{title:this.formData.form.models[0].title||"",link:this.formData.form.models[0].link||"",isShowBottomMargin:this.formData.moduleTitle&&this.formData.moduleTitle.models[0].isShowBottomMargin?this.formData.moduleTitle.models[0].isShowBottomMargin:"0"}}};exports.default={componentOptions:t,renderComponentsFunc:function(t){}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxanchorpicture/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(t){t&&t.__esModule}(require("../../../common/m.js"));var t={props:["formData","moduleInfo"],data:function(){var t=wx.isH5?"h5":"xcx",o=!1;return"h5"===t&&(o=window.isRender||!1),{platform:t,isRender:o,pictureData:{},title:this.formData.moduleTitle.models[0].title||"",subTitle:this.formData.moduleTitle.models[0].subTitle||"",initWidth:this.formData.form.models[0].content._src.w||0,initHeight:this.formData.form.models[0].content._src.h||0,layoutId:"layoutId_"+this.moduleInfo.id,isShowBottomMargin:this.formData.moduleTitle.models[0].isShowBottomMargin||"0"}},computed:{},mounted:function(){var t=this,o=0,a=0,e=0,i=0;if(t.pictureData=t.formData.form.models[0].content,t.pictureData.src=t.formData.form.models[0].content.src||"",t.pictureData.map&&0!==t.pictureData.map.length)for(var r=0;r<t.pictureData.map.length;r++){var s=t.pictureData.map[r];o=(s.coords[2]-s.coords[0])/t.initWidth*7.5,a=(s.coords[3]-s.coords[1])/t.initWidth*7.5,e=s.coords[0]/t.initWidth*7.5,i=s.coords[1]/t.initWidth*7.5,t.pictureData.map[r].maskWidth=o,t.pictureData.map[r].maskHeight=a,t.pictureData.map[r].maskLeft=e,t.pictureData.map[r].maskTop=i}},methods:{},components:{}};exports.default={componentOptions:t,renderComponentsFunc:function(t){"xcx"===this.platform&&t("mvw-image",{lazyLoad:!0,src:this.pictureData.src,mode:"widthFix",__vx_class:"wxanchorpicture-image",__vx_style:"width:100%;height:auto;"},{},"15144652100240")}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxcoupon/components/amount-sale.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(e){e&&e.__esModule}(require("../../../../common/m.js"));var e={name:"AmountSale",data:function(){return{packageSale:this.amountSaleList||[]}},props:{amountSaleList:{type:Array},anyReduceState:{type:Boolean},couponImage:{type:String},hasCoupon:{type:Boolean}},computed:{},mounted:function(){},methods:{},components:{}};exports.default={componentOptions:e,renderComponentsFunc:function(e){}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxcoupon/components/coupons.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=function(o){return o&&o.__esModule?o:{default:o}}(require("../../../../common/m.js")).default.MWP,e={name:"Coupons",data:function(){return{disabledImage:"https://s10.mogucdn.com/mlcdn/c45406/171218_5l3hj8ea4h02ak880gkfcc69k0e9h_200x125.png",couponRmb:"https://s10.mogucdn.com/mlcdn/c45406/171215_2156g45l46fb07lliggf6ak0b4h9b_26x26.png",alreadGetRmb:"https://s10.mogucdn.com/mlcdn/c45406/171218_5l3hj8ea4h02ak880gkfcc69k0e9h_200x125.png"}},props:{couponList:{type:Array},CouponType:{type:Number},couponImage:{type:String}},computed:{},mounted:function(){},methods:{getCoupon:function(e){var t=this,n=e.currentTarget.dataset.index,u=e.currentTarget.dataset.isgot,c=e.currentTarget.dataset.campid;wx.isH5,"1"!==u&&o.request("mwp.ford.getShopCoupon","1",{campId:c},{useJSONP:""}).then(o.filterResult).then(function(){if("0"===u&&(t.couponList[n].isGot="1"),!wx.isH5){var o=e.detail.formId;t.$root.$logForm(o,2),t.$root.$logE("016000502",{CouponID:c,CouponType:t.CouponType,IsSuccess:1})}}).catch(function(o){wx.showToast(o.message),wx.isH5||t.$root.$logE("016000502",{CouponID:c,CouponType:t.CouponType,IsSuccess:0})})}},components:{}};exports.default={componentOptions:e,renderComponentsFunc:function(o){}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxcoupon/components/promotion.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(o){o&&o.__esModule}(require("../../../../common/m.js"));var o={name:"Promotion",data:function(){return{isShow:!1}},props:{iconTextList:{type:Array},promotionText:{type:String},promotionInfo:{type:String},couponImage:{type:String},hasCoupon:{type:Boolean},hasAmountSale:{type:Boolean}},computed:{modalShow:function(){return this.isShow}},mounted:function(){},methods:{checkDetail:function(){this.isShow=!0},hideModal:function(){this.isShow=!1}},components:{}};exports.default={componentOptions:o,renderComponentsFunc:function(o){}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxcoupon/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function o(o){return o&&o.__esModule?o:{default:o}}Object.defineProperty(exports,"__esModule",{value:!0});var t=o(require("../../../common/m.js")),n=o(require("./components/coupons.js")),e=o(require("./components/amount-sale.js")),s=o(require("./components/promotion.js")),i=t.default.MWP,u={created:function(){var o=this;this.platform=wx.isH5?"h5":"xcx","h5"===this.platform&&(this.isRender=window.isRender||!1),i.request(this.moduleInfo.api,"1",this.moduleInfo.data,{useJSONP:""}).then(i.filterResult).then(function(t){o.amountSaleList=t.amountSale||[],o.couponList=t.coupons||[],o.iconTextList=t.iconTextList||[],o.promotionText=t.promotionText||"",o.promotionInfo=t.promotionInfo||"",o.CouponType=t.couponType||"4";var n=[];o.couponList.map(function(o){n.push(o.campId)}),wx.isH5||o.$root.$logE("016000560",{CouponIDs:n,CouponType:o.CouponType})})},data:function(){var o="";return o=this.moduleInfo.data.shopType&&"xcx"===this.moduleInfo.data.shopType?"https://s10.mogucdn.com/mlcdn/c45406/171218_8f54acd88g7glf67kj3l8b4h07g2h_200x125.png":"https://s10.mogucdn.com/mlcdn/c45406/171218_39a187a6kklhia10g79990gi5jgee_200x125.png",{platform:"",amountSaleList:[],couponList:[],iconTextList:[],promotionText:"促销",promotionInfo:"",CouponType:"4",isRender:!0,isShowMask:this.formData.form.models[0].isShow||"0",couponImage:o}},props:{formData:{type:Object},moduleInfo:{type:Object}},computed:{hasCoupon:function(){return this.couponList.length>0},hasAmountSale:function(){return this.amountSaleList.length>0},anyReduceState:function(){return this.iconTextList.length>0}},mounted:function(){},methods:{},components:{Coupons:n.default,AmountSale:e.default,Promotion:s.default}};exports.default={componentOptions:u,renderComponentsFunc:function(o){this.isRender&&0===this.couponList.length&&0===this.iconTextList.length&&0===this.amountSaleList.length||(this.hasCoupon||this.anyReduceState||this.hasAmountSale)&&(this.hasCoupon&&o("Coupons",{couponList:this.couponList,CouponType:this.CouponType,couponImage:this.couponImage},{},"15144652094010"),this.hasAmountSale&&o("AmountSale",{amountSaleList:this.amountSaleList,anyReduceState:this.anyReduceState,couponImage:this.couponImage,hasCoupon:this.hasCoupon},{},"15144652094041"),this.anyReduceState&&o("Promotion",{iconTextList:this.iconTextList,promotionText:this.promotionText,promotionInfo:this.promotionInfo,couponImage:this.couponImage,hasCoupon:this.hasCoupon,hasAmountSale:this.hasAmountSale},{},"15144652094042"))}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxheader/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=function(o){return o&&o.__esModule?o:{default:o}}(require("../../../common/m.js")).default.MWP,e={created:function(){var e=this;o.request(this.moduleInfo.api,"1",this.moduleInfo.data,{useJSONP:this.dev}).then(o.filterResult).then(function(o){e.shopName=o.name||"",e.logo=o.logo||"https://s10.mogucdn.com/pic/141211/1agxqe_ieygmodbmiztmzrqmuytambqmmyde_120x120.jpg",e.shopInfoLink=o.shopInfoLink||"",e.saleCnt=o.saleCnt||0,e.collectedCnt=o.collectedCnt||0,e.wxWallet=o.wxWallet||{},e.level=o.level||0,o.isFans&&"1"===o.isFans&&(e.isCollected=!0),e.collectState="1"===o.isFans?"已收藏":"收藏",o.tagLogo&&o.tagLogo.img&&""!==o.tagLogo.img&&(e.tagBrand=o.tagLogo.img||"")})},data:function(){var e=!1,t=wx.isH5?"h5":"xcx",s="";return"h5"===t&&(s=__DEV__&&o.setGlobalEnv(o.Env.Develop),e=window.isRender||!1),{platform:t,isRender:e,shopType:this.moduleInfo.data.shopType,shopId:this.moduleInfo.data.shopId,isCollected:!1,collectState:"收藏",wxWallet:{},bgImg:this.formData.form.models[0].shopSign||"",logo:"",shopName:"",shopInfoLink:"",tagBrand:"",saleCnt:0,collectedCnt:0,level:0,dev:s,isShow:this.formData.form.models[0].isShow||"0",searchLink:wx.isH5?"javascript:;":"/pages/shop/hotSearch/index?shopId="+this.moduleInfo.data.shopId}},props:{formData:{type:Object},moduleInfo:{type:Object}},computed:{},mounted:function(){},methods:{collectShop:function(e){var t=this,s=this.isCollected;o.request("mwp.shopfavorite.collectShop","1",{shopId:this.shopId}).then(o.filterResult).then(function(){if(t.isCollected=!s,t.collectState=s?"收藏":"已收藏",!wx.isH5){var o=e.detail.formId;t.$root.$logForm(o,2),t.$root.$logE("016000604",{flag:s?0:1})}}).catch(function(o){wx.showToast(o.message)})}},components:{}};exports.default={componentOptions:e,renderComponentsFunc:function(o){}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxmultipicture/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});!function(t){t&&t.__esModule}(require("../../../common/m.js"));var t={props:["formData","moduleInfo"],data:function(){var t=wx.isH5?"h5":"xcx",o=!1;return"h5"===t&&(o=window.isRender||!1),{platform:t,isRender:o,pictureData:{},title:this.formData.moduleTitle.models[0].title||"",subTitle:this.formData.moduleTitle.models[0].subTitle||"",initWidth:this.formData.form.models[0].content._src.w||0,initHeight:this.formData.form.models[0].content._src.h||0,isShowBottomMargin:this.formData.moduleTitle.models[0].isShowBottomMargin||"0",imgWidth:this.formData.form.models[0].content._src.w/100||0,imgHeight:this.formData.form.models[0].content._src.h/100||0,layoutId:"layoutId_"+this.moduleInfo.id}},computed:{},mounted:function(){var t=this,o=0,e=0,a=0,i=0;if(t.pictureData=t.formData.form.models[0].content,t.pictureData.src=t.formData.form.models[0].content.src||"",t.pictureData.map&&0!==t.pictureData.map.length)for(var r=0;r<t.pictureData.map.length;r++){var m=t.pictureData.map[r];o=(m.coords[2]-m.coords[0])/100,e=(m.coords[3]-m.coords[1])/100,a=m.coords[0]/100,i=m.coords[1]/100,t.pictureData.map[r].maskWidth=o,t.pictureData.map[r].maskHeight=e,t.pictureData.map[r].maskLeft=a,t.pictureData.map[r].maskTop=i}},methods:{},components:{}};exports.default={componentOptions:t,renderComponentsFunc:function(t){"xcx"===this.platform&&t("mvw-image",{lazyLoad:!0,src:this.pictureData.src,mode:"aspectFill","v-suffix":{mode:"width"},__vx_class:"wxmutilpicture-image",__vx_style:"width:"+100*this.imgWidth+"rpx;height:"+100*this.imgHeight+"rpx;"},{},"15144652096650")}}; 
 			}); 
		define("shopModules/modules/vx-shop-wxslider/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=(function(t){t&&t.__esModule}(require("../../../common/m.js")),{components:{},props:["formData","moduleInfo"],data:function(){var t=wx.isH5?"h5":"xcx",o=this.formData.form.models[0],r="auto";return o._src&&o._src.w&&(r=o._src.h/o._src.w*7.5),{indicatorColor:"#ffffff",indicatorActiveColor:"#FF5777",interval:3e3,duration:600,circular:!0,vertical:!0,platform:t,scorllList:this.formData.form.models,w:7.5,h:r,layoutId:"layoutId_"+this.moduleInfo.id,isShowBottomMargin:this.formData.moduleTitle&&this.formData.moduleTitle.models[0].isShowBottomMargin?this.formData.moduleTitle.models[0].isShowBottomMargin:"0"}},mounted:function(){},methods:{currentIndexChange:function(){}}});exports.default={componentOptions:o,renderComponentsFunc:function(o){if(this.scorllList){var r=this.scorllList;"object"===t(this.scorllList)&&"[object Array]"==Object.prototype.toString.call(this.scorllList)?r=this.scorllList.concat():"object"===t(this.scorllList)&&"[object Object]"==Object.prototype.toString.call(this.scorllList)&&(r=Object.assign({},this.scorllList));for(var i in r){var s=this.scorllList[i];"xcx"===this.platform&&o("mvw-image",{src:s.src,lazyLoad:!0,mode:"scaleToFill","v-suffix":{mode:"width"},__vx_style:"width:"+100*this.w+"rpx;height:"+100*this.h+"rpx;"},{},"15144652099230_"+i)}}}}; 
 			}); 
		define("shopModules/wrapper/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.WrapperInit=function(){return{name:"wrapper",components:{toast:t.default},moduleInst:{},__hasLogged:{},data:function(){return{modules:[]}},methods:{setPageInfo:function(e,t){var a=this;this.pageVm=e;var n=[];t.indexLayoutList.forEach(function(t){var u=o.MOD_MAP[""+t.moduleId];if(u){var r=new d.default(e,t,u,e.$wrapper,null,{});n.push({vxName:r.label,moduleId:t.moduleId,isShow:!0,modHeight:0,modWidth:0}),a.moduleInst["m"+t.moduleId]=r,a.__hasLogged["m"+t.moduleId]={}}}),this.setData({modules:n})}}}},exports.WrapperHeaderInit=function(){return{name:"wrapperHeader",components:{toast:t.default},moduleInst:{},data:function(){return{modules:[]}},methods:{setPageInfo:function(e,t){this.pageVm=e;var a=[];t.indexLayoutList.forEach(function(t){var n=o.MOD_MAP[""+t.moduleId];if(n){var u=new d.default(e,t,n,e.$wrapperHeader,null,{});a.push({vxName:u.label,moduleId:t.moduleId,isShow:!0,modHeight:0,modWidth:0})}}),this.setData({modules:a})}}}};var t=e(require("../../components/toast/index")),o=require("../modules/index"),d=e(require("../../cube-core/componentClass/index")); 
 			}); 
		define("app.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}require("./common/setup");var t=e(require("./common/service/user")),a=require("./mixins/logger/index"),n=e(require("./common/utils/cache")),r=require("./mixins/navigation");App({onLaunch:function(e){console.log("App Launch"),t.default.init({appName:n.default.get("appName"),color:n.default.get("primaryColor")}).catch(function(e){t.default.showUserError(e)}),e&&e.scene&&(this.scene=e.scene,(0,a.setScene)(e.scene)),e&&e.shareTicket&&n.default.put("shareTicket",e.shareTicket,{keep:!0})},onShow:function(e){if(console.log("App Show"),(0,a.stopLogger)(!1),e){var t=e.query;if("string"==typeof t)try{t=JSON.parse(t.replace(/([^,\s{=]+)=([^,\s}]+)/g,'"$1":"$2"'))}catch(e){t={}}e.scene&&(this.scene=e.scene,(0,a.setScene)(e.scene)),(0,a.setFromId)(t),(0,r.initPersistentParams)(t)}},onHide:function(){(0,a.stopLogger)(!0),console.log("App Hide")},onError:function(e){(0,a.reportMsg)(e)},data:{shopId:n.default.get("shopId"),sellerUserId:n.default.get("sellerUserId"),marketType:n.default.get("marketType"),appId:n.default.get("appId"),sceneType:n.default.get("sceneType"),shopIdNum:n.default.get("shopIdNum"),appName:n.default.get("appName"),tabbar:n.default.get("TABS"),channel:n.default.get("channel"),eventId:n.default.get("eventId"),appKey:n.default.get("appKey")}}); 
 			}); 	require("app.js");
 		__wxRoute = 'pages/shop/home/index';__wxRouteBegin = true; 	define("pages/shop/home/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../../common/base/createPage")),a=require("../../../common/base/PageFactory"),o=e(require("../../../common/utils/imgUrlTool")),i=e(require("../../../common/m")),s=(e(require("../../../common/service/url")),e(require("../../../common/utils/cache")),e(require("../../../cube-core/componentClass/index")),require("../../../shopModules/wrapper/index")),r=e(require("../components/wallSortBar/index")),p=e(require("../../../components/wall/index")),n=i.default.MWP,l=(i.default.logger,getApp().data.appId);(0,t.default)({components:{wallSortBar:r.default,wall:p.default},data:{shopId:getApp().data.shopId||"",preview:"",showAllGoods:!1},onLoad:function(e){var t=this;wx.setNavigationBarTitle({title:getApp().data.appName}),this.optionsReady=this.$getOptions().then(function(e){t.setData({preview:e.preview||""})}),this._initWrapperHeader(),this._initWrapper()},onReady:function(){var e=this;this.optionsReady.then(function(){e._requestHeadData(),e._requestBodyData(),e._requestAllGoodsData()})},onShareAppMessage:function(){return{title:getApp().data.appName,path:"/pages/shop/home/index?shopId="+this.data.shopId}},_initWrapperHeader:function(){var e=new a.MComponent((0,s.WrapperHeaderInit)(),this);this.$children=(this.$children||[]).concat(e),this.$root.$wrapperHeader=e},_initWrapper:function(){var e=new a.MComponent((0,s.WrapperInit)(),this);this.$children=(this.$children||[]).concat(e),this.$root.$wrapper=e},_requestHeadData:function(e){var t=this,a={shopId:this.data.shopId,preview:this.data.preview,appId:l,tabId:"index",shopType:"xcx"};n.request("mwp.shopappservice.decorateAppHead","2",a).then(n.filterResult).then(function(e){var a={indexLayoutList:[e.headLayout]};t.$wrapperHeader.setPageInfo(t,a)})},_requestBodyData:function(){var e=this,t={shopId:this.data.shopId,preview:this.data.preview,appId:l,tabId:"index",shopType:"xcx"};n.request("mwp.shopappservice.decorateAppIndex","3",t).then(n.filterResult).then(function(t){e.$wrapper.setPageInfo(e,t)})},_requestAllGoodsData:function(){this.$wall.setDataSource({source:"shopPagani",api:"mwp.shopappservice.goodsAllXCX",ver:"1"}),this.$wall.useRedirect=!0,this.$wall.initWall({page:1,shopId:this.data.shopId,APPID:l,shopType:"xcx"});var e=this;this.$wall.firstBackNavInit=function(t){t.total>0&&e.setData({showAllGoods:!0})},this.$wall.handOtherItem=function(e,t){var a=this;if(e.onSaleTime&&e.onSaleTime.length>0)e.botRight=e.onSaleTime;else{var i=e.cfav;i>1e4&&(i=(i/1e4).toFixed(1)+"w"),e.botRight=i+" 收藏"}if(e.sale||0===e.sale){var s=e.sale;s>1e4&&(s=(s/1e4).toFixed(1)+"w"),e.saleText=s}if(e.lefttop_taglist&&e.lefttop_taglist.length&&(e.leftTop=e.lefttop_taglist[0].img),e.nameTags=[],e.leftbottom_taglist&&e.leftbottom_taglist.length)for(r=0;r<e.leftbottom_taglist.length;r++){p=e.leftbottom_taglist[r];e.nameTags.push(p)}if(e.props&&e.props.length)for(var r=0;r<e.props.length;r++){var p={bgColor:"#eff3f6",color:"#5a6f85",content:e.props[r]};e.nameTags.push(p)}return e.imgOrg=e.img,e.img=o.default.getGoodsRatioSuffix(e.img,a.itemImgWidth,a.itemImgRatio),e}},methods:{updateWallSort:function(e){this.$wall.setWallParam({page:1,shopId:this.data.shopId,APPID:l,shopType:"xcx",sort:e}),this.$wall.resetWallParams(),this.$wall.isAllowAjax()}}}); 
 			}); 	require("pages/shop/home/index.js");
 		__wxRoute = 'pages/404/index';__wxRouteBegin = true; 	define("pages/404/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../common/base/createPage")),a=e(require("../../components/empty/index")),n=e(require("../../common/service/url"));(0,t.default)({components:{empty:a.default},data:{$empty:{button:"去看更多好货"}},onLoad:function(){var e=this;this.$empty.setData({callback:function(){e.$navigate(n.default.home())}})}}); 
 			}); 	require("pages/404/index.js");
 		__wxRoute = 'pages/buy/index';__wxRouteBegin = true; 	define("pages/buy/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../common/base/createPage")),a=e(require("../../components/fastBuy/index"));(0,t.default)({components:{fastBuy:a.default},data:{},onLoad:function(){this.$fastBuy.init({type:"normal",noMask:!0})}}); 
 			}); 	require("pages/buy/index.js");
 		__wxRoute = 'pages/cart/index';__wxRouteBegin = true; 	define("pages/cart/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../common/base/createPage")),a=e(require("../../components/cartComponent/index")),n=e(require("../../components/wall/index")),o=e(require("../../common/utils/cache"));(0,t.default)({components:{cartComponent:a.default,wall:n.default},data:{},onShow:function(){var e=this;this.$on("hide",function(){e.$wall.setData({isShow:!1})}),this.$cartComponent.setData({isShow:!0}),this.$cartComponent.init({type:"normal",firstCart:!0,noMask:!0,callback:function(t){t=t,e.$wall.initWall({cKey:"xcx-car",pid:53221,iidsE:t})}})},onUnload:function(){o.default.remove("cart.listSkuMap"),o.default.remove("cart.skuMap"),o.default.remove("tick.recommend")}}); 
 			}); 	require("pages/cart/index.js");
 		__wxRoute = 'pages/coupon/index';__wxRouteBegin = true; 	define("pages/coupon/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function a(t){if(Array.isArray(t)){for(var a=0,e=Array(t.length);a<t.length;a++)e[a]=t[a];return e}return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../common/m")),i=t(require("../../common/base/createPage")),s=t(require("./components/list/index")),o=t(require("./components/banner/index")),n=t(require("../../components/loading/index")),d=t(require("../../components/toast/index")),r=t(require("../../components/empty/index")),h=t(require("../../components/end/index")),p=require("./common/constants"),u=e.default.MWP,c=e.default.fn,l=(c.pick,c.merge),g={isLoading:!1,isLoadEnd:!1},m={page:1};exports.default=(0,i.default)({components:{loading:n.default,toast:d.default,emptyShop:r.default,emptyCash:r.default,moreLoading:h.default,moreEnd:h.default,couponList:s.default,couponBanner:o.default},postData:{},extraOptions:{},data:{$couponList:{tabType:p.TAB_TYPE_SHOP,list:[]},$emptyShop:{type:1,text:"你还没有可用的优惠券哦"},$emptyCash:{type:1,text:"你没有可用的优惠券哦~"},$moreLoading:{isEnd:!1},$moreEnd:{isEnd:!0},enums:{TAB_TYPE_SHOP:p.TAB_TYPE_SHOP,TAB_TYPE_CASH:p.TAB_TYPE_CASH},isMoreEnd:!1,isMoreLoading:!1,isEmptyShop:!1,isEmptyCash:!1},methods:{handleTab:function(t){var a=this.data.$couponList,e=t.currentTarget.dataset.tabType;e!==a.tabType&&(this.resetData(e,!0),this.loadData(!0,!1))},showMoreLoading:function(){!this.data.isMoreLoading&&this.setData({isMoreLoading:!0})},hideMoreLoading:function(){this.data.isMoreLoading&&this.setData({isMoreLoading:!1})},showEmptyData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.data,e=a.$couponList,i=a.isEmptyShop,s=a.isEmptyCash;switch(e.tabType){case p.TAB_TYPE_SHOP:i!==t&&this.setData({isEmptyShop:t});break;case p.TAB_TYPE_CASH:s!==t&&this.setData({isEmptyCash:t})}},resetData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=this.data.$couponList,i={isMoreEnd:!1},s={tabType:t||e.tabType};a&&(i.isEmptyShop=!1,i.isEmptyCash=!1,s.list=[]),this.setData(i),this.$couponList.setData(s),this.postData.page=1,this.extraOptions.isLoadEnd=!1},loadData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.extraOptions.isLoading=!0,t&&this.$loading.show();var e=this.data.$couponList,i=this.postData.page,s=e.tabType,o={couponType:s,page:i,status:"0",marketType:getApp().data.marketType};return s===p.TAB_TYPE_SHOP?(o.shopId=getApp().data.shopId,u.getDSL().addParameter("mwp.ford.getMyCouponList","3",o).request("dsl.mycoupon.getShopCouponList","2",o).then(this.loadSuccess.bind(this,a,p.TAB_TYPE_SHOP)).catch(this.loadFail.bind(this))):s===p.TAB_TYPE_CASH?u.getDSL().addParameter("mwp.ford.getMyCouponList","2",o).request("dsl.mycoupon.getCashCouponList","1",o).then(this.loadSuccess.bind(this,a,p.TAB_TYPE_CASH)).catch(this.loadFail.bind(this)):void 0},loadSuccess:function(t,e,i){var s=this.data.$couponList;if(e===s.tabType){this.extraOptions.isLoading=!1,this.$loading.hide();var o=(i.data||{}).flushKey||i,n=o.data,d=void 0===n?{}:n,r=o.ret,h=o.msg,p=d.list,c=void 0===p?[]:p,l=d.isEnd,g=void 0!==l&&l;if(r===u.Code.Success){var m=[].concat(a(s.list),a(c));if(c.length){c=t?m:c;var f=this.setFirstInvalidAncCheckEmpty(c);this.showEmptyData(f),this.$couponList.$emit("refresh",c)}g&&(this.extraOptions.isLoadEnd=!0,m.length?this.setData({isMoreEnd:!0}):this.showEmptyData(!0))}else"FAIL_SYS_TESLA_INVOKE_TIMEOUT"===r?this.loadFail({message:"服务器开小差了，请稍候再试"}):this.loadFail({message:h})}},loadFail:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:response).message;this.extraOptions.isLoading=!1,this.$loading.hide(),this.$toast.show(t||"获取优惠券列表失败",1500)},setFirstInvalidAncCheckEmpty:function(t){var a=!1,e=!0;return t.forEach(function(t){t._isFirstInvalid=!1,0===t.status||-1===t.status?e=!1:a||(t._isFirstInvalid=!0,a=!0)}),e}},onLoad:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type;t!==p.TAB_TYPE_SHOP&&t!==p.TAB_TYPE_CASH||this.$couponList.setData({tabType:t})},onShow:function(){this.postData=l({},m),this.extraOptions=l({},g),this.loadData(!0,!1)},onPullDownRefresh:function(){this.extraOptions.isLoading?wx.stopPullDownRefresh():(this.resetData(),this.loadData(!0,!1).then(function(){wx.stopPullDownRefresh()}).catch(function(){wx.stopPullDownRefresh()}))},onReachBottom:function(){var t=this,a=this.extraOptions,e=a.isLoading,i=a.isLoadEnd;e||i||(this.postData.page+=1,this.showMoreLoading(),this.loadData(!1,!0).then(function(){t.hideMoreLoading()}).catch(function(){t.hideMoreLoading()}))}}); 
 			}); 	require("pages/coupon/index.js");
 		__wxRoute = 'pages/debug/index';__wxRouteBegin = true; 	define("pages/debug/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){var t=C.findIndex(function(t){return t.value===e});return t<0?C.length-1:t}function a(e){return D.findIndex(function(t){return t.value===e})}function o(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),a=n%10,o=Math.floor(t/10),i=""+(o+a+7)%10;return o=t%10,i+=(o+a+7)%10,o=Math.floor(n/10),i+=(o+a+7)%10,o=n%10,i+=(o+a+7)%10}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(require("../../common/base/createPage")),r=require("../../common/m"),s=e(r),u=e(require("../../common/utils/cache")),c=require("../../common/utils/debug"),l=e(c),d=e(require("../../components/toast/index")),f=require("../../mixins/debug"),g=s.default.MWP,h=s.default.MCE,m=s.default.fn,v=m.merge,p=m.clone,w=l.default.Level,C=[{text:"线下",value:g.Env.Develop},{text:"预发",value:g.Env.PreRelease},{text:"线上",value:g.Env.Release}],D=[{text:"Debug",value:w.debug},{text:"Log",value:w.log},{text:"Warn",value:w.warn},{text:"Error",value:w.error},{text:"Silent",value:w.silent}],x=["mgj.did"],y=u.default.get("primaryColor")||"#ff5777";exports.default=(0,i.default)({components:{toast:d.default},data:{color:y,showScan:!1,locked:!0,version:s.default.v,did:r.System.getSync("deviceId"),config:p(c.DEFAULT_CONFIG),cache:{mceDate:"0000-00-00",mceTime:"00:00"},mwp:{range:C,index:n(g.getGlobalEnv())},log:{range:D,index:a(w.silent)}},onLoad:function(e){if(this.reachRetryCount())return wx.navigateBack({});this.setData({showScan:!0}),e.code===o()?this.unlock():this.onScan(),this.data.config.shopId||this.setDataAndWrite({"config.shopId":getApp().data.shopId}),this.data.config.sellerUserId||this.setDataAndWrite({"config.sellerUserId":getApp().data.sellerUserId}),this.data.config.shopIdNum||this.setDataAndWrite({"config.shopIdNum":getApp().data.shopIdNum})},setConfig:function(){var e=l.default.read();this.setData({config:v(this.data.config,e),cache:{mceDate:u.default.get("mceDate")||Date.format(new Date,"yyyy-MM-dd"),mceTime:u.default.get("mceTime")||Date.format(new Date,"hh:mm")},"mwp.index":n(e.env),"log.index":a(e.level)})},getConfig:function(){return this.data.config},write:function(){l.default.write(this.getConfig())},setDataAndWrite:function(e){var t=this;this.setData(e,function(){return t.write()})},reachRetryCount:function(){var e=u.default.get("debugRetryTime",{persistent:!0})||0;return Date.now()-e<=18e5?(u.default.get("debugRetryCount",{persistent:!0})||0)>=5:(u.default.put("debugRetryCount",0,{persistent:!0}),!1)},unlock:function(){u.default.put("debugRetryTime",0,{persistent:!0}),u.default.put("debugRetryCount",0,{persistent:!0}),this.setConfig(),this.setData({locked:!1})},lock:function(){var e=u.default.get("debugRetryCount",{persistent:!0})||0;if(u.default.put("debugRetryTime",Date.now(),{persistent:!0}),u.default.put("debugRetryCount",e+1,{persistent:!0}),this.reachRetryCount())return wx.navigateBack({});wx.vibrateLong({})},clearStorage:function(){var e={};x.forEach(function(t){e[t]=wx.getStorageSync(t)}),wx.clearStorageSync(),x.forEach(function(t){e[t]=wx.setStorageSync(t,e[t])})},onScan:function(){var e=this;wx.scanCode({success:function(t){if("QR_CODE"===t.scanType&&t.result==="mgj://debug?code="+o())return e.unlock();e.lock()},fail:function(t){"scanCode:fail cancel"!==t.errMsg&&e.lock()}})},onViewDeviceID:function(){wx.showModal({title:"设备 ID",content:r.System.getSync("deviceId"),showCancel:!1,confirmColor:y})},onMWPEnvChange:function(e){var t=this,n=e.detail.value,a=C[n].value;this.setData({"config.env":a,"mwp.index":n},function(){g.setGlobalEnv(!0,a),t.setMceRealTime(a!==g.Env.Release),t.write()})},setMceRealTime:function(e){(0,f.switchMCERealTime)(e),this.setDataAndWrite({"config.forceMceRealTime":e})},onMceRealTimeChange:function(e){var t=e.detail.value;this.setMceRealTime(t)},setMCEDateAndTime:function(){var e=this.data.cache,t=e.mceDate,n=e.mceTime,a=new Date;if(t){var o=t.split("-").map(Number);a.setFullYear(o[0]),a.setMonth(o[1]-1),a.setDate(o[2])}if(n){var i=n.split(":").map(Number);a.setHours(i[0]),a.setMinutes(i[1])}var r=Math.floor(a.getTime()/1e3);h.$request||(h.$request=h.request),h.request=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[1];return a||(a=t[1]={}),a.time=r,h.$request.apply(h,t)},wx.showModal({title:"麦田时光机",content:"已设定为 "+a.toFormattedString("yyyy-MM-dd hh:mm"),confirmColor:y,showCancel:!1})},onMCEDateTimeChange:function(e){var n=e.detail.value,a=e.target.dataset.key;u.default.put(a,n,{keep:!0}),this.setData(t({},"cache."+a,n)),this.setMCEDateAndTime()},onLogLevelChange:function(e){var t=parseInt(e.detail.value,10),n=D[t].value;this.setDataAndWrite({"config.level":n,"log.index":t})},onCheckboxChange:function(e){this.setDataAndWrite(t({},e.target.dataset.name,e.detail.value))},onScanQRCode:function(){var e=this;l.default.scanning=!0,wx.scanCode({success:function(t){if(t.path){var n=t.path.replace(/^(?:\w+:\/\/|\/)?(.+)$/,"/$1");if(n.startsWith("/pages"))return wx.showModal({title:"扫码结果",content:'小程序地址："'+n+'"，是否需要跳转？',confirmColor:y,success:function(t){t.confirm&&e.$navigate(n,{},!0)}})}e.$toast.show("识别失败，请扫描正确的"+u.default.get("appName")+"小程序码")},complete:function(){setTimeout(function(){l.default.scanning=!1},0)}})},onSwitchVConsole:function(e){var t=this;if(wx.canIUse&&wx.canIUse("setEnableDebug")){var n=this.data.config.enableVConsole;wx.setEnableDebug({enableDebug:!n,success:function(){t.onCheckboxChange(e)},fail:function(e){l.default.error(e.errMsg),t.setData({"config.enableVConsole":n})}})}},onOpenSetting:function(){wx.openSetting({success:function(e){console.info(e)}})},onShowSystemInfo:function(){wx.showModal({title:"系统信息",content:JSON.stringify(wx.getSystemInfoSync()),showCancel:!1,confirmColor:y})},onClearStorage:function(){var e=this;wx.showModal({title:"清除数据缓存",content:"你确定要清除数据缓存吗？",confirmColor:y,success:function(t){t.confirm&&(e.clearStorage(),e.$toast.show("清除成功"),e.write())}})},onSetShopId:function(e){this.setDataAndWrite({"config.shopId":e.detail.value}),getApp().data.shopId=e.detail.value},onSetSellerUserId:function(e){this.setDataAndWrite({"config.sellerUserId":e.detail.value}),getApp().data.sellerUserId=e.detail.value},onSetShopIdNum:function(e){this.setDataAndWrite({"config.shopIdNum":e.detail.value}),getApp().data.shopIdNum=e.detail.value},onClipboardNavigateTap:function(){wx.getClipboardData({success:function(e){var t=e.data;t=t.replace(/<code>/,""),wx.navigateTo({url:t})}})}}); 
 			}); 	require("pages/debug/index.js");
 		__wxRoute = 'pages/detail/pages/normal/index';__wxRouteBegin = true; 	define("pages/detail/pages/normal/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../../common/m")),i=require("../../../../common/utils/cpcutil"),n=t(require("../../../../common/service/url")),o=(t(require("../../../../common/utils/imgUrlTool")),t(require("../../../../common/utils/footprint"))),a=t(require("../../../../common/base/createPage")),s=t(require("../../../../components/loading/index")),r=t(require("../../../../components/toast/index")),d=t(require("../../../../components/quickNavigation/index")),u=t(require("../../../../components/mask/index")),h=t(require("../../../../components/error/index")),m=t(require("../../../../components/redPacket/index")),c=t(require("../../components/head/index")),l=t(require("../../components/swiper/index")),p=t(require("../../components/topbanner/index")),f=t(require("../../components/title/index")),g=t(require("../../components/price/index")),I=t(require("../../components/express/index")),$=t(require("../../components/primarybanner/index")),S=t(require("../../components/service/index")),v=t(require("../../components/presaleinfo/index")),q=t(require("../../components/promotion/index")),x=t(require("../../components/moresku/index")),k=t(require("../../components/pintuan/index")),P=t(require("../../components/rate/index")),b=t(require("../../components/shop/index")),w=t(require("../../components/tabpanel/index")),y=t(require("../../components/graphic/index")),D=t(require("../../components/parameter/index")),C=t(require("../../components/recommend/index")),R=t(require("./components/footbar/index")),T=t(require("./components/pintuanfootbar/index")),_=t(require("../../components/middlebanner/index")),M=t(require("../../components/entrybar/index")),N=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(require("../../components/base/index")),B=N.PageStatus,E=N.setWindowHeight,L=N.responseSuccessHandle,H=N.responseErrorhandle,U=(N.fn.getFullUrl,e.default.MCE),j=e.default.MWP,O=e.default.fn.sendMsg;(0,a.default)({components:{loading:s.default,toast:r.default,mask:u.default,quickNavigation:d.default,errorPage:h.default,redPacket:m.default,head:c.default,swiper:l.default,topbanner:p.default,title:f.default,price:g.default,express:I.default,primaryBanner:$.default,service:S.default,presaleInfo:v.default,promotion:q.default,moreSku:x.default,pintuan:k.default,rate:P.default,shop:b.default,tabpanel:w.default,graphic:y.default,parameter:D.default,recommend:C.default,footbar:R.default,pintuanfootbar:T.default,middleBanner:_.default,entryBar:M.default},data:{itemData:null,windowHeight:"100%",scrollTop:0,scrollIntoView:"",pageStatus:B.NO_REQUEST,isPintuan:!1},onLoad:function(t){var e=this;this.$loading.show(),wx.showNavigationBarLoading(),E.bind(this)(),this.optionsReady=this.$getOptions().then(function(t){e.options=t||{},e.itemId=t.itemId||"",e.ptp=t.ptp||"",e.cparam=t.cparam||"",e.acm=t.acm||"",e._mgjuuid=t._mgjuuid||"",console.log("options: ",t)})},onReady:function(){var t=this;this.optionsReady.then(function(){t.getItemData(t.itemId)})},getItemData:function(t){this.$loading.show(),wx.showNavigationBarLoading(),j.request("http.detail.api","1",{template:"6-2-detail_normal-1.0.0",iid:t}).then(j.filterResult).then(L.bind(this,{success:this.setItemData,itemId:t})).catch(H.bind(this,{itemId:t}))},setItemData:function(t){var e=this.itemId;this.itemData=t;var i=t.shopInfo,n=i&&i.nonsupportReasonRefound,a=i&&i.userId||"",s=i&&i.shopId||"",r=t.normalPrice,d=t.pintuanInfo||{},u=d.activityId||"";this.activityId=u;var h="",m=wx.getStorageSync("footbar.date");this.$logE("016000257",{businessId:u}),d&&5==d.state&&(this.data.isPintuan=!0,h="拼团"),this._mgjuuid&&this.$redPacket.render({pid:79582}),o.default.add({tag:h,page:"detail",itemId:this.itemId,activityId:"",title:this.itemData.itemInfo.title,img:this.itemData.topImages[0],nowPrice:r.currency+r.nowPrice+(r.highNowPrice?r.priceSplit+r.currency+r.highNowPrice:""),oldPrice:r.oldPrice?r.currency+r.oldPrice:""}),this.setData({itemData:t,pageStatus:B.REQUEST_SUCCESS}),this.$quickNavigation.init({scrollTopRange:600,webIm:{shopId:i.shopId,userId:i.userId,goodsId:this.itemId,img:t.topImages[0],path:"/pages/detail/pages/normal/index?itemId="+this.itemId,title:t.itemInfo.title},isWebImTipsHide:t.addCartLottery&&t.addCartLottery.addCartTip&&t.addCartLottery.addCartTip.image&&(m.date!==(new Date).toFormattedString("yyyy-MM-dd")||parseInt(m.times)>=1)}),this.$head.init(),this.$swiper.init({topImages:t.topImages}),this.$topbanner.init({topCountdown:t.normalCountdown}),this.$title.init({itemInfo:t.itemInfo}),this.$price.init(t.normalPrice),this.$express.init(t.itemServices),this.$primaryBanner.init(),this.$entryBar.init(t.installmentInfo),this.$service.init({itemServices:t.itemServices,$mask:this.$mask}),this.$pintuan.init({pintuanInfo:t.pintuanInfo}),this.$presaleInfo.init({preSaleInfo:t.preSaleInfo,$mask:this.$mask}),this.$middleBanner.init({$toast:this.$toast,$loading:this.$loading}),this.$rate.init({rateInfo:t.rateInfo,itemId:e}),this.$shop.init(t.shopInfo||{}),this.$tabpanel.init(),this.$graphic.init(t.detailInfo),this.$parameter.init(t.itemParams),this.data.isPintuan?this.$pintuanfootbar.init({pintuanInfo:t.pintuanInfo,skuInfo:t.skuInfo,itemInfo:t.itemInfo,defaultImage:t.topImages[0],title:t.itemInfo.title,nonsupportReasonRefound:n,shopInfo:t.shopInfo,itemId:this.itemId,ptp:this.ptp,$toast:this.$toast,$mask:this.$mask,$loading:this.$loading}):this.$footbar.init({skuInfo:t.skuInfo,itemInfo:t.itemInfo,preSaleInfo:t.preSaleInfo&&t.preSaleInfo.totalPrice?t.preSaleInfo:null,defaultImage:t.topImages[0],title:t.itemInfo.title,nonsupportReasonRefound:n,shopInfo:t.shopInfo,itemId:this.itemId,ptp:this.ptp,$toast:this.$toast,$mask:this.$mask,$loading:this.$loading}),this.getPromotionData(a,s),this.getRecommendData(),this.getSpecialPromotionCardImage(),this.getServiceSetting(),this.setSeo(),this.initCpcParams()},initCpcParams:function(){var t=this;(this.cparam||this.hasCparamLogged)&&(0,i.requestCparam)({itemId:this.itemId,cparam:this.cparam,acm:this.acm}).then(function(e){"success"===e.result&&(t.hasCparamLogged=!0)}).catch(function(t){O(t,{_author:"changsheng",threshold:1})})},setSeo:function(){var t=this.itemData.itemInfo.title;wx.setNavigationBarTitle({title:t})},getPromotionData:function(t,e){var i=this;j.request("mwp.ford.getValidShopProList","1",{sellerId:t,shopId:e,marketType:getApp().data.marketType,itemIds:this.itemId}).then(j.filterResult).then(function(t){i.setPromotionData(t),i.$loading.hide()}).catch(function(t){i.$loading.hide(),console.log(t),O(t,{_author:"changsheng",threshold:1})})},getSpecialPromotionCardImage:function(){},setPromotionData:function(t){this.$promotion.init({promotionData:t,$toast:this.$toast,$mask:this.$mask,$loading:this.$loading})},getRecommendData:function(){var t=this;U.recommend({pid:60002,iidE:this.itemId,plat:"h5",pageSize:12,sp:getApp().data.shopIdNum}).then(function(e){e.list&&e.list.length>0?t.setRecommendData(e):O(new Error("热卖推荐数据错误"),{_author:"changsheng",threshold:1})}).catch(function(t){console.log(t),O(t,{_author:"changsheng",threshold:1})})},setRecommendData:function(t){this.$recommend.init(t)},getServiceSetting:function(){var t=this;U.get({pid:60936}).then(function(e){e.list&&e.list.length>0&&t.setServiceSetting(e.list[0])}).catch(function(t){console.log(t),O(t,{_author:"changsheng",threshold:1})})},setServiceSetting:function(t){var e=t.backgroundImage,i=t.shareTitle,n=t.canShareMiddle;this.shareTitle=i,this.canShareMiddle=n,this.$service.setBackgroundImage(e)},setSkuChoose:function(t){var e=t.message;this.data.isPintuan?this.$moreSku.init({skuMessage:e,$footbar:this.$pintuanfootbar}):this.$moreSku.init({skuMessage:e,$footbar:this.$footbar})},scrollHandler:function(t){var e=t.detail.scrollTop;this.$quickNavigation.setScrollTop(e),this.$expose&&this.$expose()},showCart:function(){this.$quickNavigation.showCart()},onTopClick:function(){this.setData({scrollTop:0})},onTabClick:function(t){this.setData({scrollIntoView:t})},onShow:function(){this.itemData&&this.getItemData(this.itemId)},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){this.route;var t=this.options;return this.activityId&&(t.businessId=this.activityId),{title:(this.shareTitle||"")+this.itemData.itemInfo.title,path:n.default.detail(t),eventParams:{businessId:this.activityId}}}}); 
 			}); 	require("pages/detail/pages/normal/index.js");
 		__wxRoute = 'pages/detail/pages/pinrule/index';__wxRouteBegin = true; 	define("pages/detail/pages/pinrule/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../../common/m")),o=e(require("../../../../common/base/createPage")),a=e(require("../../../../components/loading/index"));t.default.MCE,t.default.fn.sendMsg;exports.default=(0,o.default)({components:{loading:a.default},data:{}}); 
 			}); 	require("pages/detail/pages/pinrule/index.js");
 		__wxRoute = 'pages/detail/pages/shopkill/index';__wxRouteBegin = true; 	define("pages/detail/pages/shopkill/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../../../common/m")),i=e(require("../../../../common/service/url")),n=require("../../../../common/utils/cpcutil"),o=(e(require("../../../../common/utils/imgUrlTool")),e(require("../../../../common/utils/footprint")),e(require("../../../../common/base/createPage"))),s=e(require("../../../../components/loading/index")),a=e(require("../../../../components/toast/index")),r=e(require("../../../../components/quickNavigation/index")),c=e(require("../../../../components/mask/index")),h=e(require("../../../../components/error/index")),d=e(require("../../../../components/redPacket/index")),l=e(require("../../components/head/index")),u=e(require("../../components/swiper/index")),m=e(require("../../components/topbanner/index")),p=e(require("../../components/title/index")),f=e(require("../../components/price/index")),g=e(require("../../components/progress/index")),I=e(require("../../components/express/index")),v=e(require("../../components/primarybanner/index")),$=e(require("../../components/service/index")),S=e(require("../../components/moresku/index")),k=e(require("../../components/rate/index")),q=e(require("../../components/shop/index")),x=e(require("../../components/tabpanel/index")),b=e(require("../../components/graphic/index")),y=e(require("../../components/parameter/index")),w=e(require("../../components/recommend/index")),D=e(require("./components/footbar/index")),R=e(require("./components/priceBanner/index")),P=e(require("./components/shopTitle/index")),T=e(require("../../components/middlebanner/index")),C=e(require("../../components/entrybar/index")),_=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(require("../../components/base/index")),B=_.PageStatus,E=_.setWindowHeight,N=_.responseSuccessHandle,M=_.responseErrorhandle,U=(_.fn.getFullUrl,t.default.MCE),H=t.default.MWP,L=t.default.fn,O=L.sendMsg,j=L.omit;(0,o.default)({components:{loading:s.default,toast:a.default,mask:c.default,quickNavigation:r.default,errorPage:h.default,redPacket:d.default,head:l.default,swiper:u.default,topbanner:m.default,title:p.default,price:f.default,progress:g.default,express:I.default,primaryBanner:v.default,service:$.default,moreSku:S.default,rate:k.default,shop:q.default,tabpanel:x.default,graphic:b.default,parameter:y.default,recommend:w.default,footbar:D.default,priceBanner:R.default,shopTitle:P.default,middleBanner:T.default,entryBar:C.default},data:{itemData:null,windowHeight:"100%",scrollTop:0,scrollIntoView:"",pageStatus:B.NO_REQUEST},onLoad:function(e){var t=this;this.$loading.show(),wx.showNavigationBarLoading(),E.bind(this)(),this.optionsReady=this.$getOptions().then(function(e){t.options=e||{},t.itemId=e.itemId||"",t.activityId=e.activityId||"",t.ptp=e.ptp||"",t.cparam=e.cparam||"",t.acm=e.acm||"",t._mgjuuid=e._mgjuuid||"",console.log("options: ",e)})},onReady:function(){var e=this;this.optionsReady.then(function(){e.getItemData(e.itemId,e.activityId)})},refresh:function(){this.$footbar.setRefreshing(!0),this.getItemData(this.itemId,this.activityId)},getItemData:function(e,t){var i=this;if(!this.loadingFlag){var n=function(){i.shopSeckillInfo&&i.$footbar.setRefreshing&&i.$footbar.setRefreshing(!1)};this.$loading.show(),wx.showNavigationBarLoading(),this.loadingFlag=!0,H.request("http.detail.api","1",{template:"6-2-detail_shopseckill-1.0.0",iid:e,activityId:t}).then(H.filterResult).then(N.bind(this,{done:n,success:this.setItemData,itemId:e,activityId:t})).catch(M.bind(this,{itemId:e,activityId:t,done:n}))}},setItemData:function(e){var t=this.itemId;this.itemData=e;var i=e.shopInfo;i&&i.nonsupportReasonRefound,i&&i.userId,i&&i.shopId,this.itemData.shopSeckillPrice;this.shopSeckillInfo=e.shopSeckillInfo,this.$logE("016000257",{businessId:this.activityId}),e.shopSeckillInfo&&3===e.shopSeckillInfo.state?this.$redirect("detail",{itemId:t},!0):(this.setData({itemData:e,pageStatus:B.REQUEST_SUCCESS}),this.$quickNavigation.init({scrollTopRange:600,webIm:{shopId:i.shopId,userId:i.userId,goodsId:this.itemId,activityId:this.activityId,channelId:"channel_shop_seckill",img:e.topImages[0],path:"/pages/detail/pages/shopkill/index?itemId="+this.itemId+"&activityId="+this.activityId,title:e.itemInfo.title}}),this.$head.init(),this.$swiper.init({topImages:e.topImages}),this.$priceBanner.init({shopSeckillPrice:e.shopSeckillPrice,shopSeckillCountdown:e.shopSeckillCountdown}),this.$shopTitle.init({itemInfo:e.itemInfo}),this.$progress.init(e.shopSeckillProgress),this.$express.init(e.itemServices),this.$primaryBanner.init(),this.$service.init({itemServices:e.itemServices,$mask:this.$mask}),this.$entryBar.init(e.installmentInfo),this.$middleBanner.init({$toast:this.$toast,$loading:this.$loading}),this.$rate.init({rateInfo:e.rateInfo,itemId:t}),this.$shop.init(e.shopInfo),this.$tabpanel.init(),this.$graphic.init(e.detailInfo),this.$parameter.init(e.itemParams),this.$footbar.init({skuInfo:e.skuInfo,itemInfo:e.itemInfo,defaultImage:e.topImages[0],shopInfo:e.shopInfo,shopSeckillInfo:e.shopSeckillInfo,userInfo:e.userInfo,title:e.itemInfo.title,activityId:this.activityId,itemId:this.itemId,$toast:this.$toast,$mask:this.$mask,$loading:this.$loading}),this.getRecommendData(),this.getServiceSetting(),this.setSeo(),this.initCpcParams())},initCpcParams:function(){var e=this;this.cparam&&!this.hasCparamLogged&&(0,n.requestCparam)({itemId:this.itemId,cparam:this.cparam,acm:this.acm}).then(function(t){"success"===t.result&&(e.hasCparamLogged=!0)}).catch(function(e){O(e,{_author:"changsheng",threshold:1})})},setSeo:function(){var e=this.itemData.itemInfo.title;wx.setNavigationBarTitle({title:e})},getRecommendData:function(){var e=this;U.recommend({pid:60002,iidE:this.itemId,plat:"h5",pageSize:12,sp:getApp().data.shopIdNum}).then(function(t){t.list&&t.list.length>0?e.setRecommendData(t):O(new Error("热卖推荐数据错误"),{_author:"changsheng",threshold:1})}).catch(function(e){console.log(e),O(e,{_author:"changsheng",threshold:1})})},setRecommendData:function(e){this.$recommend.init(e)},getServiceSetting:function(){var e=this;U.get({pid:60936}).then(function(t){t.list&&t.list.length>0&&e.setServiceSetting(t.list[0])}).catch(function(e){console.log(e),O(e,{_author:"changsheng",threshold:1})})},setServiceSetting:function(e){var t=e.backgroundImage,i=e.shareTitle;this.shareTitle=i,this.$service.setBackgroundImage(t)},setSkuChoose:function(e){var t=e.message;this.$moreSku.init({skuMessage:t,$footbar:this.$footbar})},scrollHandler:function(e){var t=e.detail.scrollTop;this.$quickNavigation.setScrollTop(t),this.$expose&&this.$expose()},showCart:function(){this.$quickNavigation.showCart()},onTopClick:function(){this.setData({scrollTop:0})},onTabClick:function(e){this.setData({scrollIntoView:e})},onShow:function(){this.itemData&&this.getItemData(this.itemId,this.activityId)},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){var e=Object.assign({businessId:this.activityId},j(this.options,"liveParams"));return{title:(this.shareTitle||"")+this.itemData.itemInfo.title,path:i.default.shopkillDetail(e),eventParams:{businessId:this.activityId}}}}); 
 			}); 	require("pages/detail/pages/shopkill/index.js");
 		__wxRoute = 'pages/footprint/index';__wxRouteBegin = true; 	define("pages/footprint/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){for(var t={},o=e.length-1;o>=0;o--){var r=e[o];r.img=a.default.getGoodsRatioSuffix(r.img,160,"1:1"),(t[r.date]||(t[r.date]=[])).push(r)}return Object.keys(t).map(function(e){return{date:e,goods:t[e]}})}Object.defineProperty(exports,"__esModule",{value:!0});var o=e(require("../../common/base/createPage")),a=e(require("../../common/utils/imgUrlTool")),r=e(require("../../common/utils/footprint")),n=e(require("../../components/empty/index"));exports.default=(0,o.default)({components:{empty:n.default},data:{groups:null,$empty:{type:12,text:"你还没有足迹~"}},onShow:function(){this.readData()},readData:function(){var e=r.default.read();this.setData({groups:t(e)})},onClean:function(e){var t=this,o=e.detail.formId;o&&this.$logForm(o,2),wx.showModal({title:"清空足迹",content:"你确定要清空足迹吗？",cancelColor:"#666666",confirmColor:"#ff5777",success:function(e){e.confirm&&(r.default.clean(),t.readData())}})}}); 
 			}); 	require("pages/footprint/index.js");
 		__wxRoute = 'pages/hongbao/detail/index';__wxRouteBegin = true; 	define("pages/hongbao/detail/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/base/createPage")),n=require("../service"),a=t(n),o=t(require("../../../components/loading/index.js")),i=t(require("../../../components/toast/index.js")),r=require("../constant"),u={1:"获得",2:"花费",3:"提现",4:"收回"},s={1:20101,2:19919,3:35593,4:72967,5:89581},l={1:"满返红包",2:"支付红包",3:"白付美专享支付红包",4:"支付宝专享支付红包",5:"实名专享支付红包"};(0,e.default)({components:{loading:o.default,toast:i.default},data:{hongbaoDetailInfo:{},useDetails:[],ruleType:l[1],ruleInfo:""},onLoad:function(t){var e=t.id;this.getDetailData(e)},onReady:function(){wx.setNavigationBarTitle({title:r.appTitle})},getDetailData:function(t){var e=this;a.default.hongbaoDetail.call(this,t).then(function(t){var n=t.hongbao,a=t.useDetails,o=n.hongbaoType;n.startTime=e.formatTime(n.startTime),n.endTime=e.formatTime(n.endTime),n.amount=e.formatAmount(n.amount),n.originAmount=e.formatAmount(n.originAmount),a=a.map(function(t){return{type:t.type,action:u[t.type]||"",amount:e.formatAmount(t.amount),comment:t.comment}}),e.setData({hongbaoDetailInfo:n,useDetails:a,ruleType:l[o]}),e.getRuleInfo(o)}).catch(n.handleRequestError.bind(this))},formatTime:function(t){return t&&Date.format(new Date(1e3*t),"yyyy.MM.dd hh:mm:ss")},formatAmount:function(t){return t&&(t/100).toFixed(2)},getRuleInfo:function(t){var e=this;a.default.getMaitResource(s[t]).then(function(t){var n="";t.list&&t.list.length>0&&(n=t.list[0].rule.replace(/<p>/g,"").replace(/<\/p>/g,"\r\n")),e.setData({ruleInfo:n})}).catch(n.handleRequestError.bind(this))}}); 
 			}); 	require("pages/hongbao/detail/index.js");
 		__wxRoute = 'pages/hongbao/list/index';__wxRouteBegin = true; 	define("pages/hongbao/list/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/base/createPage")),a=require("../service"),n=t(a),i=t(require("../../../components/loading/index.js")),o=t(require("../../../components/toast/index.js")),s=t(require("../../../components/end/index.js")),r=t(require("../components/balance/index.js")),d=t(require("../components/topBanner/index.js")),c=require("../constant"),l=require("../utils"),u={1:"满返红包",2:"通用红包",3:"白付美专享",4:"支付宝专享",5:"实名专享"};(0,e.default)({components:{loading:i.default,toast:o.default,end:s.default,balance:r.default,topbanner:d.default},data:{hongbaoList:[],start:0,isEnd:!1,$end:{},$balance:{},$topbanner:{},tabConfig:{},selectedTab:0},onLoad:function(t){var e=(0,l.getConfig)(t.appId);this.setData({tabConfig:e}),this.getTopBanners(),this.getBalanceLink(),this.getHongbaoList(0,"load")},tabClicked:function(t){var e=t.currentTarget.dataset.tab;e!==this.data.selectedTab&&(this.setData({selectedTab:e}),this.resetList(),this.getHongbaoList(0,"load"))},onReady:function(){wx.setNavigationBarTitle({title:c.appTitle})},onPullDownRefresh:function(){this.getTopBanners(),this.getBalanceLink(),this.resetList(),this.getHongbaoList(0,"load",function(){wx.stopPullDownRefresh()})},onReachBottom:function(){var t=this,e=this.data,a=e.start;e.isEnd||(a+=c.pageSize,this.getHongbaoList(a,"append",function(){t.setData({start:a})}))},resetList:function(){this.setData({start:0,isEnd:!1})},formatTime:function(t){return t&&Date.format(new Date(1e3*t),"yyyy.MM.dd hh:mm")},formatAmount:function(t){return(t/100).toFixed(2)},getTopBanners:function(){var t=this;n.default.getMaitResource(this.data.tabConfig.bannerPid).then(function(e){e.list&&e.list.length>0&&t.$topbanner.setData({topBanners:e.list})}).catch(a.handleRequestError.bind(this))},getBalanceLink:function(){var t=this;n.default.getMaitResource(this.data.tabConfig.balancePid).then(function(e){e.list&&e.list.length>0&&t.$balance.setData({maitResource:e.list[0]})}).catch(a.handleRequestError.bind(this))},getHongbaoList:function(t,e,i){var o=this,s=this.data.tabConfig.tabs[this.data.selectedTab];console.log("selected tab info: ",s.text,s.merchantId),n.default.hongbaoList.call(this,{start:t,size:c.pageSize,merchantId:s.merchantId}).then(function(t){console.log(t);var a=t.hongbaoList,n=o.data.$balance;if(n.amount=o.formatAmount(t.amount),a.length<c.pageSize&&o.setData({isEnd:!0}),a=a.map(function(t){var e=t.id,a=t.amount,n=t.originAmount,i=t.hongbaoType,s=t.now,r=t.startTime,d=t.endTime,c=t.status,l=t.canWithdraw,h=void 0,g=void 0,f=void 0,b="",p="",m="",x=u[i],w=void 0,v=void 0,T=void 0,L=void 0,C=d-s;switch(r=o.formatTime(r),d=o.formatTime(d),b="有效期："+r+" － "+d,0!=+n&&0==+a?(h=!0,L="icon-used"):C<=0?(g=!0,L="icon-expired"):f=!0,f?(C<=86400&&(p="(仅剩1天)"),1==+l&&(v=!0),4==+c&&(w=!0),T="valid"):T="expired",a=o.formatAmount(a),n=o.formatAmount(n),m=""+a,i){case 3:T=f?"bfm":"expired-bfm";break;case 4:T=f?"alipay":"expired-alipay";break;case 5:T=f?"realname":"expired-realname";break;default:T=f?1==+l?"withdraw":"valid":1==+l?"expired-withdraw":"expired"}return{id:e,hongbaoClass:T,iconClass:L,amountText:m,statusText:b,typeText:x,warnText:p,isUsed:h,isValid:f,isExpired:g,showActiveButton:w,showWithdrawButton:v}}),"append"===e){var s=o.data.hongbaoList;o.setData({hongbaoList:s.concat(a),$balance:n})}else o.setData({hongbaoList:a,$balance:n});i&&i()}).catch(a.handleRequestError.bind(this))},withdraw:function(t){var e=this,a=t.currentTarget.dataset.id;n.default.hongbaoWithdraw(a).then(function(){var t=e.data,n=t.hongbaoList,i=t.$balance;n=n.map(function(t){if(+t.id==+a){var e=parseFloat(t.amountText);i.amount=((100*i.amount-100*e)/100).toFixed(2),t.hongbaoClass="expired-withdraw",t.amountText="0.00",t.isUsed=!0,t.isValid=!1,t.iconClass="icon-used",t.showWithdrawButton=!1}return t}),e.setData({hongbaoList:n,$balance:i}),setTimeout(function(){wx.showModal({title:"",content:"恭喜提现成功 \r\n 请到 钱包-余额 查看",showCancel:!1,confirmText:"知道了"})},300)})},active:function(){var t=this.data.tabConfig,e="/pages/act/index?pageName=realname/addsuccinctly";this.$logE("001021220",{client:"xcx"}),t.id===c.walletAppId?this.$navigate(e,{redirect:"/pages/hongbao/list/index"}):wx.navigateToMiniProgram({appId:c.walletAppId,path:e+"&redirect="+encodeURIComponent("/pages/hongbao/list/index")+"&appId="+t.id,success:function(t){},fail:function(t){wx.showModal({title:"出错了",content:t.errMsg,showCancel:!1})}})}}); 
 			}); 	require("pages/hongbao/list/index.js");
 		__wxRoute = 'pages/im/chat/index';__wxRouteBegin = true; 	define("pages/im/chat/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/m")),n=t(require("../../../common/im/sdk/api")),o=t(require("../../../common/service/user")),s=t(require("../../../components/loading/index")),i=t(require("../components/msgbox/index")),a=t(require("../components/input/index")),d=t(require("../../../components/toast/index")),r=t(require("../../../common/base/createPage")),u=t(require("../../../common/im/sdk/promise")),c=t(require("../../../common/im/init")),g=t(require("../../../common/im/msg")),f=t(require("../../../common/im/p2pmsg")),l=t(require("../../../common/im/user")),h=t(require("../../../common/im/goods")),m=t(require("../../../common/im/conv")),v=t(require("../../../common/im/index")),p=n.default.debug("CHAT");(0,r.default)({components:{loading:s.default,input:a.default,toast:d.default,msgbox:i.default},data:{convId:"",userId:"",goodsId:"",allocateType:1,shopId:"",fromPage:"",fromType:"",activityId:"",channelId:"",goods:null,showStrategy:0,$msgbox:{list:[],hasGoods:!1,showStrategy:0,end:!1,msgId:""},loginUserId:"",title:""},onLoad:function(t){var e=this;this.$loading.show(),this.setData(t,function(){e.getConvInfo(function(t){e.setTitle(),e.getHistory(!0),g.default.onMsg(t,function(n){m.default.clearUnread(t),e.addMsg(n)})})}),this.$msgbox.$on("show-more",function(){e.getHistory()}),this.$msgbox.$on("resend",function(t){var n=t.request_id;e.reSend(n)}),n.default.on("close",function(){e.$toast.show("网络断开连接，正在重连",1e4)}),n.default.on("open",function(){e.$toast.hide()}),f.default.onP2PMsg("rateScore",function(t){f.default.getTags().then(function(n){t.tags=n,e.addMsg(t)})}),this.$input.$on("sendMsg",function(t){e.send(t)}),(0,c.default)().then(function(){e.loadingHide(!0)}).catch(function(t){if(t&&5005===t.result)return o.default.refreshSign().then(c.default);e.loadingHide(!0)}),this.loadingHide()},loadingHide:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?0:6e3;this.loadingTimer&&clearTimeout(this.loadingTimer),this.loadingTimer=setTimeout(function(){t.$loading.hide()},e)},onReady:function(){this.getGoodsInfo()},getCallUser:function(t,n){var o=this;return t?u.default.resolve(t):n?e.default.MWP.request("mwp.imcenter.appMgjShopsInfo","1",{shopIds:[n]}).then(function(n){var s=e.default.MWP.filterResult(n);if(p.log("shopInfo",s),s&&s.length>0)return t=s[0].ownerId,o.setData({userId:t}),t;throw new Error("用户信息为空")}):u.default.reject("用户信息为空")},getConvInfo:function(t){var e=this,n=this.data,o=n.convId,s=n.userId,i=n.shopId;if(o)return t(o);this.getCallUser(s,i).then(m.default.getConvByUserId).then(function(n){var o=n.conversation_id;if(!o)throw new Error("没有创建过会话");e.setData({convId:o},function(){t(o)})}).catch(function(t){e.setTitle(),p.log(t)})},getGoodsInfo:function(){var t=this,e=this.data,n=e.goodsId,o=e.fromType,s=e.activityId,i=e.channelId;n&&(0,h.default)(n,i,o,s).then(function(e){t.setData({goods:e})})},reSend:function(t){var e=this;this.$msgbox.refreshMsg({request_id:t,msgStatus:1}),n.default.reSend(t).then(function(t){t.msgStatus=0,e.$msgbox.refreshMsg(t)}).catch(function(n){e.$msgbox.refreshMsg({request_id:t,msgStatus:2})})},send:function(t){var e=this,o=this.data,s=o.convId,i=o.userId,a=o.allocateType;s?g.default.getMsg(s,t).then(function(t){t.message_content&&(p.log("send Msg %o",t),t.msgStatus=1,1!==n.default.getStatus()&&(t.msgStatus=2),e.addMsg(t),g.default.sendMsg(t,a).then(function(n){t.msgStatus=0,g.default.pushMsg(t),e.$msgbox.refreshMsg(t)}).catch(function(n){var o=n.request_id;t.msgStatus=2,t.request_id=o,g.default.pushMsg(t),e.$msgbox.refreshMsg(t)}))}):m.default.createConv(i,1).then(function(n){if(n&&n.conversation_id){var o=n.conversation_id;e.setData({convId:o},function(){e.$msgbox.setData({end:!0},function(){e.send(t)})})}})},addMsg:function(t){var e=this,n=this.data.convId;this.$parent&&g.default.getSender([t],n).then(function(t){var o=t[0];g.default.pushMsg(o),o&&o.conversation_id===n&&e.$msgbox.appendMsg(o)})},setTitle:function(){var t=this,e=this.data,n=e.convId,o=e.userId;n?m.default.getConvByConvId(n).then(function(e){e&&e.name&&(p.log("getConv %o",e),e.hideInput&&(t.setData({hideInput:e.hideInput}),t.$msgbox.setData({hideInput:e.hideInput})),wx.setNavigationBarTitle({title:e.name}))}):l.default.getUser(o).then(function(t){t&&t.name&&wx.setNavigationBarTitle({title:t.name})})},getHistory:function(t,e){var n=this;p.log("getHistory of ",o,this.lock);var o=this.data.convId;if(o&&!this.lock)return this.lock=!0,g.default.getHistory(o,t,e).then(function(t){n.lock=!1,n.$msgbox.setData({list:t.list,end:t.end},function(){n.$msgbox.setData({msgId:t.msgId})})}).catch(function(t){n.lock=!1,n.$toast.show("获取历史消息失败",3e3)})},sendGoodsMsg:function(t){var e=t.target.dataset.send,n=t.currentTarget.dataset,o=(n.goodsid,n.channelid),s=n.fromtype,i=n.activityid;if(e){var a=this.data.goods,d={message_type:1007,message_content:{id:a.id,picurl:a.picUrl,title:a.title,price:a.price}};o&&(d.message_content.channelId=o),s&&(d.message_content.fromType=s),i&&(d.message_content.activityId=i),this.send(d)}else wx.navigateBack()},onUnload:function(){var t=this.data.convId;g.default.offMsg(t),v.default.getAppTitle().then(function(t){wx.setNavigationBarTitle({title:t})})}}); 
 			}); 	require("pages/im/chat/index.js");
 		__wxRoute = 'pages/im/contact/index';__wxRouteBegin = true; 	define("pages/im/contact/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/m")),a=t(require("../../../components/loading/index")),i=t(require("../../../components/empty/index")),n=t(require("../../../common/base/createPage")),o=t(require("../../../common/im/index"));(0,n.default)({components:{loading:a.default,empty:i.default},data:{pageNo:0,end:!1,pageCount:0,pageSize:20,$empty:{type:8,text:"消息通知空空如也",button:"刷新",callback:function(){(void 0).$redirect("/pages/im/contact/index")}},data:[]},onload:function(t){this.setData(t)},setEmpty:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;this.setData({end:!0}),this.$empty.setData({type:a,text:t||"未知错误",button:"刷新",callback:function(){e.$redirect("/pages/im/contact/index")}})},loadingHide:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?0:6e3;this.loadingTimer&&clearTimeout(this.loadingTimer),this.loadingTimer=setTimeout(function(){t.$loading.hide()},e)},onShow:function(){var t=this;this.$loading.show(),this.getModle(!0).then(function(){t.loadingHide(!0)}).catch(function(e){t.lock=!1,t.setEmpty("消息通知空空如也"),t.loadingHide(!0)}),this.loadingHide()},getModle:function(t){var a=this,i=this.data,n=i.pageNo,d=i.pageSize,c=i.pageCount,u=i.end;return t&&(u=!1,n=1),u||this.lock?Promise.resolve():(this.lock=!0,o.default.getAppNum().then(function(i){return e.default.MWP.request("mwp.wechat_callback_service.queryContactInfo","1",{pageNo:n,appId:i,pageCount:c,pageSize:d}).then(function(i){a.lock=!1;var n=e.default.MWP.filterResult(i);if((n.pageNo>=n.pageCount||0===n.length)&&(n.end=!0),n.pageNo+=1,!t){var o=a.data.data;n.data=o.concat(n.data)}return a.setData(n),n})}))},bindContact:function(t){var a=t.detail,i=a.path,n=a.query;i&&"/"!==i&&(i=i.replace(/^\/\//i,"/"),this.$navigate(i+"?"+e.default.qs.stringify(n)))},scrollBottomHandle:function(){this.getModle()},navigateChat:function(t){this.$navigate("chat/index?"+util.buildQuery(t))}}); 
 			}); 	require("pages/im/contact/index.js");
 		__wxRoute = 'pages/im/index';__wxRouteBegin = true; 	define("pages/im/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../components/loading/index")),n=e(require("../../components/empty/index")),i=e(require("../../common/base/createPage")),o=e(require("../../common/service/user")),a=e(require("../../common/im/init")),s=e(require("../../common/im/conv")),r=e(require("../../common/im/util")),c=e(require("../../common/im/sdk/api")).default.debug("IM/INDEX");(0,i.default)({components:{loading:t.default,empty:n.default},data:{loginUserId:"",$empty:{type:8,text:"消息通知空空如也"},list:[],end:!1},onLoad:function(e){var t=this;this.$loading.show(),e&&(e.convId||e.userId||e.shopId)&&this.navigateChat(e),(0,a.default)().then(function(){c.log("login success"),t.loadingHide(!0)}).catch(function(e){if(console.error(e),e&&5005===e.result)return o.default.refreshSign().then(a.default);c.log("login fail"),t.loadingHide(!0),t.setEmpty("IM连接失败")}),this.loadingHide()},setEmpty:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;this.setData({end:!0}),this.$empty.setData({type:n,text:e||"未知错误",button:"刷新",callback:function(){t.$redirect("/pages/im/index")}})},loadingHide:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?0:6e3;this.loadingTimer&&clearTimeout(this.loadingTimer),this.loadingTimer=setTimeout(function(){e.$loading.hide()},t)},onShow:function(){c.log("onShow"),s.default.onConvChange(this.onMsg.bind(this)),this.getConvs(!0)},onHide:function(){c.log("onHide"),s.default.offConvChage()},tapHandle:function(e){var t=this,n=e.currentTarget.dataset;if(n&&n.id){var i=n.id;n.unread>0&&s.default.clearUnread(i).then(function(e){t.setData(e)}),this.navigateChat({convId:i})}else console.error("cnvId 为空")},onMsg:function(e){c.log("conv recive %o",e),this.$parent&&this.setData(e)},getConvs:function(e){var t=this;this.convsLock||!e&&this.data.end||(this.convsLock=!0,s.default.getConvList({refresh:e}).then(function(e){t.convsLock=!1,c.log("conv recive %o",e),t.$parent&&t.setData(e)}).catch(function(e){console.error(e),t.convsLock=!1;var n=t.data.list;(!n||n.length<=0)&&t.setEmpty(e.message||"请求会话失败，请稍后重试!")}))},scrollBottomHandle:function(){this.getConvs()},navigateChat:function(e){this.$navigate("chat/index?"+r.default.buildQuery(e))}}); 
 			}); 	require("pages/im/index.js");
 		__wxRoute = 'pages/insurance/freight/index';__wxRouteBegin = true; 	define("pages/insurance/freight/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t},a=t(require("../../../common/m")),s=t(require("../../../components/loading/index")),i=t(require("../../../components/toast/index")),o=t(require("../../../common/base/createPage")),n=require("../../insurance/action.js"),r=t(require("./faqList"));a.default.MWP;exports.default=(0,o.default)({components:{loading:s.default,toast:i.default},data:{},onLoad:function(t){this.data.options=t,this.faqList=this.parseFAQList(r.default),this.setData({faqList:this.faqList})},onShow:function(){var t=this;this.$loading.show(),(0,n.getFreightDetail)({orderId:Number(this.data.options.orderId)||"",refundId:Number(this.data.options.refundId)||"",platformType:1},function(e){console.log(e),t.setData(t.parseData(e)),t.$loading.hide()},function(e){t.$toast.show(e.message),t.$loading.hide()})},methods:{parseFAQList:function(t){return t=t.map(function(t){return e({},t,{fold:"true"})})},parseData:function(t){if(!t)return{data:{policyStatus:""}};var e=t.policyStatus,a=t.claimStatus,s=t.reApply,i=t.applyTime;t.claimsStart=this.formatTime(i),t.claimsStartText=s?"补贴重新申请中":"补贴申请中";var o=t.claimAmount?t.claimAmount/100:0;if(t.claimAmount=o.toFixed(2),t.showStatus=!0,1===e||3===e||6===e)switch(t.showStatus=!1,a){case 0:t.statusText="理赔申请中",t.showTimeline=!0,t.claimsEndText="预计到账时间",t.claimsEnd=this.formatTime(t.estimatedTime),t.showAmount=!0;break;case 2:t.showTimeline=!0,t.claimsEndText="已到账",t.claimsEnd=this.formatTime(t.actualTime),1===t.compensateType?t.claimsEndText+="，请前往“微信钱包”查看":0===t.compensateType&&(t.claimsEndText+="，请前往“小程序 [美丽联合钱包] - 我的余额”查看"),t.showAmount=!0;break;case 3:t.showTimeline=!0,t.claimsEndText=t.refusedReason,t.claimsEnd=this.formatTime(t.refuseTime);break;default:t.showTimeline=!1,1===e&&(t.statusText="退货可享运费补贴",t.showStatus=!0)}else 5===e?(t.statusText="对不起，该服务已失效",t.failed=!0):0===e?(t.statusText="对不起，您暂时无法享受此服务",t.failed=!0):(t.showStatus=!1,t.statusText="未投保");return{data:t}},formatTime:function(t){return t&&Date.format(new Date(1e3*t),"yyyy-MM-dd hh:mm:ss")},accordion:function(t){var e=t.currentTarget.dataset.index,a=this.faqList;"true"===a[e].fold?a[e].fold="":a[e].fold="true",this.setData({faqList:a})}},onReady:function(){wx.setNavigationBarTitle({title:"退货运费补贴"})}}); 
 			}); 	require("pages/insurance/freight/index.js");
 		__wxRoute = 'pages/logisticsList/index';__wxRouteBegin = true; 	define("pages/logisticsList/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../common/m")),s=e(require("../../components/loading/index")),r=e(require("../../components/toast/index")),a=e(require("../../common/base/createPage")),i=e(require("../../components/steps/index")),d=t.default.MWP;(0,a.default)({components:{loading:s.default,toast:r.default,steps:i.default},data:{},onLoad:function(e){var t=this;this.$loading.show();var s="",r="",a={};switch(e.type){case"refund":s="mwp.TradeRefundWeb.refundLog",r=1,a={itemOrderId:e.orderId};break;case"order":s="mwp.TradeDelivery.getExpressByOrderId",r=1,a={shopOrderId:e.shopOrderId}}d.request(s,r,a).then(d.filterResult).then(function(s){t.$loading.hide();var r={};switch(e.type){case"refund":r=t.parseRefundData(s);break;case"order":r=t.parseOrderData(s)}r&&(t.$steps.setData(r.logisticsList),t.setData({expressName:r.expressName,expressId:r.expressId}))}).catch(function(e){t.$toast.show(e.message,1500),t.$loading.hide()})},onReady:function(){wx.setNavigationBarTitle({title:"物流信息"})},methods:{parseRefundData:function(e){if(e&&e.refundSellerShipDTO){var t=e.refundSellerShipDTO;return{expressName:t.expressName,expressId:t.expressId,logisticsList:this.parseStepListData(e.logisticsDeliverySimpleDetailDTOs,"details","nodeTime")}}},parseOrderData:function(e){var t=e.packageTrackInfos[0];if(e&&t&&t.deliveryNodeDetails)return{expressName:t.expressName,expressId:t.expressId,logisticsList:this.parseStepListData(t.deliveryNodeDetails,"details","nodeTime"),created:this.formatTime(t.created)}},parseStepListData:function(e,t,s){var r=[],a=this;return e.forEach(function(e){r.push({stepDesc:e[t],stepTitle:a.formatTime(e[s])})}),{stepsList:r,current:0}},formatTime:function(e){return e&&Date.format(new Date(1e3*e),"yyyy.MM.dd hh:mm:ss")}}}); 
 			}); 	require("pages/logisticsList/index.js");
 		__wxRoute = 'pages/order/detail/index';__wxRouteBegin = true; 	define("pages/order/detail/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("../../../common/m")),a=e(require("../../../common/base/createPage")),r=e(require("../../../components/toast/index")),i=e(require("../../../components/loading/index")),o=e(require("./module/parseData.js")),s=e(require("./module/parseStatus.js")),n=e(require("./module/parseLogistics.js")),d=e(require("./module/parseFootData.js")),l=e(require("./components/shopList/index")),u=e(require("../../../common/utils/cache.js")),c=require("../common/base.js"),p=require("../common/common.js"),h=e(require("../../../components/wall/index")),f=e(require("../../../common/service/url.js")),m=e(require("../../../components/cashier/index")),O=t.default.MWP,g="",I="",_=null,v="",w=!1;exports.default=(0,a.default)({components:{shopList:l.default,toast:r.default,wall:h.default,loading:i.default,cashier:m.default},data:{hasWallInited:!1,isAjaxLoading:!0,marketType:"",shopList:null,orderStageList:null,shopOrderId:null,payOrderId:null,shopOrderIdEsc:null,isPintuan:null,isPintuanRed:null,statusList:null,logisticsList:null,discountList:null,cancelShow:null,deleteShow:null,footDataList:null,orderOperations:null,isChannel:!1,$wallPtMore:{link:"/pages/pintuanIndex/index",name:"大家都在拼",marginTop:16,marginBottom:0}},onLoad:function(e){I=e.orderId||""},onReady:function(){},wallInit:function(e){this.data.hasWallInited||(e?(this.$wall.setDataSource({source:"mwp_mait"}),this.$wall.initWall({pid:"43991"})):this.$wall.initWall({cKey:"xcx-guess-like",pid:"53225"}))},reloadPage:function(){var e=this;this.setData({isAjaxLoading:!0},function(){e.getOrderDetail()})},deleteOpt:function(e){var t=this,a=this.data.shopOrderId,r=e.detail&&e.detail.formId;this.$logForm(r,1),wx.showModal({title:"",confirmColor:"#ff5777",content:"确定删除该订单吗？删除了的订单不可恢复",success:function(e){if(e&&e.confirm)return(0,c.orderDeleteOpt)(a).then(function(e){e.success?(u.default.put(v,"deleteOpt"),t.$toast.show(e.message||"删除订单成功",2e3,function(){wx.navigateBack({delta:1})})):t.$toast.show(e.message||"删除订单失败，请稍后再试")})}})},cancelOpt:function(e){var t=this,a=e.currentTarget.dataset,r=a.payorderid||a.shoporderid,i=e.detail&&e.detail.formId;this.$logForm(i,1),wx.showModal({title:"",confirmColor:"#ff5777",content:"这么好的宝贝，确定不要了吗？",success:function(e){if(e&&e.confirm)return(0,c.cancelOrderOpt)(r).then(function(e){e.success?(u.default.put(v,"cancelOpt"),t.$toast.show(e.message||"取消订单成功",function(){t.reloadPage()})):t.$toast.show(e.message||"取消订单失败，请稍后再试")})}})},goLogisticsDetail:function(e){var t=e.currentTarget.dataset.orderid;this.$navigate(f.default.logisticsList({shopOrderId:t,orderId:t,type:"order"}))},orderRateOpt:function(e){u.default.put(v,"orderRateOpt"),this.$redirect(f.default.rateAdd({orderId:e}))},orderAddRateOpt:function(e){u.default.put(v,"orderAddRateOpt"),this.$redirect(f.default.rateAppend({orderId:e}))},pintuanDetail:function(e){this.$navigate(f.default.pinshare({tuanId:e}))},pintuanRed:function(e,t){this.$navigate(f.default.pintuanRed({tuanId:e,itemId:t}))},lotteryResult:function(e,t){this.$navigate("/pages/pintuan/lotteryresult/index",{activityId:e,orderId:t})},operateClick:function(e){var t=this,a=e.currentTarget.dataset,r=e.detail&&e.detail.formId,i=a.operationname,o=a.footdatalist||{};switch(i){case"opt_pay_order":case"opt_prepay_order":case"opt_tailpay_order":if(this.$root.$logForm(r,1),w)return;w=!0,setTimeout(function(){w=!1},3e3),this.$loading.show();(0,c.payOrderOpt)(this.$cashier,o.payOrderId,this.$loading,{successCb:function(){var e=this;w=!1,u.default.put(v,"opt_pay_order"),this.$toast.show("支付成功",function(){e.data.isChannel?e.$navigate(f.default.pinshare({tuanId:o.tuanId})):e.$navigate(f.default.payresult({payOrderId:o.payOrderId}))})}.bind(this),cancelCb:function(){w=!1,this.$toast.show("您已取消支付",function(){wx.navigateBack({delta:1})})}.bind(this)});break;case"opt_cancel_order":(0,c.cancelOrderOpt)(o.payOrderId||o.shopOrderId);break;case"opt_delete_order":(0,c.orderDeleteOpt)(o.shopOrderId);break;case"opt_confirm_order":this.$root.$logForm(r,1),wx.showModal({title:"提示",confirmColor:"#ff5777",content:"请您收到货后再点击“确定”，否则可能钱货两空！",success:function(e){e.confirm&&(0,c.orderConfirmOpt)(o.shopOrderId,o.shopOrderIdEsc).then(function(e){e.success?t.$toast.show(e.message||"确认收货成功",function(){u.default.put(v,"opt_confirm_order"),t.orderRateOpt(o.shopOrderIdEsc)}):t.$toast.show(e.message||"确认收货失败，请稍后再试")})}});break;case"opt_rate_order":this.orderRateOpt(o.shopOrderIdEsc);break;case"opt_append_rate_order":this.orderAddRateOpt(o.shopOrderIdEsc);break;case"opt_remind_ship_order":this.$root.$logForm(r,1),(0,c.orderRemindOpt)(o.shopOrderId).then(function(e){e.success?t.$toast.show(e.message||"提醒商家发货成功"):t.$toast.show(e.message||"提醒失败，请稍后再试")});break;case"opt_pintuan_detail":case"opt_invite_pintuan":this.pintuanDetail(o.tuanId);break;case"opt_pintuan_detail_red":case"opt_invite_pintuan_red":this.pintuanRed(o.tuanId,o.itemId);break;case"opt_choujiang_detail":this.lotteryResult(o.activityId,o.shopOrderId)}},phoneCall:function(e){var t=e.currentTarget.dataset.phone;!!t&&wx.makePhoneCall({phoneNumber:t})},getOrderDetail:function(){var e=this,t={orderId:I};O.request("mwp.OrderManagement.buyerOrderDetail","1",t).then(O.filterResult).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a={};if(t.shopOrderList){var r=t.shopOrderList[0];a.marketType=r.marketType;var i=(0,o.default)(t);a.shopList=i.shopList,a.orderStageList=i.orderStageList,a.shopOrderId=r.shopOrderId,a.payOrderId=r.payOrderId,a.shopOrderIdEsc=r.shopOrderIdEsc,a.isPintuan=r.orderTags&&-1!==r.orderTags.indexOf("PT"),a.isPintuanRed=r.orderTags&&-1!==r.orderTags.indexOf("PT_HB"),a.isTaxCompliance=r.orderTags&&-1!==r.orderTags.indexOf("taxCompliance"),a.isChannel=r.orderTags.indexOf("PT")>=0&&-1==r.orderTags.indexOf("customPt"),g=a.isPintuan?f.default.pintuanOrderList({orderStatus:"all"}):f.default.orderList({orderStatus:"all"}),v=a.isPintuan?"PT_Detail_Operate":"Order_Detail_Operate",e.wallInit(a.isPintuan),a.hasWallInited=!0;var l=(0,s.default)(r.orderStatus,i.orderStageList);if(a.statusList=l,a.statusList.remainTime=r.remainTime,a.statusList.remainEndTime=Math.ceil((new Date).getTime()/1e3)+r.remainTime,a.statusList.remainTimeString=(0,p.transformRemainTime)(r.remainTime),t.shipDetail){var u=(0,n.default)(t.shipDetail.packageTrackInfos,t.shipDetail.receiverAddressInfo),c={shopOrderId:r.shopOrderId,shopOrderIdEsc:r.shopOrderIdEsc,buyerMobile:r.extraInfo&&r.extraInfo.buyerMobile};a.logisticsList=Object.assign(u,c)}a.discountList=i.discountList;var h=t.payOrder,m=(r.shopOrderPromotionInfo.payReturnInfo,(0,d.default)(t));"market_meilishuo"==a.marketType&&(m.operationsList=[]),a.footDataList=Object.assign(m),a.orderOperations=h.payOrderOperations.concat(r.shopOrderOperations),a.cancelShow=a.deleteShow=null;var O=!0,I=!1,_=void 0;try{for(var w,T=a.orderOperations[Symbol.iterator]();!(O=(w=T.next()).done);O=!0)switch(w.value.operationName){case"opt_cancel_order":a.cancelShow=!0;break;case"opt_delete_order":a.deleteShow=!0}}catch(e){I=!0,_=e}finally{try{!O&&T.return&&T.return()}finally{if(I)throw _}}a.isAjaxLoading=!1,e.setData(a,e.setTimeInterval.bind(e)),e.$shopList.setOption({shopList:i.shopList}),e.$loading.hide()}}).catch(function(t){e.$loading.hide(),e.$toast.show(t.message)})},setTimeInterval:function(){var e=this;clearInterval(_);var t=this.data&&this.data.statusList;t&&t.remainTime&&(t.prevTimeText||t.timeText)&&(_=setInterval(function(){var a=t.remainEndTime-Math.ceil((new Date).getTime()/1e3),r=(0,p.transformRemainTime)(a);e.setData&&e.setData({"statusList.remainTimeString":r})},1e3))},onShow:function(){this.$loading.show(),this.reloadPage()},onHide:function(){clearInterval(_)},onUnload:function(){clearInterval(_)}}); 
 			}); 	require("pages/order/detail/index.js");
 		__wxRoute = 'pages/order/list/index';__wxRouteBegin = true; 	define("pages/order/list/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var a=e(require("../../../common/m.js")),i=(e(require("../../../components/loading/index.js")),e(require("../../../common/base/createPage"))),r=(e(require("../../../common/service/url")),e(require("../common/parseData/parseData.js"))),n=require("../common/common.js"),s=e(require("./components/orderCard/index")),d=e(require("../../../components/loading/index")),o=e(require("../../../components/toast/index")),u=e(require("../../../components/empty/index")),l=e(require("../../../components/wall/index")),c=e(require("../../../components/end/index")),m=e(require("../../../common/utils/cache")),h=e(require("../../../components/cashier/index")),g=a.default.MWP,p=null;(0,i.default)({components:{wall:l.default,orderCard:s.default,toast:o.default,empty:u.default,end:c.default,loading:d.default,cashier:h.default},data:{isAjaxLoading:!0,scrollTop:0,isEnd:!1,needMlsList:!1,page:1,tipShow:!0,switchOrderType:"new",tabOrderStatus:"all",marketType:getApp().data.marketType,orderList:[],remainTimeObj:null,hasWallInited:!1,tabTextList:[{text:"全部",status:"all"},{text:"待付款",status:"created"},{text:"已付款",status:"unshipped"},{text:"待收货",status:"unreceived"},{text:"待评价",status:"received_and_completed"},{text:"售后",status:"refund_orders"}],tabCount:[]},onLoad:function(e){var t=this;this.setData({tabOrderStatus:e.orderStatus||"all"},function(){t.getOrderLits()})},wallInit:function(){this.data.hasWallInited||this.$wall.initWall({cKey:"xcx-order-guess"})},onReady:function(){var e=this;this.$orderCard.$on("showMore",function(a,i){var r="orderList["+a+"].shopList["+i+"]isShowMore";e.setData(t({},r,!0))}),this.$orderCard.$on("reloadPage",function(t){e.setData({orderList:[],isEnd:!1,page:1},function(){e.getOrderLits()})}.bind(this))},PtListScrollEvent:function(){var e=this;this.data.isAjaxLoading||this.data.isEnd||this.setData({isAjaxLoading:!0},function(){e.getOrderLits(!0)})},switchOrder:function(e){var t=this,a=e.currentTarget.dataset.type||"",i=this.data.tabOrderStatus;a==this.data.switchOrderType||this.data.isAjaxLoading||(this.$loading.show(),this.setData({isAjaxLoading:!0,switchOrderType:a,orderList:[],page:1,isEnd:!1,tabOrderStatus:"old"==a?"all":i,marketType:"old"==a?"market_meilishuo":getApp().data.marketType},function(){t.getOrderLits()}))},getOrderLits:function(e){var t=this;clearInterval(p);var a={status:this.data.tabOrderStatus,page:this.data.page||1,pageSize:10,marketType:this.data.marketType,sellerUserId:getApp().data.sellerUserId};g.request("mwp.OrderManagement.buyerOrderList","1",a).then(g.filterResult).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.renderOrderList(a,e)}).catch(function(e){t.$loading.hide(),t.$toast.show(e.message)})},renderOrderList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.data.orderList.slice(0),s={};(i=a?i.concat((0,r.default)(t)):(0,r.default)(t)).map(function(e,t){var a=!/ORDER_CANCELLED|ORDER_CLOSED|tuan_tuanSuccess|tuan_tuanFailed|tuan_waitPay/.test(e.orderStatus);if(e.remainTime&&a){var i=Math.ceil((new Date).getTime()/1e3)+e.remainTime;s[e.shopOrderId]={remainTime:e.remainTime,remainEndTime:i,remainTimeString:(0,n.transformRemainTime)(e.remainTime)}}});var d=t.countInfo||{},o="new"==this.data.switchOrderType?[d.unpaidOrderCount,d.waitShippedOrderCount,d.waitReceivedOrderCount,d.waitingRateOrderCount]:[],u=++this.data.page,l=t.isEnd,c=t.needMlsList;this.wallInit(),this.setData({isEnd:l,needMlsList:c,page:u,remainTimeObj:s,orderList:i,tabCount:o,hasWallInited:!0,isAjaxLoading:!1},function(){e.$loading.hide()}),Object.keys(s).length>0&&(p=setInterval(function(){var t=e.data.remainTimeObj||{},a=!0,i=!1,r=void 0;try{for(var s,d=Object.keys(t)[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var o=s.value,u=t[o].remainEndTime-Math.ceil((new Date).getTime()/1e3);t[o].remainTimeString=(0,n.transformRemainTime)(u)}}catch(e){i=!0,r=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw r}}e.setData({remainTimeObj:t})},1e3))},onUnload:function(){clearInterval(p)},onHide:function(){clearInterval(p)},onShow:function(){var e=this;if(m.default.getAndRemove("Order_Detail_Operate")||m.default.getAndRemove("PT_Detail_Operate")){this.$loading.show();var t={isEnd:!1,isAjaxLoading:!0,page:1,scrollTop:0};this.setData(t,function(){e.getOrderLits()})}},clearTip:function(){this.setData({tipShow:!1})},triggerTabChoose:function(e){var t=this;this.$loading.show();var a=e.currentTarget.dataset;this.$logE("WEB_order_tab",{tabName:a.text}),this.setData({isAjaxLoading:!0,isEnd:!1,page:1,tabOrderStatus:a.status,orderList:[]},function(){t.getOrderLits()})}}); 
 			}); 	require("pages/order/list/index.js");
 		__wxRoute = 'pages/order/ptlist/index';__wxRouteBegin = true; 	define("pages/order/ptlist/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/m.js")),a=t(require("../../../common/base/createPage")),i=t(require("../../../common/service/url")),n=t(require("../common/parseData/parseData.js")),r=require("../common/common.js"),s=t(require("./components/orderCard/index")),o=t(require("../../../components/toast/index")),d=t(require("../../../components/empty/index")),u=t(require("../../../components/loading/index")),l=t(require("../../../common/utils/cache")),c=t(require("../../../components/cashier/index")),m=e.default.MWP,h=e.default.MCE,g=null;(0,a.default)({components:{orderCard:s.default,toast:o.default,empty:d.default,loading:u.default,cashier:c.default},data:{isAjaxLoading:!0,wallList:[],scrollTop:0,isEnd:!1,needMlsList:!1,page:1,tipShow:!0,switchOrderType:"new",tabOrderStatus:"all",marketType:getApp().data.marketType,orderList:[],remainTimeObj:null,tabTextList:[{text:"全部",status:"all"},{text:"待付款",status:"notPay"},{text:"拼团中",status:"tuaning"},{text:"拼团成功",status:"tuanSuccess"},{text:"拼团失败",status:"tuanFailed"}],$wallPtMore:{link:"/pages/pintuanIndex/index",name:"大家都在拼",marginTop:16,marginBottom:0}},onLoad:function(t){var e=this;this.setData({tabOrderStatus:t.orderStatus||"all"},function(){e.getOrderLits()}),this.$empty.setData({callback:function(){this.$navigate(i.default.pintuanIndex())}.bind(this)}),this.getPTWallList()},onReady:function(){var t=this;this.$orderCard.$on("reloadPage",function(e){t.setData({orderList:[],isEnd:!1,page:1,tabOrderStatus:e},function(){t.getOrderLits()})}.bind(this,"all"))},clearTip:function(){this.setData({tipShow:!1})},PtListScrollEvent:function(){var t=this;this.data.isAjaxLoading||this.data.isEnd||this.setData({isAjaxLoading:!0},function(){t.getOrderLits(!0)})},switchOrder:function(t){var e=this,a=t.currentTarget.dataset.type||"",i=this.data.tabOrderStatus;a==this.data.switchOrderType||this.data.isAjaxLoading||(this.$loading.show(),this.setData({switchOrderType:a,orderList:[],page:1,isAjaxLoading:!0,isEnd:!1,tabOrderStatus:"old"==a?"all":i,marketType:"old"==a?"market_meilishuo":getApp().data.marketType},function(){e.getOrderLits()}))},getOrderLits:function(t){var e=this;clearInterval(g);var a={status:this.data.tabOrderStatus,page:this.data.page||1,pageSize:10,marketType:this.data.marketType};m.request("mwp.enzo.pinTuanOrderList","1",a).then(m.filterResult).then(function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.renderOrderList(a,t)}).catch(function(t){e.$loading.hide(),e.$toast.show(t.message)})},renderOrderList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments[1],i=this.data.orderList.slice(0),s={};(i=a?i.concat((0,n.default)(e)):(0,n.default)(e)).map(function(t,e){var a=!/ORDER_CANCELLED|ORDER_CLOSED|tuan_tuanSuccess|tuan_tuanFailed|tuan_waitPay/.test(t.orderStatus);if(t.remainTime&&a){var i=Math.ceil((new Date).getTime()/1e3)+t.remainTime;s[t.shopOrderId]={remainTime:t.remainTime,remainEndTime:i,remainTimeString:(0,r.transformRemainTime)(t.remainTime)}}});var o=++this.data.page,d=e.isEnd,u=e.needMlsList;this.setData({isEnd:d,page:o,needMlsList:u,remainTimeObj:s,orderList:i,isAjaxLoading:!1},function(){t.$loading.hide()}),Object.keys(s).length>0&&(g=setInterval(function(){var e=t.data.remainTimeObj||{},a=!0,i=!1,n=void 0;try{for(var s,o=Object.keys(e)[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var d=s.value,u=e[d].remainEndTime-Math.ceil((new Date).getTime()/1e3);e[d].remainTimeString=(0,r.transformRemainTime)(u)}}catch(t){i=!0,n=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw n}}t.setData({remainTimeObj:e})},1e3))},onHide:function(){clearInterval(g)},onUnload:function(){clearInterval(g)},onShow:function(){var t=this;if(l.default.getAndRemove("PT_Detail_Operate")){this.$loading.show();var e={isEnd:!1,isAjaxLoading:!0,page:1,scrollTop:0};this.setData(e,function(){t.getOrderLits()})}},getPTWallList:function(){var t=this;h.get({pid:"43991",page:1,pageSize:24},!0).then(function(e){t.setData({wallList:e.list||[]})}).catch(function(e){t.$toast.show(e.message)})},triggerTabChoose:function(t){var e=this;this.$loading.show();var a=t.currentTarget.dataset;this.$logE("WEB_order_tab",{tabName:a.text}),this.setData({isEnd:!1,isAjaxLoading:!0,page:1,tabOrderStatus:a.status,orderList:[]},function(){e.getOrderLits()})}}); 
 			}); 	require("pages/order/ptlist/index.js");
 		__wxRoute = 'pages/payresult/index';__wxRouteBegin = true; 	define("pages/payresult/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../common/m.js")),n=e(require("../../components/loading/index.js")),r=e(require("../../components/toast/index")),i=e(require("../../common/base/createPage")),o=(e(require("../../common/service/url")),e(require("../../components/wall/index"))),a=e(require("../../common/utils/imgUrlTool")),s=e(require("./components/totalMount/index.js")),u=e(require("../../common/utils/cache")),l=t.default.MWP;(0,i.default)({components:{toast:r.default,loading:n.default,wall:o.default,totalMount:s.default},data:{orderId:"",orderUrl:"",payPrice:"",shipInfo:{},itemOrderList:[],leftItem:0,showMore:!1,bannerImg:"",showBanner:!1,bannerLink:"",array:[{message:"foo"},{message:"bar"}]},onShow:function(){},onLoad:function(e){var t=this,n={},r=e.payOrderId||"";n.payOrderId=r,l.request("mwp.TradeWebBuy.paySuccessActionlet","1",n).then(l.filterResult).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.jiajiagouInfo&&e.jiajiagouInfo.toShow&&t.getJiajiagouInfo(r);for(var n=e.itemOrderListInfo&&e.itemOrderListInfo.itemOrderList||[],i=0;i<n.length;i++){var o=n[i],s=o.imgUrl,l=o.nowPrice;n[i].httpsImg=a.default.getWidthSuffix(s,112),n[i].nowPrice=(l/100).toFixed(2)}var d=n.length>1?"orderList":"orderDetail",c=e.bannerInfo&&e.bannerInfo.resourceId;!!c&&t.getBannerInfo(c);var f=!1;"蘑菇街女装"===u.default.get("appName")&&(f=!0),t.setData({showBanner:f,orderId:e.payOrderId+"",orderUrl:d,payPrice:(e.actualPayAmount+"")/100,shipInfo:e.shipInfo||{},itemOrderList:n,leftItem:n.length-4},function(){t.initWall()})}).catch(function(e){t.$loading.hide(),t.$toast.show(e.message)})},getBannerInfo:function(e){var t=this;l.request("mwp.darwin.multiget","3",{pids:e}).then(l.filterResult).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n[e]&&n[e].list||[];if(r.length>0){var i=r[0].miniLink,o=r[0].miniImage;t.setData({bannerImg:o,bannerLink:i})}})},getJiajiagouInfo:function(e){var t=this;l.request("mwp.aston.getAccumulation","1",{orderId:e}).then(l.filterResult).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.$totalMount.init(e)})},bannerFunc:function(e){var t=e.currentTarget.dataset.link;!!t&&this.$navigate(t)},initWall:function(){this.$wall.initWall({cKey:"xcx-pay"})},doShowMore:function(){this.setData({showMore:!0})}}); 
 			}); 	require("pages/payresult/index.js");
 		__wxRoute = 'pages/personal/index';__wxRouteBegin = true; 	define("pages/personal/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e>99?"99+":e}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("../../common/base/createPage")),o=e(require("../../common/m")),i=e(require("../../common/service/url")),r=e(require("../../common/service/user")),a=e(require("../../common/utils/cache")),s=e(require("../../common/utils/debug")),u=e(require("../../components/imcall/index")),d=e(require("../../components/loading/index")),c=e(require("../../components/toast/index")),l=o.default.MWP,h=["fav","footprint","pintuanOrderList","feedback"].reduce(function(e,t){return e[t]=!!i.default[t],e},{});exports.default=(0,n.default)({_loading:null,_recommendTime:0,_debugCount:0,_debugTime:0,components:{toast:c.default,loading:d.default,im:u.default},data:{needLogin:!1,user:{userName:"",avatarUrl:""},order:{cObligations:0,cReceipt:0,cEvaluate:0},expireCoupon:0,visibility:h,$activeEntry:{makeupKey:"top4x",collectFormId:!0,boxMinHeight:"210rpx",boxMargin:0,itemWidth:"168rpx",itemHeight:"180rpx",itemMargin:"0 0 20rpx 16rpx",ptpC:"mod_personal_activeEntry"}},onLoad:function(){this.$im.setImOpts({shopId:getApp().data.shopId})},onShow:function(){var e=this;this.$loading.show(),this.setData({showDebug:s.default.read().showDebug}),r.default.ensure().then(function(){return e.loadData()}).then(function(){e.$loading.hide()}).catch(function(t){e.$loading.hide(),e.handleError(t)}).then(function(){})},onReady:function(){},onPullDownRefresh:function(){var e=this;if(this.data.needLogin)return wx.stopPullDownRefresh();this.__makeup__&&this.__makeup__.reload(),this.loadData().then(function(){wx.stopPullDownRefresh()}).catch(function(t){wx.stopPullDownRefresh(),e.handleError(t)}).then(function(){return e.loadRecommends()})},getUser:function(){var e=r.default.userInfo||{};return{userName:e.uname||"",avatarUrl:e.avatar||""}},loadData:function(){var e=this;return this._loading?this._loading:this._loading=Promise.all([this.getOrderStatus()]).then(function(){e._loading=null}).catch(function(t){throw e.setOrder(),e._loading=null,t})},getOrderStatus:function(){var e=this;return l.request("mwp.OrderManagement.buyerOrderCount","1",{marketType:getApp().data.marketType,sellerUserId:getApp().data.sellerUserId}).then(l.filterResult).then(function(t){e.setOrder(t)})},setOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setData({needLogin:!1,user:this.getUser(),order:{cObligations:t(e.unpaidOrderCount),cReceipt:t(e.waitReceivedOrderCount),cEvaluate:t(e.waitingRateOrderCount)}})},loadRecommends:function(){},handleError:function(e){r.default.showUserError(e)?this.setData({needLogin:!0}):this.$toast.show(e.message)},handleLogin:function(){var e=this;this.$loading.show(),r.default.login().then(function(){return e.$loading.hide(),e.loadData()}).catch(function(t){e.$loading.hide(),e.handleError(t)})},handleNavigate:function(e){var t=e.currentTarget.dataset;t.query&&(Object.assign(t,t.query),delete t.query),this.$navigate(e)},chooseAddress:function(){wx.canIUse&&wx.canIUse("chooseAddress")?wx.chooseAddress({success:function(e){var t={phone:"",city:e.cityName,mobile:e.telNumber,street:"",area:e.countyName,realName:e.userName,address:e.detailInfo,zip:e.postalCode,marketType:getApp().data.marketType,province:e.provinceName};l.request("mwp.TradeWebLogistics.AddReceiveAddressActionlet","1",t).then(l.filterResult).catch(function(e){console.error("Fail to save address:",e.message)})},fail:function(e){e.errMsg.endsWith("cancel")||(wx.canIUse&&wx.canIUse("openSetting")?wx.showModal({title:"",content:"需要打开小程序的设置重新授权获取您的收货地址",cancelColor:"#666666",confirmText:"去设置",confirmColor:"#ff5777",success:function(e){e.confirm&&wx.openSetting({})}}):this.$toast.show("需要微信版本升级才能重新授权读取地址哟～"))}}):this.$toast.show("需要微信版本升级才能读取地址哟～")},launchWallet:function(e){if(this.$canLaunch())this.$launch(e);else{var t="https://s10.mogucdn.com/mlcdn/c45406/171011_3ib5c23jl174chdk0lc1bgdk8a64f_600x600.jpg";wx.showModal({title:"提示",content:'当前微信版本不支持跳转小程序，请在之后的图片长按"识别图中的小程序码"，或保存图片后扫码。',showCancel:!1,confirmColor:a.default.get("primaryColor"),success:function(){wx.previewImage({current:t,urls:[t]})}})}},onSwitchDebug:function(e){if(!this.data.showDebug){if(0===this._debugTime&&(this._debugTime=e.timeStamp),e.timeStamp-this._debugTime<=300){if(this._debugCount++,this._debugTime=e.timeStamp,this._debugCount<6)return;this.setData({showDebug:!0})}this._debugCount=0,this._debugTime=0}}}); 
 			}); 	require("pages/personal/index.js");
 		__wxRoute = 'pages/pinshare/index';__wxRouteBegin = true; 	define("pages/pinshare/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("../../common/m")),e=t(require("../../common/base/createPage")),n=t(require("../../common/utils/makeup")),o=t(require("./data")),a=t(require("../../common/service/url")),s=t(require("./components/pinshareInfo/index")),r=t(require("../../components/wall/index")),l=t(require("../../components/quickNavigation/index")),u=t(require("../../components/activeEntry/index")),h=t(require("../../common/live/index")),c=t(require("../../common/utils/imgUrlTool")),p=t(require("../../components/redPacket/index")),f=t(require("../../components/getCoupon/index")),d=t(require("../../components/toast/index")),m=t(require("../../components/salesEntry/index")),g=t(require("../../components/floatTip/index")),v=t(require("../../common/utils/cache")),w=i.default.MCE;exports.default=(0,e.default)({components:{pinshareInfo:s.default,wall:r.default,quickNavigation:l.default,activeEntry:u.default,activeEntryCategory:u.default,salesEntry:m.default,getCoupon:f.default,toast:d.default,redPacket:p.default,floatTip:g.default},data:o.default,onLoad:function(t){var i=this;this.pageOptions=t,this.optionsReady=this.$getOptions().then(function(t){i.pageOptions=t}),this.$quickNavigation.init({bottom:48}),this.diffPram={pidPinGoods:65817},this.shareMessageTitle="",this.isWxshop(),this.makeup()},onReady:function(){var t=this;console.log("onready"),this.optionsReady=this.$getOptions().then(function(i){t.initPintuan(),t.initWall(),t.initQiangWall(),t.initLive();new n.default(t,"78015"),console.log("111",i._mgjuuid),t._mgjuuid=i._mgjuuid||"",t._mgjuuid&&t.$redPacket.render({pid:79582})})},onShow:function(){this.data.tuanInfo.tuanId&&(console.log("onshow tuanInfo"),this.initPintuan())},onPageScroll:function(t){var i=this,e=t.scrollTop;setTimeout(function(){i.$floatTip.handleShowHideTip(e)},100)},isWxshop:function(){"蘑菇街女装"===v.default.get("appName")?this.setData({isWxshop:!0}):this.setData({isWxshop:!1})},makeup:function(){var t=this;this.$on("__makeup_done__",function(i,e,n){n&&e&&e.config&&e.config.list&&e.config.list.length>0&&(t.homePageInfo=e.config.list[0]||{},t.floatTipInfo=e.floatTip.list[0]||{},t._makeupCallback())})},_makeupCallback:function(){var t=this.homePageInfo;this._setDataPageInfo(),this._setDataCoupon(),this.initFloat(t)},_setDataPageInfo:function(){var t=this.homePageInfo,i=t.pinTuanShareTitle;this.shareMessageTitle=t.shareMessageTitle||"",this.setData({pinTuanShareTitle:i,showCoupon:"1"===t.showCoupon,showActiveEntry:"1"===t.showActiveEntry,showTopBanner:"1"===t.showTopBanner})},_setDataCoupon:function(){var t=this.homePageInfo;"1"===t.showCoupon&&t.couponPid&&this.$getCoupon.setCoupon({$toast:this.$toast,pid:t.couponPid||"56251",img:t.couponImg||"https://s10.mogucdn.com/mlcdn/c45406/170705_8d3e11jji0b36icl8c36469fhh1dc_750x180.gif"})},initPintuan:function(){this.$pinshareInfo.initPinshareInfo(this.pageOptions)},initWall:function(){var t=this,i={pid:this.diffPram.pidPinGoods,page:1,pageSize:3};w.get(i).then(function(i){t.setData({wallList:i.list||[]})}).catch(function(i){t.$toast.show(i.message)})},initUnJoinInfo:function(){this.setData({wallTitle:"猜你喜欢",ptpC:"pinshare_isUnJoin"}),this.$activeEntry.setData({ptpC:"pinshare_isUnJoin"}),this.$activeEntryCategory.setData({ptpC:"pinshare_isUnJoin"})},initJoinInfo:function(){this.setData({ptpC:"pinshare_isJoin"})},initQiangWall:function(){this.$wall.setDataSource({source:"resOther",api:"mwp.ferrari.lastcrazy",ver:"1.0"}),this.$wall.handleAjaxResOtherCallback=function(t){var i=t.page;t.param={},t.param.page=i,t.wall={},t.wall.isEnd=t.isEnd,t.wall.docs=t.list},this.$wall.handOtherItem=function(t,i){return t.image=c.default.getGoodsRatioSuffix(t.image,300,"1:1"),t.hasSold=t.total-t.left||0,t.schedule=0===t.left?"100%":0===t.hasSold?0:t.hasSold/t.total*100+"%",t};var t={};t=this.data.joinInfo.isLowPrice?{bizKey:"rush_small_program",minPrice:0,maxPrice:20}:{bizKey:"rush_small_program"},this.$wall.initWall(t)},initLive:function(){this.pageOptions&&this.pageOptions.liveParams&&this.setData({isShowReturn:!0})},initFloat:function(t){1==t.showFloatTip&&this.$floatTip.initFloatTip(this.floatTipInfo)},onShareAppMessage:function(t){var i="",e=this.data.tuanInfo,n=e.itemInfo,o=this.pageOptions,s=e.activityId||"";return i=e.isJoin?"我"+n.price+"元拼了"+n.title+"，快来拼团吧":n.price+"元一起拼"+n.title,o.businessId||(o.businessId=s),{title:this.shareMessageTitle+i,path:a.default.pinshare(o),success:function(t){},eventParams:{businessId:s},fail:function(t){}}},onPullDownRefresh:function(){var t=this;this.initPintuan(),this.timer_1=setTimeout(function(){wx.stopPullDownRefresh(),clearTimeout(t.timer_1)},500)},onReachBottom:function(){this.$wall.wallScrollEvent()},methods:{canUseShare:function(t){this.$root.$logE("016000151",{}),wx.canIUse&&wx.canIUse("button.open-type.share")?console.log("分享成功"):this.$pinshareInfo.$dialog.$toast.show("请点击右上角分享",function(){},500)},formSubmitHandler:function(t){var i=t.detail.formId;this.$logForm(i,2)},returnToLive:function(){var t=this;this.optionsReady.then(function(){h.default.returnToLive(t.pageOptions.liveParams,t.$navigate.bind(t))})}}}); 
 			}); 	require("pages/pinshare/index.js");
 		__wxRoute = 'pages/pintuan/lotteryresult/index';__wxRouteBegin = true; 	define("pages/pintuan/lotteryresult/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/m")),a=t(require("../../../common/service/user")),o=t(require("../../../common/base/createPage")),i=t(require("../../../components/loading/index")),r=t(require("../../../components/toast/index")),n=t(require("../../../components/wall/index")),s=t(require("../../../common/utils/imgUrlTool")),d=(e.default.MCE,e.default.MWP),l=e.default.fn.sendMsg;(0,o.default)({data:{prizeIcon:"https://s10.mogucdn.com/mlcdn/c45406/170704_57j50b0j5k46c2ahh85e1lbj4hca8_322x67.png",$wallPtMore:{link:"/pages/pintuanIndex/index",name:"逛逛其他拼团",marginTop:0,marginBottom:0}},components:{loading:i.default,toast:r.default,wall:n.default},onLoad:function(t){this.$loading.show(),this.activityId=t.activityId,this.orderId=t.orderId,this.stage=t.stage||""},onReady:function(){this.getLotteryData(this.activityId,this.orderId,this.stage)},getLotteryData:function(t,e,a){var o=this;d.request("mwp.enzo.lotteryResult","1",{activityId:t,orderId:e,stage:a}).then(d.filterResult).then(function(t){console.log(t),o.initData(t),o.$loading.hide()}).catch(function(t){o.$loading.hide(),o.handleRequestError(t)})},handleRequestError:function(t){console.log(t),l(t,{_author:"changsheng",threshold:1}),a.default.showUserError(t)||this.$toast.show(t.message)},initData:function(t){var e=t.prizeType,a=t.lotteryProcess,o=t.awardUsers,i=(t.userType,t.tuanType),r="已开奖",n="恭喜以下幸运用户中奖！",d=!1,l="notAward";if("hasLottery"===a){switch(e){case"notAward":r="已开奖",n="恭喜以下幸运用户中奖！",d=!1,l="notAward";break;case"coupon":r="谢谢参与",n="支付款项将退回至原账户，再接再厉～",d=!1,l="coupon";break;case"prize":r="中奖啦",n="商品将在活动结束后3天内发货",d=!1,l="prize";break;default:r="已开奖",n="恭喜以下幸运用户中奖！",d=!1,l="notAward"}o&&o.length>0?o=o.map(function(t){var e=t.avatar;return Object.assign({},t,{avatar:s.default.getGoodsRatioSuffix(e,100,"1:1")})}):("notAward"===l&&(n="快去看看其他拼团吧～"),this.$wall.setDataSource({source:"mwp_mait"}),this.$wall.initWall({pid:"88896"}))}else r="等待开奖",n=8===i?"成团数达要求立即开奖并公布中奖结果":"活动结束后24小时内公布中奖结果。",d=!1,l="notHasLottery",this.$wall.setDataSource({source:"mwp_mait"}),this.$wall.initWall({pid:"88896"});var u=t.itemInfo;u.pic=s.default.getGoodsRatioSuffix(u.pic,40,"1:1"),this.setData(Object.assign({},t,{prizeText:r,prizeDescText:n,showButton:d,type:l,awardUsers:o,itemInfo:u}))}}); 
 			}); 	require("pages/pintuan/lotteryresult/index.js");
 		__wxRoute = 'pages/pintuanActive/index';__wxRouteBegin = true; 	define("pages/pintuanActive/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=function(){function t(t,e){var a=[],i=!0,r=!1,n=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(a.push(o.value),!e||a.length!==e);i=!0);}catch(t){r=!0,n=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw n}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=t(require("../../common/base/createPage")),i=require("../../common/utils/lazyData"),r=t(require("../../common/utils/imgUrlTool")),n=t(require("../../components/wall/index_tabNav")),o=t(require("../../components/bottomNavBar/index")),s=t(require("../../components/redPacket/index")),l=t(require("../../common/utils/cache")),u=["54056"];(0,a.default)({components:{wall:n.default,bottomNavBar:o.default,redPacket:s.default},data:{shareTitle:"约Ta一起来拼吧，每天十万件好货更新给你！",image:"",$bottomNavBar:{pids:["57077"]},isWxshop:void 0},onShow:function(){this.showGame&&"1"===this.showGame&&this.$redPacket.render({pid:74118}),this._setPageTitle()},onLoad:function(t){var a=this,i=t.pid?u.concat([t.pid]):u;this.setData({pids:i}),this.showGame=t.showGame,this.pageTitle=t.title||"",this.$bottomNavBar.initBottomNavBar(),this.$on("__lazy-data__",function(i,n){var o=a.data.pids[0],s=o&&n&&n[o]&&n[o].list||[];s&&s.length>0&&s[0]&&s[0].title&&a.setData({shareTitle:s[0].title});var l=a.data.pids[1],u=l&&n&&n[l]&&n[l].list||[],d=[],c=0;if(u&&u[0]&&u[0].image&&(a.setData({image:r.default.getWidthSuffix(u[0].image,750)}),c=230),u&&u.length>0){var h=!0,m=!1,f=void 0;try{for(var p,v=u.entries()[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=e(p.value,2),w=(g[0],g[1]);d.push({name:w.cateName,pid:w.pid})}}catch(t){m=!0,f=t}finally{try{!h&&v.return&&v.return()}finally{if(m)throw f}}a.$wall.setDataSource({source:"mwp_mait"}),d&&d.length>1&&a.$wall.setWallNav({scrollNavRpxTop:c,navData:d}),"detail"==t.fromPage&&(a.$wall.useRedirect=!0),a.$wall.initWall({pid:d[0].pid})}})},onReady:function(){(new i.LazyData).init(this,!0),this._setPageTitle()},isWxshop:function(){"蘑菇街女装"===l.default.get("appName")?this.setData({isWxshop:!0}):this.setData({isWxshop:!1})},onShareAppMessage:function(t){return{title:this.data.shareTitle,success:function(t){},fail:function(t){}}},methods:{_setPageTitle:function(){var t=this.pageTitle?decodeURIComponent(this.pageTitle):"蘑菇街拼团";wx.setNavigationBarTitle({title:t})}}}); 
 			}); 	require("pages/pintuanActive/index.js");
 		__wxRoute = 'pages/pintuanIndex/index';__wxRouteBegin = true; 	define("pages/pintuanIndex/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function t(t,e){var o=[],i=!0,a=!1,r=void 0;try{for(var n,l=t[Symbol.iterator]();!(i=(n=l.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=t(require("../../common/base/createPage")),i=t(require("../../common/utils/makeup")),a=t(require("../../components/meiliSwiper/index")),r=t(require("../../components/activeEntry/index")),n=t(require("../../components/wall/index_tabNav")),l=t(require("../../components/bottomNavBar/index")),s=t(require("components/ptBroadcast/index")),u=t(require("../../components/scrollGoods/index")),p=t(require("../../common/utils/cache"));exports.default=(0,o.default)({components:{ptBroadcast:s.default,meiliSwiper:a.default,wall:n.default,bottomNavBar:l.default,categoryEntry:r.default,scrollGoods:u.default},data:{$ptBroadcast:{},$meiliSwiper:{makeupKey:"swiper",indicatorActiveColor:"#ff5777",boxBgColor:"none",boxHeight:"230rpx",boxPadding:0,boxMargin:0,swiperWidth:"100%",swiperHeight:"230rpx",swiperBoxShadow:"none",maxCount:10,ptpC:"mod_pintuanIndex_banner"},$categoryEntry:{makeupKey:"top4x",itemWidth:"168rpx",itemHeight:"180rpx",boxMargin:"0 0 16rpx 0",ptpC:"mod_pintuanIndex_categoryEntry"},$scrollGoods:{makeupKey:"goods",type:3,boxBgColor:"#ffffff",boxMargin:"0 0 16rpx 0",titleColor:"#333333",priceColor:"#fc3c64",minGoods:0,maxGoods:100,showDiscount:!1,showCountDown:!1,ptpC:"mod_pintuanIndex_scrollGoods"},$bottomNavBar:{makeupKey:"bottomBar"},shareTitle:"这里的商品只要1元，每天十万件好货更新给你！",isWxshop:void 0},onLoad:function(t){var o=this;this.pageTitle=t.title||"",this.$bottomNavBar.initBottomNavBar(),this.$bottomNavBar.setData({isShowBottomBar:!0}),this.isWxshop(),this.$on("__makeup_done__",function(i,a,r){if(r&&a&&a.config){var n=a.config&&a.config.list||[];n&&n.length>0&&n[0]&&n[0].title&&o.setData({shareTitle:n[0].title})}if(r&&a&&a.wallList){var l=a.wallList&&a.wallList.list||[],s=[];if(l&&l.length>0){var u=!0,p=!1,d=void 0;try{for(var c,f=l.entries()[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var m=e(c.value,2),h=(m[0],m[1]);s.push({name:h.cateName,pid:h.pid})}}catch(t){p=!0,d=t}finally{try{!u&&f.return&&f.return()}finally{if(p)throw d}}o.$wall.setDataSource({source:"mwp_mait"}),s&&s.length>1&&o.$wall.setWallNav({scrollNavRpxTop:0,navData:s}),"detail"==t.fromPage&&(o.setData({fromPage:"detail"}),o.$wall.useRedirect=!0),o.$wall.initWall({pid:s[0].pid})}}})},onShow:function(){this._setPageTitle()},onReady:function(){new i.default(this,"82755"),this._setPageTitle()},isWxshop:function(){"蘑菇街女装"===p.default.get("appName")?this.setData({isWxshop:!0}):this.setData({isWxshop:!1})},onShareAppMessage:function(t){return{title:this.data.shareTitle,success:function(t){},fail:function(t){}}},methods:{_setPageTitle:function(){var t=this.pageTitle?decodeURIComponent(this.pageTitle):"蘑菇街拼团";wx.setNavigationBarTitle({title:t})}}}); 
 			}); 	require("pages/pintuanIndex/index.js");
 		__wxRoute = 'pages/pintuanLottery/index';__wxRouteBegin = true; 	define("pages/pintuanLottery/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../common/base/createPage")),o=t(require("../../common/utils/makeup")),a=t(require("../../common/utils/imgUrlTool")),i=t(require("../../components/wall/index")),n=t(require("../../components/bottomNavBar/index")),l=t(require("components/ptWallCount/index")),r=t(require("../../components/scrollGoods/index")),s=t(require("../../components/raindrop/index"));(0,e.default)({components:{wall:i.default,bottomNavBar:n.default,ptWallCount:l.default,scrollGoods:r.default,raindrop:s.default},data:{shareTitle:"约Ta一起来拼吧，每天十万件好货更新给你！",defaultHeight:"",image:"",$bottomNavBar:{makeupKey:"bottomBar"},$wallPtMore:{link:"/pages/pintuanIndex/index",name:"大家都在拼",marginTop:16,marginBottom:0},$ptWallCount:{makeupKey:"lotteryGoods"},$scrollGoods:{makeupKey:"goods",type:3,boxBgColor:"#ffffff",boxMargin:"0 0 16rpx 0",titleColor:"#333333",priceColor:"#fc3c64",minGoods:1,maxGoods:100,showDiscount:!1,showCountDown:!1,ptpC:"mod_pintuanLottery_scrollGoods"}},onLoad:function(t){var e=this;this.pageTitle=t.title||"",this.$bottomNavBar.initBottomNavBar(),this.$bottomNavBar.setData({isShowBottomBar:!0}),this.$on("__makeup_done__",function(o,i,n){if(n&&i&&i.config){var l=i.config&&i.config.list&&i.config.list[0]||{},r=l.shareTitle||"约Ta一起来拼吧，每天十万件好货更新给你！",s=l.banner?a.default.getWidthSuffix(l.banner,750):"",u=l.wallPid||"43991";e.setData({shareTitle:r,image:s,defaultHeight:"auto"}),e.$wall.setDataSource({source:"mwp_mait"}),"detail"==t.fromPage&&(e.$wall.useRedirect=!0),e.$wall.initWall({pid:u})}})},onShow:function(){this._setPageTitle()},onReady:function(){new o.default(this,"77645"),this._setPageTitle()},onShareAppMessage:function(t){return{title:this.data.shareTitle,success:function(t){},fail:function(t){}}},onReachBottom:function(){this.$wall.wallScrollEvent()},onPageScroll:function(){this.$wall.isSupportSelector&&this.$wall.getInViewItems()},methods:{_setPageTitle:function(){var t=this.pageTitle?decodeURIComponent(this.pageTitle):"抽奖团";wx.setNavigationBarTitle({title:t})}}}); 
 			}); 	require("pages/pintuanLottery/index.js");
 		__wxRoute = 'pages/qiang/index';__wxRouteBegin = true; 	define("pages/qiang/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../common/base/createPage")),i=(e(require("../../common/utils/imgUrlTool")),e(require("../../common/utils/cache"))),a=e(require("../../components/qiangWall/index")),n=e(require("../../components/loading/index")),o=e(require("../../components/toast/index")),r=e(require("../../components/end/index")),s=e(require("../../components/empty/index")),d=e(require("../../components/activeEntry/index")),l=e(require("../../common/utils/makeup"));(0,t.default)({components:{qiangWall:a.default,loading:n.default,toast:o.default,end:r.default,empty:s.default,activeEntry:d.default},data:{$qiangWall:{ptpC:"mod_qiang_wall"},$loading:{},$toast:{},$end:{placeholder:"正在加载~",isEnd:!1},$empty:{type:4,text:"抱歉！没找到相关商品~"},isEmptyShow:!1,$activeEntry:{boxHeight:"128rpx",boxMinHeight:"128rpx",boxPadding:0,boxBgColor:"none",boxMargin:"18rpx 0 18rpx 0",justifyContent:"space-between",listPadding:0,itemWidth:"246rpx",itemHeight:"128rpx",itemMargin:0,itemBorderRadius:0,imageWidth:"100%",imageHeight:"100%",imageBorderRadius:0,titleIsShow:!1,descriptionIsShow:!1,minCount:3,maxCount:3,ptpC:"mod_qiang_activeEntry"}},onLoad:function(e){this.pageTitle=e.title||e.pageTitle||"";var t=e.bizKey||"rush_small_program",a=e.subBizKey||"",n=e.topId||"",o=e.topType||2,r=e.eventTime||"",s=e.source||"WeChat_small_program";if(this.$qiangWall.init({bizKey:t,subBizKey:a,topId:n,topType:o,eventTime:r,source:s}),"蘑菇街女装"===i.default.get("appName")){var d=e.entryMakeupKey||"activeEntry_index",l=this.data.$activeEntry||{};l.makeupKey=d,this.setData({$activeEntry:l})}},onShow:function(){this._setPageTitle()},onReady:function(){this._setPageTitle(),new l.default(this,"84761")},methods:{_setPageTitle:function(){var e=this.pageTitle?decodeURIComponent(this.pageTitle):"限时快抢";wx.setNavigationBarTitle({title:e})}}}); 
 			}); 	require("pages/qiang/index.js");
 		__wxRoute = 'pages/rate/add/index';__wxRouteBegin = true; 	define("pages/rate/add/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(exports,"__esModule",{value:!0});var a=t(require("../../../common/m")),i=t(require("../../../common/base/createPage")),s=t(require("../../../common/utils/imgUrlTool")),o=t(require("../../../components/loading/index")),n=t(require("../../../components/toast/index")),r=t(require("../components/comment/index")),u=t(require("../mixins/form")),h=t(require("../mixins/range")),l=a.default.MWP,d=a.default.fn,c=d.pick,f=d.merge,g={NONE:0,HEIGHT:1,SHOES:2},m={type:g,image:{maxUpload:3},text:{headbarTitle:"添加评价",emptyOrder:"订单不存在",commentPlaceholder:"请留下您宝贵的评价",extraPlaceholder:"数据均匿名",submit:"发表评价",maxUpload:"一次最多发表%d张图片哦~",comment:"还有评价内容等待你填写哦~",goodsStar:"还有宝贝等待你评分哦~",shopStar:"店铺也需要你的评分哦~"}},v={platform:"wx",marketType:getApp().data.marketType,isAnonymous:1,orderId:null,service:5,detail:[]};exports.default=(0,i.default)({pageType:"add",mixins:[u.default,h.default],components:{comment:r.default,loading:o.default,toast:n.default},data:{shouldRender:!1,isAnonymous:!0,shopInfo:{},skus:[],rateService:[],extraOptions:m,ratePageClassName:"",$comment:{placeholder:m.text.commentPlaceholder}},postData:{},tempData:{},methods:{loadData:function(){this.$loading.show();var t=this.postData.orderId;if(t){var e={platform:"wx",marketType:getApp().data.marketType,orderId:t};return l.request("mwp.RateWeb.detail4AddRate","v1",e).then(this.loadSuccessCallBack.bind(this)).catch(this.loadFailCallBack.bind(this))}this.$loading.hide(),wx.showModal({content:m.text.emptyOrder,showCancel:!1,confirmColor:"#ff5777",success:function(){wx.navigateBack()}})},loadSuccessCallBack:function(t){var e=this;this.$loading.hide();var a=t.data,i=void 0===a?{}:a,o=t.ret,n=t.msg,r=void 0===n?"":n;if(o===l.Code.Success){var u=i.skus,h=void 0===u?[]:u,d=i.rateService,f=void 0===d?[]:d;h=h.map(function(t,a){if(e.postData.detail.push({itemInfoId:t.itemInfoId,subOrderId:t.subOrderId,type:t.type,forbidAddImg:t.forbidAddImg,extraInfo:(t.extraInfo||[]).map(function(t){return{key:t.key,necessary:t.necessary,unit:t.unit,name:t.name,value:""}}),imgUrls:[],comment:"",desc:5,price:5,quality:5}),t=c(t,"stockId","nowprice","img","type","logo","title","style","styleKey","size","sizeKey","number","forbidAddImg","imgUrls","rateGoods","extraInfo"),t.nowprice=e.filterPrice(t.nowprice),t.img=s.default.getWidthSuffix(t.img,100),t.imgUrls=t.imgUrls||[],t.rateGoods=(t.rateGoods||[]).map(function(t){return t.score=5,t.unique={key:t.key,skuIndex:a},t}),t.extraInfo=t.extraInfo||[],3===t.extraInfo.length){var i=e.getExtraInfoItem(t.extraInfo,"suit1"),o=e.getExtraInfoItem(t.extraInfo,"height"),n=e.getExtraInfoItem(t.extraInfo,"weight"),r=(i.value||"").split("|"),u=e.getRangeList(o.verify),h=e.getRangeList(n.verify);t.extraPicker={label:"是否合身",text:"请选择",value:[0,0,0],suit1List:r,heightList:u,heightUnit:o.unit,weightList:h,weightUnit:n.unit,isShow:!1,type:g.HEIGHT}}else if(2===t.extraInfo.length){var l=e.getExtraInfoItem(t.extraInfo,"suit2"),d=e.getExtraInfoItem(t.extraInfo,"shoes"),f=(l.value||"").split("|"),m=e.getRangeList(d.verify);t.extraPicker={label:"是否合脚",text:"请选择",value:[0,0],suit2List:f,shoesList:m,shoesUnit:d.unit,isShow:!1,type:g.SHOES}}else t.extraPicker={type:g.NONE};return t.comment="",t}),f.map(function(t){return t.score=5,t.unique={key:t.key},t});var v=c(i,"avatar","shopName","sellerName");this.setData({shouldRender:!0,shopInfo:v,skus:h,rateService:f,extraOptions:m})}else"FAIL_BIZ_670410"===o?wx.showModal({content:r,showCancel:!1,confirmColor:"#ff5777",success:function(){wx.navigateBack()}}):"FAIL_SYS_TESLA_INVOKE_TIMEOUT"===o?this.loadFailCallBack({message:"服务器开小差了，请稍候再试"}):this.loadFailCallBack({message:r})},loadFailCallBack:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:response={}).message;this.$loading.hide(),this.$toast.show(t||"获取订单评价信息失败")},getDetailExtraInfo:function(t){var e=this.getDetail(t).extraInfo,a=void 0===e?[]:e;return this.getExtraInfoData(a)},getSkuExtraInfo:function(t){var e=this.getSku(t).extraInfo,a=void 0===e?[]:e;return this.getExtraInfoData(a)},getExtraInfoData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return 3===t.length?e={suit1:this.getExtraInfoItem(t,"suit1"),height:this.getExtraInfoItem(t,"height"),weight:this.getExtraInfoItem(t,"weight")}:2===t.length&&(e={suit2:this.getExtraInfoItem(t,"suit2"),shoes:this.getExtraInfoItem(t,"shoes")}),e},getExtraInfoItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t.filter(function(t){return t.key===e});return a&&1===a.length?a[0]:{}},rateGoodsHandler:function(t){var a=t.target.dataset,i=a.score,s=a.unique;if(i&&s){var o=s.skuIndex,n=s.key,r=this.getDetail(o),u=this.getSku(o).rateGoods;u.forEach(function(t){t.key===n&&(t.score=i)}),this.setData(e({},"skus["+o+"].rateGoods",u)),r[n]=i}},rateServiceHandler:function(t){var e=t.target.dataset,a=e.score,i=e.unique;if(a&&i){var s=this.data.rateService,o=void 0===s?[]:s,n=i.key;o.forEach(function(t){t.key===n&&(t.score=a)}),this.setData({rateService:o}),this.postData[n]=a}},switchExtraHandler:function(t){var a,i=t.currentTarget.dataset.skuIndex,s=this.getSku(i).extraPicker,o=s.type,n=s.suit1List,r=s.heightList,u=s.weightList,h=s.suit2List,l=s.shoesList;if(s.isShow)this.setData(e({},"skus["+i+"].extraPicker.isShow",!1));else{var d=this.getDetailExtraInfo(i),c=this.getSkuExtraInfo(i),f=[];o===g.HEIGHT?f=[this.getRangeIndex(n,d.suit1.value||"合身"),this.getRangeIndex(r,d.height.value||c.height.value),this.getRangeIndex(u,d.weight.value||c.weight.value)]:o===g.SHOES&&(f=[this.getRangeIndex(h,d.suit2.value||"合脚"),this.getRangeIndex(l,d.shoes.value||c.shoes.value)]),this.setData((a={},e(a,"skus["+i+"].extraPicker.isShow",!0),e(a,"skus["+i+"].extraPicker.value",f),a))}},changeExtraHandler:function(t){var a=t.target.dataset.skuIndex,i=t.detail.value,s=void 0===i?[0,0,0]:i;this.tempData=e({},a,s)},touchMoveExtraHandler:function(t){},cancelExtraHandler:function(t){var a=t.target.dataset.skuIndex;this.setData(e({},"skus["+a+"].extraPicker.isShow",!1))},okExtraHandler:function(t){var a,i=t.target.dataset.skuIndex,s=this.getDetailExtraInfo(i),o=this.getSkuExtraInfo(i),n=this.getSku(i).extraPicker,r=n.type,u=n.suit1List,h=n.heightList,l=n.weightList,d=n.heightUnit,c=n.weightUnit,f=n.suit2List,m=n.shoesList,v=n.shoesUnit,x="";if(r===g.HEIGHT){var I="合身",k=o.height.value,p=o.weight.value,w=this.tempData[i];w&&(I=u[w[0]],k=h[w[1]],p=l[w[2]]),s.suit1.value=I,s.height.value=k,s.weight.value=p,x=[I,k+d,p+c].join(" ")}else if(r===g.SHOES){var y="合脚",E=o.shoes.value,S=this.tempData[i];S&&(y=f[S[0]],E=m[S[1]]),s.suit2.value=y,s.shoes.value=E,x=[y,E+v].join(" ")}this.setData((a={},e(a,"skus["+i+"].extraPicker.isShow",!1),e(a,"skus["+i+"].extraPicker.text",x),a))},editCommentHandler:function(t){var e=t.target.dataset.skuIndex,a=this.getDetail(e).comment;this.$comment.show(a,{skuIndex:e})},changeAnonymousHandler:function(t){var e=!this.data.isAnonymous;this.postData.isAnonymous=e?1:0,this.setData({isAnonymous:e})},submitHandler:function(t){var e=this,a=t.detail.formId;this.$logForm(a,1);var i=!0,s=this.postData.detail;this.data.skus.forEach(function(t,a){(t.rateGoods||[]).forEach(function(t){if(!s[a][t.key])return i=!1,void e.$toast.show(m.text.goodsStar)})}),i&&(s.forEach(function(t){t.extraInfo.forEach(function(t){if(t.necessary&&!t.value)return i=!1,void e.$toast.show(t.name+"不能为空~")})}),i&&(this.data.rateService.forEach(function(t){if(!e.postData[t.key])return i=!1,void e.$toast.show(m.text.shopStar)}),i&&(this.$loading.show(),l.request("mwp.RateWeb.addRate","v1",this.postData).then(this.submitSuccessCallBack.bind(this)).catch(this.submitFailCallBack.bind(this)))))},submitSuccessCallBack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$loading.hide();var e=t.ret,a=t.data,i=void 0===a?{}:a,s=t.msg;e===l.Code.Success?wx.showModal({title:"发表评论成功！",content:i.rateTip||"",showCancel:!1,confirmColor:"#ff5777",success:function(){wx.navigateBack()}}):"FAIL_SYS_TESLA_INVOKE_TIMEOUT"===e?this.$toast.show("服务器开小差了，请稍候再试"):this.submitFailCallBack({message:s})},submitFailCallBack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$loading.hide(),wx.showModal({content:t.message||"发表评价失败",showCancel:!1,confirmColor:"#ff5777"})}},onLoad:function(){var t=this,a=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).orderId;this.postData=f({},v,{orderId:a}),this.tempData={},this.loadData(),this.$comment.setData({ok:function(a,i){var s=i.skuIndex;t.setData(e({},"skus["+s+"].comment",a)),t.getDetail(s).comment=a}}),wx.getSystemInfo({success:function(e){var a=(e.system.split(" ")[0]||"").toLowerCase();t.setData({ratePageClassName:"rate-page--"+a})}})}}); 
 			}); 	require("pages/rate/add/index.js");
 		__wxRoute = 'pages/rate/append/index';__wxRouteBegin = true; 	define("pages/rate/append/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(exports,"__esModule",{value:!0});var a=e(require("../../../common/m")),o=e(require("../../../common/base/createPage")),i=e(require("../../../common/utils/imgUrlTool")),s=e(require("../../../components/loading/index")),n=e(require("../../../components/toast/index")),r=e(require("../components/comment/index")),d=e(require("../mixins/form")),l=a.default.MWP,m=a.default.fn,c=m.pick,u=m.merge,h={image:{maxUpload:3},text:{emptyOrder:"订单不存在",submit:"追加评价",commentPlaceholder:"请填写追加的评论内容",maxUpload:"一次最多发表%d张图片哦~",comment:"还有评价内容等待你添加哦~"}},f={platform:"wx",marketType:getApp().data.marketType,orderId:null,detail:[]};exports.default=(0,o.default)({pageType:"append",mixins:[d.default],components:{comment:r.default,loading:s.default,toast:n.default},data:{shouldRender:!1,isSubmitActive:!1,shopInfo:[],skus:[],extraOptions:h,$comment:{placeholder:h.text.commentPlaceholder}},postData:{},methods:{loadData:function(){this.$loading.show();var e=this.postData.orderId;if(e){var t={platform:"wx",marketType:getApp().data.marketType,orderId:e};return l.request("mwp.RateWeb.detail4AppendRate","v1",t).then(this.loadSuccessCallBack.bind(this)).catch(this.loadFailCallBack.bind(this))}this.$loading.hide(),wx.showModal({content:h.text.emptyOrder,showCancel:!1,confirmColor:"#ff5777",success:function(){wx.navigateBack()}})},loadSuccessCallBack:function(e){var t=this;this.$loading.hide();var a=e.data,o=void 0===a?{}:a,s=e.ret,n=e.msg,r=void 0===n?"":n;if(s===l.Code.Success){var d=o.skus,m=void 0===d?[]:d;m=m.map(function(e,a){return t.postData.detail.push({itemInfoId:e.itemInfoId,subOrderId:e.subOrderId,type:e.type,forbidAddImg:e.forbidAddImg,imgUrls:[],comment:""}),e=c(e,"stockId","nowprice","img","type","logo","title","style","styleKey","size","sizeKey","number","forbidAddImg","imgUrls","comment"),e.nowprice=t.filterPrice(e.nowprice),e.img=i.default.getWidthSuffix(e.img,100),e.imgUrls=e.imgUrls||[],e.previewComment=e.comment||"",e.comment="",e});var u=c(o,"avatar","shopName","sellerName");this.setData({shopInfo:u,skus:m,shouldRender:!0,extraOptions:h})}else"FAIL_BIZ_670411"===s?wx.showModal({content:r,showCancel:!1,confirmColor:"#ff5777",success:function(){wx.navigateBack()}}):"FAIL_SYS_TESLA_INVOKE_TIMEOUT"===s?this.loadFailCallBack({message:"服务器开小差了，请稍候再试"}):this.loadFailCallBack({message:r})},loadFailCallBack:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:response={}).message;this.$loading.hide(),this.$toast.show(e||"获取订单评价信息失败")},editCommentHandler:function(e){var t=e.target.dataset.skuIndex,a=this.getDetail(t).comment;this.$comment.show(a,{skuIndex:t})},submitHandler:function(e){var t=this,a=e.detail.formId;this.$logForm(a,1);var o=!0;this.postData.detail.forEach(function(e){var a=e.comment,i=void 0===a?"":a,s=e.imgUrls,n=void 0===s?[]:s;if(!i&&0===n.length)return o=!1,void t.$toast.show(h.text.comment)}),o&&(this.$loading.show(),l.request("mwp.RateWeb.appendRate","v1",this.postData).then(this.submitSuccessCallBack.bind(this)).catch(this.submitFailCallBack.bind(this)))},submitSuccessCallBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$loading.hide();var t=e.ret,a=(e.data,e.msg);t===l.Code.Success?wx.showModal({content:"追加评论成功！",showCancel:!1,confirmColor:"#ff5777",success:function(){wx.navigateBack()}}):"FAIL_SYS_TESLA_INVOKE_TIMEOUT"===t?this.$toast.show("服务器开小差了，请稍候再试"):this.submitFailCallBack({message:a})},submitFailCallBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$loading.hide(),wx.showModal({content:e.message||"追加评价失败",showCancel:!1,confirmColor:"#ff5777"})}},onLoad:function(e){var a=this,o=e.orderId;this.postData=u({},f,{orderId:o}),this.loadData(),this.$comment.setData({ok:function(e,o){var i=o.skuIndex;a.getDetail(i).comment=e,a.setSubmitActive(),a.setData(t({},"skus["+i+"].comment",e))}})}}); 
 			}); 	require("pages/rate/append/index.js");
 		__wxRoute = 'pages/rate/list/index';__wxRouteBegin = true; 	define("pages/rate/list/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=t(require("../../../common/m")),a=t(require("../../../common/base/createPage")),s=t(require("../components/list/index")),o=t(require("../components/average/index")),n=t(require("../../../components/loading/index")),r=t(require("../../../components/toast/index")),d=t(require("../../../components/empty/index")),h=t(require("../../../components/end/index")),l=i.default.MWP,u=i.default.fn,m=(u.pick,u.merge),p={isLoading:!1,isLoadEnd:!1,isLoadFirst:!0},c={itemId:null,mbook:""};exports.default=(0,a.default)({components:{loading:n.default,toast:r.default,empty:d.default,moreLoading:h.default,moreEnd:h.default,rateList:s.default,rateAverage:o.default},postData:{},extraOptions:{},data:{$rateAverage:{averageScore:0,rateScore:[]},$rateList:{list:[]},$empty:{type:1,text:"没有评价哦"},$moreLoading:{isEnd:!1},$moreEnd:{isEnd:!0},isMoreEnd:!1,isMoreLoading:!1,isEmpty:!1},methods:{showMoreLoading:function(){!this.data.isMoreLoading&&this.setData({isMoreLoading:!0})},hideMoreLoading:function(){this.data.isMoreLoading&&this.setData({isMoreLoading:!1})},showEmptyData:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.data.isEmpty!==t&&this.setData({isEmpty:t})},resetData:function(){var t={isMoreEnd:!1},e={};arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(t.isEmpty=!1,e.list=[]),this.setData(t),this.$rateList.setData(e),this.postData.mbook="",this.extraOptions.isLoadEnd=!1,this.extraOptions.isLoadFirst=!0},loadData:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.extraOptions.isLoading=!0,t&&this.$loading.show();this.data.$rateList;var i={mbook:this.postData.mbook,type:"1",tradeItemId:this.postData.itemId,platform:"wx",marketType:getApp().data.marketType};return l.request("mwp.RateWeb.rateList","v1",i).then(this.loadSuccess.bind(this,e)).catch(this.loadFail.bind(this))},loadSuccess:function(t,i){this.$loading.hide();var a=i.data,s=void 0===a?{}:a,o=i.ret,n=i.msg,r=void 0===n?"":n,d=s.list,h=void 0===d?[]:d,u=s.isEnd,m=void 0!==u&&u,p=s.mbook,c=void 0===p?"":p,g=s.averageScore,f=s.rateScore;if(o===l.Code.Success){var L=this.data.$rateList,v=[].concat(e(L.list),e(h));h.length&&(this.showEmptyData(!1),this.postData.mbook=c,this.extraOptions.isLoadFirst&&this.$rateAverage.$emit("refresh",{averageScore:g,rateScore:f}),this.$rateList.$emit("refresh",t,h)),m&&(this.extraOptions.isLoadEnd=!0,v.length?this.setData({isMoreEnd:!0}):this.showEmptyData(!0)),h.length||m||this.loadFail({message:"服务器开小差了，请稍候再试"})}else"FAIL_SYS_TESLA_INVOKE_TIMEOUT"===o?this.loadFail({message:"服务器开小差了，请稍候再试"}):this.loadFail({message:r});this.extraOptions.isLoading=!1,this.extraOptions.isLoadFirst=!1},loadFail:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:response).message;this.extraOptions.isLoading=!1,this.extraOptions.isLoadFirst=!1,this.$loading.hide(),this.$toast.show(t||"获取评价列表失败",1500)}},onLoad:function(t){var e=t.itemId;this.postData=m({},c,{itemId:e}),this.extraOptions=m({},p),this.loadData(!0,!0)},onPullDownRefresh:function(){this.extraOptions.isLoading?wx.stopPullDownRefresh():(this.resetData(),this.loadData(!1,!1).then(function(){wx.stopPullDownRefresh()}).catch(function(){wx.stopPullDownRefresh()}))},onReachBottom:function(){var t=this,e=this.extraOptions,i=e.isLoading,a=e.isLoadEnd;i||a||(this.showMoreLoading(),this.loadData(!1,!0).then(function(){t.hideMoreLoading()}).catch(function(){t.hideMoreLoading()}))}}); 
 			}); 	require("pages/rate/list/index.js");
 		__wxRoute = 'pages/refund/apply/index';__wxRouteBegin = true; 	define("pages/refund/apply/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var a=t(require("../../../components/loading/index")),e=t(require("../../../components/toast/index")),s=t(require("../../../common/base/createPage")),i=require("../../refund/action.js"),o=t(require("../../../common/service/upload.js"));(0,s.default)({components:{loading:a.default,toast:e.default},data:{submitCause:"",isCauseSelected:!1,causeItemExtra:"",submitPhone:"",submitExtraInfo:"",submitName:"",imageFiles:[],causeList:[{applyCause:"请选择投诉原因",isNeedUpLoadImg:!0,complaintType:""}],causeIndex:0,isNeedUpLoadImg:!1,orderId:"",extraDefaultValue:"",applyCauseInput:"",applyContactInput:"",applyPhoneInput:"",applyExtraInput:"",uploadedImages:[],complaintType:""},methods:{getPageData:function(){var t=this;(0,i.getComplainFactor)({orderId:this.data.orderId},function(a){t.$loading.hide();var e=t;if(a.complaintExist)wx.showModal({title:"提示",content:"当前订单已经提交过申诉，不可重复申请",confirmText:"查看详情",confirmColor:"#ff5777",success:function(t){t.confirm?e.$redirect("/pages/refund/applydetail/index?orderId="+e.data.orderId):wx.navigateBack()}});else{var s=a.reportTypes,i=a.tradeDetail;console.log(i);var o=[{applyCause:"请选择投诉原因",isNeedUpLoadImg:!1,complaintType:"",complaintDes:""}];s.forEach(function(t){o.push({applyCause:t.complaintTypeTitle,isNeedUpLoadImg:t.mustUploadImage,complaintType:t.complaintType,complaintDes:t.desc})}),t.setData({causeList:o,submitName:i.shipToName,submitPhone:i.shipToMobile})}},function(a){t.$loading.hide(),t.$toast.show(a.message)})},selectCause:function(t){var a=t.detail.value,e=this.data.causeList;this.setData({submitCause:e[a].applyCause,causeIndex:a,isCauseSelected:a,causeItemExtra:e[a].complaintDes,isNeedUpLoadImg:e[a].isNeedUpLoadImg,complaintType:e[a].complaintType,applyCauseInput:"apply-after-input"})},nameInputComplete:function(t){this.setData({submitName:t.detail.value})},phoneInputComplete:function(t){this.setData({submitPhone:t.detail.value})},extraInfoInputComplete:function(t){this.setData({submitExtraInfo:t.detail.value})},focusProcess:function(t){switch(t.target.dataset.inputType){case"name":this.setData({submitName:"",applyContactInput:"apply-after-input"});break;case"phone":this.setData({submitPhone:"",applyPhoneInput:"apply-after-input"});break;case"extra":this.setData({applyExtraInput:"apply-after-input"})}},selectImg:function(){var t=this,a=this,e=this.data.imageFiles,s=this.data.uploadedImages;s.length>=8?this.$toast.show("您最多只能上传8张图片"):o.default.chooseAndUploadImages(8-s.length).then(function(i){if(i)return t.$loading.show(),new Promise(function(o,n){var d=0;i.$on("upload",function(t){s.push(t.localPath),e.push(t.path)}).$on("fail",function(t,a){console.error(t,a),d++}).$on("finish",function(){d>0?n({message:"有"+d+"张图片上传失败，请重新上传~"}):(t.$loading.hide(),a.setData({uploadedImages:s,imageFiles:e}))})})}).catch(function(a){t.$loading.hide(),a.message&&t.$toast.show(a.message)})},deleteImg:function(t){var a=t.target.dataset.deleteImgindex,e=this.data.uploadedImages,s=this.data.imageFiles;e.splice(a,1),s.splice(a,1),this.setData({uploadedImages:e,imageFiles:s})},applySubmit:function(t){var a=this,e=t.detail.formId;this.$logForm&&this.$logForm(e,1),0!==this.data.causeIndex?""!==this.data.submitName?""!==this.data.submitPhone?""!==this.data.submitExtraInfo?this.data.isNeedUpLoadImg&&0===this.data.imageFiles.length?this.$toast.show("请上选凭证图片"):(0,i.submitComplainInfo)({orderId:this.data.orderId,complaintType:this.data.complaintType,source:3,images:this.data.imageFiles.join(","),contacts:this.data.submitName,mobile:this.data.submitPhone,content:this.data.submitExtraInfo},function(t){a.$toast.show("投诉提交成功",1500,function(){a.$redirect("/pages/refund/applydetail/index?orderId="+a.data.orderId)})},function(t){a.$toast.show(t.message)}):this.$toast.show("请填写投诉说明"):this.$toast.show("请填写联系人电话"):this.$toast.show("请填写联系人"):this.$toast.show("请选择投诉原因")}},onShow:function(){this.data.loadFlag||this.getPageData()},onHide:function(){this.setData({loadFlag:!1})},onLoad:function(t){this.$loading.show(),this.setData({orderId:Number(t.orderId||63997734424060),loadFlag:!0}),this.getPageData()}}); 
 			}); 	require("pages/refund/apply/index.js");
 		__wxRoute = 'pages/refund/applydetail/index';__wxRouteBegin = true; 	define("pages/refund/applydetail/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var a=e(require("../../../components/loading/index")),t=e(require("../../../components/toast/index")),o=e(require("../../../common/base/createPage")),n=require("../../refund/action.js"),i=e(require("./components/im/index")),s=e(require("../components/comment/index"));(0,o.default)({components:{loading:a.default,toast:t.default,im:i.default,comment:s.default},data:{applyeeImg:"",applyeeName:"",canCancel:!1,applyLeaveMessage:"apply-detail-im-short",canApplyComplaint:!1,complaintFinished:!1,isNeedComment:!1,scrollViewY:!0},methods:{getPageData:function(){var e=this;(0,n.getComplainDetail)({itemOrderId:this.data.orderId},function(a){var t=e.$im.parseIM(a);e.$loading.hide(),e.setData({complaintId:Number(a.complaintId),isNeedComment:a.canLeaveMessage,applyeeImg:a.sellerInfo.avatar,applyeeName:a.shopInfo.shopName,canCancel:a.canCancel,canApplyComplaint:a.canApplyComplaint,canCheckResult:a.complaintFinished&&1===a.status,applyLeaveMessage:a.canLeaveMessage?"apply-detail-im-long":"apply-detail-im-short"}),e.$im.setData({fullTimelineLogDTOList:t.fullTimelineLogDTOList,adminInfo:t.adminInfo,buyerAvatar:t.buyerAvatar,canEvaluate:t.canEvaluate,itemOrderId:e.data.orderId,complaintId:t.complaintId},function(){e.setData({scrollViewId:t.lastItemId})})},function(a){e.$loading.hide(),e.$toast.show(a.message)})},applyAction:function(e){var a=this,t=e.detail.formId;switch(this.$logForm&&this.$logForm(t,1),e.target.dataset.buttonType){case"cancel":wx.showModal({title:"提示",content:"是否确认取消投诉",confirmColor:"#ff5777",success:function(e){e.confirm&&(0,n.cancelComplain)({complaintId:a.data.complaintId},function(e){a.$toast.show("投诉取消成功"),a.getPageData(a.data.orderId)},function(e){console.error(e),a.$toast.show(e.message)})}});break;case"complain":this.$redirect("/pages/refund/apply/index?orderId="+this.data.orderId);break;case"result":this.$redirect("/pages/refund/applyresult/index?orderId="+this.data.orderId)}},commitScore:function(e){var a=this;e.msg?this.$toast.show(e.msg):(0,n.submitComplainScore)({complaintId:Number(e.complaintId),evalValue:Number(e.score),comment:e.resonText,reasonCode:e.choicedName},function(e){a.getPageData(a.data.orderId)},function(e){a.$toast.show(e.message)})},comment:function(e){var a=this,t={complaintId:this.data.complaintId};e.type?t.content=e.inputText:t.images=e.images.join(","),(0,n.submitRecordProof)(t,function(e){a.getPageData(a.data.orderId)},function(e){console.error(e),a.$toast.show(e.message)})},getReasonList:function(e){var a=this;(0,n.complaintScoreReason)({type:0},function(t){e.callback&&e.callback(t),a.$loading.hide()},function(e){a.$toast.show(e.message),a.$loading.hide()})}},onReady:function(){var e=this;this.$im.$on("commit-score",function(a){e.commitScore.call(e,a)}),this.$comment.$on("comment",function(a){e.comment.call(e,a)}),this.$im.$on("get-reason-list",function(a){e.getReasonList.call(e,a)})},onShow:function(){this.data.loadFlag||this.getPageData()},onHide:function(){this.setData({loadFlag:!1})},onLoad:function(e){this.$loading.show(),this.setData({orderId:Number(e.orderId&&e.orderId),loadFlag:!0}),this.getPageData()}}); 
 			}); 	require("pages/refund/applydetail/index.js");
 		__wxRoute = 'pages/refund/applyresult/index';__wxRouteBegin = true; 	define("pages/refund/applyresult/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var a=e(require("../../../components/loading/index")),s=e(require("../../../components/toast/index")),t=e(require("../../../common/base/createPage")),o=require("../../refund/action.js");(0,t.default)({components:{loading:a.default,toast:s.default},data:{applyeeImg:"",applyeeName:"",applyResultTip:"",complainTime:"",resultTime:"",causeValue:"",applyResultIcon:"",applyResultExtra:""},onLoad:function(e){var a=this;this.$loading.show(),(0,o.getComplainDetail)({itemOrderId:Number(e.orderId)},function(e){a.$loading.hide(),a.setData({applyeeImg:e.sellerInfo.avatar,applyeeName:e.shopInfo.shopName,complainTime:e.createTime,resultTime:e.processTime,causeValue:e.complaintReason,applyResultExtra:e.processResult,applyResultTip:e.successed?"投诉成立":"投诉不成立",applyResultIcon:e.successed?"https://s10.mogucdn.com/mlcdn/c45406/170608_1l7hk8hk6ege71b6fg3h1ejch9d0d_66x66.png":"https://s10.mogucdn.com/mlcdn/c45406/170608_55c418ihla2013i4igfedij5b3li0_66x66.png"})},function(e){a.$loading.hide(),console.error(e),a.$toast.show(e.message)})}}); 
 			}); 	require("pages/refund/applyresult/index.js");
 		__wxRoute = 'pages/refund/cash/index';__wxRouteBegin = true; 	define("pages/refund/cash/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../../common/m")),s=e(require("../../../components/loading/index")),a=e(require("../../../components/toast/index")),u=e(require("../../../common/base/createPage")),n=e(require("../../../common/utils/dataProtect/index")),i=require("../../refund/action.js");t.default.MWP;(0,u.default)({components:{loading:s.default,toast:a.default},data:{},onLoad:function(e){this.data.options=e},onShow:function(){var e=this;this.$loading.show(),(0,i.getRundLogInfo)({itemOrderId:Number(this.data.options.orderId)},function(t){e.setData(e.parseData(t)),e.$loading.hide()},function(t){e.$toast.show(t.message),e.$loading.hide()})},methods:{parseData:function(e){var t=[],s=n.default.get(e,"fundDetailDTO.buyerRefundCashExpense"),a=n.default.get(e,"queryRefundRespDto.amount"),u=n.default.get(e,"queryRefundRespDto.amount1"),i=n.default.get(e,"queryRefundRespDto.discountAmount");if(s>0||a>0){var r={title:"",expense:"",title2:"",expense2:"",current:0,step:[],link:""},o=n.default.get(e,"queryRefundRespDto.outPayTypeDesc"),p=n.default.get(e,"queryRefundRespDto.outPayTypeDesc1"),d=o?"(退至"+o+")":"";r.title="退回支付方："+d,r.title2=p?"(退至"+p+")":"",r.expense=u||i?(a/100).toFixed(2)+"元":(s/100).toFixed(2)+"元",r.expense2=u?(u/100).toFixed(2)+"元":"";var f=n.default.get(e,"queryRefundRespDto.refundAcceptTime");f&&r.step.push({stepTitle:this.formatTime(f),stepDesc:"开始处理退款，等待受理"});var l=n.default.get(e,"queryRefundRespDto.gatewayAcceptTime");l&&(r.current=1,r.step.push({stepTitle:this.formatTime(l),stepDesc:"已提交退款，等待处理"}));var c=n.default.get(e,"queryRefundRespDto.refundFinishTime");if(3===n.default.get(e,"queryRefundRespDto.refundStatus")&&c)r.current=2,r.step.push({stepTitle:this.formatTime(c),stepDesc:"已到账"});else{var m=n.default.get(e,"queryRefundRespDto.expectFinishTime");m&&(r.current=1,r.step.push({stepTitle:this.formatTime(m),stepDesc:"预计到账"}))}t.push(r)}if(i>0){var h={title:"退回"+(n.default.get(e,"queryRefundRespDto.outPayTypeDiscountDesc")||"微信立减金")+"：（退至微信)",expense:"",current:0,text:"本订单参与微信社交立减金优惠，需全部退款时才退还立减金优惠，立减金到账情况请到微信卡包中查询。"};t.push(h)}var T=0,D=!1,g=0,y=0;if(n.default.get(e,"refundFundDetailDTOList.length")>0){var R=!0,x=!1,v=void 0;try{for(var O,q=e.refundFundDetailDTOList[Symbol.iterator]();!(R=(O=q.next()).done);R=!0){var I=O.value;if("cash"===I.type)switch(I.bizType){case"modou":T=I.amount;break;case"shipInsurance":g=I.amount,D=!0}else"coupon"===I.type&&(y=I.amount)}}catch(e){x=!0,v=e}finally{try{!R&&q.return&&q.return()}finally{if(x)throw v}}}if(D){var w={title:"",expense:"",current:0,step:[]},b="";switch(n.default.get(e,"claimInfoResDTO.compensateType")){case 0:b="蘑菇街钱包余额";break;case 1:b="微信钱包余额";break;default:b="蘑菇街钱包余额"}w.title="退运费补贴：（退至"+b+")",w.expense=(g/100).toFixed(2)+"元";var F=n.default.get(e,"claimInfoResDTO.status"),k=n.default.get(e,"claimInfoResDTO.applyTime"),A=n.default.get(e,"claimInfoResDTO.estimatedTime"),L=n.default.get(e,"claimInfoResDTO.refuseTime"),P=n.default.get(e,"claimInfoResDTO.actualTime"),$=n.default.get(e,"claimInfoResDTO.refusedReason"),M=n.default.get(e,"claimInfoResDTO.isReApply");k&&w.step.push({stepTitle:this.formatTime(k),stepDesc:M?"已重新提交申请，等待处理":"运费补贴申请中"}),L&&(w.current=1,w.step.push({stepTitle:this.formatTime(L),stepDesc:$||""})),0===F&&A&&(w.current=0,w.step.push({stepTitle:this.formatTime(A),stepDesc:"预计处理完成"})),P&&(w.current=1,w.step.push({stepTitle:this.formatTime(P),stepDesc:M?"重新申请成功，已到账":"已到账"})),"return_goods"===n.default.get(e,"refundDTO.refundType")&&n.default.get(e,"refundTagDTO.canCompleteExpress")&&(w.showRequestAgain=!0),t.push(w)}var S=n.default.get(e,"hongbaoDTO.originAmount");if(S>0){var _={title:"",expense:"",current:0,step:[],link:""};_.title="退支付红包：退至“我的支付红包”",_.expense=(S/100).toFixed(2)+"元",_.step.push({stepTitle:"",stepDesc:"已到账，有效期至"+this.formatTime(n.default.get(e,"hongbaoDTO.endTime"))}),t.push(_)}if(y>0){var C={title:"",expense:"",current:0,step:[]};C.title="退还全场优惠券：",C.expense=(y/100).toFixed(2)+"元",C.step.push({stepTitle:"",stepDesc:"已到账"}),C.link="coupon",t.push(C)}if(T>0){var E={title:"",expense:"",current:0,step:[],link:""};E.title="退还蘑豆：",E.expense=T+"粒",E.step.push({stepTitle:"",stepDesc:"已到账"}),t.push(E)}return{dataList:t,shopOrderId:n.default.get(e,"refundShopOrderDTO.shopOrderId"),refundId:n.default.get(e,"refundDTO.refundId")}},formatTime:function(e){return e&&Date.format(new Date(1e3*e),"yyyy.MM.dd hh:mm:ss")},goLink:function(e){var t=e.currentTarget.dataset;switch(t.link){case"coupon":t.page="coupon",t.type="platform",this.$navigate(e)}}},onReady:function(){wx.setNavigationBarTitle({title:"钱款去向"})}}); 
 			}); 	require("pages/refund/cash/index.js");
 		__wxRoute = 'pages/refund/detail/index';__wxRouteBegin = true; 	define("pages/refund/detail/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../../common/m")),r=e(require("../../../common/utils/imgUrlTool")),a=e(require("../../../components/loading/index")),i=e(require("../../../components/toast/index")),o=e(require("../../../common/base/createPage")),n=e(require("../../../components/steps/index")),s=e(require("../components/status/index")),u=require("../../refund/action.js");t.default.MWP;(0,o.default)({components:{loading:a.default,toast:i.default,status:s.default,steps:n.default},data:{},onLoad:function(e){var t=this;this.$loading.show(),(0,u.getRundLogInfo)({itemOrderId:Number(e.orderId)},function(e){var a=t.$status.parseStatusData(e);a.src=r.default.getWidthSuffix(a.src,100),t.$status.setData(Object.assign({},a,{showTitle:!0})),t.$steps.setData(t.parseStepListData(e.refundStepInfos)),t.setData({timeLineData:t.parsProofList(e)}),t.$loading.hide()},function(e){t.$toast.show(e.message),t.$loading.hide()})},methods:{parseStepListData:function(e){var t=this,r=[],a=-1;return e.forEach(function(e){r.push({stepTitle:t.formatTime(e.stepTime),stepDesc:e.stepText}),e.stepThrough&&a++}),{stepsList:r,current:a}},parsProofList:function(e){if(e&&e.proofTimeLineDTOList){var t=this,a=[],i=e.adminInfo,o=e.refundShopOrderDTO&&e.refundShopOrderDTO.buyerAvatar,n=!0,s=!1,u=void 0;try{for(var f,d=e.proofTimeLineDTOList[Symbol.iterator]();!(n=(f=d.next()).done);n=!0){var m=f.value;if(m.imgArr=[],m.images){var l=!0,c=!1,p=void 0;try{for(var h,g=m.images[Symbol.iterator]();!(l=(h=g.next()).done);l=!0){var T=h.value;m.imgArr.push({imgSmall:r.default.getWidthSuffix(T,100),img:T})}}catch(e){c=!0,p=e}finally{try{!l&&g.return&&g.return()}finally{if(c)throw p}}}a.push({actionName:"ADMIN"===m.userType?i.adminNickName:"我",created:t.formatTime(m.created),images:m.imgArr,showContent:m.showContent,picUrl:"ADMIN"===m.userType?r.default.getWidthSuffix(i.pictureUrl,100):r.default.getWidthSuffix(o,100)})}}catch(e){s=!0,u=e}finally{try{!n&&d.return&&d.return()}finally{if(s)throw u}}return a}},formatTime:function(e){return e&&Date.format(new Date(1e3*e),"yyyy.MM.dd hh:mm:ss")},showBigImg:function(e){var t=e.currentTarget.dataset.img;wx.previewImage({urls:[t]})}},onReady:function(){wx.setNavigationBarTitle({title:"售后详情"})}}); 
 			}); 	require("pages/refund/detail/index.js");
 		__wxRoute = 'pages/refund/help/detail/index';__wxRouteBegin = true; 	define("pages/refund/help/detail/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/base/createPage"));exports.default=(0,e.default)({data:{problemId:0,title:["收到商品不喜欢，如何退货？","如何申请退货？","如何申请退款？","申请退款后，商家不处理怎么办？","如何投诉商家？","商家收到货不退款，怎么办？"]},onLoad:function(e){var t=e.problemId||"";this.setData({title:this.data.title[t],key:t})},onReady:function(){wx.setNavigationBarTitle({title:"帮助"})}}); 
 			}); 	require("pages/refund/help/detail/index.js");
 		__wxRoute = 'pages/refund/help/list/index';__wxRouteBegin = true; 	define("pages/refund/help/list/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../../common/base/createPage"));exports.default=(0,e.default)({data:{problems:[{content:"收到商品不喜欢，如何退货？",key:0},{content:"如何申请退货？",key:1},{content:"如何申请退款？",key:2},{content:"申请退款后，商家不处理怎么办？",key:3},{content:"如何投诉商家？",key:4},{content:"商家收到货不退款，怎么办？",key:5}]},onLoad:function(){},onReady:function(){wx.setNavigationBarTitle({title:"帮助"})},methods:{goDetail:function(e){var t=e.currentTarget.dataset;t.page="refundHelpDetail",t.problemId=t.problemId,this.$navigate(e)}}}); 
 			}); 	require("pages/refund/help/list/index.js");
 		__wxRoute = 'pages/refund/im/index';__wxRouteBegin = true; 	define("pages/refund/im/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../common/m")),o=t(require("../../../components/loading/index")),n=t(require("../../../components/toast/index")),a=t(require("../../../common/base/createPage")),i=t(require("../components/status/index")),s=t(require("../../../common/utils/imgUrlTool")),c=t(require("../components/im/index")),r=t(require("../components/comment/index")),m=require("../../refund/action.js");e.default.MWP;exports.default=(0,a.default)({components:{loading:o.default,toast:n.default,status:i.default,im:c.default,comment:r.default},data:{realHeight:wx.getSystemInfoSync().windowHeight,statusMarginTop:"0",marginTop:"0",imList:{fullTimelineLogDTOList:[]},refundId:0,statusList:null,chatLong:"refund-chat-im-long",chatShort:"refund-chat-im-short",complaintId:""},onLoad:function(t){this.data.options=t},onShow:function(){this.getThePageData(this.data.options.orderId)},onReady:function(){var t=this;wx.setNavigationBarTitle({title:"售后服务"});this.$status.$on("cancel-handler",function(e,o){t.cancelHandler.call(t,e,o)}),this.$im.$on("commit-score",function(e){t.commitScore.call(t,e)}),this.$im.$on("confirm-same",function(e){t.confirmSame.call(t,e)}),this.$comment.$on("comment",function(e){t.comment.call(t,e)}),this.$im.$on("load-to-bootom",function(e){t.setData({scrollIntoViewId:e})}),this.$im.$on("get-reason-list",function(e){t.getReasonList.call(t,e)})},methods:{getThePageData:function(t,e){var o=this;this.$loading.show(),(0,m.getRundLogInfo)({itemOrderId:Number(t)},function(t){var e=o.$im.parseIM(t),n=e.lastItemId;if(o.$im.setData(e,function(){o.setData({scrollIntoViewId:"imchat"+n})}),e.refundId){var a=o.$status.parseStatusData(t);a.src=s.default.getWidthSuffix(a.src,100),o.$status.setData(Object.assign({},a,{showTitle:!1,showStatusContent:!0})),o.$comment.setData({canLeavewords:e.canLeavewords,complaintId:e.complaintId,itemOrderId:e.itemOrderId})}o.$loading.hide()},function(t){o.$toast.show(t.message),o.$loading.hide()})},cancelHandler:function(t,e){var o=this;wx.showModal({content:"是否确认取消退款？",confirmColor:"#ff5777",success:function(n){n.confirm&&(o.$loading.show(),(0,m.cancelRefund)({refundId:t},function(t){o.getThePageData(e)},function(t){o.$toast.show(t.message,function(){o.getThePageData(e)}),o.$loading.hide()}))}})},commitScore:function(t){var e=this;t.msg?this.$toast.show(t.msg):(this.$loading.show(),(0,m.submitComplainScore)({complaintId:Number(t.complaintId),evalValue:Number(t.score),comment:t.resonText,reasonCode:t.choicedName},function(o){e.getThePageData(t.itemOrderId)},function(o){e.$toast.show(o.message,function(){e.getThePageData(t.itemOrderId)}),e.$loading.hide()}))},confirmSame:function(t){var e=this,o="";switch(t.type){case"agree":o="确认已和商家协商一致，不再退款？";break;case"disagree":o="确认未和商家协商一致，继续退款？";break;case"agree_ship":o="确定同意发货，不再退款？";break;case"disagree_ship":o="我不同意商家发货，官方客服将跟进处理"}wx.showModal({content:o,confirmColor:"#ff5777",success:function(o){o.confirm&&(e.$loading.show(),(0,m.refundConfer)({result:t.type,refundId:t.refundId},function(o){e.getThePageData(t.itemOrderId)},function(o){e.$toast.show(o.message,function(){e.getThePageData(t.itemOrderId)}),e.$loading.hide()}))}})},comment:function(t){var e=this;t.message?this.$toast.show(t.message):(0,m.submitRecordProof)({complaintId:t.complaintId,content:t.inputText,images:t.images&&t.images.join(",")},function(t){var o=t.timelineLogDTOList,n=0,a=o.length,i=o.map(function(t,o){t.showContentList=t.showContent;var i=e.$im.parseImage(t);return t.created=e.$im.formatTime(t.created),t=Object.assign({},t,i),o==a-1&&(n=t.id),t});e.$im.setData({fullTimelineLogDTOList:e.$im.data.fullTimelineLogDTOList.concat(i)},function(){e.setData({scrollIntoViewId:"imchat"+n})}),e.$loading.hide()},function(t){e.$toast.show(t.message),e.$loading.hide()})},getReasonList:function(t){var e=this;(0,m.complaintScoreReason)({type:1},function(o){t.callback&&t.callback(o),e.$loading.hide()},function(t){e.$toast.show(t.message),e.$loading.hide()})}}}); 
 			}); 	require("pages/refund/im/index.js");
 		__wxRoute = 'pages/refund/logistics/index';__wxRouteBegin = true; 	define("pages/refund/logistics/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}e(require("../../../common/m"));var o=e(require("../../../components/loading/index")),s=e(require("../components/logistics/index")),i=e(require("../../../common/base/createPage")),t=require("../action"),n=require("../apis");(0,i.default)({components:{loading:o.default,logistics:s.default},data:{company:[],isShow:!0,refundId:"",itemOrderId:""},onLoad:function(e){this.$logistics.setData({refundId:e.refundId,hasShipService:e.hasShipService}),this.$loading.show(),(0,n.requestExpressList)(this.$logistics,this.$loading)},onReady:function(){this.$logistics.$on("commit-logistics",this.commitLogistics)},commitLogistics:function(e){e.msg?wx.showModal({title:"提示",content:e.msg,showCancel:!1,confirmColor:"#FF5777",success:function(e){e.confirm&&console.log("用户点击确定")}}):(0,t.deliverGoods)({expressCode:e.expressCode,expressId:e.expressId,refundId:e.refundId}).then(function(e){wx.showToast({title:"成功提交",icon:"success",duration:1e3}),wx.navigateBack()}).catch(function(e){wx.showModal({title:"出错了",content:e.message,confirmColor:"#FF5777",showCancel:!1})})}}); 
 			}); 	require("pages/refund/logistics/index.js");
 		__wxRoute = 'pages/refund/logisticsAgain/index';__wxRouteBegin = true; 	define("pages/refund/logisticsAgain/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}e(require("../../../common/m"));var o=e(require("../../../components/loading/index")),s=e(require("../components/logistics/index")),i=e(require("../../../common/base/createPage")),t=require("../action"),n=require("../apis");(0,i.default)({components:{loading:o.default,logistics:s.default},data:{isShow:!0},onLoad:function(e){this.$logistics.setData({refundId:e.refundId,itemOrderId:e.orderId||"",shopOrderId:e.shopOrderId,showCause:!0}),this.$loading.show(),(0,n.requestExpressList)(this.$logistics,this.$loading)},onReady:function(){this.$logistics.$on("commit-logistics",this.commitLogistics)},commitLogistics:function(e){e.msg?wx.showModal({title:"提示",content:e.msg,confirmColor:"#FF5777",showCancel:!1}):(0,t.freightReApplyClaim)({orderId:e.shopOrderId,refundId:e.refundId,bizExtra:{expressName:e.expressCode,expressId:e.expressId,reason:e.cause},platformType:"1"}).then(function(e){wx.showToast({title:"申请成功",icon:"success",duration:1e3}),wx.navigateBack()}).catch(function(e){wx.showModal({title:"出错了",content:e.message,confirmColor:"#FF5777",showCancel:!1})})}}); 
 			}); 	require("pages/refund/logisticsAgain/index.js");
 		__wxRoute = 'pages/refund/logisticsEdit/index';__wxRouteBegin = true; 	define("pages/refund/logisticsEdit/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var s=e(require("../../../common/m")),t=e(require("../../../components/loading/index")),i=e(require("../components/logistics/index")),o=e(require("../../../common/base/createPage")),n=require("../action"),r=s.default.MWP;(0,o.default)({components:{loading:t.default,logistics:i.default},data:{isShow:!0,itemOrderId:""},onLoad:function(e){var s=this;this.setData({itemOrderId:e.orderId}),this.$loading.show();var t=r.request("mwp.TradeRefundWeb.refundExpressList","1").then(r.filterResult),i=r.request("mwp.TradeRefundWeb.refundLog","1",{itemOrderId:this.data.itemOrderId}).then(r.filterResult);Promise.all([t,i]).then(function(e){var t=e[0];t.unshift({expressName:"请选择物流公司",expressCode:""}),s.$logistics.setData({companyList:t}),s.$loading.hide();var i=(t=e[1]).refundSellerShipDTO;s.$logistics.updateInfo({itemOrderId:s.data.itemOrderId,refundId:t.refundDTO.refundId,expressId:i?i.expressId:"",expressCode:i?i.expressCode:"",hasShipService:"SUBSCRIBED"===t.refundTagDTO.shipServiceSubscribeTag})}).catch(function(e){s.$loading.hide(),wx.showModal({title:"出错了",content:e.message,confirmColor:"#FF5777",showCancel:!1})})},onReady:function(){this.$logistics.$on("commit-logistics",this.commitLogistics)},commitLogistics:function(e){e.msg?wx.showModal({title:"提示",content:e.msg,showCancel:!1,success:function(e){e.confirm&&console.log("用户点击确定")}}):(0,n.modifyExpress)({expressCode:e.expressCode,expressId:e.expressId,refundId:e.refundId}).then(function(e){wx.showToast({title:"修改成功",icon:"success",duration:1e3}),wx.navigateBack()}).catch(function(e){wx.showModal({title:"出错了",content:e.message,showCancel:!1})})}}); 
 			}); 	require("pages/refund/logisticsEdit/index.js");
 		__wxRoute = 'pages/refund/protocol/index';__wxRouteBegin = true; 	define("pages/refund/protocol/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../common/base/createPage"));exports.default=(0,e.default)({data:{},onLoad:function(){}}); 
 			}); 	require("pages/refund/protocol/index.js");
 		__wxRoute = 'pages/refund/request/index';__wxRouteBegin = true; 	define("pages/refund/request/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var n=e(require("../../../components/loading/index")),o=e(require("../components/form/index")),t=e(require("../../../common/base/createPage")),i=require("../action");(0,t.default)({components:{loading:n.default,form:o.default},data:{itemOrderId:""},onLoad:function(e){var n=this;this.setData({itemOrderId:e.orderId||""}),this.$loading.show(),(0,i.refundApply)({itemOrderId:this.data.itemOrderId}).then(function(e){n.$loading.hide(),n.$form.initData(n.parseRequestData(e))}).catch(function(e){n.$loading.hide(),wx.showModal({title:"出错了",content:e.message,showCancel:!1})})},onReady:function(){this.$form.$on("commit-request",this.commitRequest.bind(this)),this.$form.$on("hide-loading",this.hideLoading.bind(this)),this.$form.$on("show-loading",this.showLoading.bind(this)),this.$form.$on("no-reason-detail",this.noReasonDetail.bind(this)),this.$form.$on("change-money",this.changeMoney.bind(this))},noReasonDetail:function(e){var n=7;switch(e){case"FIFTEEN_DAY_NO_REASON":n=15;break;case"THIRTY_DAY_NO_REASON":n=30}wx.showModal({title:n+"天无理由退货",confirmColor:"#FF5777",content:"该商品支持"+n+"天无理由退货（自商品签收之日起"+n+"天内）：\n1.商品外包装完整，相关附（配）件齐全；\n2.商品表面无划痕、无磨损、无磕碰、无使用、无拆卸等痕迹；可申请无理由退货，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费。",showCancel:!1})},changeMoney:function(e){var n=this;(0,i.refundFundDetail)({itemOrderId:this.data.itemOrderId,expense:(100*e).toFixed()}).then(function(e){n.$form.setData({amountList:n.parseMoneyDetail(e)})}).catch(function(e){wx.showModal({title:"出错了",confirmColor:"#FF5777",content:e.message,showCancel:!1})})},commitRequest:function(e){if(e.msg)wx.showModal({title:"提示",confirmColor:"#FF5777",content:e.msg,showCancel:!1});else{var n={itemOrderId:this.data.itemOrderId,refundType:e.refundType,orderGoodsStatus:e.orderGoodsStatus,refundCause:e.refundCause,secondaryRefundCause:e.secondaryRefundCause,expense:e.expense,number:e.number,pictures:e.pictures,specification:e.specification,refundToPurse:!1,flowType:"mogujie",marketType:"market_mogujie"};e.refundId?(0,i.refundModifyRequest)(n).then(function(e){wx.showToast({title:"成功修改",icon:"success",duration:1e3}),wx.navigateBack()}).catch(function(e){wx.showModal({title:"出错了",content:e.message,confirmColor:"#FF5777",showCancel:!1})}):(n.versionTag="v1",(0,i.refundConfirm)(n).then(function(e){wx.showToast({title:"申请成功",icon:"success",duration:1e3}),wx.navigateBack()}).catch(function(e){wx.showModal({title:"出错了",content:e.message,confirmColor:"#FF5777",showCancel:!1})}))}},parseRequestData:function(e){if(e){var n=e.refundItemOrderDTO,o=void 0===n?{}:n,t=e.refundShopOrderDTO,i=void 0===t?{}:t,a=e.refundDTO,s=void 0===a?{}:a,d=e.refundTagDTO,r=void 0===d?{}:d,u=e.fundDetailDTO,c=u?{expense:s.expense&&(s.expense/100).toFixed(2),maxRefundExpense:u.maxRefundExpense&&(u.maxRefundExpense/100).toFixed(2),maxRefundExpenseWithoutShip:u&&u.maxRefundExpenseWithoutShip&&(u.maxRefundExpenseWithoutShip/100).toFixed(2),isShowFundDetail:!0}:{isShowFundDetail:!1};u&&(c.amountList=this.parseMoneyDetail(u));var m=i.orderStatus||"",h=o.orderStatus||"",f="ORDER_SHIPPED"===m||"ORDER_RECEIVED"===m||"ORDER_COMPLETED"===m||"ORDER_PAID"===m&&"ORDER_SHIPPED"===h,p=s.causeCode||"",l={isShipped:f,refundName:f?"退货退款":"退款",number:o.number||"",refundMoneyCauseList:e.refundMoneyCauseList,returnGoodsCauseList:e.returnGoodsCauseList,refundId:s.refundId||"",refundType:s.refundType||"",orderGoodsStatus:s.orderGoodsStatus||"",causeCode:p,causeNoReason:"SEVEN_DAY_NO_REASON"===p||"FIFTEEN_DAY_NO_REASON"===p||"THIRTY_DAY_NO_REASON"===p,secondaryCauseCode:s.secondaryCauseCode||"",specification:s.specification||"",obtainHongbaoAmount:e.obtainHongbaoAmount||0,dedectHongbaoAmount:e.dedectHongbaoAmount||0,comboFlag:f,hasSubScribeFlag:"SUBSCRIBED"===r.shipServiceSubscribeTag};return Object.assign(l,c)}},parseMoneyDetail:function(e){return[{name:"现金",amount:e.cashExpense,amountPrice:(e.cashExpense/100).toFixed(2),expenseName:"含运费",expenseAmount:e.cashExpenseShip,expenseAmountPrice:(e.cashExpenseShip/100).toFixed(2)},{name:"全场优惠券",amount:e.couponAmount,amountPrice:(e.couponAmount/100).toFixed(2)},{name:"蘑豆",amount:e.modouAmount,amountPrice:(e.modouAmount/100).toFixed(2)},{name:"支付红包",amount:e.hongbaoExpense,amountPrice:(e.hongbaoExpense/100).toFixed(2),expenseName:"含运费",expenseAmount:e.hongbaoExpenseShip,expenseAmountPrice:(e.hongbaoExpenseShip/100).toFixed(2)}]},hideLoading:function(){this.$loading.hide()},showLoading:function(){this.$loading.show()}}); 
 			}); 	require("pages/refund/request/index.js");
 		__wxRoute = 'pages/shop/custom/index';__wxRouteBegin = true; 	define("pages/shop/custom/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../../common/base/createPage")),a=require("../../../common/base/PageFactory"),p=(e(require("../../../common/utils/imgUrlTool")),e(require("../../../common/m"))),i=(e(require("../../../common/service/url")),e(require("../../../cube-core/componentClass/index")),require("../../../shopModules/wrapper/index")),o=p.default.MWP,r=(p.default.logger,getApp().data.appId);(0,t.default)({components:{},data:{shopId:getApp().data.shopId,templateId:"",preview:"",shopName:getApp().data.appName,templateName:""},onLoad:function(e){var t=this;this.optionsReady=this.$getOptions().then(function(e){t.setData({templateId:e.templateId||"",preview:e.preview||"",templateName:decodeURIComponent(e.title)||""})}),this._initWrapper()},onReady:function(){var e=this;this.optionsReady.then(function(){e._requestBodyData(),wx.setNavigationBarTitle({title:e.data.templateName})})},onShareAppMessage:function(){return{title:this.data.templateName||getApp().data.appName,path:"/pages/shop/custom/index?shopId="+this.data.shopId+"&templateId="+this.data.templateId+"&title="+this.data.templateName}},_initWrapper:function(){var e=new a.MComponent((0,i.WrapperInit)(),this);this.$children=(this.$children||[]).concat(e),this.$root.$wrapper=e},_requestBodyData:function(){var e=this,t={shopId:this.data.shopId,templateId:this.data.templateId,preview:this.data.preview,appId:r,tabId:"index",shopType:"xcx"};o.request("mwp.shopappservice.decorateAppIndex","3",t).then(o.filterResult).then(function(t){t.templateName&&e.data.templateName!==t.templateName&&(wx.setNavigationBarTitle({title:t.templateName}),e.setData({templateName:t.templateName})),e.$wrapper.setPageInfo(e,t)})},methods:{}}); 
 			}); 	require("pages/shop/custom/index.js");
 		__wxRoute = 'pages/shop/getCoupon/index';__wxRouteBegin = true; 	define("pages/shop/getCoupon/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/base/createPage")),o=t(require("../../../components/wall/index")),n=t(require("../../../common/utils/imgUrlTool")),a=t(require("../../../common/m")),s=(t(require("../../../common/service/url")),t(require("../../../components/loading/index"))),i=t(require("../../../components/toast/index")),l=t(require("../../../common/service/user")),u=a.default.MWP,c=a.default.MCE,r=(a.default.logger,{notGet:"立即领取",beGet:"立即使用",notHave:"已经抢完",end:"已经结束"}),p={shopCouponBg:"https://s10.mogucdn.com//mlcdn/c45406/171013_6ej7i4a4c1l4j9a5a5b5bdcj3bjb1_694x249.png",goodsCouponBg:"https://s10.mogucdn.com//mlcdn/c45406/171013_083leel72ea455ffkdf0h7lcb7g8c_694x249.png",disableCouponBg:"https://s10.mogucdn.com//mlcdn/c45406/171013_3lkg35able8ehh34fi6jj7l5d4f59_690x220.png"},h={useInShop:"全店商品",useInGoods:"指定商品"};(0,e.default)({components:{wall:o.default,loading:s.default,toast:i.default},data:{shopId:getApp().data.shopId,couponId:"",bannerImg:"",bannerLink:"",shopInfo:{name:"",logo:"",tagLogo:{},eventUrl:""},couponInfo:{show:!1,limitPrice:"",cutPrice:"",isAllScope:"",startTimeDesc:"",endTimeDesc:"",status:"",couponBtnText:"",couponBg:"",usableRange:"",proId:"",navLink:"",title:""},userName:""},onLoad:function(t){var e=this;this.$loading.show(),this.optionsReady=this.$getOptions().then(function(t){e.setData({couponId:t.couponId||""})})},onReady:function(){var t=this;this.getMceInfo(),this.optionsReady.then(function(){t.getShopInfo(function(){t.getCouponInfo()})}),this.$wall.setDataSource({source:"shopPagani",api:"mwp.shopappservice.goodsAllXCX",ver:"1"}),this.$wall.useRedirect=!0,this.$wall.initWall({shopId:this.data.shopId}),this.$wall.handOtherItem=function(t,e){var o=this;if(t.onSaleTime&&t.onSaleTime.length>0)t.botRight=t.onSaleTime;else{var a=t.cfav;a>1e4&&(a=(a/1e4).toFixed(1)+"w"),t.botRight=a+" 收藏"}if(t.sale||0===t.sale){var s=t.sale;s>1e4&&(s=(s/1e4).toFixed(1)+"w"),t.saleText=s}if(t.lefttop_taglist&&t.lefttop_taglist.length&&(t.leftTop=t.lefttop_taglist[0].img),t.nameTags=[],t.leftbottom_taglist&&t.leftbottom_taglist.length)for(i=0;i<t.leftbottom_taglist.length;i++){l=t.leftbottom_taglist[i];t.nameTags.push(l)}if(t.props&&t.props.length)for(var i=0;i<t.props.length;i++){var l={bgColor:"#eff3f6",color:"#5a6f85",content:t.props[i]};t.nameTags.push(l)}return t.imgOrg=t.img,t.img=n.default.getGoodsRatioSuffix(t.img,o.itemImgWidth,o.itemImgRatio),t}},onShareAppMessage:function(){return{title:this.data.shopInfo.name?this.data.shopInfo.name+"正在发放优惠券，先到先得！":"发放优惠券啦，先到先得"}},methods:{getMceInfo:function(){var t=this;c.get({pid:"78207"}).then(function(e){if(e.list&&e.list.length>0){var o=Math.floor((new Date).getTime()/1e3),n=e.list[0],a=n.topText,s=n.bannerImg,i=n.bannerLink,l=n.bannerShowStartTime,u=n.bannerShowEndTime;t.setData({topText:a}),l<=o&&o<u?t.setData({bannerImg:s,bannerLink:i}):t.setData({bannerImg:""})}}).catch(function(t){console.log(t),sendMsg(t,{_author:"qiaoyi",threshold:1})})},getShopInfo:function(t){var e=this,o={shopId:this.data.shopId,shopType:"xcx"};u.request("mwp.shopappservice.getShop","1",o).then(u.filterResult).then(function(o){var n={name:o.name,logo:o.logo,tagLogo:o.tagLogo,eventUrl:o.eventUrl};e.setData({shopInfo:n}),t&&t()}).catch(function(t){e.$loading.hide(),e.$toast.show(t.message,2e3,function(){e.$navigate("/pages/home/index")})})},getCouponInfo:function(){var t=this,e={campId:this.data.couponId};u.request("mwp.ford.getShopCouponInfo","1",e).then(u.filterResult).then(function(e){t.$loading.hide();var o={show:!0,limitPrice:e.limitPrice,cutPrice:e.cutPrice,isAllScope:e.isAllScope,startTimeDesc:e.startTimeDesc,endTimeDesc:e.endTimeDesc,status:e.status,proId:e.proId},n={couponBg:"",usableRange:"",couponBtnText:"",navLink:"",title:""};switch(o.isAllScope?(n.couponBg=p.shopCouponBg,n.usableRange=h.useInShop,n.navLink=t.data.shopInfo.eventUrl,n.title="店铺优惠券"):(n.couponBg=p.goodsCouponBg,n.usableRange=h.useInGoods,n.navLink="/pages/wallPackage/index?fromPage=shopGetCoupon&promotionId="+o.proId+"&title=以下商品享受 满"+o.limitPrice+"减"+o.cutPrice+" 优惠券",n.title="商品优惠券"),o.status){case 0:case 1:n.couponBtnText=r.notGet;break;case 2:n.couponBtnText=r.end,n.couponBg=p.disableCouponBg;break;case 3:n.couponBtnText=r.notHave,n.couponBg=p.disableCouponBg;break;case 4:n.couponBtnText=r.beGet,t.setData({userName:t.getUser().userName}),t.$toast.show("你已经领过这个优惠券了")}o=Object.assign(o,n),t.setData({couponInfo:o})}).catch(function(e){var o=Object.assign(t.data.couponInfo,{show:!1});t.setData({couponInfo:o}),t.$loading.hide(),t.$toast.show(e.message,2e3,function(){t.$navigate(t.data.shopInfo.eventUrl)})})},getCoupon:function(){var t=this,e={campId:this.data.couponId,shopId:this.data.shopId,source:25};u.request("mwp.ford.getShopCoupon","1",e).then(u.filterResult).then(function(e){t.$toast.show("领取成功\n\r有效期至"+t.data.couponInfo.endTimeDesc),t.data.couponInfo.status=4,t.setData({userName:t.getUser().userName}),t.couponStatusControl({couponBtnText:r.beGet})}).catch(function(e){"FAIL_BIZ_50006"===e.code?(t.setData({userName:t.getUser().userName}),t.$toast.show("您已经领过啦\n\r再看看其他券吧"),t.couponStatusControl({couponBtnText:r.beGet})):"FAIL_BIZ_50005"===e.code?(t.$toast.show("领取失败\n\r优惠券被抢完啦"),t.couponStatusControl({couponBtnText:r.notHave,couponBg:p.disableCouponBg})):t.$toast.show(e.message)})},clickCouponBtn:function(t){var e=t.detail.formId;this.$logForm(e,1);var o=this.data.couponInfo;if(0===o.status)this.getCoupon();else if(1===o.status)this.$toast.show("领取失败\n\r还没有到领取时间哦");else{if(4!==o.status)return!1;this.$navigate(o.navLink)}},couponStatusControl:function(t){var e=Object.assign(this.data.couponInfo,t);this.setData({couponInfo:e})},getUser:function(){var t=l.default.userInfo||{};return{userName:t.uname||"",avatarUrl:t.avatar||""}},updateWall:function(t){this.$wall.setWallParam(t),this.$wall.resetWallParams(),this.$wall.pushData({scrollIntoViewId:"scrollIntoViewId"}),this.$wall.isAllowAjax()}}}); 
 			}); 	require("pages/shop/getCoupon/index.js");
 		__wxRoute = 'pages/shop/hotSearch/index';__wxRouteBegin = true; 	define("pages/shop/hotSearch/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../../common/m")),a=t(require("../../../components/toast/index")),o=t(require("../../../common/base/createPage")),s=(t(require("../../../common/utils/cache")),e.default.MWP),n=getApp().data.appId;(0,o.default)({components:{toast:a.default},data:{shopId:getApp().data.shopId,q:"",categoryList:[]},onLoad:function(t){var e=this;this.optionsReady=this.$root&&this.$root.$getOptions().then(function(t){e.setData({shopId:t.shopId||getApp().data.shopId||""})})},onReady:function(){var t=this;this.optionsReady.then(function(){t._requestCategoryData()})},_requestCategoryData:function(){var t=this,e={shopId:this.data.shopId,isSearch:1,shopType:"xcx",appId:n};s.request("mwp.shopappservice.getCategory","1",e).then(s.filterResult).then(function(e){t.setData({categoryList:e.list})}).catch(function(e){t.$toast.show(e.message)})},sendTextHandle:function(t){this.$root.$redirect("/pages/shop/search/index",t.currentTarget.dataset)},handleChange:function(t){this.setData({q:t.detail.value})}}); 
 			}); 	require("pages/shop/hotSearch/index.js");
 		__wxRoute = 'pages/shop/preview/index';__wxRouteBegin = true; 	define("pages/shop/preview/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../../common/base/createPage")),a=require("../../../common/base/PageFactory"),o=e(require("../../../common/utils/imgUrlTool")),i=e(require("../../../common/m")),r=(e(require("../../../common/service/url")),e(require("../../../common/utils/cache")),e(require("../../../cube-core/componentClass/index")),require("../../../shopModules/wrapper/index")),s=e(require("../components/wallSortBar/index")),l=e(require("../../../components/wall/index")),p=i.default.MWP,n=(i.default.logger,getApp().data.appId);(0,t.default)({components:{wallSortBar:s.default,wall:l.default},data:{shopId:getApp().data.shopId,preview:1},onLoad:function(e){this._initWrapperHeader(),this._initWrapper()},onReady:function(){this._requestHeadData(),this._requestBodyData(),this._requestAllGoodsData()},_initWrapperHeader:function(){var e=new a.MComponent((0,r.WrapperHeaderInit)(),this);this.$children=(this.$children||[]).concat(e),this.$root.$wrapperHeader=e},_initWrapper:function(){var e=new a.MComponent((0,r.WrapperInit)(),this);this.$children=(this.$children||[]).concat(e),this.$root.$wrapper=e},_requestHeadData:function(e){var t=this,a={shopId:this.data.shopId,preview:this.data.preview,appId:n,tabId:"index",shopType:"xcx"};p.request("mwp.shopappservice.decorateAppHead","2",a).then(p.filterResult).then(function(e){var a={indexLayoutList:[e.headLayout]};t.$wrapperHeader.setPageInfo(t,a)})},_requestBodyData:function(){var e=this,t={shopId:this.data.shopId,preview:this.data.preview,appId:n,tabId:"index",shopType:"xcx"};p.request("mwp.shopappservice.decorateAppIndex","3",t).then(p.filterResult).then(function(t){e.$wrapper.setPageInfo(e,t)})},_requestAllGoodsData:function(){this.$wall.setDataSource({source:"shopPagani",api:"mwp.shopappservice.goodsAllXCX",ver:"1"}),this.$wall.useRedirect=!0,this.$wall.initWall({page:1,shopId:this.data.shopId,APPID:n,shopType:"xcx"}),this.$wall.handOtherItem=function(e,t){var a=this;if(e.onSaleTime&&e.onSaleTime.length>0)e.botRight=e.onSaleTime;else{var i=e.cfav;i>1e4&&(i=(i/1e4).toFixed(1)+"w"),e.botRight=i+" 收藏"}if(e.sale||0===e.sale){var r=e.sale;r>1e4&&(r=(r/1e4).toFixed(1)+"w"),e.saleText=r}if(e.lefttop_taglist&&e.lefttop_taglist.length&&(e.leftTop=e.lefttop_taglist[0].img),e.nameTags=[],e.leftbottom_taglist&&e.leftbottom_taglist.length)for(s=0;s<e.leftbottom_taglist.length;s++){l=e.leftbottom_taglist[s];e.nameTags.push(l)}if(e.props&&e.props.length)for(var s=0;s<e.props.length;s++){var l={bgColor:"#eff3f6",color:"#5a6f85",content:e.props[s]};e.nameTags.push(l)}return e.imgOrg=e.img,e.img=o.default.getGoodsRatioSuffix(e.img,a.itemImgWidth,a.itemImgRatio),e}},methods:{updateWallSort:function(e){this.$wall.setWallParam({page:1,shopId:this.data.shopId,APPID:n,shopType:"xcx",sort:e}),this.$wall.resetWallParams(),this.$wall.pushData({scrollIntoViewId:"scrollIntoViewId"}),this.$wall.isAllowAjax()}}}); 
 			}); 	require("pages/shop/preview/index.js");
 		__wxRoute = 'pages/shop/search/index';__wxRouteBegin = true; 	define("pages/shop/search/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../../common/m")),a=t(require("../../../common/base/createPage")),o=t(require("../../../common/utils/imgUrlTool")),i=t(require("../components/wallSortBar/index")),l=t(require("../../../components/wall/index")),s=(t(require("../../../common/utils/cache")),t(require("../components/quickNavigation/index"))),n=(e.default.MWP,{shopId:getApp().data.shopId,page:1,categoryId:"",q:"",appId:getApp().data.appId});exports.default=(0,a.default)({components:{wallSortBar:i.default,wall:l.default,quickNavigation:s.default},data:{tabShow:!1,scrollTop:0,title:""},onLoad:function(t){var e=this;this.optionsReady=this.$root&&this.$root.$getOptions().then(function(t){n.q=t&&t.q?decodeURIComponent(t.q):"",n.categoryId=t&&t.categoryId?t.categoryId:"",e.setData({title:decodeURIComponent(t.title||t.q||"")}),wx.setNavigationBarTitle({title:decodeURIComponent(t.title||t.q||"")})})},onReady:function(){var t=this;this.optionsReady.then(function(){t._requestWallData()})},onShareAppMessage:function(){return{title:this.data.title||getApp().data.appName,path:"/pages/shop/search/index?shopId="+n.shopId+"&q="+n.q+"&categoryId="+n.categoryId+"&title="+this.data.title}},methods:{_requestWallData:function(){this.$wall.setDataSource({source:"shopPagani",api:"mwp.shopappservice.goodsAllXCX",ver:"1"}),this.$wall.useRedirect=!0,this.$wall.initWall(n);var t=this;this.$wall.firstBackNavInit=function(e){e.total>0&&t.setData({tabShow:!0})},this.$wall.handOtherItem=function(t,e){var a=this;if(t.onSaleTime&&t.onSaleTime.length>0)t.botRight=t.onSaleTime;else{var i=t.cfav;i>1e4&&(i=(i/1e4).toFixed(1)+"w"),t.botRight=i+" 收藏"}if(t.sale||0===t.sale){var l=t.sale;l>1e4&&(l=(l/1e4).toFixed(1)+"w"),t.saleText=l}if(t.lefttop_taglist&&t.lefttop_taglist.length&&(t.leftTop=t.lefttop_taglist[0].img),t.nameTags=[],t.leftbottom_taglist&&t.leftbottom_taglist.length)for(s=0;s<t.leftbottom_taglist.length;s++){n=t.leftbottom_taglist[s];t.nameTags.push(n)}if(t.props&&t.props.length)for(var s=0;s<t.props.length;s++){var n={bgColor:"#eff3f6",color:"#5a6f85",content:t.props[s]};t.nameTags.push(n)}return t.imgOrg=t.img,t.img=o.default.getGoodsRatioSuffix(t.img,a.itemImgWidth,a.itemImgRatio),t}},updateWallSort:function(t){n.sort=t,this.$wall.setWallParam(n),this.$wall.resetWallParams(),this.$wall.pushData({scrollIntoViewId:"scrollIntoViewId"}),this.$wall.isAllowAjax()},scroll:function(t){this.$quickNavigation.setScrollTop(t.detail.scrollTop)},onTopBtnClick:function(){this.setData({scrollTop:0})}}}); 
 			}); 	require("pages/shop/search/index.js");
 		__wxRoute = 'pages/tabs/shop/custom/1/index';__wxRouteBegin = true; 	define("pages/tabs/shop/custom/1/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var r=e(require("../../../../../common/base/createPage")),u=e(require("../js/page"));(0,r.default)(u.default); 
 			}); 	require("pages/tabs/shop/custom/1/index.js");
 		__wxRoute = 'pages/tabs/shop/custom/2/index';__wxRouteBegin = true; 	define("pages/tabs/shop/custom/2/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var r=e(require("../../../../../common/base/createPage")),u=e(require("../js/page"));(0,r.default)(u.default); 
 			}); 	require("pages/tabs/shop/custom/2/index.js");
 		__wxRoute = 'pages/tabs/shop/search/1/index';__wxRouteBegin = true; 	define("pages/tabs/shop/search/1/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var r=e(require("../../../../../common/base/createPage")),u=e(require("../js/page"));(0,r.default)(u.default); 
 			}); 	require("pages/tabs/shop/search/1/index.js");
 		__wxRoute = 'pages/tabs/shop/search/2/index';__wxRouteBegin = true; 	define("pages/tabs/shop/search/2/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var r=e(require("../../../../../common/base/createPage")),u=e(require("../js/page"));(0,r.default)(u.default); 
 			}); 	require("pages/tabs/shop/search/2/index.js");
 		__wxRoute = 'pages/wallPackage/index';__wxRouteBegin = true; 	define("pages/wallPackage/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../common/utils/cache")),i=t(require("../../common/m")),o=t(require("../../common/base/createPage")),r=t(require("../../common/service/user")),a=t(require("../../components/wall/index_sortNav")),s=t(require("../../components/skudialog/index")),n=t(require("../../common/trade/index")),u=t(require("../../components/mask/index")),c=t(require("../../components/toast/index")),m=i.default.MWP;exports.default=(0,o.default)({components:{wall:a.default,skuDialog:s.default,mask:u.default,toast:c.default},data:{isFromCart:!1,totAmount:0,promotionText:""},itemSkuInfos:{},options:{promotionCode:"",shopId:"",stockId:""},onReady:function(){},onLoad:function(t){var e=this;this.$skuDialog.init({context:this,$toast:this.$toast,$mask:this.$mask}),this.tradeApi=new n.default(this.$toast,this.$loading,t,this.$root),t.promotionCode&&t.promotionCode.length>0&&"platformCoupon"===t.promotionCode?wx.setNavigationBarTitle({title:"全场优惠"}):wx.setNavigationBarTitle({title:"店铺优惠"});var i=decodeURI(t.title||"");i&&e.setData({title:i,navClass:"wall_nav_box_package"}),this.initCartBottomInfo(t),e.setParams={cKey:t.cKey||"independent-shop-coupon",promotionId:t.promotionId||"",shopId:t.shopId||"",minPrice:t.minPrice||"",maxPrice:t.maxPrice||""},this.$wall.setWallNav({scrollNavRpxTop:0}),this.$wall.initWall(this.setParams),this.options={promotionCode:t.promotionCode||"",shopId:t.shopId||"",type:t.type||""}},getGoodsSku:function(t){var e=this,i=t.currentTarget.dataset.iid;if(this.itemSkuInfos[i]){var o=this.itemSkuInfos[i];this.initSkuDialog(o)}else m.request("mwp.detailskipmwp.skus.info","v2",{iid:i}).then(function(t){if(t.ret===m.Code.Success){var o=t.data.data;e.itemSkuInfos[i]=o,e.initSkuDialog(o)}else e.$toast.show(t.msg)}).catch(function(t){e.$toast.show(t.toString())})},initSkuDialog:function(t){this.$skuDialog.setOptions({skuInfo:t,isSkuShow:!0}),this.$skuDialog.showSku()},confirmSku:function(t){var e=this;this.tradeApi.addCart(t).then(function(i){"success"===i.result&&(e.$skuDialog.hideSku(),e.options.type&&"cart"===e.options.type&&e.resetCartTick(t))}).catch(function(t){e.$toast.show(t.message)})},initCartBottomInfo:function(t){var i=t.type||"",o=t.promotionCode||"",r=e.default.get("cart.skuMap");if(i.length>0&&"cart"===i&&o.length>0&&r&&Object.keys(r).length>0)if("platformCoupon"!==o){var a=!1;for(var s in r)if(r[s].shopId===t.shopId){a=!0;break}a&&this.initCartTick()}else this.initCartTick()},initCartTick:function(){var t={marketType:"market_mogujie",userId:r.default.uid,tick:""},i=e.default.get("cart.skuMap"),o=[];for(var a in i)o.push({stockId:a,number:i[a].number});t.tick=JSON.stringify(o),this.fetchCartTick(t)},resetCartTick:function(t){var i={marketType:"market_mogujie",userId:r.default.uid,tick:[]},o=t.sku.stockId;this.options.stockId=o;var a=[],s=e.default.get("cart.skuMap");if(s){s[o]||a.push({stockId:o,number:1});for(var n in s)n===o?a.push({stockId:n,number:s[n].number+1}):a.push({stockId:n,number:s[n].number});i.tick=JSON.stringify(a)}else i.tick=JSON.stringify([{stockId:o,number:1}]);this.fetchCartTick(i)},fetchCartTick:function(t){var e=this;m.request("mwp.CartWeb.tick","1",t).then(function(t){"SUCCESS"===t.ret&&e.initCartTickContent(t.data)}).catch(function(t){e.$toast.show(t.message)})},initCartTickContent:function(t){var e=this.options.promotionCode,i=this.options.shopId,o={};if("platformCoupon"===e){var r=t.coudanResDTO.cartLevelAdvancedSuggestionDTO;0!==parseInt(r.coudanStatus,10)&&(o={coudanStatus:r.coudanStatus,promotionCode:r.promotionCode,parameters:r.parameters})}else{var a=t.coudanResDTO.shopLevelAdvancedSuggestionDTOList;if(a&&a.length>0)for(var s=0;s<a.length;s++)0!==a[s].coudanStatus&&a[s].shopIdEsc===i&&(o={coudanStatus:a[s].coudanStatus,promotionCode:a[s].promotionCode,parameters:a[s].parameters})}var n=this.getCartPromotionInfo(o),u=n.isShow,c=n.msg;0!==Object.keys(o).length&&u&&(this.setData({isFromCart:!0,totAmount:o.parameters.selectedPrice/100,promotionText:c}),this.updateSkuListCache())},updateSkuListCache:function(){var t=this.options.stockId;if(t&&0!==t.length){var i=e.default.get("cart.skuMap");i?i[t]?i[t].number=i[t].number+1:i[t]={shopId:this.options.shopId,number:1}:(i={})[t]={shopId:this.options.shopId,number:1},e.default.put("cart.skuMap",i)}},getCartPromotionInfo:function(t){var e="",i=!0,o=t.coudanStatus,r=t.promotionCode,a=t.parameters;switch(r){case"itemCountOverDiscount":2===parseInt(o,10)?a.needNumber&&a.disCount&&a.limitNumber?e="再购"+a.needNumber+"件，可享【满"+a.limitNumber+"件打"+a.disCount/100+"折】":i=!1:a.limitNumber&&a.disCount?e="已满"+a.limitNumber+"件，立享【满"+a.limitNumber+"件打"+a.disCount/100+"折】":i=!1;break;case"packageSale":2===parseInt(o,10)?a.needNumber&&a.limitPrice&&a.limitNumber?e="再购"+a.needNumber+"件，可享【"+a.limitPrice/100+"元任选"+a.limitNumber+"件】":i=!1:a.limitNumber&&a.limitPrice?e="已满"+a.limitNumber+"件，立享【"+a.limitPrice/100+"元任选"+a.limitNumber+"件】":i=!1;break;case"itemCountOverFreePostage":2===parseInt(o,10)?a.needNumber&&a.limitNumber?e="再购"+a.needNumber+"件，可享【满"+a.limitNumber+"件包邮】":i=!1:a.limitNumber?e="已满"+a.limitNumber+"件，立享【"+a.limitNumber+"件包邮】":i=!1;break;case"reachFreePostage":2===parseInt(o,10)?a.deltaPrice&&a.limitPrice?e="再购"+a.deltaPrice/100+"元，可享【满"+a.limitPrice/100+"元包邮】":i=!1:a.limitPrice?e="已满"+a.limitPrice/100+"元，立享【"+a.limitPrice/100+"元包邮】":i=!1;break;case"itemCountOverReduce":2===parseInt(o,10)?a.needNumber&&a.limitNumber&&a.cutPrice?e="再购"+a.needNumber+"件，可享【满"+a.limitNumber+"件减"+a.cutPrice/100+"元】":i=!1:a.limitNumber&&a.cutPrice?e="已满"+a.limitNumber+"件，立享【满"+a.limitNumber+"件减"+a.cutPrice/100+"元】":i=!1;break;case"reachReduce":case"platformCoupon":2===parseInt(o,10)?a.deltaPrice&&a.limitPrice&&a.cutPrice?e="再购"+a.deltaPrice/100+"元，可享【满"+a.limitPrice/100+"元减"+a.cutPrice/100+"元】":i=!1:a.limitPrice&&a.cutPrice?e="已满"+a.limitPrice/100+"元，立享【满"+a.limitPrice/100+"元减"+a.cutPrice/100+"元】":i=!1}return{msg:e,isShow:i}}}); 
 			}); 	require("pages/wallPackage/index.js");
 		__wxRoute = 'pages/winrecord/index';__wxRouteBegin = true; 	define("pages/winrecord/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var e=t(require("../../common/m")),a=t(require("../../common/base/createPage")),i=t(require("../../components/loading/index")),o=t(require("../../components/toast/index")),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e}(require("../detail/components/base/index")).PageStatus,r=(e.default.MCE,e.default.MWP);e.default.fn.sendMsg;exports.default=(0,a.default)({components:{loading:i.default,toast:o.default},data:{},onLoad:function(t){this.$loading.show(),wx.showNavigationBarLoading(),this.activityId=t.activityId,this.ptp=t.ptp||"",this.cparam=t.cparam||"",this.acm=t.acm||"",console.log("options: ",t)},onReady:function(){this.getItemData(this.activityId)},getItemData:function(t){var e=this;r.request("mwp.enzo.superLotteryList","1",{market:"market_wechatmall",platform:"WXXCX",activityId:t}).then(r.filterResult).then(function(t){e.setData({itemData:t,pageStatus:n.REQUEST_SUCCESS}),e.$loading.hide(),wx.hideNavigationBarLoading()},function(t){e.$toast.show(t.msg),e.setData({pageStatus:n.REQUEST_ERROR}),e.$loading.hide(),wx.hideNavigationBarLoading()})}}); 
 			}); 	require("pages/winrecord/index.js");
 	