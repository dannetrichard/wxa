	var __wxAppData = {}; 	var __wxRoute; 	var __wxRouteBegin; 	var __wxAppCode__ = {};	var global = {};	var __wxAppCurrentFile__; 	var Component = Component || function(){};	var Behavior = Behavior || function(){};
		define("lib/bluebird.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e){if("object"==("undefined"==typeof exports?"undefined":t(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Promise=e()}}(function(){var e,n,r;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return i(n||t)},u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function a(t){this._normalQueue._pushOne(t),this._queueTick()}var s;try{throw new Error}catch(t){s=t}var c=t("./schedule"),l=t("./queue"),u=t("./util");r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){u.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),process.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=r,e.exports.firstLineError=s},{"./queue":17,"./schedule":18,"./util":21}],2:[function(t,e,n){e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(o),u=new t(e);u._propagateFrom(this,1);var p=this._target();if(u._setBoundTo(l),l instanceof t){var f={promiseRejectionQueued:!1,promise:u,target:p,bindingPromise:l};p._then(e,a,void 0,u,f),l._then(s,c,void 0,u,f),u._setOnCancel(l)}else u._resolveCallback(p);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],3:[function(t,e,n){var r;"undefined"!=typeof Promise&&(r=Promise);var i=t("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(t){}return i},e.exports=i},{"./promise":15}],4:[function(t,e,n){e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,c=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":21}],5:[function(t,e,n){e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,a,s){return function(c){var l=s._boundValue();t:for(var u=0;u<t.length;++u){var p=t[u];if(p===Error||null!=p&&p.prototype instanceof Error){if(c instanceof p)return i(a).call(l,c)}else if("function"==typeof p){var f=i(p).call(l,c);if(f===o)return f;if(f)return i(a).call(l,c)}else if(n.isObject(c)){for(var h=r(p),_=0;_<h.length;++_){var d=h[_];if(p[d]!=c[d])continue t}return i(a).call(l,c)}}return e}}}},{"./es5":10,"./util":21}],6:[function(t,e,n){e.exports=function(t){function e(){this._trace=new e.CapturedTrace(n())}function n(){var t=i.length-1;if(t>=0)return i[t]}var r=!1,i=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,i.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=i.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=function(){if(r)return new e},e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var i=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=i,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=c,r=!1},r=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=n,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],7:[function(e,n,r){n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+N.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function s(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?N.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function c(){return this._onCancelField}function l(t){this._onCancelField=t}function u(){this._cancellationParent=void 0,this._onCancelField=void 0}function p(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function f(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function h(){this._trace=new S(this._peekContext())}function _(t,e){if(I(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=C(t);N.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),N.notEnumerableProp(t,"__stackCleaned__",!0)}}}function d(t,e,r){if(nt.warnings){var i,o=new L(t);if(e)r._attachExtraTrace(o);else if(nt.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=C(o);o.stack=a.message+"\n"+a.stack.join("\n")}J("warning",o)||w(o,"",!0)}}function v(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function y(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function g(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(s=a;s>=0;--s){var c=r[s];if(e[i]!==c)break;e.pop(),i--}e=r}}function m(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||D.test(r),o=i&&Z(r);i&&!o&&(Q&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function b(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||D.test(r))break}return n>0&&(e=e.slice(n)),e}function C(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?b(t):["    (No stack trace)"],{message:n,stack:m(e)}}function w(e,n,r){if("undefined"!=typeof console){var i;if(N.isObject(e)){var o=e.stack;i=n+V(o,e)}else i=n+String(e);"function"==typeof R?R(i,r):"function"!=typeof console.log&&"object"!==t(console.log)||console.log(i)}}function k(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){A.throwLater(t)}"unhandledRejection"===t?J(t,n,r)||i||w(n,"Unhandled rejection "):J(t,r)}function E(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():N.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+j(e)+">, no stack trace)"}function j(t){return t.length<41?t:t.substr(0,38)+"..."}function F(){return"function"==typeof et}function T(t){var e=t.match(tt);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function S(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);et(this,S),e>32&&this.uncycle()}var O,P,R,x=n._getDomain,A=n._async,L=e("./errors").Warning,N=e("./util"),I=N.canAttachTrace,U=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,B=/\((?:timers\.js):\d+:\d+\)/,H=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,D=null,V=null,Q=!1,q=!(0==N.env("BLUEBIRD_DEBUG")),G=!(0==N.env("BLUEBIRD_WARNINGS")||!q&&!N.env("BLUEBIRD_WARNINGS")),M=!(0==N.env("BLUEBIRD_LONG_STACK_TRACES")||!q&&!N.env("BLUEBIRD_LONG_STACK_TRACES")),W=0!=N.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!N.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),A.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",O,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",P,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return d(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=x();P="function"==typeof t?null===e?t:N.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=x();O="function"==typeof t?null===e?t:N.domainBind(e,t):void 0};var $=function(){};n.longStackTraces=function(){if(A.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!nt.longStackTraces&&F()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;nt.longStackTraces=!0,$=function(){if(A.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),A.enableTrampoline(),nt.longStackTraces=!1},n.prototype._captureStackTrace=h,n.prototype._attachExtraTrace=_,r.activateLongStackTraces(),A.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return nt.longStackTraces&&F()};var z=function(){try{if("function"==typeof CustomEvent){t=new CustomEvent("CustomEvent");return N.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!N.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return N.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!N.global.dispatchEvent(n)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),N.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!N.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),X=N.isNode?function(){return process.emit.apply(process,arguments)}:N.global?function(t){var e="on"+t.toLowerCase(),n=N.global[e];return!!n&&(n.apply(N.global,[].slice.call(arguments,1)),!0)}:function(){return!1},K={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},J=function(t){var e=!1;try{e=X.apply(null,arguments)}catch(t){A.throwLater(t),e=!0}var n=!1;try{n=z(t,K[t].apply(null,arguments))}catch(t){A.throwLater(t),n=!0}return n||e};n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&$()),"warnings"in t){var e=t.warnings;nt.warnings=!!e,W=nt.warnings,N.isObject(e)&&"wForgottenReturn"in e&&(W=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!nt.cancellation){if(A.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=u,n.prototype._propagateFrom=p,n.prototype._onCancel=c,n.prototype._setOnCancel=l,n.prototype._attachCancellationCallback=s,n.prototype._execute=a,Y=p,nt.cancellation=!0}"monitoring"in t&&(t.monitoring&&!nt.monitoring?(nt.monitoring=!0,n.prototype._fireEvent=J):!t.monitoring&&nt.monitoring&&(nt.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var Y=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)},Z=function(){return!1},tt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;N.inherits(S,Error),r.CapturedTrace=S,S.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var a=n[e[r].stack];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var s=r>0?e[r-1]:this;a<t-1?(s._parent=e[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},S.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=C(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(m(i.stack.split("\n"))),i=i._parent;g(r),y(r),N.notEnumerableProp(t,"stack",v(n,r)),N.notEnumerableProp(t,"__stackCleaned__",!0)}};var et=function(){var e=/^\s*at\s*/,n=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():E(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,D=e,V=n;var r=Error.captureStackTrace;return Z=function(t){return U.test(t)},function(t,e){Error.stackTraceLimit+=6,r(t,e),Error.stackTraceLimit-=6}}var i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return D=/@/,V=n,Q=!0,function(t){t.stack=(new Error).stack};var o;try{throw new Error}catch(t){o="stack"in t}return"stack"in i||!o||"number"!=typeof Error.stackTraceLimit?(V=function(e,n){return"string"==typeof e?e:"object"!==(void 0===n?"undefined":t(n))&&"function"!=typeof n||void 0===n.name||void 0===n.message?E(n):n.toString()},null):(D=e,V=n,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(R=function(t){console.warn(t)},N.isNode&&process.stderr.isTTY?R=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:N.isNode||"string"!=typeof(new Error).stack||(R=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var nt={warnings:G,longStackTraces:!1,cancellation:!1,monitoring:!1};return M&&n.longStackTraces(),{longStackTraces:function(){return nt.longStackTraces},warnings:function(){return nt.warnings},cancellation:function(){return nt.cancellation},monitoring:function(){return nt.monitoring},propagateFromFunction:function(){return Y},boundValueFunction:function(){return f},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&W){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),c=m(s),l=c.length-1;l>=0;--l){var u=c[l];if(!B.test(u)){var p=u.match(H);p&&(o="at "+p[1]+":"+p[2]+":"+p[3]+" ");break}}if(c.length>0)for(var f=c[0],l=0;l<s.length;++l)if(s[l]===f){l>0&&(a="\n"+s[l-1]);break}}var h="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(h,!0,e)}},setBounds:function(t,e){if(F()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,s=-1,c=0;c<i.length;++c)if(l=T(i[c])){n=l.fileName,a=l.line;break}for(c=0;c<o.length;++c){var l=T(o[c]);if(l){r=l.fileName,s=l.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(Z=function(t){if(U.test(t))return!0;var e=T(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:d,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),d(n)},CapturedTrace:S,fireDomEvent:z,fireGlobalEvent:X}}},{"./errors":9,"./util":21}],8:[function(t,e,n){e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();return this.caught(n,function(){return r})}}},{}],9:[function(t,e,n){function r(t,e){function n(r){if(!(this instanceof n))return new n(r);p(this,"message","string"==typeof r?r:e),p(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(n,Error),n}function i(t){if(!(this instanceof i))return new i(t);p(this,"name","OperationalError"),p(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(p(this,"message",t.message),p(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var o,a,s=t("./es5"),c=s.freeze,l=t("./util"),u=l.inherits,p=l.notEnumerableProp,f=r("Warning","warning"),h=r("CancellationError","cancellation error"),_=r("TimeoutError","timeout error"),d=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(t){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<v.length;++y)"function"==typeof Array.prototype[v[y]]&&(d.prototype[v[y]]=Array.prototype[v[y]]);s.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var g=0;d.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return g--,e},u(i,Error);var m=Error.__BluebirdErrorTypes__;m||(m=c({CancellationError:h,TimeoutError:_,OperationalError:i,RejectionError:i,AggregateError:d}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:f}},{"./es5":10,"./util":21}],10:[function(t,e,n){var r=function(){return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],11:[function(t,e,n){e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function a(){return c.call(this,this.promise._target()._settledValue())}function s(t){if(!o(this,t))return p.e=t,p}function c(t){var r=this.promise,c=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?c.call(r._boundValue()):c.call(r._boundValue(),t);if(void 0!==l){r._setReturnedNonUndefined();var f=n(l,r);if(f instanceof e){if(null!=this.cancelPromise){if(f._isCancelled()){var h=new u("late cancellation observer");return r._attachExtraTrace(h),p.e=h,p}f.isPending()&&f._attachCancellationCallback(new i(this))}return f._then(a,s,void 0,this,void 0)}}}return r.isRejected()?(o(this),p.e=t,p):(o(this),t)}var l=t("./util"),u=e.CancellationError,p=l.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,c,c)},e.prototype.tap=function(t){return this._passThrough(t,1,c)},r}},{"./util":21}],12:[function(t,e,n){e.exports=function(e,n,r,i,o,a){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e]}var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":21}],13:[function(t,e,n){e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=a.isArray(l)?s(t).apply(u,l):s(t).call(u,l)}else c=s(t)();var p=r._popContext();return o.checkForgottenReturns(c,p,"Promise.try",r),r._resolveFromSyncValue(c),r},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":21}],14:[function(t,e,n){function r(t){return t instanceof Error&&c.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){(e=new s(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=c.keys(t),i=0;i<n.length;++i){var a=n[i];l.test(a)||(e[a]=t[a])}return e}return o.markAsOriginatingFromRejection(t),t}var o=t("./util"),a=o.maybeWrapAsError,s=t("./errors").OperationalError,c=t("./es5"),l=/^(?:name|message|stack|cause)$/;e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=i(a(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var s=[].slice.call(arguments,1);t._fulfill(s)}else t._fulfill(r);t=null}}}},{"./errors":9,"./es5":10,"./util":21}],15:[function(t,e,n){e.exports=function(){function n(){}function r(t,e){if("function"!=typeof e)throw new g("expecting a function but got "+h.classString(e));if(t.constructor!==i)throw new g("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function i(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==b&&(r(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(t){this.promise._resolveCallback(t)}function a(t){this.promise._rejectCallback(t,!1)}function s(t){var e=new i(b);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new g("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},p=function(t){return i.reject(new g(t))},f={},h=t("./util");c=h.isNode?function(){var t=process.domain;return void 0===t&&(t=null),t}:function(){return null},h.notEnumerableProp(i,"_getDomain",c);var _=t("./es5"),d=t("./async"),v=new d;_.defineProperty(i,"_async",{value:v});var y=t("./errors"),g=i.TypeError=y.TypeError;i.RangeError=y.RangeError;var m=i.CancellationError=y.CancellationError;i.TimeoutError=y.TimeoutError,i.OperationalError=y.OperationalError,i.RejectionError=y.OperationalError,i.AggregateError=y.AggregateError;var b=function(){},C={},w={},k=t("./thenables")(i,b),E=t("./promise_array")(i,b,k,p,n),j=t("./context")(i),F=(j.create,t("./debuggability")(i,j)),T=(F.CapturedTrace,t("./finally")(i,k)),S=t("./catch_filter")(w),O=t("./nodeback"),P=h.errorObj,R=h.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!h.isObject(o))return p("expecting an object but got A catch statement predicate "+h.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,S(r,t,this))}return this.then(void 0,t)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(t,e){if(F.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+h.classString(t);arguments.length>1&&(n+=", "+h.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},i.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},i.prototype.spread=function(t){return"function"!=typeof t?p("expecting a function but got "+h.classString(t)):this.all()._then(t,void 0,void 0,C,void 0)},i.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},i.prototype.error=function(t){return this.caught(h.originatesFromRejection,t)},i.getNewLibraryCopy=e.exports,i.is=function(t){return t instanceof i},i.fromNode=i.fromCallback=function(t){var e=new i(b);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=R(t)(O(e,n));return r===P&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},i.all=function(t){return new E(t).promise()},i.cast=function(t){var e=k(t);return e instanceof i||((e=new i(b))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(t){var e=new i(b);return e._captureStackTrace(),e._rejectCallback(t,!0),e},i.setScheduler=function(t){if("function"!=typeof t)throw new g("expecting a function but got "+h.classString(t));return v.setScheduler(t)},i.prototype._then=function(t,e,n,r,o){var a=void 0!==o,s=a?o:new i(b),l=this._target(),u=l._bitField;a||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&u)?this._boundValue():l===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var p=c();if(0!=(50397184&u)){var f,_,d=l._settlePromiseCtx;0!=(33554432&u)?(_=l._rejectionHandler0,f=t):0!=(16777216&u)?(_=l._fulfillmentHandler0,f=e,l._unsetRejectionIsUnhandled()):(d=l._settlePromiseLateCancellationObserver,_=new m("late cancellation observer"),l._attachExtraTrace(_),f=e),v.invoke(d,l,{handler:null===p?f:"function"==typeof f&&h.domainBind(p,f),promise:s,receiver:r,value:_})}else l._addCallbacks(t,e,s,r,p);return s},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},i.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){v.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==f)return void 0===e&&this._isBound()?this._boundValue():e},i.prototype._promiseAt=function(t){return this[4*t-4+2]},i.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},i.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=f),this._addCallbacks(e,n,r,i,null)},i.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=f),this._addCallbacks(n,r,i,o,null)},i.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:h.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:h.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:h.domainBind(i,e))}return this._setLength(o+1),o},i.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},i.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=k(t,this);if(!(n instanceof i))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var a=this._length();a>0&&r._migrateCallback0(this);for(var s=1;s<a;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var c=new m("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}else this._reject(l())}},i.prototype._rejectCallback=function(t,e,n){var r=h.ensureErrorObject(t),i=r===t;if(!i&&!n&&F.warnings()){var o="a promise was rejected with a non-error: "+h.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},i.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},i.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){r._pushContext();var o;e===C?n&&"number"==typeof n.length?o=R(t).apply(this._boundValue(),n):(o=P).e=new g("cannot .spread() a non-array: "+h.classString(n)):o=R(t).call(e,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===w?r._reject(n):o===P?r._rejectCallback(o.e,!1):(F.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},i.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(t){this._rejectionHandler0=t},i.prototype._settlePromise=function(t,e,r,o){var a=t instanceof i,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(a&&t._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=t,R(e).call(r,o)===P&&t._reject(P.e)):e===u?t._fulfill(u.call(r)):r instanceof n?r._promiseCancelled(t):a||t instanceof E?t._cancel():r.cancel()):"function"==typeof e?a?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,r,o,t)):e.call(r,o,t):r instanceof n?r._isResolved()||(0!=(33554432&s)?r._promiseFulfilled(o,t):r._promiseRejected(o,t)):a&&(c&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(o):t._reject(o))},i.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,o=t.value;"function"==typeof e?n instanceof i?this._settlePromiseFromHandler(e,r,o,n):e.call(r,o,n):n instanceof i&&n._reject(o)},i.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},i.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},i.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},i.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():v.settlePromises(this))}},i.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return v.fatalError(t,h.isNode);(65535&e)>0?v.settlePromises(this):this._ensurePossibleRejectionHandled()}},i.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},i.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){return F.deprecated("Promise.defer","new Promise"),{promise:new i(b),resolve:o,reject:a}},h.notEnumerableProp(i,"_makeSelfResolutionError",l),t("./method")(i,b,k,p,F),t("./bind")(i,b,k,F),t("./cancel")(i,E,p,F),t("./direct_resolve")(i),t("./synchronous_inspection")(i),t("./join")(i,E,k,b,v,c),i.Promise=i,i.version="3.4.6",h.toFastProperties(i),h.toFastProperties(i.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new i(b)),F.setBounds(d.firstLineError,h.lastLineError),i}},{"./async":1,"./bind":2,"./cancel":4,"./catch_filter":5,"./context":6,"./debuggability":7,"./direct_resolve":8,"./errors":9,"./es5":10,"./finally":11,"./join":12,"./method":13,"./nodeback":14,"./promise_array":16,"./synchronous_inspection":19,"./thenables":20,"./util":21}],16:[function(t,e,n){e.exports=function(e,n,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var c=t("./util");c.isArray;return c.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){var l=(s=s._target())._bitField;if(this._values=s,0==(50397184&l))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&l))return 0!=(16777216&l)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=c.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(a(o));else{var u=i("expecting an array or an iterable object but got "+c.classString(s)).reason();this._promise._rejectCallback(u,!1)}},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var c=r(t[s],i);a=c instanceof e?(c=c._target())._bitField:null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0==(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!=(33554432&a)?this._promiseFulfilled(c._value(),s):0!=(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":21}],17:[function(t,e,n){function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=(this._front-1&e-1^e)-e;this[n]=t,this._front=n,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,r(this,0,this,e,this._front+this._length&e-1)},e.exports=i},{}],18:[function(t,e,n){var r,i=t("./util"),o=i.getNativePromise();if(i.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,s=process.nextTick;r=i.isRecentNode?function(t){a.call(global,t)}:function(t){s.call(process,t)}}else if("function"==typeof o&&"function"==typeof o.resolve){var c=o.resolve();r=function(t){c.then(t)}}else r="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e);var i=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),i()}}();e.exports=r},{"./util":21}],19:[function(t,e,n){e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],20:[function(t,e,n){e.exports=function(e,n){function r(t){return t.then}function i(t){try{return r(t)}catch(t){return c.e=t,c}}function o(t){try{return u.call(t,"_promise0")}catch(t){return!1}}function a(t,r,i){var o=new e(n),a=o;i&&i._pushContext(),o._captureStackTrace(),i&&i._popContext();var l=!0,u=s.tryCatch(r).call(t,function(t){o&&(o._resolveCallback(t),o=null)},function(t){o&&(o._rejectCallback(t,l,!0),o=null)});return l=!1,o&&u===c&&(o._rejectCallback(u.e,!0,!0),o=null),a}var s=t("./util"),c=s.errorObj,l=s.isObject,u={}.hasOwnProperty;return function(t,r){if(l(t)){if(t instanceof e)return t;var s=i(t);if(s===c)return r&&r._pushContext(),u=e.reject(s.e),r&&r._popContext(),u;if("function"==typeof s){if(o(t)){var u=new e(n);return t._then(u._fulfill,u._reject,void 0,u,null),u}return a(t,s,r)}}return t}}},{"./util":21}],21:[function(e,n,r){function i(){try{var t=P;return P=null,t.apply(this,arguments)}catch(t){return O.e=t,O}}function o(t){return P=t,i}function a(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function s(e){return"function"==typeof e||"object"===(void 0===e?"undefined":t(e))&&null!==e}function c(t){return a(t)?new Error(y(t)):t}function l(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function u(t,e,n){if(!T.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function p(t,e,n){if(a(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return T.defineProperty(t,e,r),t}function f(t){throw t}function h(t){try{if("function"==typeof t){var e=T.names(t.prototype),n=T.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=L.test(t+"")&&T.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function _(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function d(t){return N.test(t)}function v(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function y(t){try{return t+""}catch(t){return"[no string representation]"}}function g(e){return null!==e&&"object"===(void 0===e?"undefined":t(e))&&"string"==typeof e.message&&"string"==typeof e.name}function m(t){try{p(t,"isOperational",!0)}catch(t){}}function b(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function C(t){return g(t)&&T.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function k(t,e,n){for(var r=T.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{T.defineProperty(e,o,T.getDescriptor(t,o))}catch(t){}}}function E(t,e){return H?process.env[t]:e}function j(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function F(t,e){return t.bind(e)}var T=e("./es5"),S="undefined"==typeof navigator,O={e:{}},P,R="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,x=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},A=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(T.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var a=0;a<o.length;++a){var s=o[a];if(!i[s]){i[s]=!0;var c=Object.getOwnPropertyDescriptor(t,s);null!=c&&null==c.get&&null==c.set&&r.push(s)}}t=T.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),L=/this\s*\.\s*\S+\s*=/,N=/^[a-z$_][a-z$_0-9]*$/i,I="stack"in new Error?function(t){return C(t)?t:new Error(y(t))}:function(t){if(C(t))return t;try{throw new Error(y(t))}catch(t){return t}},U=function(t){return T.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var B="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};U=function(t){return T.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?B(t):null}}var H="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),D={isClass:h,isIdentifier:d,inheritedDataKeys:A,getDataPropertyOrDefault:u,thrower:f,isArray:T.isArray,asArray:U,notEnumerableProp:p,isPrimitive:a,isObject:s,isError:g,canEvaluate:S,errorObj:O,tryCatch:o,inherits:x,withAppended:l,maybeWrapAsError:c,toFastProperties:_,filledRange:v,toString:y,canAttachTrace:C,ensureErrorObject:I,originatesFromRejection:b,markAsOriginatingFromRejection:m,classString:w,copyDescriptors:k,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,env:E,global:R,getNativePromise:j,domainBind:F};D.isRecentNode=D.isNode&&function(){var t=process.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),D.isNode&&D.toFastProperties(process);try{throw new Error}catch(t){D.lastLineError=t}n.exports=D},{"./es5":10}]},{},[3])(3)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise); 
 			}); 
		define("lib/fetch.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("./bluebird");module.exports=function(e){var o={method:"GET",url:"",data:{}};if(o=Object.assign({},o,e),o.data=Object.assign({},o.data,e.data),!o.url)return!1;var a={"content-type":"application/json"};return"POST"!=o.method&&"post"!=o.method||(a={"content-type":"application/x-www-form-urlencoded"}),new t(function(t,e){wx.request({url:o.url,data:o.data,method:o.method,header:a,success:function(a){a=Object.assign({},a,{url:o.url}),console.log(a),0==a.data.errcode?t(a):e(a)},fail:function(t){console.log(t),wx.showModal({title:"提示",content:"网络繁忙，请稍候重试",showCancel:!1})}})})}; 
 			}); 
		define("lib/mta_analysis.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){wx.getNetworkType({success:function(n){t(n.networkType)}})}function n(){var t=wx.getSystemInfoSync();return{adt:encodeURIComponent(t.model),scl:t.pixelRatio,scr:t.windowWidth+"x"+t.windowHeight,lg:t.language,fl:t.version,jv:encodeURIComponent(t.system),tz:encodeURIComponent(t.platform)}}function a(){try{return wx.getStorageSync(h.prefix+"auid")}catch(t){}}function e(){try{var t=i();return wx.setStorageSync(h.prefix+"auid",t),t}catch(t){}}function r(){try{return wx.getStorageSync(h.prefix+"ssid")}catch(t){}}function o(){try{var t="s"+i();return wx.setStorageSync(h.prefix+"ssid",t),t}catch(t){}}function i(t){return(t||"")+Math.round(2147483647*(Math.random()||.5))*+new Date%1e10}function s(){try{var t=getCurrentPages(),n="/";return 0<t.length&&(n=t.pop().__route__),n}catch(t){console.log("get current page path error:"+t)}}function u(){var t={dm:"wechat.apps.xx",url:s(),pvi:"",si:"",ty:0};return t.pvi=function(){var n=a();return n||(n=e(),t.ty=1),n}(),t.si=function(){var t=r();return t||(t=o()),t}(),t}function c(){var a=n();return t(function(t){wx.setStorageSync(h.prefix+"ntdata",t)}),a.ct=wx.getStorageSync(h.prefix+"ntdata")||"4g",a}function p(){return{r2:h.app_id,r4:"wx",ext:"v="+h.version+(null!==l.Data.userInfo?";ui="+JSON.stringify(l.Data.userInfo):"")}}var h={app_id:"",event_id:"",api_base:"https://pingtas.qq.com/pingd",prefix:"_mta_",version:"1.3.3",stat_share_app:!1,stat_pull_down_fresh:!1,stat_reach_bottom:!1},l={App:{init:function(t){"appID"in t&&(h.app_id=t.appID),"eventID"in t&&(h.event_id=t.eventID),"statShareApp"in t&&(h.stat_share_app=t.statShareApp),"statPullDownFresh"in t&&(h.stat_pull_down_fresh=t.statPullDownFresh),"statReachBottom"in t&&(h.stat_reach_bottom=t.statReachBottom),o(),"lauchOpts"in t&&(l.Data.lanchInfo=t.lauchOpts,l.Data.lanchInfo.landing=1)}},Page:{init:function(){var t=getCurrentPages()[getCurrentPages().length-1];t.onShow&&function(){var n=t.onShow;t.onShow=function(){l.Page.stat(),n.call(this,arguments)}}(),h.stat_pull_down_fresh&&t.onPullDownRefresh&&function(){var n=t.onPullDownRefresh;t.onPullDownRefresh=function(){l.Event.stat(h.prefix+"pulldownfresh",{url:t.__route__}),n.call(this,arguments)}}(),h.stat_reach_bottom&&t.onReachBottom&&function(){var n=t.onReachBottom;t.onReachBottom=function(){l.Event.stat(h.prefix+"reachbottom",{url:t.__route__}),n.call(this,arguments)}}(),h.stat_share_app&&t.onShareAppMessage&&function(){var n=t.onShareAppMessage;t.onShareAppMessage=function(){return l.Event.stat(h.prefix+"shareapp",{url:t.__route__}),n.call(this,arguments)}}()},stat:function(){if(""!=h.app_id){var t=[],n=p(),a=[u(),n,c()];l.Data.lanchInfo&&(a.push({ht:l.Data.lanchInfo.scene,rdm:"/",rurl:l.Data.lanchInfo.path}),l.Data.lanchInfo.query&&l.Data.lanchInfo.query._mta_ref_id&&a.push({rarg:l.Data.lanchInfo.query._mta_ref_id}),l.Data.lanchInfo.landing&&(n.ext+=";lp=1",delete l.Data.lanchInfo.landing)),a.push({rand:+new Date});for(var n=0,e=a.length;n<e;n++)for(var r in a[n])a[n].hasOwnProperty(r)&&t.push(r+"="+(void 0===a[n][r]?"":a[n][r]));wx.request({url:h.api_base+"?"+t.join("&").toLowerCase()})}}},Event:{stat:function(t,n){if(""!=h.event_id){var a=[],e=u(),r=p();e.dm="wxapps.click",e.url=t,r.r2=h.event_id;var o;o=void 0===n?{}:n;var i,s=[];for(i in o)o.hasOwnProperty(i)&&s.push(i+"="+o[i]);for(o=s.join(";"),r.r5=o,o=0,r=(e=[e,r,c(),{rand:+new Date}]).length;o<r;o++)for(var l in e[o])e[o].hasOwnProperty(l)&&a.push(l+"="+(void 0===e[o][l]?"":e[o][l]));wx.request({url:h.api_base+"?"+a.join("&").toLowerCase()})}}},Data:{userInfo:null,lanchInfo:null}};module.exports=l; 
 			}); 
		define("lib/request.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function a(e){console.log("[request] obj:",e);var a=e.url;if(!a)return!1;c.globalData.isGamma&&(e.url="https://payapp.weixin.qq.com/sandbox/"+a.slice(29)),(a.indexOf("login")>-1||a.indexOf("switchmerchant")>-1)&&o(e),e.data&&!e.data.sid||e.formData&&!e.formData.sid?t(e):o(e)}function t(e){void 0===e.reloginLimit?e.reloginLimit=0:e.reloginLimit++,e.reloginLimit<2?(console.log("[request] doLogin obj:",e),n.default.wxLogin(function(t){t&&t.sid&&(e.data?e.data.sid=t.sid:"uploadfile"==e.method.toLowerCase()&&(e.formData.sid=t.sid)),a(e)})):wx.showModal({title:"提示",content:"登录失败，请关闭再打开小程序重试",showCancel:!1})}function o(e){var a={method:"GET",url:"",data:{},showLoading:!0,success:function(e){},fail:function(e){console.log("fail:",JSON.stringify(e)),s.default.hideLoading(),wx.showModal({title:"提示",content:"网络错误，请稍后重试",showCancel:!1})}};(a=Object.assign({},a,e)).data=Object.assign({},a.data,e.data),a.success=function(t){s.default.hideLoading();var c=t.data;if(c.errcode&&"268697631"==c.errcode)return console.log("[request] 刷新小程序session"),n.default.refreshToken(function(){o(e)}),!1;"268697634"==c.errcode?i({success:function(e,t){a.checkNeedVerifyPwd=!1,a.data=Object.assign({},a.data,{bus_info:e,check_pwd_token:t}),o(a)},fail:function(e){a.fail(e)}}):"268697609"==c.errcode?(console.log("非雇员"),wx.removeStorageSync("sid"),wx.removeStorageSync("sid_time"),wx.removeStorageSync("mch_id"),wx.reLaunch({url:"/pages/entry/index"})):e.success(t)};var t={"content-type":"application/json"};return"POST"==a.method&&(t={"content-type":"application/x-www-form-urlencoded"}),!!a.url&&(a.showLoading&&s.default.showLoading(),console.log("params",a),"uploadfile"==a.method.toLowerCase()?(wx.uploadFile({url:a.url,filePath:a.filePath,name:a.name,formData:a.formData,success:a.success,fail:a.fail}),!1):void wx.request({url:a.url,data:a.data,method:a.method,header:t,success:a.success,fail:a.fail}))}function i(e){var a={success:function(e,a){},fail:function(){}};e=Object.assign({},a,e),o({checkNeedVerifyPwd:!1,method:"GET",url:"https://payapp.weixin.qq.com/mdmgr/weapp/getusertoken",data:{sid:wx.getStorageSync("sid")},showLoading:!1,success:function(a){if(a&&a.data&&0===a.data.errcode){var t={timeStamp:a.data.data.params.timeStamp+"",nonceStr:a.data.data.params.nonceStr,package:a.data.data.params.package,signType:a.data.data.params.signType,paySign:a.data.data.params.paySign};console.log(JSON.stringify(t,null,2)),wx.verifyPaymentPassword(Object.assign({},t,{success:function(t){console.log(t),e.success(a.data.data.bus_info,t.token)},fail:function(e){var a=getCurrentPages();"pages/record/detail"!=a[a.length-1].route&&wx.navigateBack({delta:1}),console.log(e)}}))}else e.fail(a)},fail:function(a){e.fail(a)}})}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("../login")),s=e(require("./wechat")),c=getApp();exports.default=a; 
 			}); 
		define("lib/util.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return(Array(2).join(0)+e).slice(-2)}function t(e){return e.toString().replace(/^([0-9])$/gi,"0$1")}function r(e){console.log("app: ",i);var t={cgi:"",code:"",msg:""};t=Object.assign({},t,e),o.Event.stat("errCode",{cgi:void 0!==t.cgi?t.cgi:"true"}),o.Event.stat("errCode",{code:void 0!==t.code?t.code:"true"}),o.Event.stat("errCode",{msg:void 0!==t.msg?t.msg:"true"}),o.Event.stat("errCode",{version:i.globalData.data.version||"true"})}function n(e){if(!e)return"";try{var t=e.split("/").slice(-2).join("_")}catch(t){return e}return t}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./mta_analysis"),i=getApp();Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e},exports.default={twoFixed:t,dataInit:function(e){return e+="",{y:e.substring(0,4),m:e.substring(4,6),d:e.substring(6)}},getFormatDate:function(e){var r=e||new Date;return r.getFullYear().toString()+t(r.getMonth()+1)+t(r.getDate())},mtaErrReport:r,formatFee:function(e){return Number(e/100).toFixed(2)},getQuery:function(e,t){var r=arguments[1]||window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=r.substr(r.indexOf("?")+1).match(n);return null!=o?decodeURIComponent(o[2]):""},getShortUrl:n,accMul:function(e,t){var r=0,n=e.toString(),o=t.toString();try{r+=n.split(".")[1].length}catch(e){}try{r+=o.split(".")[1].length}catch(e){}return Number(n.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,r)},dateDetail:function(t){var r=new Date;return r.setTime(1e3*t),{y:r.getFullYear(),m:e(r.getMonth()+1),d:e(r.getDate()),hh:e(r.getHours()),mm:e(r.getMinutes()),ss:e(r.getSeconds())}},getTimeStamp:function(){return parseInt((new Date).getTime()/1e3)},encodeParam:function(e){return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")},report:function(e,t,o){r({cgi:n(e)+"_code:"+o.errcode+"_sid:"+t||"",code:o.errcode||"f",msg:n(e)+"_"+o.msg+"_sid:"+t||""})}}; 
 			}); 
		define("lib/wechat.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var o=require("./bluebird");module.exports={login:function(){return new o(function(o,n){wx.login({success:o,fail:n})})},getUserInfo:function(){return new o(function(o,n){wx.getUserInfo({success:o,fail:n})})},setStorage:function(n,e){return new o(function(o,c){wx.setStorage({key:n,data:e,success:o,fail:c})})},getStorage:function(n){return new o(function(o,e){wx.getStorage({key:n,success:o,fail:e})})},getLocation:function(n){return new o(function(o,e){wx.getLocation({type:n,success:o,fail:e})})},chooseImage:function(n){return new o(function(o,e){var c={success:function(n){console.log("chooseImage success"),o(n)},fail:function(o){console.log("chooseImage fail"),e(o)}};c=Object.assign({},c,n),wx.chooseImage(c)})},uploadFile:function(n){return new o(function(o,e){var c={success:function(n){console.log("uploadFile success"),o(n)},fail:function(o){console.log("uploadFile fail"),e(o)}};c=Object.assign({},c,n),wx.uploadFile(c)})},showLoading:function(o){wx.showLoading?wx.showLoading({title:o&&o.title||"加载中",mask:o&&o.mask||!1}):wx.showModal({title:"提示",content:"当前微信版本过低，请升级到最新微信版本。",confirmText:"知道了",showCancel:!1})},hideLoading:function(){wx.hideLoading?wx.hideLoading():wx.showModal({title:"提示",content:"当前微信版本过低，请升级到最新微信版本。",confirmText:"知道了",showCancel:!1})},reLaunch:function(o){wx.reLaunch?wx.reLaunch({url:o.url}):(wx.showModal({title:"提示",content:"当前微信版本过低，请升级到最新微信版本。",confirmText:"知道了",success:function(n){console.log("showModal success: ",n),console.log("redirectTo "+o.url)},showCancel:!1}),wx.redirectTo&&wx.redirectTo({url:o.url}))},showModal:function(o){var n=function(o){o.confirm};o.success&&(n=o.success),wx.showModal({title:o.title||"",content:o.content||" ",confirmText:o.confirmText||"确定",showCancel:o.showCancel||!1,confirmColor:"#4ea766",success:n})},original:wx}; 
 			}); 
		define("lib/wxcharts.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i}function e(t,e,i){if(isNaN(t))throw new Error("[wxCharts] unvalid series data!");i=i||10,e=e||"upper";for(var n=1;i<1;)i*=10,n*=10;for(t="upper"===e?Math.ceil(t*n):Math.floor(t*n);t%i!=0;)"upper"===e?t++:t--;return t/n}function i(t,e,i){function n(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}return t=n(t),e=n(e),i=n(i),e>i&&(i+=2*Math.PI,t<e&&(t+=2*Math.PI)),t>=e&&t<=i}function n(t,e,i){var n=t,a=i-e,o=n+(i-a-n)/Math.sqrt(2);return{transX:o*=-1,transY:(i-a)*(Math.sqrt(2)-1)-(i-a-n)/Math.sqrt(2)}}function a(t,e){function i(t,e){return!(!t[e-1]||!t[e+1])&&(t[e].y>=Math.max(t[e-1].y,t[e+1].y)||t[e].y<=Math.min(t[e-1].y,t[e+1].y))}var n=null,a=null,o=null,r=null;if(e<1?(n=t[0].x+.2*(t[1].x-t[0].x),a=t[0].y+.2*(t[1].y-t[0].y)):(n=t[e].x+.2*(t[e+1].x-t[e-1].x),a=t[e].y+.2*(t[e+1].y-t[e-1].y)),e>t.length-3){var s=t.length-1;o=t[s].x-.2*(t[s].x-t[s-1].x),r=t[s].y-.2*(t[s].y-t[s-1].y)}else o=t[e+1].x-.2*(t[e+2].x-t[e].x),r=t[e+1].y-.2*(t[e+2].y-t[e].y);return i(t,e+1)&&(r=t[e+1].y),i(t,e)&&(a=t[e].y),{ctrA:{x:n,y:a},ctrB:{x:o,y:r}}}function o(t,e,i){return{x:i.x+t,y:i.y-e}}function r(t,e){if(e)for(;V.isCollision(t,e);)t.start.x>0?t.start.y--:t.start.x<0?t.start.y++:t.start.y>0?t.start.y++:t.start.y--;return t}function s(t,e){var i=0;return t.map(function(t){return t.color||(t.color=e.colors[i],i=(i+1)%e.colors.length),t})}function l(t,i){var n=0,a=i-t;return n=a>=1e4?1e3:a>=1e3?100:a>=100?10:a>=10?5:a>=1?1:a>=.1?.1:.01,{minRange:e(t,"lower",n),maxRange:e(i,"upper",n)}}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=0;return(t=(t=String(t)).split("")).forEach(function(t){/[a-zA-Z]/.test(t)?i+=7:/[0-9]/.test(t)?i+=5.5:/\./.test(t)?i+=2.7:/-/.test(t)?i+=3.25:/[\u4e00-\u9fa5]/.test(t)?i+=10:/\(|\)/.test(t)?i+=3.73:/\s/.test(t)?i+=2.5:/%/.test(t)?i+=8:i+=10}),i*e/10}function c(t){return t.reduce(function(t,e){return(t.data?t.data:t).concat(e.data)},[])}function f(t,e){var i=[];return t.forEach(function(t){if(null!==t.data[e]&&"undefinded"!=typeof t.data[e]){var n={};n.color=t.color,n.name=t.name,n.data=t.format?t.format(t.data[e]):t.data[e],i.push(n)}}),i}function d(t){var e=t.map(function(t){return h(t)});return Math.max.apply(null,e)}function x(t){for(var e=2*Math.PI/t,i=[],n=0;n<t;n++)i.push(e*n);return i.map(function(t){return-1*t+Math.PI/2})}function u(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=t.map(function(t){return{text:a.format?a.format(t,n[i]):t.name+": "+t.data,color:t.color}}),r=[],s={x:0,y:0};return e.forEach(function(t){"undefinded"!=typeof t[i]&&null!==t[i]&&r.push(t[i])}),r.forEach(function(t){s.x=Math.round(t.x),s.y+=t.y}),s.y/=r.length,{textList:o,offset:s}}function g(t,e,i,n){var a=-1;return p(t,i,n)&&e.forEach(function(e,i){t.x>e&&(a=i)}),a}function p(t,e,i){return t.x<e.width-i.padding&&t.x>i.padding+i.yAxisWidth+i.yAxisTitleWidth&&t.y>i.padding&&t.y<e.height-i.legendHeight-i.xAxisHeight-i.padding}function y(t,e,i){var n=2*Math.PI/i,a=-1;return P(t,e.center,e.radius)&&function(){var i=function(t){return t<0&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t},o=Math.atan2(e.center.y-t.y,t.x-e.center.x);(o*=-1)<0&&(o+=2*Math.PI),e.angleList.map(function(t){return t=i(-1*t)}).forEach(function(t,e){var r=i(t-n/2),s=i(t+n/2);s<r&&(s+=2*Math.PI),(o>=r&&o<=s||o+2*Math.PI>=r&&o+2*Math.PI<=s)&&(a=e)})}(),a}function v(t,e){var n=-1;if(P(t,e.center,e.radius)){var a=Math.atan2(e.center.y-t.y,t.x-e.center.x);a=-a;for(var o=0,r=e.series.length;o<r;o++){var s=e.series[o];if(i(a,s._start_,s._start_+2*s._proportion_*Math.PI)){n=o;break}}}return n}function P(t,e,i){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)}function m(t){var e=[],i=[];return t.forEach(function(t,n){null!==t?i.push(t):(i.length&&e.push(i),i=[])}),i.length&&e.push(i),e}function T(t,e,i){if(!1===e.legend)return{legendList:[],legendHeight:0};var n=[],a=0,o=[];return t.forEach(function(t){var i=30+h(t.name||"undefinded");a+i>e.width?(n.push(o),a=i,o=[t]):(a+=i,o.push(t))}),o.length&&n.push(o),{legendList:n,legendHeight:n.length*(i.fontSize+8)+5}}function S(t,e,i){var n={angle:0,xAxisHeight:i.xAxisHeight},a=L(t,e,i).eachSpacing,o=t.map(function(t){return h(t)}),r=Math.max.apply(this,o);return r+2*i.xAxisTextPadding>a&&(n.angle=45*Math.PI/180,n.xAxisHeight=2*i.xAxisTextPadding+r*Math.sin(n.angle)),n}function A(t,e,i,n,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=a.extra.radar||{};s.max=s.max||0;var l=Math.max(s.max,Math.max.apply(null,c(n))),h=[];return n.forEach(function(n){var a={};a.color=n.color,a.data=[],n.data.forEach(function(n,s){var h={};h.angle=t[s],h.proportion=n/l,h.position=o(i*h.proportion*r*Math.cos(h.angle),i*h.proportion*r*Math.sin(h.angle),e),a.data.push(h)}),h.push(a)}),h}function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=0,n=0;return t.forEach(function(t){t.data=null===t.data?0:t.data,i+=t.data}),t.forEach(function(t){t.data=null===t.data?0:t.data,t._proportion_=t.data/i*e}),t.forEach(function(t){t._start_=n,n+=2*t._proportion_*Math.PI}),t}function M(t){var e=0;return(t=b(t)).forEach(function(t){var i=t.format?t.format(+t._proportion_.toFixed(2)):V.toFixed(100*t._proportion_)+"%";e=Math.max(e,h(i))}),e}function E(t,e,i,n,a,o){return t.map(function(t){return null===t?null:(t.width=(e-2*a.columePadding)/i,o.extra.column&&o.extra.column.width&&+o.extra.column.width>0?t.width=Math.min(t.width,+o.extra.column.width):t.width=Math.min(t.width,25),t.x+=(n+.5-i/2)*t.width,t)})}function L(t,e,i){var n=i.yAxisWidth+i.yAxisTitleWidth,a=(e.width-2*i.padding-n)/t.length,o=[],r=i.padding+n,s=e.width-i.padding;return t.forEach(function(t,e){o.push(r+e*a)}),o.push(s),{xAxisPoints:o,startX:r,endX:s,eachSpacing:a}}function F(t,e,i,n,a,o,r){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=[],h=o.height-2*r.padding-r.xAxisHeight-r.legendHeight;return t.forEach(function(t,c){if(null===t)l.push(null);else{var f={};f.x=n[c]+Math.round(a/2);var d=h*(t-e)/(i-e);d*=s,f.y=o.height-r.xAxisHeight-r.legendHeight-Math.round(d)-r.padding,l.push(f)}}),l}function w(t,e,i){var n=c(t);n=n.filter(function(t){return null!==t});var a=Math.min.apply(this,n),o=Math.max.apply(this,n);if("number"==typeof e.yAxis.min&&(a=Math.min(e.yAxis.min,a)),"number"==typeof e.yAxis.max&&(o=Math.max(e.yAxis.max,o)),a===o){var r=o||1;a-=r,o+=r}for(var s=l(a,o),h=s.minRange,f=[],d=(s.maxRange-h)/i.yAxisSplit,x=0;x<=i.yAxisSplit;x++)f.push(h+d*x);return f.reverse()}function C(t,e,i){var n=w(t,e,i),a=i.yAxisWidth,o=n.map(function(t){return t=V.toFixed(t,2),t=e.yAxis.format?e.yAxis.format(Number(t)):t,a=Math.max(a,h(t)+5),t});return!0===e.yAxis.disabled&&(a=0),{rangesFormat:o,ranges:n,yAxisWidth:a}}function I(t,e,i,n){n.beginPath(),n.setStrokeStyle("#ffffff"),n.setLineWidth(1),n.setFillStyle(e),"diamond"===i?t.forEach(function(t,e){null!==t&&(n.moveTo(t.x,t.y-4.5),n.lineTo(t.x-4.5,t.y),n.lineTo(t.x,t.y+4.5),n.lineTo(t.x+4.5,t.y),n.lineTo(t.x,t.y-4.5))}):"circle"===i?t.forEach(function(t,e){null!==t&&(n.moveTo(t.x+3.5,t.y),n.arc(t.x,t.y,4,0,2*Math.PI,!1))}):"rect"===i?t.forEach(function(t,e){null!==t&&(n.moveTo(t.x-3.5,t.y-3.5),n.rect(t.x-3.5,t.y-3.5,7,7))}):"triangle"===i&&t.forEach(function(t,e){null!==t&&(n.moveTo(t.x,t.y-4.5),n.lineTo(t.x-4.5,t.y+4.5),n.lineTo(t.x+4.5,t.y+4.5),n.lineTo(t.x,t.y-4.5))}),n.closePath(),n.fill(),n.stroke()}function H(t,e,i){var n=t.title.fontSize||e.titleFontSize,a=t.subtitle.fontSize||e.subtitleFontSize,o=t.title.name||"",r=t.subtitle.name||"",s=t.title.color||e.titleColor,l=t.subtitle.color||e.subtitleColor,c=o?n:0,f=r?a:0;if(r){var d=h(r,a),x=(t.width-d)/2+(t.subtitle.offsetX||0),u=(t.height-e.legendHeight+a)/2;o&&(u-=(c+5)/2),i.beginPath(),i.setFontSize(a),i.setFillStyle(l),i.fillText(r,x,u),i.stroke(),i.closePath()}if(o){var g=h(o,n),p=(t.width-g)/2+(t.title.offsetX||0),y=(t.height-e.legendHeight+n)/2;r&&(y+=(f+5)/2),i.beginPath(),i.setFontSize(n),i.setFillStyle(s),i.fillText(o,p,y),i.stroke(),i.closePath()}}function k(t,e,i,n){var a=e.data;n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle("#666666"),t.forEach(function(t,i){if(null!==t){var o=e.format?e.format(a[i]):a[i];n.fillText(o,t.x-h(o)/2,t.y-2)}}),n.closePath(),n.stroke()}function z(t,e,i,n,a,r){var s=n.extra.radar||{};e+=a.radarLabelTextMargin,r.beginPath(),r.setFontSize(a.fontSize),r.setFillStyle(s.labelColor||"#666666"),t.forEach(function(t,s){var l={x:e*Math.cos(t),y:e*Math.sin(t)},c=o(l.x,l.y,i),f=c.x,d=c.y;V.approximatelyEqual(l.x,0)?f-=h(n.categories[s]||"")/2:l.x<0&&(f-=h(n.categories[s]||"")),r.fillText(n.categories[s]||"",f,d+a.fontSize/2)}),r.stroke(),r.closePath()}function _(t,e,i,n,a,s){i.fontSize="10",wx.getSystemInfoSync().screenHeight<667&&(i.pieChartLinePadding=.5*i.pieChartLinePadding,i.pieChartTextPadding=.5*i.pieChartTextPadding,console.log("小屏幕缩小后的参数： ",i));var l=.6*a+i.pieChartLinePadding,c=(i.pieChartTextPadding,[]),f=null;t.map(function(t){var e=2*Math.PI-(t._start_+2*Math.PI*t._proportion_/2),i=t.color;return{arc:e,text:t.name,color:i}}).forEach(function(t){var e=Math.cos(t.arc)*l,n=Math.sin(t.arc)*l,o=Math.cos(t.arc)*a,s=Math.sin(t.arc)*a,d=e>=0?e+i.pieChartTextPadding:e-i.pieChartTextPadding,x=n,u=h(t.text),g=x;f&&V.isSameXCoordinateArea(f.start,{x:d})&&(g=d>0?Math.min(x,f.start.y):e<0?Math.max(x,f.start.y):x>0?Math.max(x,f.start.y):Math.min(x,f.start.y)),d<0&&(d-=u);var p={lineStart:{x:o,y:s},lineEnd:{x:e,y:n},start:{x:d,y:g},width:u,height:i.fontSize,text:t.text,color:t.color};f=r(p,f),c.push(f)}),c.forEach(function(t){var e=o(t.lineStart.x,t.lineStart.y,s),a=o(t.lineEnd.x,t.lineEnd.y,s),r=o(t.start.x,t.start.y,s);n.setLineWidth(1),n.setFontSize(i.fontSize),n.beginPath(),n.setStrokeStyle("#E5E5E5"),n.setFillStyle("#E5E5E5"),n.moveTo(e.x,e.y);var l=t.start.x<0?r.x+t.width:r.x,h=t.start.x<0?r.x-5:r.x+5;n.quadraticCurveTo(a.x,a.y,l,r.y),n.moveTo(e.x,e.y),n.stroke(),n.closePath(),n.beginPath(),n.moveTo(r.x+t.width,r.y),n.arc(l,r.y,2,0,2*Math.PI),n.closePath(),n.fill(),n.beginPath(),n.setFillStyle("#000000"),n.fillText(t.text,h,r.y+3),n.closePath(),n.stroke(),n.closePath()})}function W(t,e,i,n){var a=i.padding,o=e.height-i.padding-i.xAxisHeight-i.legendHeight;n.beginPath(),n.setStrokeStyle("#cccccc"),n.setLineWidth(1),n.moveTo(t,a),n.lineTo(t,o),n.stroke(),n.closePath()}function D(e,i,n,a,o){var r=!1;(i=t({x:0,y:0},i)).y-=8;var s=e.map(function(t){return h(t.text)}),l=9+4*a.toolTipPadding+Math.max.apply(null,s),c=2*a.toolTipPadding+e.length*a.toolTipLineHeight;i.x+8+l>n.width&&(r=!0),o.beginPath(),o.setFillStyle(n.tooltip.option.background||a.toolTipBackground),o.setGlobalAlpha(a.toolTipOpacity),r?(o.moveTo(i.x,i.y+10),o.lineTo(i.x-8,i.y+10-5),o.lineTo(i.x-8,i.y+10+5),o.moveTo(i.x,i.y+10),o.fillRect(i.x-l-8,i.y,l,c)):(o.moveTo(i.x,i.y+10),o.lineTo(i.x+8,i.y+10-5),o.lineTo(i.x+8,i.y+10+5),o.moveTo(i.x,i.y+10),o.fillRect(i.x+8,i.y,l,c)),o.closePath(),o.fill(),o.setGlobalAlpha(1),e.forEach(function(t,e){o.beginPath(),o.setFillStyle(t.color);var n=i.x+8+2*a.toolTipPadding,s=i.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*e+a.toolTipPadding;r&&(n=i.x-l-8+2*a.toolTipPadding),o.fillRect(n,s,4,a.fontSize),o.closePath()}),o.beginPath(),o.setFontSize(a.fontSize),o.setFillStyle("#ffffff"),e.forEach(function(t,e){var n=i.x+8+2*a.toolTipPadding+4+5;r&&(n=i.x-l-8+2*a.toolTipPadding+4+5);var s=i.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*e+a.toolTipPadding;o.fillText(t.text,n,s+a.fontSize)}),o.stroke(),o.closePath()}function G(t,e,i,n){var a=i.xAxisHeight+(e.height-i.xAxisHeight-h(t))/2;n.save(),n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle(e.yAxis.titleFontColor||"#333333"),n.translate(0,e.height),n.rotate(-90*Math.PI/180),n.fillText(t,a,i.padding+.5*i.fontSize),n.stroke(),n.closePath(),n.restore()}function X(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=C(t,e,i).ranges,r=L(e.categories,e,i),s=r.xAxisPoints,l=r.eachSpacing,h=o.pop(),c=o.shift();e.height,i.padding,i.xAxisHeight,i.legendHeight;return t.forEach(function(o,r){var f=F(o.data,h,c,s,l,e,i,a);f=E(f,l,t.length,r,i,e),n.beginPath(),n.setFillStyle(o.color),f.forEach(function(t,a){if(null!==t){var o=t.x-t.width/2+1,r=e.height-t.y-i.padding-i.xAxisHeight-i.legendHeight;n.moveTo(o,t.y),n.rect(o,t.y,t.width-2,r)}}),n.closePath(),n.fill()}),t.forEach(function(o,r){var f=F(o.data,h,c,s,l,e,i,a);f=E(f,l,t.length,r,i,e),!1!==e.dataLabel&&1===a&&k(f,o,i,n)}),s}function O(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=C(t,e,i).ranges,s=L(e.categories,e,i),l=s.xAxisPoints,h=s.eachSpacing,c=r.pop(),f=r.shift(),d=e.height-i.padding-i.xAxisHeight-i.legendHeight,x=[];return e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===o&&W(e.tooltip.offset.x,e,i,n),t.forEach(function(t,r){var s=F(t.data,c,f,l,h,e,i,o);if(x.push(s),m(s).forEach(function(i){if(n.beginPath(),n.setStrokeStyle(t.color),n.setFillStyle(t.color),n.setGlobalAlpha(.6),n.setLineWidth(2),i.length>1){var o=i[0],r=i[i.length-1];n.moveTo(o.x,o.y),"curve"===e.extra.lineStyle?i.forEach(function(t,e){if(e>0){var o=a(i,e-1);n.bezierCurveTo(o.ctrA.x,o.ctrA.y,o.ctrB.x,o.ctrB.y,t.x,t.y)}}):i.forEach(function(t,e){e>0&&n.lineTo(t.x,t.y)}),n.lineTo(r.x,d),n.lineTo(o.x,d),n.lineTo(o.x,o.y)}else{var s=i[0];n.moveTo(s.x-h/2,s.y),n.lineTo(s.x+h/2,s.y),n.lineTo(s.x+h/2,d),n.lineTo(s.x-h/2,d),n.moveTo(s.x-h/2,s.y)}n.closePath(),n.fill(),n.setGlobalAlpha(1)}),!1!==e.dataPointShape){var u=i.dataPointShape[r%i.dataPointShape.length];I(s,t.color,u,n)}}),console.log("1148 label"),!1!==e.dataLabel&&1===o&&t.forEach(function(t,a){k(F(t.data,c,f,l,h,e,i,o),t,i,n)}),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===o&&D(e.tooltip.textList,e.tooltip.offset,e,i,n),{xAxisPoints:l,calPoints:x}}function q(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=C(t,e,i).ranges,s=L(e.categories,e,i),l=s.xAxisPoints,h=s.eachSpacing,c=r.pop(),f=r.shift(),d=[];return e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===o&&W(e.tooltip.offset.x,e,i,n),t.forEach(function(t,r){var s=F(t.data,c,f,l,h,e,i,o);if(d.push(s),m(s).forEach(function(i,o){n.beginPath(),n.setStrokeStyle(t.color),n.setLineWidth(2),1===i.length?(n.moveTo(i[0].x,i[0].y),n.arc(i[0].x,i[0].y,1,0,2*Math.PI)):(n.moveTo(i[0].x,i[0].y),"curve"===e.extra.lineStyle?i.forEach(function(t,e){if(e>0){var o=a(i,e-1);n.bezierCurveTo(o.ctrA.x,o.ctrA.y,o.ctrB.x,o.ctrB.y,t.x,t.y)}}):i.forEach(function(t,e){e>0&&n.lineTo(t.x,t.y)}),n.moveTo(i[0].x,i[0].y)),n.closePath(),n.stroke()}),!1!==e.dataPointShape){var x=i.dataPointShape[r%i.dataPointShape.length];I(s,t.color,x,n)}}),console.log("1225 label"),!1!==e.dataLabel&&1===o&&t.forEach(function(t,a){k(F(t.data,c,f,l,h,e,i,o),t,i,n)}),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===o&&D(e.tooltip.textList,e.tooltip.offset,e,i,n),{xAxisPoints:l,calPoints:d}}function B(t,e,i,a){var o=L(t,e,i),r=o.xAxisPoints,s=o.startX,l=o.endX,c=o.eachSpacing,f=e.height-i.padding-i.xAxisHeight-i.legendHeight,d=f+i.xAxisLineHeight;a.beginPath(),a.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),a.setLineWidth(1),a.moveTo(s,f),a.lineTo(l,f),!0!==e.xAxis.disableGrid&&("calibration"===e.xAxis.type?r.forEach(function(t,e){e>0&&(a.moveTo(t-c/2,f),a.lineTo(t-c/2,f+4))}):r.forEach(function(t,e){a.moveTo(t,f),a.lineTo(t,d)})),a.closePath(),a.stroke();var x=e.width-2*i.padding-i.yAxisWidth-i.yAxisTitleWidth,u=Math.min(t.length,Math.ceil(x/i.fontSize/1.5)),g=Math.ceil(t.length/u);t=t.map(function(t,e){return e%g!=0?"":t}),0===i._xAxisTextAngle_?(a.beginPath(),a.setFontSize(i.fontSize),a.setFillStyle(e.xAxis.fontColor||"#666666"),t.forEach(function(t,e){var n=c/2-h(t)/2;a.fillText(t,r[e]+n,f+i.fontSize+5)}),a.closePath(),a.stroke()):t.forEach(function(t,o){a.save(),a.beginPath(),a.setFontSize(i.fontSize),a.setFillStyle(e.xAxis.fontColor||"#666666");var s=h(t),l=c/2-s,d=n(r[o]+c/2,f+i.fontSize/2+5,e.height),x=d.transX,u=d.transY;a.rotate(-1*i._xAxisTextAngle_),a.translate(x,u),a.fillText(t,r[o]+l,f+i.fontSize+5),a.closePath(),a.stroke(),a.restore()})}function R(t,e,i,n){if(!0!==e.yAxis.disabled){for(var a=C(t,e,i).rangesFormat,o=i.yAxisWidth+i.yAxisTitleWidth,r=e.height-2*i.padding-i.xAxisHeight-i.legendHeight,s=Math.floor(r/i.yAxisSplit),l=i.padding+o,h=e.width-i.padding,c=(i.padding,e.height-i.padding-i.xAxisHeight-i.legendHeight),f=[],d=0;d<i.yAxisSplit;d++)f.push(i.padding+s*d);n.beginPath(),n.setStrokeStyle(e.yAxis.gridColor||"#cccccc"),n.setLineWidth(1),f.forEach(function(t,e){n.moveTo(l,t),n.lineTo(h,t)}),n.closePath(),n.stroke(),n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle(e.yAxis.fontColor||"#666666"),a.forEach(function(t,e){var a=f[e]?f[e]:c;n.fillText(t,i.padding+i.yAxisTitleWidth,a+i.fontSize/2)}),n.closePath(),n.stroke(),e.yAxis.title&&G(e.yAxis.title,e,i,n)}}function j(t,e,i,n){if(e.legend){var a=T(t,e,i),o=a.legendList;a.legendHeight;o.forEach(function(t,a){var o=0;t.forEach(function(t){t.name=t.name||"undefined",o+=15+h(t.name)+15});var r=(e.width-o)/2+5,s=e.height-i.padding-i.legendHeight+a*(i.fontSize+8)+5+8;n.setFontSize(i.fontSize),t.forEach(function(t){switch(e.type){case"line":n.beginPath(),n.setLineWidth(1),n.setStrokeStyle(t.color),n.moveTo(r-2,s+5),n.lineTo(r+17,s+5),n.stroke(),n.closePath(),n.beginPath(),n.setLineWidth(1),n.setStrokeStyle("#ffffff"),n.setFillStyle(t.color),n.moveTo(r+7.5,s+5),n.arc(r+7.5,s+5,4,0,2*Math.PI),n.fill(),n.stroke(),n.closePath();break;case"pie":case"ring":n.beginPath(),n.setFillStyle(t.color),n.moveTo(r+7.5,s+5),n.arc(r+7.5,s+5,7,0,2*Math.PI),n.closePath(),n.fill();break;default:n.beginPath(),n.setFillStyle(t.color),n.moveTo(r,s),n.rect(r,s,15,10),n.closePath(),n.fill()}r+=20,n.beginPath(),n.setFillStyle(e.extra.legendTextColor||"#333333"),n.fillText(t.name,r,s+9),n.closePath(),n.stroke(),r+=h(t.name)+10})})}}function N(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=e.extra.pie||{};t=b(t,a);var r={x:e.width/2,y:(e.height-i.legendHeight)/2},s=Math.min(r.x-i.pieChartLinePadding-i.pieChartTextPadding-i._pieTextMaxLength_,r.y-i.pieChartLinePadding-i.pieChartTextPadding);if(console.log("1448 label"),e.dataLabel?s-=10:s-=2*i.padding,(t=t.map(function(t){return t._start_+=(o.offsetAngle||0)*Math.PI/180,t})).forEach(function(t){n.beginPath(),n.setLineWidth(2),n.setStrokeStyle("#ffffff"),n.setFillStyle(t.color),n.moveTo(r.x,r.y),n.arc(r.x,r.y,s,t._start_,t._start_+2*t._proportion_*Math.PI),n.closePath(),n.fill(),!0!==e.disablePieStroke&&n.stroke()}),"ring"===e.type){var l=.6*s;"number"==typeof e.extra.ringWidth&&e.extra.ringWidth>0&&(l=Math.max(0,s-e.extra.ringWidth)),n.beginPath(),n.setFillStyle("#ffffff"),n.moveTo(r.x,r.y),n.arc(r.x,r.y,l,0,2*Math.PI),n.closePath(),n.fill()}if(!1!==e.dataLabel&&1===a){for(var h=!1,c=0,f=t.length;c<f;c++)if(t[c].data>0){h=!0;break}console.log("valid: ",h),h&&_(t,e,i,n,s,r)}return 1===a&&"ring"===e.type&&H(e,i,n),{center:r,radius:s,series:t}}function Y(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=e.extra.radar||{},s=x(e.categories.length),l={x:e.width/2,y:(e.height-i.legendHeight)/2},h=Math.min(l.x-(d(e.categories)+i.radarLabelTextMargin),l.y-i.radarLabelTextMargin);h-=i.padding,n.beginPath(),n.setLineWidth(1),n.setStrokeStyle(r.gridColor||"#cccccc"),s.forEach(function(t){var e=o(h*Math.cos(t),h*Math.sin(t),l);n.moveTo(l.x,l.y),n.lineTo(e.x,e.y)}),n.stroke(),n.closePath();for(var c=1;c<=i.radarGridCount;c++)!function(t){var e={};n.beginPath(),n.setLineWidth(1),n.setStrokeStyle(r.gridColor||"#cccccc"),s.forEach(function(a,r){var s=o(h/i.radarGridCount*t*Math.cos(a),h/i.radarGridCount*t*Math.sin(a),l);0===r?(e=s,n.moveTo(s.x,s.y)):n.lineTo(s.x,s.y)}),n.lineTo(e.x,e.y),n.stroke(),n.closePath()}(c);return A(s,l,h,t,e,a).forEach(function(t,a){if(n.beginPath(),n.setFillStyle(t.color),n.setGlobalAlpha(.6),t.data.forEach(function(t,e){0===e?n.moveTo(t.position.x,t.position.y):n.lineTo(t.position.x,t.position.y)}),n.closePath(),n.fill(),n.setGlobalAlpha(1),!1!==e.dataPointShape){var o=i.dataPointShape[a%i.dataPointShape.length];I(t.data.map(function(t){return t.position}),t.color,o,n)}}),z(s,h,l,e,i,n),{center:l,radius:h,angleList:s}}function Z(t,e){e.draw()}function J(t){this.isStop=!1,t.duration=void 0===t.duration?1e3:t.duration,t.timing=t.timing||"linear";var e="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setTimeout?function(t,e){setTimeout(function(){var e=+new Date;t(e)},e)}:function(t){t(null)},i=null,n=function(a){if(null===a||!0===this.isStop)return t.onProcess&&t.onProcess(1),void(t.onAnimationFinish&&t.onAnimationFinish());if(null===i&&(i=a),a-i<t.duration){var o=(a-i)/t.duration;o=(0,$[t.timing])(o),t.onProcess&&t.onProcess(o),e(n,17)}else t.onProcess&&t.onProcess(1),t.onAnimationFinish&&t.onAnimationFinish()};n=n.bind(this),e(n,17)}function K(t,e,i,n){var a=this,o=e.series,r=e.categories,l=T(o=s(o,i),e,i).legendHeight;i.legendHeight=l;var h=C(o,e,i).yAxisWidth;if(i.yAxisWidth=h,r&&r.length){var c=S(r,e,i),f=c.xAxisHeight,d=c.angle;i.xAxisHeight=f,i._xAxisTextAngle_=d}"pie"!==t&&"ring"!==t||(console.log("1704"),i._pieTextMaxLength_=!1===e.dataLabel?0:M(o));var x=e.animation?1e3:0;switch(this.animationInstance&&this.animationInstance.stop(),t){case"line":this.animationInstance=new J({timing:"easeIn",duration:x,onProcess:function(t){R(o,e,i,n),B(r,e,i,n);var s=q(o,e,i,n,t),l=s.xAxisPoints,h=s.calPoints;a.chartData.xAxisPoints=l,a.chartData.calPoints=h,j(e.series,e,i,n),Z(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"column":this.animationInstance=new J({timing:"easeIn",duration:x,onProcess:function(t){R(o,e,i,n),B(r,e,i,n),a.chartData.xAxisPoints=X(o,e,i,n,t),j(e.series,e,i,n),Z(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"area":this.animationInstance=new J({timing:"easeIn",duration:x,onProcess:function(t){R(o,e,i,n),B(r,e,i,n);var s=O(o,e,i,n,t),l=s.xAxisPoints,h=s.calPoints;a.chartData.xAxisPoints=l,a.chartData.calPoints=h,j(e.series,e,i,n),Z(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"ring":case"pie":this.animationInstance=new J({timing:"easeInOut",duration:x,onProcess:function(t){a.chartData.pieData=N(o,e,i,n,t),j(e.series,e,i,n),Z(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"radar":this.animationInstance=new J({timing:"easeInOut",duration:x,onProcess:function(t){a.chartData.radarData=Y(o,e,i,n,t),j(e.series,e,i,n),Z(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}})}}function Q(){this.events={}}var U={yAxisWidth:15,yAxisSplit:5,xAxisHeight:15,xAxisLineHeight:15,legendHeight:15,yAxisTitleWidth:15,padding:12,columePadding:3,fontSize:10,dataPointShape:["diamond","circle","triangle","rect"],colors:["#7cb5ec","#f7a35c","#434348","#90ed7d","#f15c80","#8085e9"],pieChartLinePadding:25,pieChartTextPadding:15,xAxisTextPadding:3,titleColor:"#333333",titleFontSize:20,subtitleColor:"#999999",subtitleFontSize:15,toolTipPadding:3,toolTipBackground:"#000000",toolTipOpacity:.7,toolTipLineHeight:14,radarGridCount:3,radarLabelTextMargin:15},V={toFixed:function(t,e){return e=e||2,this.isFloat(t)&&(t=t.toFixed(e)),t},isFloat:function(t){return t%1!=0},approximatelyEqual:function(t,e){return Math.abs(t-e)<1e-10},isSameSign:function(t,e){return Math.abs(t)===t&&Math.abs(e)===e||Math.abs(t)!==t&&Math.abs(e)!==e},isSameXCoordinateArea:function(t,e){return this.isSameSign(t.x,e.x)},isCollision:function(t,e){return t.end={},t.end.x=t.start.x+t.width,t.end.y=t.start.y-t.height,e.end={},e.end.x=e.start.x+e.width,e.end.y=e.start.y-e.height,!(e.start.x>t.end.x||e.end.x<t.start.x||e.end.y>t.start.y||e.start.y<t.end.y)}},$={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},linear:function(t){return t}};J.prototype.stop=function(){this.isStop=!0},Q.prototype.addEventListener=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},Q.prototype.trigger=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],a=e.slice(1);this.events[n]&&this.events[n].forEach(function(t){try{t.apply(null,a)}catch(t){console.error(t)}})};var tt=function(e){e.title=e.title||{},e.subtitle=e.subtitle||{},e.yAxis=e.yAxis||{},e.xAxis=e.xAxis||{},e.extra=e.extra||{},e.legend=!1!==e.legend,e.animation=!1!==e.animation;var i=t({},U);i.yAxisTitleWidth=!0!==e.yAxis.disabled&&e.yAxis.title?i.yAxisTitleWidth:0,i.pieChartLinePadding=!1===e.dataLabel?0:i.pieChartLinePadding,i.pieChartTextPadding=!1===e.dataLabel?0:i.pieChartTextPadding,console.log("1844 label"),this.opts=e,this.config=i,this.context=wx.createCanvasContext(e.canvasId),this.chartData={},this.event=new Q,K.call(this,e.type,e,i,this.context)};tt.prototype.updateData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts.series=e.series||this.opts.series,this.opts.categories=e.categories||this.opts.categories,this.opts.title=t({},this.opts.title,e.title||{}),this.opts.subtitle=t({},this.opts.subtitle,e.subtitle||{}),K.call(this,this.opts.type,this.opts,this.config,this.context)},tt.prototype.stopAnimation=function(){this.animationInstance&&this.animationInstance.stop()},tt.prototype.addEventListener=function(t,e){this.event.addEventListener(t,e)},tt.prototype.getCurrentDataIndex=function(t){if(t.touches&&t.touches.length){var e=t.touches[0],i=e.x,n=e.y;return"pie"===this.opts.type||"ring"===this.opts.type?v({x:i,y:n},this.chartData.pieData):"radar"===this.opts.type?y({x:i,y:n},this.chartData.radarData,this.opts.categories.length):g({x:i,y:n},this.chartData.xAxisPoints,this.opts,this.config)}return-1},tt.prototype.showToolTip=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("line"===this.opts.type||"area"===this.opts.type){var n=this.getCurrentDataIndex(e),a=t({},this.opts,{animation:!1});if(n>-1){var o=f(this.opts.series,n);if(0===o.length)K.call(this,a.type,a,this.config,this.context);else{var r=u(o,this.chartData.calPoints,n,this.opts.categories,i),s=r.textList,l=r.offset;a.tooltip={textList:s,offset:l,option:i},K.call(this,a.type,a,this.config,this.context)}}else K.call(this,a.type,a,this.config,this.context)}},module.exports=tt; 
 			}); 
		define("login.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,o){if(console.log("[login] checkSession success"),!a()||!o&&!t)return t&&wx.setStorage({key:"mch_id",data:t,fail:function(e){wx.showModal({title:"提示",content:"setStorage mch_id失败,请重新打开小程序",showCancel:!1}),d.Event.stat("errCode",{msg:"login_setStorage_mchid_fail"})}}),i(e),!1;t?(console.log("模板消息打开"),o==t?(e({sid:h}),r.default.hideLoading()):(wx.setStorage({key:"mch_id",data:t,fail:function(){wx.showModal({title:"提示",content:"setStorageFail mch_id,重新打开小程序",showCancel:!1}),d.Event.stat("errCode",{msg:"login_setStorage_mchid_fail"})}}),c(e,t))):(e({sid:h}),r.default.hideLoading())}function o(e,t){console.log("[login] checkSession fail"),t&&wx.setStorage({key:"mch_id",data:t,fail:function(){wx.showModal({title:"提示",content:"setStorageFail mch_id,重新打开小程序",showCancel:!1}),d.Event.stat("errCode",{msg:"login_setStorage_mchid_fail"})}}),i(e)}function a(){var e=wx.getStorageSync("sid")||"",t=wx.getStorageSync("sid_time")||"",o=(new Date).getTime(),a=!1;return""!=e&&""!=t&&(o-t<864e5?(console.log("[login]sid有效期内"),h=e,g.setSession(h),a=!0):(wx.setStorage({key:"sid_time",data:""}),wx.setStorage({key:"sid",data:""}))),a}function i(e){r.default.showLoading(),wx.login({success:function(t){console.log("[login] wxLogin suc: ",t),r.default.hideLoading(),n(e,t.code)},fail:function(e){r.default.hideLoading(),d.Event.stat("errCode",{msg:e.errMsg||"wx.login_fail"}),wx.showModal({title:"提示",content:"登录失败请重新打开小程序",showCancel:!1})}})}function n(e,t){console.log("[login.js]Login");var o="https://payapp.weixin.qq.com/mdmgr/weapp/login",a=void 0,i={js_code:t};console.log("[platform]:"+u.globalData.platform),"wxwork"==u.globalData.platform&&(o="https://payapp.weixin.qq.com/mdmgr/wework/login",i={ww_code:t}),r.default.showLoading(),wx.request({url:o,header:{"content-type":"application/json"},data:i,success:function(t){a=t.data,console.log("[login] mdLogin success :",a),s(a,e,o)}})}function s(e,t,o){r.default.hideLoading(),0==e.errcode&&e.data&&e.data.sid?(wx.removeStorageSync("sid"),wx.removeStorageSync("sid_time"),wx.removeStorageSync("mchList"),wx.removeStorageSync("shops"),wx.setStorage({key:"sid_time",data:(new Date).getTime(),fail:function(e){wx.showModal({title:"提示",content:"setStorageFail sid_time，请重新打开小程序",showCancel:!1}),d.Event.stat("errCode",{msg:"login_setStorage_sidtime_fail"})}}),h=e.data.sid,g.setSession(h),wx.setStorage({key:"sid",data:e.data.sid,success:function(){if(console.log("[login]mdLogin setStorage sid success"),!(e.data.mch&&e.data.mch.length>0))return r.default.reLaunch({url:"../mch/reg"}),!1;wx.setStorage({key:"mchList",data:e.data,success:function(){var o=void 0;try{o=wx.getStorageSync("mch_id")}catch(e){d.Event.stat("errCode",{msg:"login_getStorageSync_mchlist_fail"})}console.log("[login]mch_id:",o),o?c(t,o):1==e.data.mch.length?c(t,e.data.mch[0].mch_id):(r.default.reLaunch({url:"../mch/index"}),r.default.hideLoading())},fail:function(e){wx.showModal({title:"提示",content:"setStorage mchList失败，请重新打开小程序",showCancel:!1}),d.Event.stat("errCode",{msg:JSON.stringify(e)||"login_setStorage_mchlist_fail"})}})},fail:function(e){return r.default.hideLoading(),wx.showModal({title:"提示",content:"setStorage sid失败，请重新打开小程序",showCancel:!1}),d.Event.stat("errCode",{msg:JSON.stringify(e)||"login_setStorage_sid_fail"}),!1}})):-1001==e.errcode||268697601==e.errcode?r.default.reLaunch({url:"../mch/reg"}):(wx.showModal({title:"提示",content:e.msg||"",showCancel:!1}),l.default.report(o,sid,e))}function c(e,t){var o=wx.getStorageSync("mchList"),a=void 0,i=void 0,n=h||wx.getStorageSync("sid"),s="https://payapp.weixin.qq.com/mdmgr/weapp/switchmerchant";t||(t=wx.getStorageSync("mch_id")||"");for(var c=0;c<o.mch.length;c++)if((i=o.mch[c]).mch_id==t){a=i.merchant_name;break}wx.setStorage({key:"mch_name",data:a,fail:function(e){wx.showModal({title:"提示",content:"setStorage mch_name失败，请重新打开小程序",showCancel:!1}),d.Event.stat("errCode",{msg:JSON.stringify(e)||"login_setStorage_mchname_fail"})}}),r.default.showLoading(),wx.request({url:s,header:{"content-type":"application/json"},data:{mch_id:t,sid:n},success:function(o){var a=o.data;console.log("[login] autoGetMchInfo success: ",a),r.default.hideLoading(),0==a.errcode?(wx.setStorage({key:"is_supervisor",data:a.data.is_supervisor,success:function(){},fail:function(e){d.Event.stat("errCode",{msg:JSON.stringify(e)||"login_setStorage_issuper_fail"})}}),wx.setStorage({key:"mch_id",data:t,success:function(){e({sid:h})},fail:function(){d.Event.stat("errCode",{msg:JSON.stringify(o)||"login_setStorage_mchid_fail"})}})):(wx.showModal({title:"提示",content:a.msg||"",showCancel:!1}),l.default.mtaErrReport({cgi:l.default.getShortUrl(s)+"_code:"+a.errcode+"_sid:"+n||"",code:a.errcode,msg:l.default.getShortUrl(s)+"_"+a.msg+"_sid:"+n||""}))}})}Object.defineProperty(exports,"__esModule",{value:!0});var l=e(require("./lib/util")),r=e(require("./lib/wechat")),d=(e(require("./lib/fetch")),require("./lib/mta_analysis")),g=require("pages/mall/lib/weRequest.js"),u=getApp(),h="";exports.default={checkLogin:function(e,a){var n=e||function(){},s=wx.getStorageSync("mch_id")||"";if(console.log("[login] mch_id:",a),a=a?new String(a).trim():"","wxwork"!=u.globalData.platform)wx.checkSession({success:function(){t(n,a,s)},fail:function(){o(n,a)}});else{console.log("[login] enter wxwork login");var c=c||wx.getStorageSync("sid");c?t(n,a,s):i(n)}},wxLogin:i,refreshToken:function(e){r.default.showLoading(),wx.login({success:function(t){wx.request({url:"https://payapp.weixin.qq.com/mdmgr/weapp/RefreshSessionKey",header:{"content-type":"application/json"},data:{sid:h||wx.getStorageSync("sid"),js_code:t.code},success:function(t){console.log(t),e()},fail:function(e){wx.showModal({title:"提示",content:"刷新登录态失败，请重新打开打开小程序",success:function(){wx.switchTab({url:"pages/entry/index"})}})}})},fail:function(e){d.Event.stat("errCode",{msg:e.errMsg||"wx.login_fail"}),wx.showModal({title:"提示",content:"登录失败请重新打开小程序",showCancel:!1})}})}}; 
 			}); 
		define("pages/common/common.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var o=require("./lib/mta_analysis");App({onLaunch:function(n){console.log("[App onLaunch] options: ",n),o.App.init({appID:"500448841"})},onLoad:function(o){},onShow:function(o){console.log("[App onShow] options: ",o)},getUserInfo:function(o){},globalData:{userInfo:null}}); 
 			}); 
		define("pages/mall/lib/midas.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof2(module))?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"===("undefined"==typeof exports?"undefined":_typeof2(exports))?exports.midaspay=t():e.midaspay=t()}(void 0,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o=n(1),r=n(3);e.exports={getVersion:function(){return"1.2.1"},subscribe:n(20),qb:n(23),game:n(27),pcGame:n(29),goods:o,enterprise:r.fn.extend({},o,{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.isEnterprise=!0,o.init(e)}})}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},c=n(2),u=n(4),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,c),a(t,[{key:"launchPay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"launchPay",this).call(this,e,n),this.app=new u({params:e,opt:this.opt,callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt.autoDestroy&&(t.instance.destroy(),t.instance=null),n(e)}.bind(this)})}}]),t}();f.instance=null,e.exports={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=f.instance?f.instance:f.instance=new f(e)},get:function(){if(!f.instance)throw Error("goods not initalize");return f.instance},destroy:function(){f.instance.destroy(),f.instance=null}}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(3),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.opt=t,this.params=null,this.callback=null,this.app=null}return r(e,[{key:"launchPay",value:function(e,t){if(this.params=e,!i.lang.isFunction(t))throw Error("callback must be a function");this.callback=t}},{key:"destroy",value:function(){try{this.app&&this.app.destroy&&(this.app.destroy(),this.app=null)}catch(e){}}}]),e}();e.exports=a},function(module,exports){var _typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return void 0===e?"undefined":_typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_typeof2(e)};String.format=function(){var e=arguments[0];if(arguments.length>1)if(2==arguments.length&&"object"==_typeof(arguments[1])){var t=arguments[1];for(var n in t)if(void 0!=t[n]){r=new RegExp("({"+n+"})","g");e=e.replace(r,t[n])}}else for(var o=1;o<arguments.length;o++)if(void 0!=arguments[o]){var r=new RegExp("({["+(o-1)+"]})","g");e=e.replace(r,arguments[o])}return e},Date.convertToDate=function(e){var t=e;return"string"==typeof e&&(t=new Date(Date.parse(e))),t},Date.diff=function(e,t,n){var o;e=Date.convertToDate(e);var r=(t=Date.convertToDate(t)).getTime()-e.getTime();switch(n){case"ms":o=1;break;case"s":o=1e3;break;case"m":o=6e4;break;case"h":o=36e5;break;case"d":default:o=864e5}return Math.floor(r/o)},Date.format=function(e,t){e=Date.convertToDate(e);var n=function(e,t){t||(t=2),e=new String(e);for(var n=0,o="";n<t-e.length;n++)o+="0";return o+e};return t.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|M{1,4}|yy(?:yy)?|([hHmstT])\1?|[lLZ])\b/g,function(t){switch(t){case"d":return e.getDate();case"dd":return n(e.getDate());case"ddd":return["Sun","Mon","Tue","Wed","Thr","Fri","Sat"][e.getDay()];case"dddd":return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()];case"M":return e.getMonth()+1;case"MM":return n(e.getMonth()+1);case"MMM":return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()];case"MMMM":return["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()];case"yy":return new String(e.getFullYear()).substr(2);case"yyyy":return e.getFullYear();case"h":return e.getHours()%12||12;case"hh":return n(e.getHours()%12||12);case"H":return e.getHours();case"HH":return n(e.getHours());case"m":return e.getMinutes();case"mm":return n(e.getMinutes());case"s":return e.getSeconds();case"ss":return n(e.getSeconds());case"l":return e.getMilliseconds();case"ll":return n(e.getMilliseconds());case"tt":return e.getHours()<12?"am":"pm";case"TT":return e.getHours()<12?"AM":"PM"}})};var U=module.exports;U.fn={getParam:function(e,t){var n=t||window.location.href;if(e&&n){var o=new RegExp("(\\?|#|&|^)"+e+"=([^&^#]*)(#|&|$)"),r=n.match(o);return r?r[2]:""}return""},delParam:function(e,t){return!e instanceof Array&&(e=[e]),U.fn.each(e,function(e){t=t.replace(new RegExp("(?:&"+e+"=[^&]*)","g"),""),t=t.replace(new RegExp("(?:\\?"+e+"=[^&]*&?)","g"),"?")}),t},addParam:function(e,t){var n=[];U.fn.each(e,function(e,t){n.push(t)}),t=U.fn.delParam(n,t);var o=U.req.serializeParam(e);return t+=/(\?|&)$/.test(t)?""+o:/\?/.test(t)?"&"+o:"?"+o},getParams:function(e){var t=(e=e||location.href).replace(/.+?\?/,"").replace(/#.*/,"").split("&"),n={};for(var o in t){var r=t[o].split("=");2===r.length&&(n[r[0]]=r[1])}return n},each:function(e,t){var n,o=0,r=e.length;if(void 0===r&&U.lang.isObject(e)){for(var i in e)if(!1===t.call(e[i],e[i],i,e))break}else for(n=e[0];o<r&&!1!==t.call(n,n,o,e);n=e[++o]);return e},extend:function(e){for(var t=1;t<=arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e},formatFloat:function(e,t,n,o){return o=~~o?~~o:t+1,intNumber=Math.round(e*Math.pow(10,o)),Math[n](intNumber/Math.pow(10,o-t))/Math.pow(10,t)},uuid:function(e,t){var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(t=t||o.length,e)for(n=0;n<e;n++)r[n]=o[0|Math.random()*t];else{var i;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;n<36;n++)r[n]||(i=0|16*Math.random(),r[n]=o[19==n?3&i|8:i])}return r.join("")},emptyFun:function(){},keys:function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=n.length;return function(r){if("object"!==(void 0===r?"undefined":_typeof(r))&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var i,a,s=[];for(i in r)e.call(r,i)&&s.push(i);if(t)for(a=0;a<o;a++)e.call(r,n[a])&&s.push(n[a]);return s}}(),numberInputFix:function(e,t){var n=e.value,o=n.replace(/[^\d]/g,"");return n===o||t||(e.value=o),o}},U.getParam=U.fn.getParam,U.lang={is:function(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&n===e},isNumber:function(e){return this.is("Number",e)},isString:function(e){return this.is("String",e)},isFunction:function(e){return this.is("Function",e)},isObject:function(e){return this.is("Object",e)},isDocument:function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE},isWindow:function(e){return null!=e&&e==e.window},isPlainObject:function(e){return U.lang.isObject(e)&&!U.lang.isWindow(e)&&Object.getPrototypeOf(e)==Object.prototype},isArray:function(e){return this.is("Array",e)}},U.string={escHTML:function(e,t){var n=["&","&amp;","<","&lt;",">","&gt;"," ","&nbsp;",'"',"&quot;","'","&#39;","\\r","<br>","\\n","<br>"];t&&n.reverse();for(var o=0,r=e;o<n.length;o+=2)r=r.replace(new RegExp(n[o],"g"),n[1+o]);return r},tmpl:function(e,t){return"string"==typeof e?e.replace(/\$([a-zA-Z0-9_\.]*)\$/g,function(e,n){if(-1!==n.indexOf(".")){n=n.split(/\./g);var o=t;return U.fn.each(n,function(e){o=o[e]}),o||""}return void 0!==t[n]?t[n]:""}):e}},U.tmpl=U.string.tmpl,U.req={log:function(){var e=[];return function(t){var n=new Image;e.push(n),n.onload=n.onerror=n.onabort=function(){n=n.onload=n.onerror=n.onabort=null;for(var t=0,o=e.length;t<o;++t)e[t]===n&&e.splice(t,1)},n.src=t}}(),serializeParam:function(e){if(!e)return"";var t=[];for(var n in e)void 0===e[n]&&null==e[n]||t.push(n+"="+e[n]);return t.join("&")},getJsonp:function(e,t,n){n=U.fn.extend({onSucess:U.fn.emptyFun,onFailed:U.fn.emptyFun},n);var o=null,r=String.format("c{0}{1}",U.fn.uuid(4,10),+new Date);window[t.fixedCB?t.fixedCB:r]=function(e){o=e,delete window[r]};var i=U.fn.extend({format:String.format("jsonp_{0}",r)},t),a=this.serializeParam(i);e+=(e.indexOf("?")>-1?"&":"?")+a,this.loadScript(e,function(e,t){o&&t?n.onSucess&&n.onSucess.apply(window,[o]):(o={ret:-9999,path:e,msg:"系统繁忙，请稍后再试！"},n.onFailed&&n.onFailed.apply(window,[o]))},e)},ajax:function ajax(option){var o=option,m=o.method.toLocaleUpperCase(),isPost="POST"==m,xhr=!!window.XMLHttpRequest&&new XMLHttpRequest;if(!xhr)return o.error&&o.error.call(null,{ret:999,msg:"Create XHR Error!"}),!1;var qstr=this.serializeParam(o.param);return qstr&&!isPost&&(o.url+=(o.url.indexOf("?")>-1?"&":"?")+qstr),xhr.open(m,o.url,!0),isPost&&xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xhr.onreadystatechange=function(){if(4==xhr.readyState){var status=xhr.status;if(status>=200&&status<300){var response=xhr.responseText.replace(/(\r|\n|\t)/gi,""),m=/(?:callback\()?(.+)(?:\))?/gi.exec(response),result={ret:998,msg:"解析数据出错，请稍后再试",status:status};try{result=eval("("+m[1]+")")}catch(e){}o.success&&o.success.call(xhr,result)}else o.error&&o.error.call(xhr,{ret:997,msg:"连接错误，请稍后再试",status:status})}},xhr.send(isPost?qstr:void 0),xhr},loadScript:function(e,t,n,o){var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.addEventListener("load",function e(){if(i){try{i.src=""}catch(e){}i.removeEventListener("load",e),r.removeChild(i),i=null,"function"==typeof t&&t(n,!0)}}),i.addEventListener("error",function e(){if(i){try{i.src=""}catch(e){}i.removeEventListener("error",e),r.removeChild(i),i=null,"function"==typeof t&&t(n,!1)}}),i.charset=o||"utf-8",i.src=e,r.insertBefore(i,r.firstChild)},report:function(e,t){t=t||{};var n=[];e[6]=10,e[7]=0,U.fn.each(e,function(e,t){n.push(t+"="+encodeURIComponent(e))});var o=[];U.fn.each(t,function(e,t){o.push("&"+t+"="+encodeURIComponent(e))}),(new Image).src="//api.unipay.qq.com/v1/900/15499/log_data?num=1&record0="+n.join("|")+o.join("")+"&rr="+Math.random()},isdR:function(e,t,n,o){},isdV:function(e,t,n,o,r,i){}},U.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e._super=t}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(5),c=(n(11),n(9),n(14)),u=function(e){function t(e){var n=e.params,i=void 0===n?{}:n,a=e.callback,s=void 0===a?function(){}:a,u=e.opt,f=void 0===u?{}:u;o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{params:i,callback:s,opt:f}));l.IFORMAT_PREFIX="midaswechatpay."+(l.isEnterprise()?"enterprise":"goods"),l.reportObj.setIformatPrefix(l.IFORMAT_PREFIX),l.payMod=new c(i);var p=l.payMod.checkGoodsParams();return l.checkEnv(function(){p.status?l.directPay():l.paramsError(p.msg)}),l}return i(t,s),a(t,[{key:"isEnterprise",value:function(){return this.opt.isEnterprise}}]),t}();e.exports=u},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(6),a=n(8),s=n(3),c=n(13),u=n(9),f=n(11),l=function(){function e(t){var n=t.params,r=t.callback,i=t.opt;if(o(this,e),this.params=n,this.opt=i,this.callback=r,this.env={},!s.lang.isFunction(this.callback))throw new Error("callback must be a function");this.payMod=null,a.setContext(this),s.fn.extend(this.params,{env:~~this.opt.env}),this.reportObj=new c,this.payStartTime=(new Date).getTime()}return r(e,[{key:"checkEnv",value:function(e){var t=this;wx.getSystemInfo({success:function(e){console.log("system info ",e),t.env=e},complete:function(){s.lang.isFunction(e)&&e()}})}},{key:"isEnterprise",value:function(){return!1}},{key:"getPlatform",value:function(){var e=this.env;return e.model?e.model.indexOf("iPhone")>-1?"ios":"android":""}},{key:"getVersion",value:function(){var e=this.env;return e?e.version||"":""}},{key:"getPayStartTime",value:function(){return this.payStartTime}},{key:"report",value:function(e,t,n){this.reportObj.send(e,t,{3:this.params.openid,37:this.params.session_id,43:this.params.session_type,41:this.params.login_wx_appid,26:this.params.pf,19:this.params.service_code,24:this.params.appid,50:this.getPlatform()+"_"+this.getVersion(),51:this.params.aid||""})}},{key:"getPayMod",value:function(){return this.payMod}},{key:"directPay",value:function(){var e=this;return console.log("in dereict pay"),!(!this.params.direct_channel||!i.hasOwnProperty(this.params.direct_channel))&&(this.report("directpay",{channel:this.params.direct_channel}),i[this.params.direct_channel](null,function(t){try{var n=(new Date).getTime();e.report("payduration",{time:n-e.getPayStartTime()})}catch(e){}e.callback(t)}),!0)}},{key:"getBizAppid",value:function(){return 1!=this.opt.use_default_wxappid?this.params.biz_appid||"1":this.payMod.getDefaultBizAppid()}},{key:"paramsError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";setTimeout(function(){e.callback(new f({ret:u.code.PARAMS_ERROR,msg:t||u.msg[u.code.FAIL]}).getResult())},0)}},{key:"showPayLoading",value:function(){try{wx.showToast({title:"支付中...",icon:"loading",duration:3e3})}catch(e){}}},{key:"hidePayLoading",value:function(){try{wx.hideToast()}catch(e){}}},{key:"destroy",value:function(){a.destroyContext(),this.report=null,this.payMod=null}}]),e}();e.exports=l},function(e,t,n){var o=n(7),r=n(12);e.exports={wechat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];new o(e,t)},jifenWechat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];new r(e,t)}}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(8),c=n(9),u=n(3),f=n(10),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.buy(i.params),i}return i(t,f),a(t,[{key:"buy",value:function(e){var t=this;console.log("in buy");var n={biz_appid:this.context.getBizAppid(),wx_direct_pay:0,wx_publice_pay:1,pay_method:"wechat"};e=u.fn.extend({},n,e);var o=this.context.getPayMod();"1"==o.getPayParams().change_wx_openid&&(e.change_wx_openid="1",console.log("need change wx openid")),o.save(e,function(n){return t.handlerBuy(n,e)})}},{key:"getChannelName",value:function(){return"wechat"}},{key:"handlerBuy",value:function(e,t){var n=this;console.log("in handlebuy"),~~e.ret?this.callback.call(null,this.constructResult(e)):function(){var t=e.wx_info,o=(t.wx_sign_url,t.wx_appid,t.wx_time),r=t.wx_noncenum,i=t.wx_package,a=t.wx_signtype||"SHA1",u=t.wx_sign,f=!1;wx.requestPayment({timeStamp:o,nonceStr:r,package:i,signType:a,paySign:u,complete:function(e){console.log("wx pay complete",e);var t="requestPayment:fail cancel"===e.errMsg;s.getContext().report("paystatus."+(f?"success":"fail"),{channel:n.getChannelName()});var o=f?c.code.SUCCESS:c.code.FAIL;!f&&t&&(o=c.code.CANCEL);var r=c.msg[o];n.callback.call(null,n.constructResult({ret:o,msg:r}))},success:function(e){console.log("wx pay success ",e),f=!0},fail:function(e){console.log("wx pay fail ",e),f=!1}})}()}}]),t}();e.exports=l},function(e,t,n){var o=null;e.exports={setContext:function(e){o=e},getContext:function(){return o},getVersion:function(){return"1.2.1"},destroyContext:function(){o=null}}},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,r=t.code={SUCCESS:0,FAIL:-1,CANCEL:-2,PARAMS_ERROR:1e3};t.msg=(o={},n(o,r.SUCCESS,"支付成功"),n(o,r.FAIL,"支付失败"),n(o,r.CANCEL,"支付取消"),n(o,r.PARAMS_ERROR,"参数错误"),o)},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(8),a=n(3),s=n(11),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];if(o(this,e),this.params=t,this.callback=n,!a.lang.isFunction(this.callback))throw new Error("callback must be a function");this.context=i.getContext()}return r(e,[{key:"buy",value:function(e){}},{key:"handlerBuy",value:function(e){}},{key:"getChannelName",value:function(){return""}},{key:"constructResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new s(e);return a.fn.extend(t,{channel:this.getChannelName()}),n.setExtra(t),n.result}}]),e}();c.ResultAdapter=s,e.exports=c},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(3),a=function(){function e(t){var n=t.ret,r=t.msg;o(this,e),this.result={resultCode:n,resultMsg:r}}return r(e,[{key:"setExtra",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.fn.extend(this.result,e)}},{key:"getResult",value:function(){return this.result}}]),e}();e.exports=a},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(8),c=n(9),u=n(3),f=n(10),l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.buy(i.params),i}return i(t,f),a(t,[{key:"buy",value:function(e){var t=this;console.log("in jifen Wechat");var n={wx_direct_pay:0,wx_publice_pay:1,wx_order_interface:1,pay_type:1,pay_method:"wechat"};e=u.fn.extend({},n,e),this.context.getPayMod().save(e,function(n){return t.handlerBuy(n,e)})}},{key:"getChannelName",value:function(){return"wechat"}},{key:"handlerBuy",value:function(e,t){var n=this;~~e.ret?this.callback.call(null,this.constructResult(e)):function(){var t=e,o=decodeURIComponent(t.wx_time),r=decodeURIComponent(t.wx_nonce_num),i=decodeURIComponent(t.wx_package),a=decodeURIComponent(t.wx_sign_type)||"SHA1",u=decodeURIComponent(t.wx_sign),f=decodeURIComponent(t.order_id),l=!1;console.log(o),console.log(r),console.log(i),console.log(a),console.log(u),wx.requestPayment({timeStamp:o,nonceStr:r,package:i,signType:a,paySign:u,complete:function(){console.log("wx pay complete"),s.getContext().report("paystatus."+(l?"success":"fail"),{channel:n.getChannelName()});var e=l?c.code.SUCCESS:c.code.FAIL,t=c.msg[e];n.callback.call(null,n.constructResult({ret:e,msg:t},{prepay_id:i,timeStamp:o,order_id:f}))},success:function(e){console.log("wx pay success ",e),l=!0},fail:function(e){console.log("wx pay fail ",e),l=!1}})}()}}]),t}();e.exports=l},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(3),a=n(8),s=function(){function e(){o(this,e),this.reportQueue=[],this.pid=0,this.iformatPrefix=""}return r(e,[{key:"constructParams",value:function(e,t,n){var o={};i.fn.extend(o,{6:10,7:0,8:t?i.req.serializeParam(t):"",13:this.pid++,21:[this.iformatPrefix,e].join("."),31:"midas_wx_sdk_"+a.getVersion(),38:(new Date).getTime()});var r=[];i.fn.each(o,function(e,t){r.push(t+"="+encodeURIComponent(e))});var s=[];return i.fn.each(n,function(e,t){s.push("&"+t+"="+encodeURIComponent(e))}),"https://api.unipay.qq.com/v1/900/15499/log_data?num=1&record0="+encodeURIComponent(r.join("|"))+s.join("")+"&rr"+Math.random()}},{key:"doSend",value:function(){var e=this,t=this.reportQueue[0];wx.request({url:t,method:"GET",complete:function(){e.reportQueue.shift(),e.reportQueue.length>0&&e.doSend()}})}},{key:"send",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.constructParams(e,t,o);this.reportQueue.push(r),1==this.reportQueue.length&&setTimeout(function(){n.doSend()},0)}},{key:"setIformatPrefix",value:function(e){this.iformatPrefix=e}}]),e}();e.exports=s},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(3),u=n(15),f=n(8),l=function(e){e.prototype.checkGoodsParams=function(){var e=this,t={status:!0,msg:""},n=this.checkPublicParams();return n.status?(c.fn.each(["goodstokenurl","zoneid","pf"],function(n){if(!e.params[n])return t.status=!1,t.msg=n+"错误",!1;var o=e.params[n];"string"==typeof o&&(e.params[n]=o)}),t):n}}(a=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initCgi(),n.goodsInfo=null,n}return i(t,u),s(t,[{key:"getGoodsInfo",value:function(){return{}}},{key:"getZoneid",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).zoneid||this.params.zoneid||"1"}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n={};c.fn.extend(n,this.getSavePublicParams()),c.fn.extend(n,{zoneid:this.getZoneid(this.buyParams),buy_quantity:this.params.buy_quantity||""}),c.fn.extend(n,e),n._params=this.params.goodstokenurl,this.doSave(n,t)}},{key:"doSave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];f.getContext().showPayLoading(),f.getContext().report("startsave.pv"),this.cgi.mobileSaveGoods(e,function(e){f.getContext().hidePayLoading(),f.getContext().report("savestatus",{resultCode:e.ret,resultMsg:e.msg}),console.log("game save ",e),t(e)},{disableLoading:!0})}}]),t}())||a;e.exports=l},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(16),s=n(17),c=(n(9),n(3)),u=(n(8),function(e){e.prototype.checkPublicParams=function(){var e=this.params,t="",n={status:!0,msg:""};return c.fn.each(["appid","openid","openkey","session_id","session_type"],function(n){if(!e[n])return t=n+"错误",!1}),t&&(n.status=!1,n.msg=t),n}}(r=function(){function e(t){o(this,e),this.params=t,this.session=new a({openid:t.openid,openkey:t.openkey,sessionid:t.sessionid||"hy_gameid",sessiontype:t.sessiontype||"wc_actoken"}),this.cgi=null}return i(e,[{key:"getPayParams",value:function(){return this.params}},{key:"initCgi",value:function(){this.cgi=new s({pf:this.params.pf,pfkey:this.params.pfkey||"pfkey",appid:this.params.appid,sandbox:~~this.params.env,sessionObj:this.session})}},{key:"getInfoPublicParams",value:function(){}},{key:"getSavePublicParams",value:function(){return{from_https:"1",from_h5:"1",provide_uin:this.params.provide_uin||"",wx_appid:this.params.login_wx_appid||""}}},{key:"getDefaultBizAppid",value:function(){return"wx951bdcac522929b6"}},{key:"save",value:function(e,t){}}]),e}())||r);e.exports=u},function(e,t,n){var o=n(3),r=e.exports=function(e){this.openid=e.openid,this.openkey=e.openkey,this.sessionid=e.sessionid,this.sessiontype=e.sessiontype,this.sessionToken=this.openid+(new Date).getTime()};o.fn.extend(r.prototype,{getSessionParam:function(){return{openid:encodeURIComponent(this.openid),openkey:encodeURIComponent(this.openkey),session_id:encodeURIComponent(this.sessionid),session_type:encodeURIComponent(this.sessiontype)}},addSessionParam:function(e){return o.fn.addParam({openid:encodeURIComponent(this.openid),openkey:encodeURIComponent(this.openkey),sessionid:encodeURIComponent(this.sessionid),sessiontype:encodeURIComponent(this.sessiontype)},e)},getUin:function(){return""}})},function(e,t,n){var o=void 0,r=o=n(3),i=n(18),a=(n(19),e.exports=function(e){e=e||{},this.pf=e.pf||"vip_m-pay_html5-html5",this.pfkey=e.pfkey||"pfkey",this.appid=e.appid,this.sandbox=~~e.sandbox,this.sessionObj=e.sessionObj||null,this.mid=e.mid||"r",this.domain="api.unipay.qq.com",1==this.sandbox?this.domain="sandbox.api.unipay.qq.com":2==this.sandbox&&(this.domain="dev.api.unipay.qq.com"),this.domainq=this.sandbox?"sandbox.api.unipay.qq.com":"q.unipay.qq.com",this.aesKey=this.sandbox?"0269bd8009164afc":"2Wozy2aksie1puXU",this.sessionToken=e.sessionToken||r.fn.uuid()+(new Date).getTime(),e.extend&&(this.extend=e.extend)});a.url={mobileGetConfig:{url:"$domain$/v1/r/$appid$/mobile_get_config",https:!0},mobileMonthInfo:{url:"$domain$/v1/r/$appid$/mobile_month_info?",https:!0},mobileSaveMonth:{url:"$domain$/v1/r/$appid$/mobile_save_month",https:!0},mobileBuyPage:{url:"$domain$/v1/r/$appid$/mobile_buy_page?",https:!0},mobileGetToken:{url:"$domain$/v1/r/$appid$/mobile_get_token?",https:!0},mobileSave:{url:"$domain$/v1/r/$appid$/mobile_save?",https:!0},mobileGoodsInfo:{url:"$domain$$params$&",https:!0},mobileSaveGoods:{url:"$domain$/v1/$mid$/$appid$/mobile_save_goods?",https:!0},mobileSaveGoods2:{url:"$params$&",https:!0},mobileSaveGoods3:{url:"$domain$$params$&",https:!0},getQqacctYue:{url:"$domain$/v1/r/$appid$/wechat_query?cmd=4&",https:!1},getQQNick:{url:"$domain$/v1/r/$appid$/wechat_query?cmd=1&",https:!1},mobileGetImage:{url:"$domain$/v1/r/$appid$/mobile_get_image?",https:!1},mobileGetCardbillInfo:{url:"$domain$/v1/r/$appid$/mobile_get_cardbill_info?",https:!1},waterQuery:{url:"$domain$/v1/r/$appid$/water_query?",https:!1},getPayResult:{url:"$domain$/v1/r/$appid$/get_pay_result?",https:!0},mobileWirelessProc:{url:"$domain$/v1/r/$appid$/mobile_wireless_proc?",https:!0},jifenPayGoods:{url:"https://m.jifen.qq.com/cgi-bin/pay_goods?",https:!0}},a.isEnterprise=!1,a.prototype={setEnv:function(e){if(e&&this.sandbox)switch(this.env=e,e){case"dev":this.domain="dev.api.unipay.qq.com";break;case"sandbox":this.domain="sandbox.api.unipay.qq.com"}},restoreEnv:function(){this.sandbox&&this.setEnv("sandbox")},set isSandbox(e){this.sandbox=e,this.domain=this.sandbox?"sandbox.api.unipay.qq.com":"api.unipay.qq.com",this.aesKey=this.sandbox?"0269bd8009164afc":"2Wozy2aksie1puXU"},aes:function(e,t){var n=[];return r.fn.each(t,function(t){n.push(t+"="+(e[t]||""))}),n=n.join("&"),{encrypt_msg:i.AES.encrypt(i.enc.Latin1.parse(n),i.enc.Latin1.parse(this.aesKey),{padding:i.pad.ZeroPadding,iv:i.enc.Latin1.parse(this.aesKey),mode:i.mode.ECB}).ciphertext.toString(i.enc.Hex),msg_len:n.length}},aesDecrypt:function(e){return e=i.enc.Hex.parse(e),e=i.enc.Base64.stringify(e),i.AES.decrypt(e,i.enc.Utf8.parse(this.aesKey),{padding:i.pad.ZeroPadding,mode:i.mode.ECB}).toString(i.enc.Utf8)},_getCgiUrl:function(e,t,n){t=t||{},n=n||{};return r.tmpl(e.url,r.fn.extend({appid:this.appid,mid:this.mid||"r",domain:["https:","//",n.domainq?this.domainq:this.domain].join("")},t))},setSession:function(e){this.sessionObj=e},_getSessionParam:function(){return r.fn.extend({pf:this.pf,pfkey:this.pfkey,from_h5:1,session_token:this.sessionToken,r:Math.random()},this.sessionObj.getSessionParam())},request:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],o=arguments[3];o=o||{},wx&&function(){try{o.disableLoading||wx.showToast({title:"支付中...",icon:"loading",duration:3e3})}catch(e){}var r=!1,i={ret:-1};console.log("before request "),wx.request({url:e,method:"GET",header:{},data:t,success:function(e){r=!0,i=e.statusCode>=200&&e.statusCode<=299?e.data:{ret:-9998,msg:"系统繁忙，请稍后再试！"}},fail:function(){r=!1,i={ret:-9999,msg:"请求超时！"}},complete:function(){console.log("request complete ",i);try{o.disableLoading||wx.hideToast()}catch(e){}n(i)}})}()},mobileSave:function(e,t,n){var o;o={wx_direct_pay:0,wx_publice_pay:"wechat"===(e=e||{}).pay_method?1:0,format:"request_buy"},r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),r.fn.extend(o,this.aes(o,["biz_appid","token_id","openid","openkey","session_id","session_type","zoneid","pay_method","buy_quantity","mb_pwd","pay_id","auth_key","card_value","accounttype"])),this.request(this._getCgiUrl(a.url.mobileSave),o,t,n)},mobileSaveMonth:function(e,t){var n={wx_direct_pay:0,wx_publice_pay:"wechat"===(e=e||{}).pay_method?1:0};r.fn.extend(n,this._getSessionParam()),r.fn.extend(n,e),r.fn.extend(n,this.aes(n,["openid","openkey","session_id","session_type","zoneid","pay_method","buy_quantity","mb_pwd","pay_id","auth_key","card_value","accounttype"])),this.request(this._getCgiUrl(a.url.mobileSaveMonth),n,t,"buy_month")},mobileBuyPage:function(e,t,n){e=e||{};var o={};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),r.fn.extend(o,this.aes(o,["openid","openkey","session_id","session_type"])),this.request(this._getCgiUrl(a.url.mobileBuyPage),o,t,n)},mobileGetToken:function(e,t,n){e=e||{};var o={};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),r.fn.extend(o,this.aes(o,["openid","openkey","session_id","session_type"])),this.request(this._getCgiUrl(a.url.mobileGetToken),o,t,n)},mobileMonthInfo:function(e,t){e=e||{};var n={format:"request__mobileMonthInfo"};r.fn.extend(n,this._getSessionParam()),r.fn.extend(n,e),this.request(this._getCgiUrl(a.url.mobileMonthInfo),n,t,"_mobileMonthInfo")},mobileGoodsInfo:function(e,t,n){e=e||{};var o={};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),this.request(this._getCgiUrl(a.url.mobileGoodsInfo,{params:e.params}),o,t,n)},mobileSaveGoods:function(e,t,n){e=e||{};var o={biz_appid:this.sessionObj.appid||""},i=e._url,s=e._mid,c=e._params;delete e._url,delete e._mid,delete e._params,r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),r.fn.extend(o,this.aes(o,["openid","openkey","session_id","session_type","pay_method","buy_quantity","mb_pwd","pay_id","auth_key","card_value"])),c?/\/mobile_goods_info\?/.test(c)?(c=c.replace(/\/[a-z_]+\?/,"/mobile_save_goods?"),this.request(this._getCgiUrl(a.url.mobileSaveGoods3,{params:c}),o,t,n)):this.request(this._getCgiUrl(a.url.mobileSaveGoods2,{params:c}),o,t,n):i?this.request(i,o,t,n):this.request(this._getCgiUrl(a.url.mobileSaveGoods,{mid:s}),o,t,n)},getQqacctYue:function(e,t,n){e=e||{};var o={format:"request__getQqacctYue"};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),this.request(this._getCgiUrl(a.url.getQqacctYue),o,t,n)},getQQNick:function(e,t,n){e=e||{};var o={extend:encodeURIComponent("TencentUnipayApp=1")};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),this.request(this._getCgiUrl(a.url.getQQNick),o,cllback,n)},mobileGetImage:function(e,t,n){e=e||{};var o={};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),this.request(this._getCgiUrl(a.url.mobileGetImage),o,t,n)},mobileGetCardbillInfo:function(e,t){e=e||{};var n={};r.fn.extend(n,this._getSessionParam()),r.fn.extend(n,e),this.request(this._getCgiUrl(a.url.mobileGetCardbillInfo),n,t)},waterQuery:function(e,t,n){e=e||{};var o={CmdCode:"query",SubCmdCode:"sdk",TimeFormat:"unix"};r.fn.extend(o,this.sessionObj.getSessionParam()),r.fn.extend(o,e),this.request(this._getCgiUrl(a.url.waterQuery,o,{},n),t,n)},getPayResult:function(e,t,n){e=e||{};var o={};r.fn.extend(o,e),r.fn.extend(o,this.sessionObj.getSessionParam()),this.request(this._getCgiUrl(a.url.getPayResult,o),t,n)},mobileWirelessProc:function(e,t,n){e=e||{};var o={};r.fn.extend(o,e),r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,this.aes(o,["openid","openkey","pf","pfkey","zoneid","accounttype","action","uuid","type","buy_quantity","amt","service_code","product_id","sms_authcode","hf_billno","portal_serial_no","provide_openid","mobile"])),this.request(this._getCgiUrl(a.url.mobileWirelessProc,o),t,n)},mobileGetConfig:function(e,t,n){e=e||{};var o={};r.fn.extend(o,e),r.fn.extend(o,{offer_id:this.appid,req_type:"cpay"}),r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,this.aes(o,["openid","openkey","session_id","session_type","pf","pfkey"])),this.request(this._getCgiUrl(a.url.mobileGetConfig,o),t,n)},jifenPayGoods:function(e,t,n){console.log("in jifenPayGoods"),e=e||{};var o={};r.fn.extend(o,this._getSessionParam()),r.fn.extend(o,e),r.fn.extend(o,this.aes(o,["openid","openkey","session_id","session_type","pay_method","buy_quantity"])),this.request(this._getCgiUrl(a.url.jifenPayGoods,o),o,t,n)}}},function(e,t){var n=n||function(e,t){var n={},o=n.lib={},r=function(){},i=o.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes;if(e=e.sigBytes,this.clamp(),o%4)for(var r=0;r<e;r++)t[o+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(o+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[o+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],o=0;o<t;o+=4)n.push(4294967296*e.random()|0);return new a.init(n,t)}}),s=n.enc={},c=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++){var r=t[o>>>2]>>>24-o%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new a.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],o=0;o<e;o++)n.push(String.fromCharCode(t[o>>>2]>>>24-o%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new a.init(n,t)}},f=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,o=n.words,r=n.sigBytes,i=this.blockSize,s=r/(4*i);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*i,r=e.min(4*t,r),t){for(var c=0;c<t;c+=i)this._doProcessBlock(o,c);c=o.splice(0,t),n.sigBytes-=r}return new a.init(c,r)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});o.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);!function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var i=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;4>a&&r+.75*a<n;a++)e.push(o.charAt(i>>>6*(3-a)&63));if(t=o.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,o=this._map;(r=o.charAt(64))&&-1!=(r=e.indexOf(r))&&(n=r);for(var r=[],i=0,a=0;a<n;a++)if(a%4){var s=o.indexOf(e.charAt(a-1))<<a%4*2,c=o.indexOf(e.charAt(a))>>>6-a%4*2;r[i>>>2]|=(s|c)<<24-i%4*8,i++}return t.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,o,r,i,a){return((e=e+(t&n|~t&o)+r+a)<<i|e>>>32-i)+t}function o(e,t,n,o,r,i,a){return((e=e+(t&o|n&~o)+r+a)<<i|e>>>32-i)+t}function r(e,t,n,o,r,i,a){return((e=e+(t^n^o)+r+a)<<i|e>>>32-i)+t}function i(e,t,n,o,r,i,a){return((e=e+(n^(t|~o))+r+a)<<i|e>>>32-i)+t}for(var a=n,s=(u=a.lib).WordArray,c=u.Hasher,u=a.algo,f=[],l=0;64>l;l++)f[l]=4294967296*e.abs(e.sin(l+1))|0;u=u.MD5=c.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(a=0;16>a;a++){c=e[s=n+a];e[s]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var a=this._hash.words,s=e[n+0],c=e[n+1],u=e[n+2],l=e[n+3],p=e[n+4],d=e[n+5],h=e[n+6],y=e[n+7],v=e[n+8],m=e[n+9],g=e[n+10],b=e[n+11],_=e[n+12],w=e[n+13],x=e[n+14],P=e[n+15],k=a[0],O=a[1],S=a[2],j=a[3],O=i(O=i(O=i(O=i(O=r(O=r(O=r(O=r(O=o(O=o(O=o(O=o(O=t(O=t(O=t(O=t(O,S=t(S,j=t(j,k=t(k,O,S,j,s,7,f[0]),O,S,c,12,f[1]),k,O,u,17,f[2]),j,k,l,22,f[3]),S=t(S,j=t(j,k=t(k,O,S,j,p,7,f[4]),O,S,d,12,f[5]),k,O,h,17,f[6]),j,k,y,22,f[7]),S=t(S,j=t(j,k=t(k,O,S,j,v,7,f[8]),O,S,m,12,f[9]),k,O,g,17,f[10]),j,k,b,22,f[11]),S=t(S,j=t(j,k=t(k,O,S,j,_,7,f[12]),O,S,w,12,f[13]),k,O,x,17,f[14]),j,k,P,22,f[15]),S=o(S,j=o(j,k=o(k,O,S,j,c,5,f[16]),O,S,h,9,f[17]),k,O,b,14,f[18]),j,k,s,20,f[19]),S=o(S,j=o(j,k=o(k,O,S,j,d,5,f[20]),O,S,g,9,f[21]),k,O,P,14,f[22]),j,k,p,20,f[23]),S=o(S,j=o(j,k=o(k,O,S,j,m,5,f[24]),O,S,x,9,f[25]),k,O,l,14,f[26]),j,k,v,20,f[27]),S=o(S,j=o(j,k=o(k,O,S,j,w,5,f[28]),O,S,u,9,f[29]),k,O,y,14,f[30]),j,k,_,20,f[31]),S=r(S,j=r(j,k=r(k,O,S,j,d,4,f[32]),O,S,v,11,f[33]),k,O,b,16,f[34]),j,k,x,23,f[35]),S=r(S,j=r(j,k=r(k,O,S,j,c,4,f[36]),O,S,p,11,f[37]),k,O,y,16,f[38]),j,k,g,23,f[39]),S=r(S,j=r(j,k=r(k,O,S,j,w,4,f[40]),O,S,s,11,f[41]),k,O,l,16,f[42]),j,k,h,23,f[43]),S=r(S,j=r(j,k=r(k,O,S,j,m,4,f[44]),O,S,_,11,f[45]),k,O,P,16,f[46]),j,k,u,23,f[47]),S=i(S,j=i(j,k=i(k,O,S,j,s,6,f[48]),O,S,y,10,f[49]),k,O,x,15,f[50]),j,k,d,21,f[51]),S=i(S,j=i(j,k=i(k,O,S,j,_,6,f[52]),O,S,l,10,f[53]),k,O,g,15,f[54]),j,k,c,21,f[55]),S=i(S,j=i(j,k=i(k,O,S,j,v,6,f[56]),O,S,P,10,f[57]),k,O,h,15,f[58]),j,k,w,21,f[59]),S=i(S,j=i(j,k=i(k,O,S,j,p,6,f[60]),O,S,b,10,f[61]),k,O,u,15,f[62]),j,k,m,21,f[63]);a[0]=a[0]+k|0,a[1]=a[1]+O|0,a[2]=a[2]+S|0,a[3]=a[3]+j|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var i=e.floor(o/4294967296);for(n[15+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,o=0;4>o;o++)r=n[o],n[o]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=c._createHelper(u),a.HmacMD5=c._createHmacHelper(u)}(Math),function(){var e=n,t=e.lib,o=t.Base,r=t.WordArray,i=(t=e.algo).EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(s=this.cfg).hasher.create(),o=r.create(),i=o.words,a=s.keySize,s=s.iterations;i.length<a;){c&&n.update(c);var c=n.update(e).finalize(t);n.reset();for(var u=1;u<s;u++)c=n.finalize(c),n.reset();o.concat(c)}return o.sigBytes=4*a,o}});e.EvpKDF=function(e,t,n){return i.create(n).compute(e,t)}}(),n.lib.Cipher||function(e){var t=(h=n).lib,o=t.Base,r=t.WordArray,i=t.BufferedBlockAlgorithm,a=h.enc.Base64,s=h.algo.EvpKDF,c=t.Cipher=i.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,o){return("string"==typeof n?y:d).encrypt(e,t,n,o)},decrypt:function(t,n,o){return("string"==typeof n?y:d).decrypt(e,t,n,o)}}}});t.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=h.mode={},f=function(e,t,n){var o=this._iv;o?this._iv=void 0:o=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=o[r]},l=(t.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize;f.call(this,e,t,o),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,r=e.slice(t,t+o);n.decryptBlock(e,t),f.call(this,e,t,o),this._prevBlock=r}}),u=u.CBC=l,l=(h.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,o=(n=n-e.sigBytes%n)<<24|n<<16|n<<8|n,i=[],a=0;a<n;a+=4)i.push(o);n=r.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:l}),reset:function(){c.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var p=t.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),u=(h.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return p.create({ciphertext:e,salt:n})}},d=t.SerializableCipher=o.extend({cfg:o.extend({format:u}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var r=e.createEncryptor(n,o);return t=r.finalize(t),r=r.cfg,p.create({ciphertext:t,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(n,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),h=(h.kdf={}).OpenSSL={execute:function(e,t,n,o){return o||(o=r.random(8)),e=s.create({keySize:t+n}).compute(e,o),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,p.create({key:e,iv:n,salt:o})}},y=t.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:h}),encrypt:function(e,t,n,o){return o=this.cfg.extend(o),n=o.kdf.execute(n,e.keySize,e.ivSize),o.iv=n.iv,(e=d.encrypt.call(this,e,t,n.key,o)).mixIn(n),e},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),n=o.kdf.execute(n,e.keySize,e.ivSize,t.salt),o.iv=n.iv,d.decrypt.call(this,e,t,n.key,o)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,o=e.algo,r=[],i=[],a=[],s=[],c=[],u=[],f=[],l=[],p=[],d=[],h=[],y=0;256>y;y++)h[y]=128>y?y<<1:y<<1^283;for(var v=0,m=0,y=0;256>y;y++){var g=(g=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&g^99;r[v]=g,i[g]=v;var b=h[v],_=h[b],w=h[_],x=257*h[g]^16843008*g;a[v]=x<<24|x>>>8,s[v]=x<<16|x>>>16,c[v]=x<<8|x>>>24,u[v]=x,x=16843009*w^65537*_^257*b^16843008*v,f[g]=x<<24|x>>>8,l[g]=x<<16|x>>>16,p[g]=x<<8|x>>>24,d[g]=x,v?(v=b^h[h[h[w^b]]],m^=h[h[m]]):v=m=1}var P=[0,1,2,4,8,16,32,64,128,27,54],o=o.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),o=this._keySchedule=[],i=0;i<n;i++)if(i<t)o[i]=e[i];else{var a=o[i-1];i%t?6<t&&4==i%t&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=a<<8|a>>>24,a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=P[i/t|0]<<24),o[i]=o[i-t]^a}for(e=this._invKeySchedule=[],t=0;t<n;t++)i=n-t,a=t%4?o[i]:o[i-4],e[t]=4>t||4>=i?a:f[r[a>>>24]]^l[r[a>>>16&255]]^p[r[a>>>8&255]]^d[r[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,u,r)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,f,l,p,d,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,r,i,a,s){for(var c=this._nRounds,u=e[t]^n[0],f=e[t+1]^n[1],l=e[t+2]^n[2],p=e[t+3]^n[3],d=4,h=1;h<c;h++)var y=o[u>>>24]^r[f>>>16&255]^i[l>>>8&255]^a[255&p]^n[d++],v=o[f>>>24]^r[l>>>16&255]^i[p>>>8&255]^a[255&u]^n[d++],m=o[l>>>24]^r[p>>>16&255]^i[u>>>8&255]^a[255&f]^n[d++],p=o[p>>>24]^r[u>>>16&255]^i[f>>>8&255]^a[255&l]^n[d++],u=y,f=v,l=m;y=(s[u>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&p])^n[d++],v=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[p>>>8&255]<<8|s[255&u])^n[d++],m=(s[l>>>24]<<24|s[p>>>16&255]<<16|s[u>>>8&255]<<8|s[255&f])^n[d++],p=(s[p>>>24]<<24|s[u>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^n[d++],e[t]=y,e[t+1]=v,e[t+2]=m,e[t+3]=p},keySize:8});e.AES=t._createHelper(o)}(),n.mode.ECB=function(){var e=n.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),n.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},e.exports=n},function(e,t,n){var o=n(3),r=function(e){e=e||{},this.opt=e,this.interval=null};r.prototype.stop=function(e){0==e?clearTimeout(this.interval):1==e&&clearInterval(this.interval),this.interval=null},t.CountDown=function(e){if(e=e||{},r.call(this,e),!(e.time&&e.beforeCount&&e.counting&&e.countEnd))throw Error("can not use countDown");e.beforeCount();var t=e.time,n=function(){if(this.interval){if(e.counting(t),t<=0)return this.stop(1),void e.countEnd();t--}};n(),this.interval=setInterval(n.bind(this),1e3)},o.inherits(t.CountDown,r),t.Timeout=function(e){(e=e||{}).time=e.time||5,r.call(this,e),this.interval=setTimeout(function(){this.interval&&(this.stop(0),e.timeUp&&e.timeUp())}.bind(this),1e3*e.time)},o.inherits(t.Timeout,r)},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},c=n(2),u=n(21),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,c),a(t,[{key:"launchPay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"launchPay",this).call(this,e,n),this.app=new u({params:e,opt:this.opt,callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt.autoDestroy&&(t.instance.destroy(),t.instance=null),n(e)}.bind(this)})}}]),t}();f.instance=null,e.exports={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=f.instance?f.instance:f.instance=new f(e)},get:function(){if(!f.instance)throw Error("subscribe not initalize");return f.instance},destroy:function(){f.instance.destroy(),f.instance=null}}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},c=n(22),u=n(5),f=n(11),l=n(9),p=function(e){function t(e){var n=e.params,i=void 0===n?{}:n,a=e.callback,s=void 0===a?function(){}:a,u=e.opt,p=void 0===u?{}:u;o(this,t);var d=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{params:i,callback:s,opt:p}));d.IFORMAT_PREFIX="midaswechatpay.subscribe",d.reportObj.setIformatPrefix(d.IFORMAT_PREFIX),d.payMod=new c(i);var h=d.payMod.checkSubscribeParams();return d.checkEnv(function(){d.payMod.checkSubscribeParams().status?d.directPay():setTimeout(function(){d.callback(new f({ret:l.code.PARAMS_ERROR,msg:h.msg||l.msg[l.code.FAIL]}).getResult())},0)}),d}return i(t,u),a(t,[{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}();e.exports=p},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(3),u=n(15),f=n(8),l=function(e){e.prototype.checkSubscribeParams=function(){var e=this,t={status:!0,msg:""},n=this.checkPublicParams();return n.status?(c.fn.each(["pf","service_code"],function(n){if(!e.params[n])return t.status=!1,t.msg=n+"错误",!1}),t):n}}(a=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=[];return n.params.aid&&i.push("aid="+n.params.aid),n.params.appremark=encodeURIComponent(i.join("&")),n.account=n.params.account||"wechat",n.initCgi(),n}return i(t,u),s(t,[{key:"getProvideNoType",value:function(){return"wechat"==this.account?"wechatid":"qq"==this.account?"uin":void 0}},{key:"getMonthInfo",value:function(){return{}}},{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n={buy_quantity:e.buy_quantity||this.params.buy_quantity||1,service_code:this.params.service_code,product_id:e.product_id||this.params.product_id,appremark:this.params.appremark||"",provide_no_type:this.getProvideNoType(),service_name:this.params.service_name||""};c.fn.extend(n,this.getSavePublicParams()),c.fn.extend(n,e),f.getContext().report("startsave.pv",{serviceCode:n.service_code,productId:n.product_id}),this.cgi.mobileSaveMonth(n,function(e){f.getContext().report("savestatus",{resultCode:e.ret,resultMsg:e.msg}),console.log("subscribe save ",e),t(e)})}}]),t}())||a;e.exports=l},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},c=n(2),u=n(24),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,c),a(t,[{key:"launchPay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"launchPay",this).call(this,e,n),this.app=new u({params:e,opt:this.opt,callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt.autoDestroy&&(t.instance.destroy(),t.instance=null),n(e)}.bind(this)})}}]),t}();f.instance=null,e.exports={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=f.instance?f.instance:f.instance=new f(e)},get:function(){if(!f.instance)throw Error("qb not initalize");return f.instance},destroy:function(){f.instance.destroy(),f.instance=null}}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=n(11),c=n(9),u=n(25),f=function(e){function t(e){var n=e.params,i=void 0===n?{}:n,a=e.callback,f=void 0===a?function(){}:a,l=e.opt,p=void 0===l?{}:l;o(this,t);var d=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{params:i,callback:f,opt:p}));d.IFORMAT_PREFIX="midaswechatpay.qb",d.reportObj.setIformatPrefix(d.IFORMAT_PREFIX),i.service_name="充值Q币",d.payMod=new u(i);var h=d.payMod.checkQbParams();return d.checkEnv(function(){h.status?d.directPay():setTimeout(function(){d.callback(new s({ret:c.code.PARAMS_ERROR,msg:h.msg||c.msg[c.code.FAIL]}).getResult())},0)}),d}return i(t,a),t}();e.exports=f},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},u=n(3),f=(n(8),n(26)),l=function(e){e.prototype.checkQbParams=function(){var e=this,t={status:!0,msg:""},n=this.checkGameParams();return n.status?(u.fn.each(["provide_uin"],function(n){if(!e.params[n])return t.status=!1,t.msg=n+"错误",!1;var o=e.params[n];"string"==typeof o&&(e.params[n]=o)}),t):n}}(a=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,f),s(t,[{key:"save",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],o={};u.fn.extend(o,e),u.fn.extend(o,{accounttype:"qb"}),c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"save",this).call(this,o,n)}}]),t}())||a;e.exports=l},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["buy_quantity","pf","zoneid"];return function(t){t.prototype.checkGameParams=function(){var t=this,n={status:!0,msg:""},o=this.checkPublicParams();return o.status?(f.fn.each(e,function(e){if(!t.params[e])return n.status=!1,n.msg=e+"错误",!1;var o=t.params[e];"string"==typeof o&&(t.params[e]=o)}),n):o}}}var s,c,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=n(3),l=n(15),p=n(8),d=(s=a())(c=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initCgi(),n}return i(t,l),u(t,[{key:"getBuyPage",value:function(){return{}}},{key:"getToken",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];f.fn.extend(e,{from_h5:"1",from_https:"1"}),this.cgi.mobileGetToken(e,t,{disableLoading:!0})}},{key:"getZoneid",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).zoneid||this.params.zoneid||"1"}},{key:"save",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],o={};f.fn.extend(o,this.getSavePublicParams()),f.fn.extend(o,{buy_quantity:t.buy_quantity||this.params.buy_quantity||"1",zoneid:this.getZoneid(this.buyParams),accounttype:t.accounttype||"common",service_name:encodeURIComponent(this.params.service_name||""),discountid:this.params.discountid||""}),f.fn.extend(o,t),p.getContext().showPayLoading(),this.getToken(void 0,function(t){~~t.ret?(p.getContext().hidePayLoading(),f.lang.isFunction(n)&&n(t)):(f.fn.extend(o,{token_id:t.token}),setTimeout(function(){e.doSave(o,n)},0))})}},{key:"doSave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];p.getContext().report("startsave.pv"),this.cgi.mobileSave(e,function(e){p.getContext().hidePayLoading(),p.getContext().report("savestatus",{resultCode:e.ret,resultMsg:e.msg}),console.log("game save ",e),t(e)},{disableLoading:!0})}}]),t}())||c;d.decorators={checkGameParams:a},e.exports=d},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},c=n(2),u=n(28),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,c),a(t,[{key:"launchPay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"launchPay",this).call(this,e,n),this.app=new u({params:e,opt:this.opt,callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt.autoDestroy&&(t.instance.destroy(),t.instance=null),n(e)}.bind(this)})}}]),t}();f.instance=null,e.exports={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=f.instance?f.instance:f.instance=new f(e)},get:function(){if(!f.instance)throw Error("game not initalize");return f.instance},destroy:function(){f.instance.destroy(),f.instance=null}}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=(n(11),n(9),n(26)),c=function(e){function t(e){var n=e.params,i=void 0===n?{}:n,a=e.callback,c=void 0===a?function(){}:a,u=e.opt,f=void 0===u?{}:u;o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{params:i,callback:c,opt:f}));l.IFORMAT_PREFIX="midaswechatpay.game",l.reportObj.setIformatPrefix(l.IFORMAT_PREFIX),l.payMod=new s(i);var p=l.payMod.checkGameParams();return l.checkEnv(function(){p.status?l.directPay():l.paramsError(p.msg)}),l}return i(t,a),t}();e.exports=c},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(o)},c=n(2),u=n(30),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,c),a(t,[{key:"launchPay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"launchPay",this).call(this,e,n),this.app=new u({params:e,opt:this.opt,callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opt.autoDestroy&&(t.instance.destroy(),t.instance=null),n(e)}.bind(this)})}}]),t}();f.instance=null,e.exports={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=f.instance?f.instance:f.instance=new f(e)},get:function(){if(!f.instance)throw Error("pcgame not initalize");return f.instance},destroy:function(){f.instance.destroy(),f.instance=null}}},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(5),s=(n(11),n(9),n(31)),c=function(e){function t(e){var n=e.params,i=void 0===n?{}:n,a=e.callback,c=void 0===a?function(){}:a,u=e.opt,f=void 0===u?{}:u;o(this,t);var l=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{params:i,callback:c,opt:f}));l.IFORMAT_PREFIX="midaswechatpay.pcgame",l.reportObj.setIformatPrefix(l.IFORMAT_PREFIX),l.payMod=new s(i);var p=l.payMod.checkGameParams();return l.checkEnv(function(){p.status?l.directPay():l.paramsError(p.msg)}),l}return i(t,a),t}();e.exports=c},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":_typeof2(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":_typeof2(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=(n(3),n(8),n(26)),f=(a=u.decorators.checkGameParams(["buy_quantity","provide_uin"]))(s=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initCgi(),n}return i(t,u),c(t,[{key:"getZoneid",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).zoneid||this.params.zoneid||"1"}}]),t}())||s;e.exports=f}])}); 
 			}); 
		define("pages/mall/lib/weRequest.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};module.exports=function(t){function e(n){if(o[n])return o[n].exports;var c=o[n]={i:n,l:!1,exports:{}};return t[n].call(c.exports,c,c.exports,e),c.l=!0,c.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e){t.exports={show:function(){wx.showToast({title:"加载中",icon:"loading",mask:!0,duration:6e4})},hide:function(){wx.hideToast()}}},function(e,o,n){function c(t,e){C?setTimeout(function(){c(t,e)},500):!j&&O?(C=!0,e.count++,e._checkSessionStartTime=(new Date).getTime(),wx.checkSession({success:function(){j=!0},fail:function(){O=""},complete:function(){C=!1,e.count--,e._checkSessionEndTime=(new Date).getTime(),"function"==typeof D&&D("wx_checkSession",e._checkSessionStartTime,e._checkSessionEndTime,a),i(t,e)}})):i(t,e)}function i(t,e){O||e.isLogin?"function"==typeof t&&t():E?setTimeout(function(){i(t,e)},500):(E=!0,e.count++,e._loginStartTime=(new Date).getTime(),wx.login({complete:function(){e.count--,e._loginEndTime=(new Date).getTime(),"function"==typeof D&&D("wx_login",e._loginStartTime,e._loginEndTime,a),"function"==typeof e.complete&&0==e.count&&e.complete()},success:function(o){if(o.code){var n;(n="function"==typeof h.data?h.data():h.data||{})[h.codeName]=o.code,e.count++,l({url:h.url,data:n,method:h.method,isLogin:!0,report:h.report||h.url,success:function(e){O=e,j=!0,"function"==typeof t&&t(),wx.setStorage({key:y,data:O})},complete:function(){e.count--,"function"==typeof e.complete&&0==e.count&&e.complete(),E=!1},fail:h.fail||null})}else f(e,o),console.error(o),E=!1},fail:function(t){f(e,t),console.error(t),E=!1}}))}function r(t){return"function"==typeof t.beforeSend&&t.beforeSend(),void 0===t.reLoginLimit?t.reLoginLimit=0:t.reLoginLimit++,void 0===t.count&&(t.count=0),t.showLoading&&(m.show(),t.complete=function(t){return function(){m.hide(),"function"==typeof t&&t.apply(this,arguments)}}(t.complete)),t}function a(e){e.count++,e.data||(e.data={}),e.url!=h.url&&O&&(e.data[y]=O);var o={};"function"==typeof L?o=L():"object"==(void 0===L?"undefined":t(L))&&(o=L),e.data=Object.assign({},o,e.data),e.method=e.method||"GET";var n=e.url.startsWith("http")?e.url:S+e.url;if("GET"!=e.method){O&&(n.indexOf("?")>=0?n+="&"+y+"="+O:n+="?"+y+"="+O);for(var c in o)n.indexOf("?")>=0?n+="&"+c+"="+o[c]:n+="?"+c+"="+o[c]}e.report&&(e._reportStartTime=(new Date).getTime()),wx.request({url:n,data:e.data,method:e.method,header:e.header||{},dataType:e.dataType||"json",success:function(t){if(200==t.statusCode)if(e.report&&"function"==typeof D&&(e._reportEndTime=(new Date).getTime(),D(e.report,e._reportStartTime,e._reportEndTime,a)),e.isLogin){var o="";try{o=h.success(t.data)}catch(t){}o?e.success(o):f(e,t)}else if(g(t.data)&&e.reLoginLimit<b)O="",wx.removeStorage({key:y,complete:function(){i(function(){l(e)},e)}});else if(T(t.data)&&"function"==typeof e.success){var n=null;try{n=w(t.data)}catch(t){console.error("Function successData occur error: "+t)}e.success(n),(!0===e.cache||"function"==typeof e.cache&&e.cache(n))&&wx.setStorage({key:e.url,data:n})}else f(e,t);else f(e,t)},fail:function(t){f(e,t),console.error(t)},complete:function(){e.count--,"function"==typeof e.complete&&0==e.count&&e.complete()}})}function u(e){e.count++,e.formData||(e.formData={}),e.formData[y]=O;var o={};"function"==typeof L?o=L():"object"==(void 0===L?"undefined":t(L))&&(o=L),e.formData=Object.assign({},o,e.formData),e.dataType=e.dataType||"json";var n=e.url.startsWith("http")?e.url:S+e.url;O&&(n.indexOf("?")>=0?n+="&"+y+"="+O:n+="?"+y+"="+O);for(var c in o)n.indexOf("?")>=0?n+="&"+c+"="+o[c]:n+="?"+c+"="+o[c];e.report&&(e._reportStartTime=(new Date).getTime()),wx.uploadFile({url:n,filePath:e.filePath||"",name:e.name||"",formData:e.formData,success:function(t){if(200==t.statusCode&&"uploadFile:ok"==t.errMsg){if(e.report&&"function"==typeof D&&(e.endTime=(new Date).getTime(),D(e.report,e._reportStartTime,e._reportEndTime,a)),"json"==e.dataType)try{t.data=JSON.parse(t.data)}catch(o){return f(e,t),!1}g(t.data)&&e.reLoginLimit<b?(O="",wx.removeStorage({key:y,complete:function(){i(function(){p(e)},e)}})):T(t.data)&&"function"==typeof e.success?e.success(w(t.data)):f(e,t)}else f(e,t)},fail:function(t){f(e,t),console.error(t)},complete:function(){e.count--,"function"==typeof e.complete&&0==e.count&&e.complete()}})}function f(t,e){if("function"==typeof t.fail)t.fail(e);else{var o="";if("function"==typeof x)try{o=x(e.data)}catch(t){}else"string"==typeof x&&(o=x);var n="";if("function"==typeof v)try{n=v(e.data)}catch(t){}else"string"==typeof v&&(n=v);wx.showModal({title:o,content:n||"网络或服务异常，请稍后重试",showCancel:!1})}"function"==typeof _&&_(t,e),console.error(e)}function s(t,e){t.cache?wx.getStorage({key:t.url,success:function(e){"function"==typeof t.cache&&t.cache(e.data)?"function"==typeof t.success&&t.success(e.data):!0===t.cache&&"function"==typeof t.success&&t.success(e.data)},fail:function(){e()}}):e()}function l(t){t=r(t),k&&k[t.url]?d(t):s(t,function(){c(function(){a(t)},t)})}function p(t){c(function(){u(t)},t=r(t))}function d(t){var e={data:k[t.url]};T(e.data)&&"function"==typeof t.success?t.success(w(e.data)):f(t,e)}var m=n(0),y="session",g=function(){return!1},h={},T=function(){return!0},S="",w=function(t){return t},x="操作失败",v=function(t){return t},b=3,_=null,D=!1,k=!1,L=!1,O="",j=!1,E=!1,C=!1;e.exports={init:function(t){y=t.sessionName||"session",g=t.loginTrigger||function(){return!1},h=t.codeToSession||{},T=t.successTrigger||function(){return!0},S=t.urlPerfix||"",w=t.successData||function(t){return t},x=t.errorTitle||"操作失败",v=t.errorContent||!1,b=t.reLoginLimit||3,_=t.errorCallback||null,j=t.doNotCheckSession||!1,D=t.reportCGI||!1,k=t.mockJson||!1,L=t.globalData||!1;try{O=wx.getStorageSync(y)||""}catch(t){}},request:l,uploadFile:p,setSession:function(t){O=t,j=!0},login:function(t){c(t,{})}}}]); 
 			}); 
		define("pages/mall/utils/status.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=["","未支付","已支付","已审核","已发货","已收货","转入退款"]; 
 			}); 
		define("pages/mall/utils/weRequest.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../../lib/util.js")),r=require("../lib/weRequest.js"),t=require("../../../lib/mta_analysis"),o=getApp();r.init({sessionName:"sid",urlPerfix:"https://payapp.weixin.qq.com/material/",loginTrigger:function(e){return 268697609==e.errcode?t.Event.stat("event",{login2error:"true"}):268697631==e.errcode&&t.Event.stat("event",{session2error:"true"}),268697609==e.errcode||268697631==e.errcode},codeToSession:{url:"wxwork"==o.globalData.platform?"https://payapp.weixin.qq.com/mdmgr/wework/login":"https://payapp.weixin.qq.com/mdmgr/weapp/login",method:"GET",codeName:"js_code",data:function(){return{mch_id:wx.getStorageSync("mch_id")}},successTrigger:function(e){return 0==e.errcode},success:function(e){return e.data.sid}},reLoginLimit:2,successTrigger:function(e){return 0==e.errcode},successData:function(e){return e.data},errorTitle:"操作失败",errorContent:function(e){return e.msg},errorCallback:function(r,t){t.data&&e.default.mtaErrReport({cgi:r.url+":"+t.data.errcode,code:t.data.errcode,msg:t.data.msg})}}),module.exports=r; 
 			}); 
		define("pages/receipt/pos_order.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function o(e){"undefined"===e.success&&(e.success=function(e){}),"undefined"===e.fail&&(e.success=function(){}),"undefined"===e.complete&&(e.complete=function(e){}),wx.getStorage({key:e.key,success:function(o){var t=o.data;null!==t?e.success(t):e.fail()},fail:e.fail,complete:e.complete})}function t(){wx.removeStorage({key:"pos_orders",success:function(e){console.log(e)}})}var n=e(require("../../lib/request")),s=e(require("../../lib/util"));module.exports={getOrder:function(e,t){o({key:"pos_orders",success:function(o){e(o)},fail:t})},saveOrder:function(e,o,t){wx.setStorage({key:"pos_orders",data:e,success:function(){"function"==typeof o&&o()},fail:function(){"function"==typeof t&&t()}})},syncOrder:function(e,o){var c="https://payapp.weixin.qq.com/mdmgr/pos/syncorder",r=e.sid;(0,n.default)({url:c,data:{sid:r,trade_no:e.trade_no,trade_state:e.trade_state},showLoading:!1,success:function(e){var n=e.data;console.log("[pos/sync]",n),0===n.errcode?t():("function"==typeof o&&o(),s.default.mtaErrReport({cgi:c+":"+n.errcode+"sid:"+r||"",code:n.errcode,msg:"pos_syncorder_"+n.msg}))},fail:function(){"function"==typeof o&&o()}})},getStorage:o,getOrderSync:function(e){var o=wx.getStorageSync("pos_orders");o&&e(o)},delOrder:t}; 
 			}); 
		define("widgets/cgiData/activity_apply.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict"; 
 			}); 
		define("widgets/cgiData/activity_apply_msg.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={listEmpty:{data:{data:{activities:[]},errcode:0,msg:"succeed",retcode:0}},msg:{data:{data:{activity_begin_time:1482076800,activity_end_time:1483113600,detail_template_name:"ActivityDetail01",is_supervisor:!0,name:"微信买单随机立减活动",reason:"",sign_up_begin_time:1481299200,sign_up_end_time:1482076200,status:"running_unparticipated",type:"微信买单"},errcode:0,msg:"succeed",retcode:0}},rename:{data:{errcode:0,msg:"succeed",retcode:0}}};module.exports=e; 
 			}); 
		define("widgets/cgiData/activity_detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={listEmpty:{data:{data:{activities:[]},errcode:0,msg:"succeed",retcode:0}},msg:{data:{data:{activity_begin_time:1482076800,activity_end_time:1483113600,detail_template_name:"ActivityDetail01",is_supervisor:!0,name:"微信买单随机立减活动",reason:"",sign_up_begin_time:1481299200,sign_up_end_time:1482076200,status:"running_unparticipated",type:"微信买单"},errcode:0,msg:"succeed",retcode:0}},rename:{data:{errcode:0,msg:"succeed",retcode:0}}};module.exports=e; 
 			}); 
		define("widgets/cgiData/activity_index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t={listEmpty:{data:{data:{activities:[]},errcode:0,msg:"succeed",retcode:0}},list_signup:{data:{data:{activities:[],signups:[{access_month_limit:0,activity_begin_time:1488124800,activity_end_time:1489334399,activity_id:1196181,activity_name:"微信买单新春立减",activity_status:1,activity_type:"顾客通过扫描微信买单二维码完成支付，单笔金额满10元，享随机立减优惠，最高立减100元。",audit_status:2,create_time:1487922891,create_user:"9120107475",detail_template_name:"ActivityDetail03",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/3717oUG-Fu_fwDsZdEmWzXblm1LeA8lF_RYj59lMaKx8jEHf7cNTh3ufpFXYwS19.jpg"],mch_id_list:[11384078],name:"微信买单新春立减",other_limit:"",score_status:1,sign_up_begin_time:1487908800,sign_up_end_time:1488988799,sign_up_id:1198131,status:"ended",summed_status:1,trade_num_limit:0,type:"顾客通过扫描微信买单二维码完成支付，单笔金额满10元，享随机立减优惠，最高立减100元。",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482195600,activity_end_time:1483199400,activity_id:1004131,activity_name:"微信买单随机立减活动",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1482284347,create_user:"1120085484",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/GjWfIpSfATYEN8l4OG--ij-svIW83kc9lKoK-Gox7b5ZVBleOmzUIGIrdWmwCUnl.jpg"],mch_id_list:[11384078],name:"微信买单随机立减活动",other_limit:"",score_status:1,sign_up_begin_time:1482237600,sign_up_end_time:1482940200,sign_up_id:952064,status:"running_participated",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482283200,activity_end_time:1482294e3,activity_id:1000181,activity_name:"微信买单随机立减活动",activity_status:4,activity_type:"微信买单",audit_status:2,create_time:1482227147,create_user:"1120085484",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/MESEIcaycPxa3U8AfyJQ-xNPxKEE30dIXC_z4YW4LiGc91xvWaItY1-PM7dnu-ud.jpg"],mch_id_list:[11384078],name:"微信买单随机立减活动",other_limit:"",score_status:1,sign_up_begin_time:1482222e3,sign_up_end_time:1482247200,sign_up_id:1002131,status:"running_unparticipated",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1481622398,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",name:"微信买单随机立减活动",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/ljpaEZhhlGri98l-ZIDQXhz-wOEf44zlxzZEoNRmTuxcihw_ROQz0BkB8OtlfSST.jpg"],mch_id_list:[11384078],other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:995181,status:"canceled",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动4",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1481622398,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",name:"微信买单随机立减活动",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/ljpaEZhhlGri98l-ZIDQXhz-wOEf44zlxzZEoNRmTuxcihw_ROQz0BkB8OtlfSST.jpg"],mch_id_list:[11384078],other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:995181,status:"signupable",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动5",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1481622398,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",name:"微信买单随机立减活动",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/ljpaEZhhlGri98l-ZIDQXhz-wOEf44zlxzZEoNRmTuxcihw_ROQz0BkB8OtlfSST.jpg"],mch_id_list:[11384078],other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:995181,status:"aduiting",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动6",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1481622398,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",name:"微信买单随机立减活动",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/ljpaEZhhlGri98l-ZIDQXhz-wOEf44zlxzZEoNRmTuxcihw_ROQz0BkB8OtlfSST.jpg"],mch_id_list:[11384078],other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:995181,status:"passed",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动7",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1481622398,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",name:"微信买单随机立减活动",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/ljpaEZhhlGri98l-ZIDQXhz-wOEf44zlxzZEoNRmTuxcihw_ROQz0BkB8OtlfSST.jpg"],mch_id_list:[11384078],other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:995181,status:"not_yet_started",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"}]},errcode:0,msg:"succeed",retcode:0}},list:{data:{data:{activities:[{access_month_limit:0,activity_begin_time:1482195600,activity_end_time:1483199400,activity_id:1004131,detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",name:"微信买单随机立减活动1",other_limit:"",sign_up_begin_time:1482237600,sign_up_end_time:1482940200,status:2,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482195600,activity_end_time:1483199400,activity_id:1004131,detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",name:"微信买单随机立减活动2",other_limit:"",sign_up_begin_time:1482237600,sign_up_end_time:1482940200,status:2,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"}],signups:[{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"1111111",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"ended",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"22222222",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"running_participated",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"11111",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"33333",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"running_unparticipated",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"11111",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"44444",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"canceled",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"55555",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"signupable",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"666",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"aduiting",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"777",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"passed",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"888",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"not_yet_started",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"}]},errcode:0,msg:"succeed",retcode:0}},rename:{data:{errcode:0,msg:"succeed",retcode:0}}};module.exports=t; 
 			}); 
		define("widgets/cgiData/activity_msg.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t={listEmpty:{data:{data:{activities:[]},errcode:0,msg:"succeed",retcode:0}},list_signup:{data:{data:{activities:[],signups:[{access_month_limit:0,activity_begin_time:1488124800,activity_end_time:1489334399,activity_id:1196181,activity_name:"微信买单新春立减",activity_status:1,activity_type:"顾客通过扫描微信买单二维码完成支付，单笔金额满10元，享随机立减优惠，最高立减100元。",audit_status:2,create_time:1487922891,create_user:"9120107475",detail_template_name:"ActivityDetail03",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/3717oUG-Fu_fwDsZdEmWzXblm1LeA8lF_RYj59lMaKx8jEHf7cNTh3ufpFXYwS19.jpg"],mch_id_list:[11384078],name:"微信买单新春立减",other_limit:"",score_status:1,sign_up_begin_time:1487908800,sign_up_end_time:1488988799,sign_up_id:1198131,status:"running_participated",summed_status:1,trade_num_limit:0,type:"顾客通过扫描微信买单二维码完成支付，单笔金额满10元，享随机立减优惠，最高立减100元。",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482195600,activity_end_time:1483199400,activity_id:1004131,activity_name:"微信买单随机立减活动",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1482284347,create_user:"1120085484",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/GjWfIpSfATYEN8l4OG--ij-svIW83kc9lKoK-Gox7b5ZVBleOmzUIGIrdWmwCUnl.jpg"],mch_id_list:[11384078],name:"微信买单随机立减活动",other_limit:"",score_status:1,sign_up_begin_time:1482237600,sign_up_end_time:1482940200,sign_up_id:952064,status:"ended",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482283200,activity_end_time:1482294e3,activity_id:1000181,activity_name:"微信买单随机立减活动",activity_status:4,activity_type:"微信买单",audit_status:2,create_time:1482227147,create_user:"1120085484",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/MESEIcaycPxa3U8AfyJQ-xNPxKEE30dIXC_z4YW4LiGc91xvWaItY1-PM7dnu-ud.jpg"],mch_id_list:[11384078],name:"微信买单随机立减活动",other_limit:"",score_status:1,sign_up_begin_time:1482222e3,sign_up_end_time:1482247200,sign_up_id:1002131,status:"ended",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:3,activity_type:"微信买单",audit_status:2,create_time:1481622398,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",name:"微信买单随机立减活动",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/ljpaEZhhlGri98l-ZIDQXhz-wOEf44zlxzZEoNRmTuxcihw_ROQz0BkB8OtlfSST.jpg"],mch_id_list:[11384078],other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:995181,status:"ended",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"}]},errcode:0,msg:"succeed",retcode:0}},list:{data:{data:{activities:[{access_month_limit:0,activity_begin_time:1482195600,activity_end_time:1483199400,activity_id:1004131,detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",name:"微信买单随机立减活动1",other_limit:"",sign_up_begin_time:1482237600,sign_up_end_time:1482940200,status:2,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482195600,activity_end_time:1483199400,activity_id:1004131,detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"|",name:"微信买单随机立减活动2",other_limit:"",sign_up_begin_time:1482237600,sign_up_end_time:1482940200,status:2,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"}],signups:[{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"1111111",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"ended",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"22222222",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"running_participated",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"11111",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"33333",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"running_unparticipated",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"11111",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"44444",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"canceled",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"55555",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"signupable",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"666",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"aduiting",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"777",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"passed",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"},{access_month_limit:0,activity_begin_time:1482076800,activity_end_time:1483113600,activity_id:994181,activity_name:"微信买单随机立减活动",activity_status:2,activity_type:"微信买单",audit_status:1,create_time:1481618227,create_user:"yiranyi",detail_template_name:"ActivityDetail01",icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_icon88.png",image_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/sjlj_list_tpl.png",materiel_file:"test|123",materiel_laying_urls:["http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/4VTcLQTzDZK7oGpeSM581lYAI3mBzRchCOJMQNUg7ff4vHiz766MGnCAdrzAgh9_.jpg"],mch_id_list:[11473623],name:"888",other_limit:"",score_status:1,sign_up_begin_time:1481299200,sign_up_end_time:1482076200,sign_up_id:944014,status:"not_yet_started",summed_status:1,trade_num_limit:0,type:"微信买单",visible_mch_type:"6"}]},errcode:0,msg:"succeed",retcode:0}},rename:{data:{errcode:0,msg:"succeed",retcode:0}}};module.exports=t; 
 			}); 
		define("widgets/cgiData/clerks_list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={listEmpty:{data:{data:{cashiers:[]},errcode:0,msg:"succeed",retcode:0}},list:{data:{data:{cashiers:[{clerk_name:"叶娃",clerk_role:"salesman",emp_id:1120055513,headimgurl:"http://wx.qlogo.cn/mmhead/7er9SQRQ8LICMSFxxTZqLSjIlLkq1j8dpKXP5jPdDyk",is_supervisor:!0,receive_notify:!0,wx_account:"wawaye"},{clerk_name:"Neo",clerk_role:"salesman",emp_id:1120097705,headimgurl:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM7ibtmY3bCgvicNX4icoE2fMKd5TJNhJSze5qtOtsscjHItA",is_supervisor:!1,receive_notify:!0,wx_account:"neochou"},{clerk_name:"stevenzou",clerk_role:"salesman",emp_id:1120001616,headimgurl:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM52CKIOog9WbE5a7r9z8Hd9Ghr2toznFyp0icibuVibLudAA",is_supervisor:!0,receive_notify:!1,wx_account:"takensteven"},{clerk_name:"Austin",clerk_role:"salesman",emp_id:1120097032,headimgurl:"http://wx.qlogo.cn/mmhead/pHLRLMnbQFvCUd0THNywuiaHb1zZdw6dRzSYWBfD6aa4",is_supervisor:!1,receive_notify:!0,wx_account:"AustinYao"},{clerk_name:"Harry",clerk_role:"salesman",emp_id:1120069463,headimgurl:"http://wx.qlogo.cn/mmhead/ajNVdqHZLLCFKHyboKHiaClZbNHzPnA42lBtTRMUrzKhRM32B0DvAjQ",is_supervisor:!1,receive_notify:!0,wx_account:"luckyxxxm"},{clerk_name:"岚荨",clerk_role:"salesman",emp_id:1120095031,headimgurl:"http://wx.qlogo.cn/mmhead/mMGZrcdmicPsAHRIwR36NhA2kcLaRERCu7SMd6RKwibVs",is_supervisor:!1,receive_notify:!0,wx_account:"lanqianclover"},{clerk_name:"shichuan",clerk_role:"salesman",emp_id:1120044317,headimgurl:"http://wx.qlogo.cn/mmhead/rpqicQkFkbCyu9EEat0Pfics3H3a55vQDXgKZMZj05icPQ",is_supervisor:!1,receive_notify:!0,wx_account:"jenson13"},{clerk_name:"璐璐",clerk_role:"salesman",emp_id:1120072975,headimgurl:"http://wx.qlogo.cn/mmhead/ic98wEialBtlw1BKCmpBQA6gpng11hKckuSZmfpC6HWKc",is_supervisor:!1,receive_notify:!0,wx_account:"luluuic"},{clerk_name:"Andy郭",clerk_role:"salesman",emp_id:1120053135,headimgurl:"http://wx.qlogo.cn/mmhead/PiajxSqBRaEKfL7icpToIQAEdbt0dmfsFiacicrcRibododdpQM4HnSgkVQ",is_supervisor:!1,receive_notify:!0,wx_account:"Andyzmguo"},{clerk_name:"许可",clerk_role:"salesman",emp_id:1120055301,headimgurl:"http://wx.qlogo.cn/mmhead/VQd9vxSUqChbDxN5Bic2C2PMQgibprSWyAtkZ2pxDyu5k",is_supervisor:!1,receive_notify:!0,wx_account:"xk1128"},{clerk_name:"ATLAS",clerk_role:"salesman",emp_id:1120045072,headimgurl:"http://wx.qlogo.cn/mmhead/K6PbOBA2cyOFYJw3hhqj5uHbFX9K3yUfe2EQRpaUVJo",is_supervisor:!0,receive_notify:!0,wx_account:"atlas0401"},{clerk_name:"小E超人",clerk_role:"salesman",emp_id:1120072974,headimgurl:"http://wx.qlogo.cn/mmhead/bxlSYxia3Ck6dSvMCeqDNWccuNPyXwLGnvfSsRpu2qAM",is_supervisor:!1,receive_notify:!0,wx_account:"Super_Elaine"},{clerk_name:"JOCA",clerk_role:"salesman",emp_id:1120096718,headimgurl:"http://wx.qlogo.cn/mmhead/5LIHEIllGLTphjLqB4wE8PR1nX318HqlrqZKjVfby4M",is_supervisor:!1,receive_notify:!0,wx_account:"jocawong"},{clerk_name:"BurningHeart",clerk_role:"salesman",emp_id:1120044092,headimgurl:"http://wx.qlogo.cn/mmhead/dicjaibygk2WWU5t7Sj2PxU1ficexrakpFXQ5ibYMgrVUlk",is_supervisor:!1,receive_notify:!1,wx_account:"Burning---Heart"},{clerk_name:"Alan",clerk_role:"salesman",emp_id:1120044143,headimgurl:"http://wx.qlogo.cn/mmhead/PiajxSqBRaEJLWiacLiacUj4icq8cW1Kqccb59UkjMmM1DibsbIekWpicAvQ",is_supervisor:!1,receive_notify:!1,wx_account:"w312294408"},{clerk_name:"吴泽明Ivin",clerk_role:"salesman",emp_id:1120069261,headimgurl:"http://wx.qlogo.cn/mmhead/PiajxSqBRaEK9r4so93IDJuykC6xNrW7b0PxT8UDWic0iahPpNiaTHu07g",is_supervisor:!1,receive_notify:!0,wx_account:"iviner"},{clerk_name:"陈明龙",clerk_role:"salesman",emp_id:1120094698,headimgurl:"http://wx.qlogo.cn/mmhead/EWo3hwIVSD34pic8rhsibMuzuKXMCAichY461a2XeGsibFAXeAAOzyfjrg",is_supervisor:!0,receive_notify:!1,wx_account:"chen_minglong"},{clerk_name:"李广杰",clerk_role:"salesman",emp_id:1120096696,headimgurl:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM42xeBic3cuAgc913nvojZEGlaxjU2VDDGCicLwm18OMhvg",is_supervisor:!1,receive_notify:!0,wx_account:"shandiansmile"},{clerk_name:"唐薇",clerk_role:"salesman",emp_id:1120094760,headimgurl:"http://wx.qlogo.cn/mmhead/EVPtJJ9TsHwGOnJC9uhPZqFh8IwJkbUxPObEACdhX82yiaH2Sia5reBg",is_supervisor:!1,receive_notify:!0,wx_account:"sxtangwei2010"},{clerk_name:"J.",clerk_role:"salesman",emp_id:1120095476,headimgurl:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM7ZVVRIbH9tz0ib6ZCdoLfY1zM3E1G05Xhcw8XxXU4lJPw",is_supervisor:!1,receive_notify:!0,wx_account:"ttttest"},{clerk_name:"信息加载失败！",clerk_role:"salesman",emp_id:1120097858,headimgurl:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM7icyvabXbvfjX74kZGelDtUvdYa9R92lTfCiaiagiaToN3UA",is_supervisor:!0,receive_notify:!0,wx_account:"swarovski23"},{clerk_name:"sunxiao(肖峥)",clerk_role:"shopkeeper",emp_id:1120085484,headimgurl:"http://wx.qlogo.cn/mmhead/bSb5dSzPn0JzMCmKhnYfMoqS8CqapHpkeKvRMvCPtNdQuHgXUGgmhQ",is_supervisor:!0,receive_notify:!0,wx_account:"Azenge"},{clerk_name:"Eric",clerk_role:"salesman",emp_id:1120094932,headimgurl:"http://wx.qlogo.cn/mmhead/Q3auHgzwzM5rBlsWibPzlKtG3NTy82OAOnH0dUBicI3mpgWjibTH9D12w",is_supervisor:!0,receive_notify:!0,wx_account:"ccccwen"},{clerk_name:"Wiggins",clerk_role:"salesman",emp_id:1120070369,headimgurl:"http://wx.qlogo.cn/mmhead/UsichrXlnR9KxibOQ4eswS6vnDibWiaYukeSEqMpd9bsbnszS5Is3hQibBQ",is_supervisor:!1,receive_notify:!0,wx_account:"lwj648026296"}]},errcode:0,msg:"succeed",retcode:0}},rename:{data:{errcode:0,msg:"succeed",retcode:0}},delete:{data:{errcode:0,msg:"succeed",retcode:0}},notification:{data:{errcode:0,msg:"succeed",retcode:0}},getbindkey:{data:{data:{url:"http://baidu.com"},errcode:0,msg:"succeed",retcode:0}}};module.exports=e; 
 			}); 
		define("widgets/cgiData/store_index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={switchSuc:{data:{errcode:0,msg:"succeed",retcode:0}},switchDele:{data:{errcode:268700418,msg:"fail",retcode:-2}},switchFail:{data:{errcode:0,msg:"cgi fail",retcode:-8}}};module.exports=e; 
 			}); 
		define("widgets/charts/bar-chart.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){this.ctx=e}var t=require("./util.js"),l=wx.getSystemInfoSync(),i=l.windowWidth,a=l.windowHeight;e.prototype.draw=function(e){this.cfg=e;var t=e.grid,l=e.datasets,i=e.legends,a=this.ctx;this._checkYDivider(e),this._drawGrid(a,t);var r=this._getRangeY(t,l),o=(r.min,r.max);this._drawY(a,0,o,t);var n=this._drawBar(a,0,o,t,l).bottom;return n=this._drawLegend(a,e,n,i),a.draw(),{recommendHeight:n}},e.prototype._checkYDivider=function(e){if(!e.grid.yDivider){var t=1/0,l=-1/0;e.datasets.forEach(function(e){e.value=parseFloat(e.value),t=t<e.value?t:e.value,l=l>e.value?l:e.value});for(var i=1;l/i>100;)i*=10;e.grid.yDivider=i}},e.prototype._drawGrid=function(e,t){e.beginPath(),e.rect(t.l,t.t,t.w,t.h),e.setStrokeStyle(t.strokeColor),t.showFillColor&&e.setFillStyle(t.fillColor),e.setLineWidth(t.strokeWidth),t.showFillColor&&e.fill(),e.closePath()},e.prototype._getRangeY=function(e,t){var l=1/0,i=-1/0;t.forEach(function(e){l=l<e.value?l:e.value,i=i>e.value?i:e.value}),e.maxDeltaPercent?i*=1+e.maxDeltaPercent:e.maxDelta&&(i+=e.maxDelta),e.minDeltaPercent?l*=1-e.minDeltaPercent:e.minDelta&&(l-=e.minDelta),i=parseInt(i),l=parseInt(l);var a=i-l;return i+=e.yDivider-i%e.yDivider,l-=l%e.yDivider,a=(i-l)/e.yDivider,i+=(e.Y_split-a%e.Y_split)*e.yDivider,{min:l,max:i}},e.prototype._drawY=function(e,l,i,a){var r=a.Y_split,o=a.l,n=a.w,s=a.h,h=a.t,d=a.labelFontSize,c=l,b=s;if(l<0&&(c=0,b-=-l/(i-l)*s),a.showLabelY){var f=(i-c)/a.Y_split,g=function(e,t){var l=1e4,i="w";return t<1e4?(l=1,i=""):t<1e7?(l=1e4,i="w"):(l=1e7,i="kw"),(e/l).toFixed(0)+i};g=a.yLabelFunc||g;var v=(i-c)/r;e.beginPath(),e.setFontSize(d),e.setFillStyle(a.labelFontColor);for(F=0;F<=r;F++){var u=g(c+v*F,f);e.fillText(u,o-t.wordWidth(u,d)-8,h+b-b/r*F+d/2)}e.closePath()}if(a.showInnerLineY){e.beginPath(),e.setLineWidth(.5),e.setStrokeStyle(a.innerLineColorY);for(var p=b/r,F=1;F<r;F++)e.moveTo(o,h+p*F),e.lineTo(o+n,h+p*F);e.stroke(),e.closePath()}e.beginPath(),e.setLineWidth(.5),e.setStrokeStyle(a.innerLineColorY),e.moveTo(o,h+b),e.lineTo(o+n,h+b),e.stroke(),e.closePath()},e.prototype._drawBar=function(e,l,i,a,r){var o=a.displayOffset||0;this.bars=[];var n=a.t+a.h,s=r.length,h=(a.w-2*a.borderMarginMore)/s-a.classMarin;a.maxBarWidth&&(h=Math.min(h,a.maxBarWidth)),a.minBarWidth&&(h=Math.max(h,a.minBarWidth)),a.realWidth=s*(h+a.classMarin)+2*a.borderMarginMore,a.realWidth>a.w?(o>0&&(o=0),o<a.w-a.realWidth&&(o=a.w-a.realWidth)):o=0,a.displayOffset=o;var d=a.l+a.borderMarginMore+a.classMarin/2;d+=o;for(var c=0;c<r.length;c++){var b=r[c];this.bars.push({item:b,x:d+h/2});var f=h;d<a.l&&(f-=a.l-d);var g=Math.max(d,a.l),v=(b.value-l)/(i-l)*a.h,u=a.t+a.h-v,p=u+v;if(d+h<a.l)d+=h+a.classMarin,n=n>(p+=t.wordWidth(b.label,a.labelFontSize)+14)?n:p;else{if(e.beginPath(),e.setFillStyle(a.activePos===c&&b.fillColorActive?b.fillColorActive:b.fillColor),e.fillRect(g,u,f,v),e.closePath(),b.topLabels)for(var F=a.labelFontSize+5,S=b.topLabels.length*F,m=0;m<b.topLabels.length;m++){var y=b.topLabels[m];e.beginPath(),e.setFontSize(a.labelFontSize);var w=a.activePos===c&&y.colorActive?y.colorActive:y.color;e.setFillStyle(w);var P=g+t.wordCentering(f,y.label,a.labelFontSize);e.fillText(y.label,P,u-S+a.labelFontSize),e.closePath(),S-=F}if(b.bottomLabels){for(var x=a.labelFontSize+7,z=x,L=0;L<b.bottomLabels.length;L++){var M=b.bottomLabels[L];e.beginPath(),e.setFontSize(a.labelFontSize),e.setFillStyle(M.color);var C=g+t.wordCentering(f,M.label,a.labelFontSize),D=u+v+z;e.fillText(M.label,C,D),e.closePath(),M.underLineColor&&(e.beginPath(),e.setFillStyle(M.underLineColor),e.fillRect(g-a.classMarin/2,D+3,f+a.classMarin,2),e.closePath()),z+=x}p+=b.bottomLabels.length*x}if(b.label){e.beginPath(),e.setFontSize(a.labelFontSize),e.setFillStyle(a.labelFontColor);var W=g+t.wordCentering(f,b.label[0],a.labelFontSize),Y=p+14;e.save(),e.translate(W,Y),e.rotate(Math.PI/2),e.fillText(b.label,0,0),e.restore(),e.closePath()}d+=h+a.classMarin,n=n>(p+=t.wordWidth(b.label,a.labelFontSize)+14)?n:p}}return{bottom:n}},e.prototype._drawLegend=function(e,l,i,a){if(!a)return i+10;for(var r=l.grid,o=r.l,n=(r.t,r.w),s=(r.h,a.length),h=i+(l.grid.labelFontSize+10),d=-1/0,c=0,b=0;b<a.length;b++){var f=28+t.wordWidth(a[b].name,l.grid.labelFontSize);d=d>f?d:f,c+=f}if((c+=16*(s-1))<=n+o-16)for(var g=o+n-16-c,v=0;v<a.length;v++)e.beginPath(),e.setFillStyle(a[v].color),e.fillRect(g,h-l.grid.labelFontSize/2,20,2),e.closePath(),e.beginPath(),e.setFillStyle(l.grid.labelFontColor),e.setFontSize(l.grid.labelFontSize),e.fillText(a[v].name,g+20+8,h),e.closePath(),g+=28+t.wordWidth(a[v].name,l.grid.labelFontSize)+16,i+=l.grid.labelFontSize+10;else for(var u=o+n-16-d,p=0;p<l.datasets.length;p++)e.beginPath(),e.setFillStyle(a[p].color),e.fillRect(u,h-l.grid.labelFontSize/2,20,2),e.closePath(),e.beginPath(),e.setFillStyle(l.grid.labelFontColor),e.setFontSize(l.grid.labelFontSize),e.fillText(a[p].name,u+20+8,h),e.closePath(),h+=l.grid.labelFontSize+10,i+=l.grid.labelFontSize+10;return i+10},e.prototype.touch=function(e){delete this.interruptTouch},e.prototype.move=function(e){var t=e.changedTouches[0],l=t.x,i=t.y;if(this.cfg.lastMove){var a=this.cfg.lastMove.x-l;this.cfg.grid.displayOffset||(this.cfg.grid.displayOffset=0),this.cfg.grid.displayOffset-=a}this.cfg.lastMove={x:l,y:i},this.draw(this.cfg),this.interruptTouch=!0},e.prototype.touchEnd=function(e){if(delete this.cfg.lastMove,this.interruptTouch)return null;delete this.interruptTouch;var t=e.changedTouches[e.changedTouches.length-1],l=t.x,i=(t.y,function(e,t){for(var l=0,i=e.length-1;i-l>1;){var a=parseInt((l+i)/2);if(t===e[a].x)return a;t-e[a].x<0?i=a:l=a}for(var r=1/0,o=0,n=l;n<=i;n++){var s=Math.abs(t-e[n].x);r>s&&(r=s,o=n)}return o}(this.bars,l)),a=!0;return this.cfg.grid.activePos===i?(a=!1,delete this.cfg.grid.activePos):this.cfg.grid.activePos=i,this.draw(this.cfg),{data:this.bars[i].item,active:a}},e.prototype.setCfg=function(e){for(var t=[],l=0;l<e.length;l++)t.push(function(e){return{value:e.topLabels,topLabels:[{color:"#888888",label:""}],bottomLabels:[{color:"#888888",label:e.bottomLabels}],fillColor:"#A8DDB6",fillColorActive:"#4CA664",label:"",timeStamp:e.timeStamp}}(e[l]));return{grid:{w:i-200/750*i,h:a-644/750*i,l:100/750*i,t:10,Y_split:5,showInnerLineY:!0,innerLineColorY:"#E2E2E2",showLabelY:!0,labelFontSize:10,labelFontColor:"#888888",classMarin:t.length>7?4:17,borderMarginMore:8,maxBarWidth:40,minBarWidth:1,maxDelta:20,maxDeltaPercent:.2,activePos:t.length-1},datasets:t}},module.exports=e; 
 			}); 
		define("widgets/charts/date.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports={toSimple:function(e){e*=1e3;var t=new Date;t=(t=new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" 00:00")).getTime();var n=new Date(e);return e>t?"今天 "+(n.getHours()<10?"0":"")+n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes():e>t-864e5?"昨天 "+(n.getHours()<10?"0":"")+n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes():n.getFullYear()+"年"+(n.getMonth()+1)+"月"+n.getDate()+"日 "+(n.getHours()<10?"0":"")+n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes()},toString:function(e){e*=1e3;var t=new Date(e);return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日 "+(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()},toMD:function(e){e*=1e3;var t=new Date(e);return(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()},toMMDDHM:function(e){e*=1e3;var t=new Date(e);return t.getMonth()+1+"月"+t.getDate()+"日 "+(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()},toDetail:function(e){e*=1e3;var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"-"+(t.getDate()<10?"0":"")+t.getDate()+" "+(t.getHours()<10?"0":"")+t.getHours()+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()},getDate:function(e){var t=new Date;return t.getFullYear()+(e?"-":"")+(t.getMonth()+1)+(e?"-":"")+t.getDate()},listDate:function(e,t){var n=(new Date).getTime(),g=new Date(e);if("day"==t)return n-g.getTime()<864e5?"今天 已收到":n-g.getTime()<1728e5?"昨天 共收到":g.getMonth()+1+"月"+g.getDate()+"日 共收到";if("week"==t){var r=new Date(e+6048e5-1);return g.getMonth()+1+"月第"+Math.ceil(g.getDate()/7)+"周（"+(g.getMonth()+1)+"."+g.getDate()+"-"+(r.getMonth()+1)+"."+r.getDate()+"）共收到"}return"month"==t?g.getFullYear()+"年"+(g.getMonth()+1)+"月 共收到":void 0},topLabel:function(e,t){var n=(new Date).getTime(),g=new Date(e);if("day"==t)return n-g.getTime()<864e5?"今天":n-g.getTime()<1728e5?"昨天":g.getMonth()+1+"月"+g.getDate()+"日";if("week"==t){var r=new Date(e+6048e5-1);return g.getMonth()+1+"月第"+Math.ceil(g.getDate()/7)+"周（"+(g.getMonth()+1)+"."+g.getDate()+"-"+(r.getMonth()+1)+"."+r.getDate()+"）"}return"month"==t?g.getFullYear()+"年"+(g.getMonth()+1)+"月":void 0},bottomLabel:function(e,t){var n=new Date(e);if("day"==t)return n.getMonth()+1+"."+n.getDate();if("week"==t){var g=new Date(e+6048e5-1);return n.getMonth()+1+"."+n.getDate()+"-"+(g.getMonth()+1)+"."+g.getDate()}return"month"==t?n.getMonth()+1+"月":void 0},getYesterdayTimestamp:function(e){var t=new Date;if("day"==e)return new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" 00:00:00").getTime();if("week"==e){var n=t.getDay();return new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" 00:00:00").getTime()-864e5*(n-1)-6048e5}return"month"==e?t.getMonth()>0?new Date(t.getFullYear()+"/"+t.getMonth()+"/1 00:00:00").getTime():new Date(t.getFullYear()-1+"/12/1 00:00:00").getTime():""},getDateBack:function(e,t){if("day"==t)return e-864e5;if("week"==t)return e-6048e5;if("month"==t){var n=new Date(e);return n.getMonth()>0?new Date(n.getFullYear()+"/"+n.getMonth()+"/1 00:00:00").getTime():new Date(n.getFullYear()-1+"/12/1 00:00:00").getTime()}return e}}; 
 			}); 
		define("widgets/charts/pile-bar-chart.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){this.ctx=e}var t=require("./util.js"),i=wx.getSystemInfoSync(),r=i.windowWidth,l=i.windowHeight;e.prototype.draw=function(e){this.cfg=e;var t=e.grid,i=e.datasets,r=e.legends,l=this.ctx;this._checkYDivider(e),this._drawGrid(l,t);var a=this._getRangeY(t,i),o=a.min,n=a.max;this._drawY(l,o,n,t),this._drawBar(l,o,n,t,i);var s=this._drawLegend(l,e,r);return l.draw(),{recommendHeight:s}},e.prototype._checkYDivider=function(e){if(!e.grid.yDivider){var t=1/0,i=-1/0;e.datasets.forEach(function(e){var r=0,l=0;e.bars.forEach(function(e){var t=parseFloat(e.value);t>0?l+=t:r+=t}),i=i>l?i:l,t=t<r?t:r});for(var r=1;i/r>100;)r*=10;e.grid.yDivider=r}},e.prototype._drawGrid=function(e,t){e.beginPath(),e.rect(t.l,t.t,t.w,t.h),e.setStrokeStyle(t.strokeColor),t.showFillColor&&e.setFillStyle(t.fillColor),e.setLineWidth(t.strokeWidth),t.showBorder&&e.stroke(),t.showFillColor&&e.fill(),e.closePath()},e.prototype._getRangeY=function(e,t){var i=1/0,r=-1/0;t.forEach(function(e){var t=0,l=0;e.bars.forEach(function(e){var i=parseFloat(e.value);i>0?l+=i:t+=i}),r=r>l?r:l,i=i<t?i:t}),e.maxDeltaPercent?r*=1+e.maxDeltaPercent:e.maxDelta&&(r+=e.maxDelta),e.minDeltaPercent?i*=1-e.minDeltaPercent:e.minDelta&&(i-=e.minDelta),r=parseInt(r),i=parseInt(i);var l=r-i;return r+=e.yDivider-r%e.yDivider,i-=i%e.yDivider,l=(r-i)/e.yDivider,r+=(e.Y_split-l%e.Y_split)*e.yDivider,{min:i,max:r}},e.prototype._drawY=function(e,i,r,l){var a=l.Y_split,o=l.l,n=l.w,s=l.h,h=l.t,c=l.labelFontSize,d=i,f=s;if(i<0&&(d=0,f-=-i/(r-i)*s),l.showLabelY){var g=(r-d)/l.Y_split,v=function(e){var t=1e4,i="w";return g<1e4?(t=1,i=""):g<1e7?(t=1e4,i="w"):(t=1e7,i="kw"),(e/t).toFixed(0)+i};v=l.yLabelFunc||v;var u=(r-d)/a;e.beginPath(),e.setFontSize(c),e.setFillStyle(l.labelFontColor);for(p=0;p<=a;p++){var b=v(d+u*p);e.fillText(b,o-t.wordWidth(b,c)-8,h+f-f/a*p+c/2)}e.closePath()}if(l.showInnerLineY){e.beginPath(),e.setLineWidth(.2),e.setStrokeStyle(l.innerLineColorY);for(var F=f/a,p=1;p<a;p++)e.moveTo(o,h+F*p),e.lineTo(o+n,h+F*p);e.stroke(),e.closePath()}e.beginPath(),e.setLineWidth(.2),e.setStrokeStyle(l.innerLineColorY),e.moveTo(o,h+f),e.lineTo(o+n,h+f),e.stroke(),e.closePath()},e.prototype._drawBar=function(e,t,i,r,l){this.bars=[];var a=l.length,o=(r.w-2*r.borderMarginMore)/a-r.classMarin;r.maxBarWidth&&(o=o<r.maxBarWidth?o:r.maxBarWidth),r.minBarWidth&&(o=o>r.minBarWidth?o:r.minBarWidth);for(var n=r.t+r.h- -t/(i-t)*r.h,s=r.l+r.borderMarginMore+r.classMarin/2,h=0;h<a;h++){this.bars.push({item:l[h].bars,x:s+o/2});for(var c=l[h].bars,d=0,f=0;f<c.length;f++){var g=c[f];if(g.value>0)break;d+=g.value}for(var v=n+-d/(i-t)*r.h,u=v,b=0;b<c.length;b++){var F=c[b],p=F.value,m=r.activePos==h&&F.fillColorActive?F.fillColorActive:F.fillColor;e.beginPath(),e.setFillStyle(m);var y=Math.abs(p)/(i-t)*r.h;e.fillRect(s,u-y,o,y),e.closePath(),e.beginPath(),e.setFillStyle(F.textColor),e.setFontSize(r.labelFontSize),e.setTextAlign("center"),e.fillText(F.label,s+o/2,u-y+y/2+r.labelFontSize/4),e.setTextAlign("left"),e.closePath(),u-=y}e.beginPath(),e.setFillStyle(r.labelFontColor),e.setFontSize(r.labelFontSize),e.setTextAlign("center"),e.fillText(l[h].label,s+o/2,v+16),e.setTextAlign("left"),e.closePath(),s+=o+r.classMarin}},e.prototype._drawLegend=function(e,i,r){for(var l=i.grid,a=l.l,o=l.t,n=l.w,s=l.h,h=r.length,c=o+s+2*(i.grid.labelFontSize+10),d=i.grid.labelFontSize,f=-1/0,g=0,v=0;v<r.length;v++){var u=d+8+t.wordWidth(r[v].name,i.grid.labelFontSize);f=f>u?f:u,g+=u}if((g+=16*(h-1))<=n+a-16)for(var b=a+n-16-g,F=0;F<r.length;F++)e.beginPath(),e.setFillStyle(r[F].color),e.fillRect(b,c-d,d,d),e.closePath(),e.beginPath(),e.setFillStyle(i.grid.labelFontColor),e.setFontSize(i.grid.labelFontSize),e.fillText(r[F].name,b+d+8,c),e.closePath(),b+=d+8+t.wordWidth(r[F].name,i.grid.labelFontSize)+16;else for(var p=a+n-16-f,m=0;m<r.length;m++)e.beginPath(),e.setFillStyle(r[m].color),e.fillRect(p,c-d,d,d),e.closePath(),e.beginPath(),e.setFillStyle(i.grid.labelFontColor),e.setFontSize(i.grid.labelFontSize),e.fillText(r[m].name,p+d+8,c),e.closePath(),c+=i.grid.labelFontSize+10;return c+i.grid.labelFontSize+10},e.prototype.touch=function(e){delete this.interruptTouch},e.prototype.move=function(e){var t=e.changedTouches[0],i=t.x,r=t.y;if(this.cfg.lastMove){var l=this.cfg.lastMove.x-i;this.cfg.grid.displayOffset||(this.cfg.grid.displayOffset=0),this.cfg.grid.displayOffset-=l}this.cfg.lastMove={x:i,y:r},this.draw(this.cfg),this.interruptTouch=!0},e.prototype.touchEnd=function(e){if(delete this.cfg.lastMove,this.interruptTouch)return null;delete this.interruptTouch;var t=e.changedTouches[e.changedTouches.length-1],i=t.x,r=(t.y,function(e,t){for(var i=0,r=e.length-1;r-i>1;){var l=parseInt((i+r)/2);if(t===e[l].x)return l;t-e[l].x<0?r=l:i=l}for(var a=1/0,o=0,n=i;n<=r;n++){var s=Math.abs(t-e[n].x);a>s&&(a=s,o=n)}return o}(this.bars,i)),l=!0;return this.cfg.grid.activePos===r?(l=!1,delete this.cfg.grid.activePos):this.cfg.grid.activePos=r,this.draw(this.cfg),{data:this.bars[r].item,active:l}},e.prototype.setCfg=function(e){for(var t=[],i=0;i<e.length;i++)t.push(function(e){return{bars:[{fillColor:"#B4B4B4",fillColorActive:"#4CA664",textColor:"#FFFFFF",value:e.value[1],label:"",timeStamp:e.timeStamp},{fillColor:"#DBDBDB",fillColorActive:"#A8DDB6",textColor:"#FFFFFF",value:e.value[0],label:"",timeStamp:e.timeStamp}],label:e.label}}(e[i]));return{grid:{w:r-200/750*r,h:l-644/750*r,l:100/750*r,t:10,Y_split:5,showInnerLineY:!0,innerLineColorY:"#C1C1C1",showLabelY:!0,labelFontSize:10,labelFontColor:"#888888",classMarin:t.length>7?4:17,borderMarginMore:8,maxBarWidth:40,minBarWidth:1,maxDelta:20,maxDeltaPercent:.2,activePos:t.length-1},datasets:t,legends:[{color:"#A8DDB6",name:"新顾客"},{color:"#4CA664",name:"老顾客"}]}},module.exports=e; 
 			}); 
		define("widgets/charts/util.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=0;return(t=(t=String(t)).split("")).forEach(function(t){/[a-zA-Z]/.test(t)?o+=7:/[0-9]/.test(t)?o+=5.5:/\./.test(t)?o+=2.7:/-/.test(t)?o+=3.25:/[\u4e00-\u9fa5]/.test(t)?o+=10:/\(|\)/.test(t)?o+=3.73:/\s/.test(t)?o+=2.5:/%/.test(t)?o+=8:o+=10}),o*e/10}function o(){for(var t,o=0;o<3;o++)if(void 0!=(t=wx.getSystemInfoSync())){if(0!=t.screenWidth){t.windowWidth=t.screenWidth;break}if(0!=t.windowWidth){t.screenWidth=t.windowWidth;break}}return void 0!=t&&0!=t.screenWidth?t=wx.getSystemInfoSync():(void 0==(t=wx.getStorageSync("systemInfo"))&&console.error("getSystemInfo 获取设备信息失败且获取备份失败, e",e,t),t)}function n(t){if("object"===(void 0===t?"undefined":i(t))){var e=t.constructor===Array?[]:{};for(var o in t)e[o]=n(t[o]);return e}return t}var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};getApp();module.exports={wordWidth:t,wordCentering:function(e,o,n){return(e-t(o,n))/2},getSystemInfo:o,getSysWindowWidth:function(){return null!=r&&0!=r.screenWidth||null!=(r=o())&&0!=r.screenWidth?r.screenWidth:(wx.showModal({title:"错误提示",content:""}),0)},drawDashed:function(t,e){var o=e.stPos,n=e.edPos,r=e.space,i={x:n.x-o.x,y:n.y-o.y},y=Math.sqrt(i.x*i.x+i.y*i.y);i.x/=y,i.y/=y,i.x*=r,i.y*=r;var s=function(t,e,o){var n=!0;return o.x>0?n=n&&t.x<e.x:o.x<0&&(n=n&&t.x>e.x),o.y>0?n=n&&t.y<e.y:o.y<0&&(n=n&&t.y>e.y),n},c={x:o.x,y:o.y};t.beginPath(),t.setLineWidth(e.width),t.setStrokeStyle(e.fillColor);for(var d=20;s(c,n,i)&&d-- >0;)t.moveTo(c.x,c.y),c.x+=i.x,c.y+=i.y,s(c,n,i)||(c.x=n.x,c.y=n.y),t.lineTo(c.x,c.y),c.x+=i.x,c.y+=i.y;t.stroke(),t.closePath()},deepCopy:n}; 
 			}); 
		define("widgets/checkPattern.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports={checkPatternSingle:function(t,s){switch(t){case"phone":return!!/^1[34578]\d{9}$/.test(s);case"mail":return!!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(mail)}},checkFinish:function(t){var s=this.data.setting,e=!0;s.btnFinish.className="btn w100";for(var a in this.data.value)if(this.data.value[a])switch(t){case"submit":s[a].status=0}else{switch(s.btnFinish.className="btn w100 disabled",t){case"submit":s[a].status=-1}e=!1}return console.log("checkFinish"),console.log(s),this.setData({setting:s}),e}}; 
 			}); 
		define("widgets/qr.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var r=function(){function r(r,o){var f;r>o&&(f=r,r=o,o=f),f=o,f*=o,f+=o,f>>=1,z[f+=r]=1}function o(o,f){var e;for(y[o+s*f]=1,e=-2;e<2;e++)y[o+e+s*(f-2)]=1,y[o-2+s*(f+e+1)]=1,y[o+2+s*(f+e)]=1,y[o+e+1+s*(f+2)]=1;for(e=0;e<2;e++)r(o-1,f+e),r(o+1,f-e),r(o-e,f-1),r(o+e,f+1)}function f(r){for(;r>=255;)r=((r-=255)>>8)+(255&r);return r}function e(r,o,e,t){var n,a,i;for(n=0;n<t;n++)S[e+n]=0;for(n=0;n<o;n++){if(255!=(i=F[S[r+n]^S[e]]))for(a=1;a<t;a++)S[e+a-1]=S[e+a]^x[f(i+p[t-a])];else for(a=e;a<e+t;a++)S[a]=S[a+1];S[e+t-1]=255==i?0:x[f(i+p[0])]}}function t(r,o){var f;return r>o&&(f=r,r=o,o=f),f=o,f+=o*o,f>>=1,f+=r,z[f]}function n(r){var o,f,e,n;switch(r){case 0:for(f=0;f<s;f++)for(o=0;o<s;o++)o+f&1||t(o,f)||(y[o+f*s]^=1);break;case 1:for(f=0;f<s;f++)for(o=0;o<s;o++)1&f||t(o,f)||(y[o+f*s]^=1);break;case 2:for(f=0;f<s;f++)for(e=0,o=0;o<s;o++,e++)3==e&&(e=0),e||t(o,f)||(y[o+f*s]^=1);break;case 3:for(n=0,f=0;f<s;f++,n++)for(3==n&&(n=0),e=n,o=0;o<s;o++,e++)3==e&&(e=0),e||t(o,f)||(y[o+f*s]^=1);break;case 4:for(f=0;f<s;f++)for(e=0,n=f>>1&1,o=0;o<s;o++,e++)3==e&&(e=0,n=!n),n||t(o,f)||(y[o+f*s]^=1);break;case 5:for(n=0,f=0;f<s;f++,n++)for(3==n&&(n=0),e=0,o=0;o<s;o++,e++)3==e&&(e=0),(o&f&1)+!(!e|!n)||t(o,f)||(y[o+f*s]^=1);break;case 6:for(n=0,f=0;f<s;f++,n++)for(3==n&&(n=0),e=0,o=0;o<s;o++,e++)3==e&&(e=0),(o&f&1)+(e&&e==n)&1||t(o,f)||(y[o+f*s]^=1);break;case 7:for(n=0,f=0;f<s;f++,n++)for(3==n&&(n=0),e=0,o=0;o<s;o++,e++)3==e&&(e=0),(e&&e==n)+(o+f&1)&1||t(o,f)||(y[o+f*s]^=1)}}function a(r){var o,f=0;for(o=0;o<=r;o++)M[o]>=5&&(f+=R+M[o]-5);for(o=3;o<r-1;o+=2)M[o-2]==M[o+2]&&M[o+2]==M[o-1]&&M[o-1]==M[o+1]&&3*M[o-1]==M[o]&&(0==M[o-3]||o+3>r||3*M[o-3]>=4*M[o]||3*M[o+3]>=4*M[o])&&(f+=C);return f}function i(){var r,o,f,e,t,n=0,i=0;for(o=0;o<s-1;o++)for(r=0;r<s-1;r++)(y[r+s*o]&&y[r+1+s*o]&&y[r+s*(o+1)]&&y[r+1+s*(o+1)]||!(y[r+s*o]||y[r+1+s*o]||y[r+s*(o+1)]||y[r+1+s*(o+1)]))&&(n+=A);for(o=0;o<s;o++){for(M[0]=0,f=e=r=0;r<s;r++)(t=y[r+s*o])==e?M[f]++:M[++f]=1,i+=(e=t)?1:-1;n+=a(f)}i<0&&(i=-i);var c=i,l=0;for(c+=c<<2,c<<=1;c>s*s;)c-=s*s,l++;for(n+=l*N,r=0;r<s;r++){for(M[0]=0,f=e=o=0;o<s;o++)(t=y[r+s*o])==e?M[f]++:M[++f]=1,e=t;n+=a(f)}return n}function c(a){var c,M,R,A,C,N,Q,T;A=a.length,l=0;do{if(l++,R=4*(P-1)+16*(l-1),u=w[R++],v=w[R++],h=w[R++],b=w[R],R=h*(u+v)+v-3+(l<=9),A<=R)break}while(l<40);for(s=17+4*l,C=h+(h+b)*(u+v)+v,A=0;A<C;A++)m[A]=0;for(S=a.slice(0),A=0;A<s*s;A++)y[A]=0;for(A=0;A<(s*(s+1)+1)/2;A++)z[A]=0;for(A=0;A<3;A++){for(R=0,M=0,1==A&&(R=s-7),2==A&&(M=s-7),y[M+3+s*(R+3)]=1,c=0;c<6;c++)y[M+c+s*R]=1,y[M+s*(R+c+1)]=1,y[M+6+s*(R+c)]=1,y[M+c+1+s*(R+6)]=1;for(c=1;c<5;c++)r(M+c,R+1),r(M+1,R+c+1),r(M+5,R+c),r(M+c+1,R+5);for(c=2;c<4;c++)y[M+c+s*(R+2)]=1,y[M+2+s*(R+c+1)]=1,y[M+4+s*(R+c)]=1,y[M+c+1+s*(R+4)]=1}if(l>1)for(A=d[l],M=s-7;;){for(c=s-7;c>A-3&&(o(c,M),!(c<A));)c-=A;if(M<=A+9)break;o(6,M-=A),o(M,6)}for(y[8+s*(s-8)]=1,M=0;M<7;M++)r(7,M),r(s-8,M),r(7,M+s-7);for(c=0;c<8;c++)r(c,7),r(c+s-8,7),r(c,s-8);for(c=0;c<9;c++)r(c,8);for(c=0;c<8;c++)r(c+s-8,8),r(8,c);for(M=0;M<7;M++)r(8,M+s-7);for(c=0;c<s-14;c++)1&c?(r(8+c,6),r(6,8+c)):(y[8+c+6*s]=1,y[6+s*(8+c)]=1);if(l>6)for(A=g[l-7],R=17,c=0;c<6;c++)for(M=0;M<3;M++,R--)1&(R>11?l>>R-12:A>>R)?(y[5-c+s*(2-M+s-11)]=1,y[2-M+s-11+s*(5-c)]=1):(r(5-c,2-M+s-11),r(2-M+s-11,5-c));for(M=0;M<s;M++)for(c=0;c<=M;c++)y[c+s*M]&&r(c,M);for(C=S.length,N=0;N<C;N++)m[N]=S.charCodeAt(N);if(S=m.slice(0),c=h*(u+v)+v,C>=c-2&&(C=c-2,l>9&&C--),N=C,l>9){for(S[N+2]=0,S[N+3]=0;N--;)A=S[N],S[N+3]|=255&A<<4,S[N+2]=A>>4;S[2]|=255&C<<4,S[1]=C>>4,S[0]=64|C>>12}else{for(S[N+1]=0,S[N+2]=0;N--;)A=S[N],S[N+2]|=255&A<<4,S[N+1]=A>>4;S[1]|=255&C<<4,S[0]=64|C>>4}for(N=C+3-(l<10);N<c;)S[N++]=236,S[N++]=17;for(p[0]=1,N=0;N<b;N++){for(p[N+1]=1,Q=N;Q>0;Q--)p[Q]=p[Q]?p[Q-1]^x[f(F[p[Q]]+N)]:p[Q-1];p[0]=x[f(F[p[0]]+N)]}for(N=0;N<=b;N++)p[N]=F[p[N]];for(R=c,M=0,N=0;N<u;N++)e(M,h,R,b),M+=h,R+=b;for(N=0;N<v;N++)e(M,h+1,R,b),M+=h+1,R+=b;for(M=0,N=0;N<h;N++){for(Q=0;Q<u;Q++)m[M++]=S[N+Q*h];for(Q=0;Q<v;Q++)m[M++]=S[u*h+N+Q*(h+1)]}for(Q=0;Q<v;Q++)m[M++]=S[u*h+N+Q*(h+1)];for(N=0;N<b;N++)for(Q=0;Q<u+v;Q++)m[M++]=S[c+N+Q*b];for(S=m,c=M=s-1,R=C=1,T=(h+b)*(u+v)+v,N=0;N<T;N++)for(A=S[N],Q=0;Q<8;Q++,A<<=1){128&A&&(y[c+s*M]=1);do{C?c--:(c++,R?0!=M?M--:(R=!R,6==(c-=2)&&(c--,M=9)):M!=s-1?M++:(R=!R,6==(c-=2)&&(c--,M-=8))),C=!C}while(t(c,M))}for(S=y.slice(0),A=0,M=3e4,R=0;R<8&&(n(R),(c=i())<M&&(M=c,A=R),7!=A);R++)y=S.slice(0);for(A!=R&&n(A),M=k[A+(P-1<<3)],R=0;R<8;R++,M>>=1)1&M&&(y[s-1-R+8*s]=1,R<6?y[8+s*R]=1:y[8+s*(R+1)]=1);for(R=0;R<7;R++,M>>=1)1&M&&(y[8+s*(s-7+R)]=1,R?y[6-R+8*s]=1:y[7+8*s]=1);return y}var l,s,u,v,h,b,d=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],g=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],k=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],w=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],F=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],x=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],S=[],m=[],y=[],z=[],M=[],P=2,p=[],R=3,A=3,C=40,N=10,Q=null,T=null;return{get ecclevel(){return P},set ecclevel(r){P=r},get size(){return T},set size(r){T=r},get canvas(){return Q},set canvas(r){Q=r},getFrame:function(r){return c(r)},draw:function(r){var o=r.context,f=r.string,e=r.width,t=r.height,n=r.title;P=P;{if(o){var a=Math.min(e,t),i=c(f),l=Math.round(a/(s+8)),u=l*(s+8),v=Math.floor((a-u)/2);a=u,o.clearRect(0,0,e,t),o.beginPath(),o.setFillStyle("#ffffff"),o.rect(0,0,e,t),o.fill(),o.beginPath(),o.setFillStyle(r.color);for(var h=0;h<s;h++)for(var b=0;b<s;b++)i[b*s+h]&&o.rect(l*(4+h)+v,l*(4+b)+v,l,l);return o.fill(),o.beginPath(),n&&(o.setFontSize(12),o.setFillStyle("#a7a7a7"),o.fillText(n,70,10)),o}console.warn("No contenxt provided to draw QR code in!")}}}}();module.exports=r; 
 			}); 
		define("widgets/status/project.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var o={checkSession:function(o){var c=this;console.log("checkSession"),wx.checkSession({success:function(){console.log("checkSession suc"),wx.getStorageSync("code")?o("suc"):c.login(o)},fail:function(){console.log("checkSession fail"),c.login(o)}})},login:function(o){var c=this;wx.login({success:function(n){wx.setStorage({key:"code",data:n.code,success:function(){console.log("wxLogin suc"),c.weappLogin(o)},fail:function(){console.log("wxLogin setStorage fail"),wx.showModal({title:"提示",content:"setStorage code fail",success:function(o){o.confirm||o.cancel}})}})},fail:function(o){console.log("获取用户登录态失败！"+o.errMsg),wx.showModal({title:"提示",content:o.errMsg||"wxLogin fail",success:function(o){o.confirm||o.cancel}})}})},weappLogin:function(o){wx.request({url:"https://payapp.weixin.qq.com/mdmgr/weapp/login",data:{js_code:wx.getStorageSync("code")},success:function(c){var n=c.data;0==n.retcode?wx.setStorage({key:"sid",data:c.data.data.sid,success:function(){o("suc",c)},fail:function(){wx.showModal({title:"提示",content:"setStorage sid fail",success:function(o){}})}}):wx.showModal({title:"提示",content:n.msg||"",success:function(o){}})},fail:function(o){wx.showModal({title:"提示",content:"网络繁忙，请稍后重试",success:function(o){}})}})}};module.exports=o; 
 			}); 
		define("wxParse/html2json.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){for(var t={},r=e.split(","),s=0;s<r.length;s++)t[r[s]]=!0;return t}function t(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*\>\n/,"").replace(/<.*!DOCTYPE.*\>\n/,"")}function r(e){return e.replace(/\n+/g,"").replace(/<!--.*?-->/gi,"").replace(/\/\*.*?\*\//gi,"").replace(/[ ]+</gi,"<")}function s(e){var t=[];if(0==n.length||!i)return(d={}).node="text",d.text=e,s=[d];e=e.replace(/\[([^\[\]]+)\]/g,":$1:");for(var r=new RegExp("[:]"),s=e.split(r),a=0;a<s.length;a++){var l=s[a],d={};i[l]?(d.node="element",d.tag="emoji",d.text=i[l],d.baseSrc=o):(d.node="text",d.text=l),t.push(d)}return t}var a="https",n="",o="",i={},l=require("./wxDiscode.js"),d=require("./htmlparser.js"),c=(e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),e("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video")),u=e("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),p=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),e("wxxxcode-style,script,style,view,scroll-view,block");module.exports={html2json:function(e,n){e=r(e=t(e)),e=l.strDiscode(e);var o=[],i={node:n,nodes:[],images:[],imageUrls:[]},m=0;return d(e,{start:function(e,t,r){var s={node:"element",tag:e};if(0===o.length?(s.index=m.toString(),m+=1):(void 0===(x=o[0]).nodes&&(x.nodes=[]),s.index=x.index+"."+x.nodes.length),c[e]?s.tagType="block":u[e]?s.tagType="inline":p[e]&&(s.tagType="closeSelf"),0!==t.length&&(s.attr=t.reduce(function(e,t){var r=t.name,a=t.value;return"class"==r&&(console.dir(a),s.classStr=a),"style"==r&&(console.dir(a),s.styleStr=a),a.match(/ /)&&(a=a.split(" ")),e[r]?Array.isArray(e[r])?e[r].push(a):e[r]=[e[r],a]:e[r]=a,e},{})),"img"===s.tag){s.imgIndex=i.images.length;var d=s.attr.src;""==d[0]&&d.splice(0,1),d=l.urlToHttpUrl(d,a),s.attr.src=d,s.from=n,i.images.push(s),i.imageUrls.push(d)}if("font"===s.tag){var g=["x-small","small","medium","large","x-large","xx-large","-webkit-xxx-large"],f={color:"color",face:"font-family",size:"font-size"};s.attr.style||(s.attr.style=[]),s.styleStr||(s.styleStr="");for(var h in f)if(s.attr[h]){var v="size"===h?g[s.attr[h]-1]:s.attr[h];s.attr.style.push(f[h]),s.attr.style.push(v),s.styleStr+=f[h]+": "+v+";"}}if("source"===s.tag&&(i.source=s.attr.src),r){var x=o[0]||i;void 0===x.nodes&&(x.nodes=[]),x.nodes.push(s)}else o.unshift(s)},end:function(e){var t=o.shift();if(t.tag!==e&&console.error("invalid state: mismatch end tag"),"video"===t.tag&&i.source&&(t.attr.src=i.source,delete result.source),0===o.length)i.nodes.push(t);else{var r=o[0];void 0===r.nodes&&(r.nodes=[]),r.nodes.push(t)}},chars:function(e){var t={node:"text",text:e,textArray:s(e)};if(0===o.length)i.nodes.push(t);else{var r=o[0];void 0===r.nodes&&(r.nodes=[]),t.index=r.index+"."+r.nodes.length,r.nodes.push(t)}},comment:function(e){}}),i},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",r=arguments[2];n=e,o=t,i=r}}; 
 			}); 
		define("wxParse/htmlparser.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){for(var t={},r=e.split(","),s=0;s<r.length;s++)t[r[s]]=!0;return t}var t=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([-A-Za-z0-9_]+)[^>]*>/,s=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,a=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),n=e("a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),i=e("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),o=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),c=e("wxxxcode-style,script,style,view,scroll-view,block");module.exports=function(e,d){function f(e,t){if(t)for(t=t.toLowerCase(),r=b.length-1;r>=0&&b[r]!=t;r--);else var r=0;if(r>=0){for(var s=b.length-1;s>=r;s--)d.end&&d.end(b[s]);b.length=r}}var p,u,h,b=[],m=e;for(b.last=function(){return this[this.length-1]};e;){if(u=!0,b.last()&&c[b.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+b.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),d.chars&&d.chars(t),""}),f(0,b.last());else if(0==e.indexOf("\x3c!--")?(p=e.indexOf("--\x3e"))>=0&&(d.comment&&d.comment(e.substring(4,p)),e=e.substring(p+3),u=!1):0==e.indexOf("</")?(h=e.match(r))&&(e=e.substring(h[0].length),h[0].replace(r,f),u=!1):0==e.indexOf("<")&&(h=e.match(t))&&(e=e.substring(h[0].length),h[0].replace(t,function(e,t,r,c){if(t=t.toLowerCase(),n[t])for(;b.last()&&i[b.last()];)f(0,b.last());if(o[t]&&b.last()==t&&f(0,t),(c=a[t]||!!c)||b.push(t),d.start){var p=[];r.replace(s,function(e,t){var r=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:l[t]?t:"";p.push({name:t,value:r,escaped:r.replace(/(^|[^\\])"/g,'$1\\"')})}),d.start&&d.start(t,p,c)}}),u=!1),u){p=e.indexOf("<");for(var g="";0===p;)g+="<",p=(e=e.substring(1)).indexOf("<");g+=p<0?e:e.substring(0,p),e=p<0?"":e.substring(p),d.chars&&d.chars(g)}if(e==m)throw"Parse Error: "+e;m=e}f()}; 
 			}); 
		define("wxParse/showdown.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){var r={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix identation in es6 strings",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(r));var t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n].defaultValue);return t}function r(e,r){var t=r?"Error in "+r+" extension->":"Error in unnamed extension",a={valid:!0,error:""};s.helper.isArray(e)||(e=[e]);for(var o=0;o<e.length;++o){var i=t+" sub-extension "+o+": ",l=e[o];if("object"!==(void 0===l?"undefined":n(l)))return a.valid=!1,a.error=i+"must be an object, but "+(void 0===l?"undefined":n(l))+" given",a;if(!s.helper.isString(l.type))return a.valid=!1,a.error=i+'property "type" must be a string, but '+n(l.type)+" given",a;var c=l.type=l.type.toLowerCase();if("language"===c&&(c=l.type="lang"),"html"===c&&(c=l.type="output"),"lang"!==c&&"output"!==c&&"listener"!==c)return a.valid=!1,a.error=i+"type "+c+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',a;if("listener"===c){if(s.helper.isUndefined(l.listeners))return a.valid=!1,a.error=i+'. Extensions of type "listener" must have a property called "listeners"',a}else if(s.helper.isUndefined(l.filter)&&s.helper.isUndefined(l.regex))return a.valid=!1,a.error=i+c+' extensions must define either a "regex" property or a "filter" method',a;if(l.listeners){if("object"!==n(l.listeners))return a.valid=!1,a.error=i+'"listeners" property must be an object but '+n(l.listeners)+" given",a;for(var u in l.listeners)if(l.listeners.hasOwnProperty(u)&&"function"!=typeof l.listeners[u])return a.valid=!1,a.error=i+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+u+" must be a function but "+n(l.listeners[u])+" given",a}if(l.filter){if("function"!=typeof l.filter)return a.valid=!1,a.error=i+'"filter" must be a function, but '+n(l.filter)+" given",a}else if(l.regex){if(s.helper.isString(l.regex)&&(l.regex=new RegExp(l.regex,"g")),!l.regex instanceof RegExp)return a.valid=!1,a.error=i+'"regex" property must either be a string or a RegExp object, but '+n(l.regex)+" given",a;if(s.helper.isUndefined(l.replace))return a.valid=!1,a.error=i+'"regex" extensions must implement a replace string or function',a}}return a}function t(e,r){return"~E"+r.charCodeAt(0)+"E"}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={},a={},o={},i=e(!0),l={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:e(!0)};s.helper={},s.extensions={},s.setOption=function(e,r){return i[e]=r,this},s.getOption=function(e){return i[e]},s.getOptions=function(){return i},s.resetOptions=function(){i=e(!0)},s.setFlavor=function(e){if(l.hasOwnProperty(e)){var r=l[e];for(var t in r)r.hasOwnProperty(t)&&(i[t]=r[t])}},s.getDefaultOptions=function(r){return e(r)},s.subParser=function(e,r){if(s.helper.isString(e)){if(void 0===r){if(a.hasOwnProperty(e))return a[e];throw Error("SubParser named "+e+" not registered!")}a[e]=r}},s.extension=function(e,t){if(!s.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=s.helper.stdExtName(e),s.helper.isUndefined(t)){if(!o.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return o[e]}"function"==typeof t&&(t=t()),s.helper.isArray(t)||(t=[t]);var n=r(t,e);if(!n.valid)throw Error(n.error);o[e]=t},s.getAllExtensions=function(){return o},s.removeExtension=function(e){delete o[e]},s.resetExtensions=function(){o={}},s.validateExtension=function(e){var t=r(e,null);return!!t.valid||(console.warn(t.error),!1)},s.hasOwnProperty("helper")||(s.helper={}),s.helper.isString=function(e){return"string"==typeof e||e instanceof String},s.helper.isFunction=function(e){var r={};return e&&"[object Function]"===r.toString.call(e)},s.helper.forEach=function(e,r){if("function"==typeof e.forEach)e.forEach(r);else for(var t=0;t<e.length;t++)r(e[t],t,e)},s.helper.isArray=function(e){return e.constructor===Array},s.helper.isUndefined=function(e){return void 0===e},s.helper.stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()},s.helper.escapeCharactersCallback=t,s.helper.escapeCharacters=function(e,r,n){var s="(["+r.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(s="\\\\"+s);var a=new RegExp(s,"g");return e=e.replace(a,t)};var c=function(e,r,t,n){var s,a,o,i,l,c=n||"",u=c.indexOf("g")>-1,p=new RegExp(r+"|"+t,"g"+c.replace(/g/g,"")),h=new RegExp(r,c.replace(/g/g,"")),d=[];do{for(s=0;o=p.exec(e);)if(h.test(o[0]))s++||(i=(a=p.lastIndex)-o[0].length);else if(s&&!--s){l=o.index+o[0].length;var f={left:{start:i,end:a},match:{start:a,end:o.index},right:{start:o.index,end:l},wholeMatch:{start:i,end:l}};if(d.push(f),!u)return d}}while(s&&(p.lastIndex=a));return d};s.helper.matchRecursiveRegExp=function(e,r,t,n){for(var s=c(e,r,t,n),a=[],o=0;o<s.length;++o)a.push([e.slice(s[o].wholeMatch.start,s[o].wholeMatch.end),e.slice(s[o].match.start,s[o].match.end),e.slice(s[o].left.start,s[o].left.end),e.slice(s[o].right.start,s[o].right.end)]);return a},s.helper.replaceRecursiveRegExp=function(e,r,t,n,a){if(!s.helper.isFunction(r)){var o=r;r=function(){return o}}var i=c(e,t,n,a),l=e,u=i.length;if(u>0){var p=[];0!==i[0].wholeMatch.start&&p.push(e.slice(0,i[0].wholeMatch.start));for(var h=0;h<u;++h)p.push(r(e.slice(i[h].wholeMatch.start,i[h].wholeMatch.end),e.slice(i[h].match.start,i[h].match.end),e.slice(i[h].left.start,i[h].left.end),e.slice(i[h].right.start,i[h].right.end))),h<u-1&&p.push(e.slice(i[h].wholeMatch.end,i[h+1].wholeMatch.start));i[u-1].wholeMatch.end<e.length&&p.push(e.slice(i[u-1].wholeMatch.end)),l=p.join("")}return l},s.helper.isUndefined(console)&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),s.Converter=function(e){function t(e,t){if(t=t||null,s.helper.isString(e)){if(e=s.helper.stdExtName(e),t=e,s.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void a(s.extensions[e],e);if(s.helper.isUndefined(o[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=o[e]}"function"==typeof e&&(e=e()),s.helper.isArray(e)||(e=[e]);var n=r(e,t);if(!n.valid)throw Error(n.error);for(var i=0;i<e.length;++i){switch(e[i].type){case"lang":h.push(e[i]);break;case"output":d.push(e[i])}if(e[i].hasOwnProperty(f))for(var l in e[i].listeners)e[i].listeners.hasOwnProperty(l)&&c(l,e[i].listeners[l])}}function a(e,t){"function"==typeof e&&(e=e(new s.Converter)),s.helper.isArray(e)||(e=[e]);var n=r(e,t);if(!n.valid)throw Error(n.error);for(var a=0;a<e.length;++a)switch(e[a].type){case"lang":h.push(e[a]);break;case"output":d.push(e[a]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function c(e,r){if(!s.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+(void 0===e?"undefined":n(e))+" given");if("function"!=typeof r)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+(void 0===r?"undefined":n(r))+" given");f.hasOwnProperty(e)||(f[e]=[]),f[e].push(r)}function u(e){var r=e.match(/^\s*/)[0].length,t=new RegExp("^\\s{0,"+r+"}","gm");return e.replace(t,"")}var p={},h=[],d=[],f={};!function(){e=e||{};for(var r in i)i.hasOwnProperty(r)&&(p[r]=i[r]);if("object"!==(void 0===e?"undefined":n(e)))throw Error("Converter expects the passed parameter to be an object, but "+(void 0===e?"undefined":n(e))+" was passed instead.");for(var a in e)e.hasOwnProperty(a)&&(p[a]=e[a]);p.extensions&&s.helper.forEach(p.extensions,t)}(),this._dispatch=function(e,r,t,n){if(f.hasOwnProperty(e))for(var s=0;s<f[e].length;++s){var a=f[e][s](e,r,this,t,n);a&&void 0!==a&&(r=a)}return r},this.listen=function(e,r){return c(e,r),this},this.makeHtml=function(e){if(!e)return e;var r={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:h,outputModifiers:d,converter:this,ghCodeBlocks:[]};return e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),p.smartIndentationFix&&(e=u(e)),e=e,e=s.subParser("detab")(e,p,r),e=s.subParser("stripBlankLines")(e,p,r),s.helper.forEach(h,function(t){e=s.subParser("runExtension")(t,e,p,r)}),e=s.subParser("hashPreCodeTags")(e,p,r),e=s.subParser("githubCodeBlocks")(e,p,r),e=s.subParser("hashHTMLBlocks")(e,p,r),e=s.subParser("hashHTMLSpans")(e,p,r),e=s.subParser("stripLinkDefinitions")(e,p,r),e=s.subParser("blockGamut")(e,p,r),e=s.subParser("unhashHTMLSpans")(e,p,r),e=s.subParser("unescapeSpecialChars")(e,p,r),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),s.helper.forEach(d,function(t){e=s.subParser("runExtension")(t,e,p,r)}),e},this.setOption=function(e,r){p[e]=r},this.getOption=function(e){return p[e]},this.getOptions=function(){return p},this.addExtension=function(e,r){t(e,r=r||null)},this.useExtension=function(e){t(e)},this.setFlavor=function(e){if(l.hasOwnProperty(e)){var r=l[e];for(var t in r)r.hasOwnProperty(t)&&(p[t]=r[t])}},this.removeExtension=function(e){s.helper.isArray(e)||(e=[e]);for(var r=0;r<e.length;++r){for(var t=e[r],n=0;n<h.length;++n)h[n]===t&&h[n].splice(n,1);for(;0<d.length;++n)d[0]===t&&d[0].splice(n,1)}},this.getAllExtensions=function(){return{language:h,output:d}}},s.subParser("anchors",function(e,r,t){var n=function(e,r,n,a,o,i,l,c){s.helper.isUndefined(c)&&(c=""),e=r;var u=n,p=a.toLowerCase(),h=o,d=c;if(!h)if(p||(p=u.toLowerCase().replace(/ ?\n/g," ")),h="#"+p,s.helper.isUndefined(t.gUrls[p])){if(!(e.search(/\(\s*\)$/m)>-1))return e;h=""}else h=t.gUrls[p],s.helper.isUndefined(t.gTitles[p])||(d=t.gTitles[p]);var f='<a href="'+(h=s.helper.escapeCharacters(h,"*_",!1))+'"';return""!==d&&null!==d&&(d=d.replace(/"/g,"&quot;"),f+=' title="'+(d=s.helper.escapeCharacters(d,"*_",!1))+'"'),f+=">"+u+"</a>"};return e=(e=t.converter._dispatch("anchors.before",e,r,t)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,n),e=e.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n),e=e.replace(/(\[([^\[\]]+)])()()()()()/g,n),e=t.converter._dispatch("anchors.after",e,r,t)}),s.subParser("autoLinks",function(e,r,t){function n(e,r){var t=r;return/^www\./i.test(r)&&(r=r.replace(/^www\./i,"http://www.")),'<a href="'+r+'">'+t+"</a>"}function a(e,r){var t=s.subParser("unescapeSpecialChars")(r);return s.subParser("encodeEmailAddress")(t)}var o=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,i=/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,l=/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,c=/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi;return e=(e=t.converter._dispatch("autoLinks.before",e,r,t)).replace(i,n),e=e.replace(c,a),r.simplifiedAutoLink&&(e=(e=e.replace(o,n)).replace(l,a)),e=t.converter._dispatch("autoLinks.after",e,r,t)}),s.subParser("blockGamut",function(e,r,t){e=t.converter._dispatch("blockGamut.before",e,r,t),e=s.subParser("blockQuotes")(e,r,t),e=s.subParser("headers")(e,r,t);var n=s.subParser("hashBlock")("<hr />",r,t);return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,n),e=s.subParser("lists")(e,r,t),e=s.subParser("codeBlocks")(e,r,t),e=s.subParser("tables")(e,r,t),e=s.subParser("hashHTMLBlocks")(e,r,t),e=s.subParser("paragraphs")(e,r,t),e=t.converter._dispatch("blockGamut.after",e,r,t)}),s.subParser("blockQuotes",function(e,r,t){return e=t.converter._dispatch("blockQuotes.before",e,r,t),e=e.replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,n){var a=n;return a=a.replace(/^[ \t]*>[ \t]?/gm,"~0"),a=a.replace(/~0/g,""),a=a.replace(/^[ \t]+$/gm,""),a=s.subParser("githubCodeBlocks")(a,r,t),a=s.subParser("blockGamut")(a,r,t),a=a.replace(/(^|\n)/g,"$1  "),a=a.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,r){var t=r;return t=t.replace(/^  /gm,"~0"),t=t.replace(/~0/g,"")}),s.subParser("hashBlock")("<blockquote>\n"+a+"\n</blockquote>",r,t)}),e=t.converter._dispatch("blockQuotes.after",e,r,t)}),s.subParser("codeBlocks",function(e,r,t){e=t.converter._dispatch("codeBlocks.before",e,r,t);var n=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g;return e=(e+="~0").replace(n,function(e,n,a){var o=n,i=a,l="\n";return o=s.subParser("outdent")(o),o=s.subParser("encodeCode")(o),o=s.subParser("detab")(o),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),r.omitExtraWLInCodeBlocks&&(l=""),o="<pre><code>"+o+l+"</code></pre>",s.subParser("hashBlock")(o,r,t)+i}),e=e.replace(/~0/,""),e=t.converter._dispatch("codeBlocks.after",e,r,t)}),s.subParser("codeSpans",function(e,r,t){return void 0===(e=t.converter._dispatch("codeSpans.before",e,r,t))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,r,t,n){var a=n;return a=a.replace(/^([ \t]*)/g,""),a=a.replace(/[ \t]*$/g,""),a=s.subParser("encodeCode")(a),r+"<code>"+a+"</code>"}),e=t.converter._dispatch("codeSpans.after",e,r,t)}),s.subParser("detab",function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,r){for(var t=r,n=4-t.length%4,s=0;s<n;s++)t+=" ";return t}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,"")}),s.subParser("encodeAmpsAndAngles",function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}),s.subParser("encodeBackslashEscapes",function(e){return e=e.replace(/\\(\\)/g,s.helper.escapeCharactersCallback),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,s.helper.escapeCharactersCallback)}),s.subParser("encodeCode",function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=s.helper.escapeCharacters(e,"*_{}[]\\",!1)}),s.subParser("encodeEmailAddress",function(e){var r=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if("@"===e)e=r[Math.floor(2*Math.random())](e);else if(":"!==e){var t=Math.random();e=t>.9?r[2](e):t>.45?r[1](e):r[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">')}),s.subParser("escapeSpecialCharsWithinTagAttributes",function(e){var r=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(r,function(e){var r=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return r=s.helper.escapeCharacters(r,"\\`*_",!1)})}),s.subParser("githubCodeBlocks",function(e,r,t){return r.ghCodeBlocks?(e=t.converter._dispatch("githubCodeBlocks.before",e,r,t),e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,n,a){var o=r.omitExtraWLInCodeBlocks?"":"\n";return a=s.subParser("encodeCode")(a),a=s.subParser("detab")(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),a="<pre><code"+(n?' class="'+n+" language-"+n+'"':"")+">"+a+o+"</code></pre>",a=s.subParser("hashBlock")(a,r,t),"\n\n~G"+(t.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"}),e=e.replace(/~0/,""),t.converter._dispatch("githubCodeBlocks.after",e,r,t)):e}),s.subParser("hashBlock",function(e,r,t){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(t.gHtmlBlocks.push(e)-1)+"K\n\n"}),s.subParser("hashElement",function(e,r,t){return function(e,r){var n=r;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(t.gHtmlBlocks.push(n)-1)+"K\n\n"}}),s.subParser("hashHTMLBlocks",function(e,r,t){for(var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],a=0;a<n.length;++a)e=s.helper.replaceRecursiveRegExp(e,function(e,r,n,s){var a=e;return-1!==n.search(/\bmarkdown\b/)&&(a=n+t.converter.makeHtml(r)+s),"\n\n~K"+(t.gHtmlBlocks.push(a)-1)+"K\n\n"},"^(?: |\\t){0,3}<"+n[a]+"\\b[^>]*>","</"+n[a]+">","gim");return e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,s.subParser("hashElement")(e,r,t)),e=e.replace(/(<!--[\s\S]*?-->)/g,s.subParser("hashElement")(e,r,t)),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,s.subParser("hashElement")(e,r,t))}),s.subParser("hashHTMLSpans",function(e,r,t){for(var n=s.helper.matchRecursiveRegExp(e,"<code\\b[^>]*>","</code>","gi"),a=0;a<n.length;++a)e=e.replace(n[a][0],"~L"+(t.gHtmlSpans.push(n[a][0])-1)+"L");return e}),s.subParser("unhashHTMLSpans",function(e,r,t){for(var n=0;n<t.gHtmlSpans.length;++n)e=e.replace("~L"+n+"L",t.gHtmlSpans[n]);return e}),s.subParser("hashPreCodeTags",function(e,r,t){return e=s.helper.replaceRecursiveRegExp(e,function(e,r,n,a){var o=n+s.subParser("encodeCode")(r)+a;return"\n\n~G"+(t.ghCodeBlocks.push({text:e,codeblock:o})-1)+"G\n\n"},"^(?: |\\t){0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^(?: |\\t){0,3}</code>\\s*</pre>","gim")}),s.subParser("headers",function(e,r,t){function n(e){var r,n=e.replace(/[^\w]/g,"").toLowerCase();return t.hashLinkCounts[n]?r=n+"-"+t.hashLinkCounts[n]++:(r=n,t.hashLinkCounts[n]=1),!0===a&&(a="section"),s.helper.isString(a)?a+r:r}e=t.converter._dispatch("headers.before",e,r,t);var a=r.prefixHeaderId,o=isNaN(parseInt(r.headerLevelStart))?1:parseInt(r.headerLevelStart),i=r.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,l=r.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;return e=e.replace(i,function(e,a){var i=s.subParser("spanGamut")(a,r,t),l=r.noHeaderId?"":' id="'+n(a)+'"',c=o,u="<h"+c+l+">"+i+"</h"+c+">";return s.subParser("hashBlock")(u,r,t)}),e=e.replace(l,function(e,a){var i=s.subParser("spanGamut")(a,r,t),l=r.noHeaderId?"":' id="'+n(a)+'"',c=o+1,u="<h"+c+l+">"+i+"</h"+c+">";return s.subParser("hashBlock")(u,r,t)}),e=e.replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(e,a,i){var l=s.subParser("spanGamut")(i,r,t),c=r.noHeaderId?"":' id="'+n(i)+'"',u=o-1+a.length,p="<h"+u+c+">"+l+"</h"+u+">";return s.subParser("hashBlock")(p,r,t)}),e=t.converter._dispatch("headers.after",e,r,t)}),s.subParser("images",function(e,r,t){function n(e,r,n,a,o,i,l,c){var u=t.gUrls,p=t.gTitles,h=t.gDimensions;if(n=n.toLowerCase(),c||(c=""),""===a||null===a){if(""!==n&&null!==n||(n=r.toLowerCase().replace(/ ?\n/g," ")),a="#"+n,s.helper.isUndefined(u[n]))return e;a=u[n],s.helper.isUndefined(p[n])||(c=p[n]),s.helper.isUndefined(h[n])||(o=h[n].width,i=h[n].height)}r=r.replace(/"/g,"&quot;"),r=s.helper.escapeCharacters(r,"*_",!1);var d='<img src="'+(a=s.helper.escapeCharacters(a,"*_",!1))+'" alt="'+r+'"';return c&&(c=c.replace(/"/g,"&quot;"),d+=' title="'+(c=s.helper.escapeCharacters(c,"*_",!1))+'"'),o&&i&&(d+=' width="'+(o="*"===o?"auto":o)+'"',d+=' height="'+(i="*"===i?"auto":i)+'"'),d+=" />"}var a=/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,o=/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g;return e=(e=t.converter._dispatch("images.before",e,r,t)).replace(o,n),e=e.replace(a,n),e=t.converter._dispatch("images.after",e,r,t)}),s.subParser("italicsAndBold",function(e,r,t){return e=t.converter._dispatch("italicsAndBold.before",e,r,t),e=r.literalMidWordUnderscores?(e=(e=(e=e.replace(/(^|\s|>|\b)__(?=\S)([\s\S]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([\s\S]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e=t.converter._dispatch("italicsAndBold.after",e,r,t)}),s.subParser("lists",function(e,r,t){function n(e,n){t.gListLevel++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var a=/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,o=/\n[ \t]*\n(?!~0)/.test(e);return e=e.replace(a,function(e,n,a,i,l,c,u){u=u&&""!==u.trim();var p=s.subParser("outdent")(l,r,t),h="";return c&&r.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',p=p.replace(/^[ \t]*\[(x|X| )?]/m,function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(e+=" checked"),e+=">"})),n||p.search(/\n{2,}/)>-1?(p=s.subParser("githubCodeBlocks")(p,r,t),p=s.subParser("blockGamut")(p,r,t)):(p=(p=s.subParser("lists")(p,r,t)).replace(/\n$/,""),p=o?s.subParser("paragraphs")(p,r,t):s.subParser("spanGamut")(p,r,t)),p="\n<li"+h+">"+p+"</li>\n"}),e=e.replace(/~0/g,""),t.gListLevel--,n&&(e=e.replace(/\s+$/,"")),e}function a(e,r,t){var s="ul"===r?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,a=[],o="";if(-1!==e.search(s)){!function e(a){var i=a.search(s);-1!==i?(o+="\n\n<"+r+">"+n(a.slice(0,i),!!t)+"</"+r+">\n\n",s="ul"===(r="ul"===r?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,e(a.slice(i))):o+="\n\n<"+r+">"+n(a,!!t)+"</"+r+">\n\n"}(e);for(var i=0;i<a.length;++i);}else o="\n\n<"+r+">"+n(e,!!t)+"</"+r+">\n\n";return o}e=t.converter._dispatch("lists.before",e,r,t),e+="~0";var o=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return t.gListLevel?e=e.replace(o,function(e,r,t){return a(r,t.search(/[*+-]/g)>-1?"ul":"ol",!0)}):(o=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,e=e.replace(o,function(e,r,t,n){return a(t,n.search(/[*+-]/g)>-1?"ul":"ol")})),e=e.replace(/~0/,""),e=t.converter._dispatch("lists.after",e,r,t)}),s.subParser("outdent",function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")}),s.subParser("paragraphs",function(e,r,t){for(var n=(e=(e=(e=t.converter._dispatch("paragraphs.before",e,r,t)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),a=[],o=n.length,i=0;i<o;i++){var l=n[i];l.search(/~(K|G)(\d+)\1/g)>=0?a.push(l):(l=(l=s.subParser("spanGamut")(l,r,t)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",a.push(l))}for(o=a.length,i=0;i<o;i++){for(var c="",u=a[i],p=!1;u.search(/~(K|G)(\d+)\1/)>=0;){var h=RegExp.$1,d=RegExp.$2;c=(c="K"===h?t.gHtmlBlocks[d]:p?s.subParser("encodeCode")(t.ghCodeBlocks[d].text):t.ghCodeBlocks[d].codeblock).replace(/\$/g,"$$$$"),u=u.replace(/(\n\n)?~(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(u)&&(p=!0)}a[i]=u}return e=a.join("\n\n"),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,""),t.converter._dispatch("paragraphs.after",e,r,t)}),s.subParser("runExtension",function(e,r,t,n){if(e.filter)r=e.filter(r,n.converter,t);else if(e.regex){var s=e.regex;!s instanceof RegExp&&(s=new RegExp(s,"g")),r=r.replace(s,e.replace)}return r}),s.subParser("spanGamut",function(e,r,t){return e=t.converter._dispatch("spanGamut.before",e,r,t),e=s.subParser("codeSpans")(e,r,t),e=s.subParser("escapeSpecialCharsWithinTagAttributes")(e,r,t),e=s.subParser("encodeBackslashEscapes")(e,r,t),e=s.subParser("images")(e,r,t),e=s.subParser("anchors")(e,r,t),e=s.subParser("autoLinks")(e,r,t),e=s.subParser("encodeAmpsAndAngles")(e,r,t),e=s.subParser("italicsAndBold")(e,r,t),e=s.subParser("strikethrough")(e,r,t),e=e.replace(/  +\n/g," <br />\n"),e=t.converter._dispatch("spanGamut.after",e,r,t)}),s.subParser("strikethrough",function(e,r,t){return r.strikethrough&&(e=(e=t.converter._dispatch("strikethrough.before",e,r,t)).replace(/(?:~T){2}([\s\S]+?)(?:~T){2}/g,"<del>$1</del>"),e=t.converter._dispatch("strikethrough.after",e,r,t)),e}),s.subParser("stripBlankLines",function(e){return e.replace(/^[ \t]+$/gm,"")}),s.subParser("stripLinkDefinitions",function(e,r,t){var n=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm;return e+="~0",e=e.replace(n,function(e,n,a,o,i,l,c){return n=n.toLowerCase(),t.gUrls[n]=s.subParser("encodeAmpsAndAngles")(a),l?l+c:(c&&(t.gTitles[n]=c.replace(/"|'/g,"&quot;")),r.parseImgDimensions&&o&&i&&(t.gDimensions[n]={width:o,height:i}),"")}),e=e.replace(/~0/,"")}),s.subParser("tables",function(e,r,t){function n(e){return/^:[ \t]*--*$/.test(e)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(e)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(e)?' style="text-align:center;"':""}function a(e,n){var a="";return e=e.trim(),r.tableHeaderId&&(a=' id="'+e.replace(/ /g,"_").toLowerCase()+'"'),e=s.subParser("spanGamut")(e,r,t),"<th"+a+n+">"+e+"</th>\n"}function o(e,n){return"<td"+n+">"+s.subParser("spanGamut")(e,r,t)+"</td>\n"}function i(e,r){for(var t="<table>\n<thead>\n<tr>\n",n=e.length,s=0;s<n;++s)t+=e[s];for(t+="</tr>\n</thead>\n<tbody>\n",s=0;s<r.length;++s){t+="<tr>\n";for(var a=0;a<n;++a)t+=r[s][a];t+="</tr>\n"}return t+="</tbody>\n</table>\n"}if(!r.tables)return e;var l=/^[ \t]{0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|~0)/gm;return e=t.converter._dispatch("tables.before",e,r,t),e=e.replace(l,function(e){var r,t=e.split("\n");for(r=0;r<t.length;++r)/^[ \t]{0,3}\|/.test(t[r])&&(t[r]=t[r].replace(/^[ \t]{0,3}\|/,"")),/\|[ \t]*$/.test(t[r])&&(t[r]=t[r].replace(/\|[ \t]*$/,""));var l=t[0].split("|").map(function(e){return e.trim()}),c=t[1].split("|").map(function(e){return e.trim()}),u=[],p=[],h=[],d=[];for(t.shift(),t.shift(),r=0;r<t.length;++r)""!==t[r].trim()&&u.push(t[r].split("|").map(function(e){return e.trim()}));if(l.length<c.length)return e;for(r=0;r<c.length;++r)h.push(n(c[r]));for(r=0;r<l.length;++r)s.helper.isUndefined(h[r])&&(h[r]=""),p.push(a(l[r],h[r]));for(r=0;r<u.length;++r){for(var f=[],g=0;g<p.length;++g)s.helper.isUndefined(u[r][g]),f.push(o(u[r][g],h[g]));d.push(f)}return i(p,d)}),e=t.converter._dispatch("tables.after",e,r,t)}),s.subParser("unescapeSpecialChars",function(e){return e=e.replace(/~E(\d+)E/g,function(e,r){var t=parseInt(r);return String.fromCharCode(t)})}),module.exports=s; 
 			}); 
		define("wxParse/wxDiscode.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e=e.replace(/&forall;/g,"∀"),e=e.replace(/&part;/g,"∂"),e=e.replace(/&exists;/g,"∃"),e=e.replace(/&empty;/g,"∅"),e=e.replace(/&nabla;/g,"∇"),e=e.replace(/&isin;/g,"∈"),e=e.replace(/&notin;/g,"∉"),e=e.replace(/&ni;/g,"∋"),e=e.replace(/&prod;/g,"∏"),e=e.replace(/&sum;/g,"∑"),e=e.replace(/&minus;/g,"−"),e=e.replace(/&lowast;/g,"∗"),e=e.replace(/&radic;/g,"√"),e=e.replace(/&prop;/g,"∝"),e=e.replace(/&infin;/g,"∞"),e=e.replace(/&ang;/g,"∠"),e=e.replace(/&and;/g,"∧"),e=e.replace(/&or;/g,"∨"),e=e.replace(/&cap;/g,"∩"),e=e.replace(/&cap;/g,"∪"),e=e.replace(/&int;/g,"∫"),e=e.replace(/&there4;/g,"∴"),e=e.replace(/&sim;/g,"∼"),e=e.replace(/&cong;/g,"≅"),e=e.replace(/&asymp;/g,"≈"),e=e.replace(/&ne;/g,"≠"),e=e.replace(/&le;/g,"≤"),e=e.replace(/&ge;/g,"≥"),e=e.replace(/&sub;/g,"⊂"),e=e.replace(/&sup;/g,"⊃"),e=e.replace(/&nsub;/g,"⊄"),e=e.replace(/&sube;/g,"⊆"),e=e.replace(/&supe;/g,"⊇"),e=e.replace(/&oplus;/g,"⊕"),e=e.replace(/&otimes;/g,"⊗"),e=e.replace(/&perp;/g,"⊥"),e=e.replace(/&sdot;/g,"⋅")}function a(e){return e=e.replace(/&Alpha;/g,"Α"),e=e.replace(/&Beta;/g,"Β"),e=e.replace(/&Gamma;/g,"Γ"),e=e.replace(/&Delta;/g,"Δ"),e=e.replace(/&Epsilon;/g,"Ε"),e=e.replace(/&Zeta;/g,"Ζ"),e=e.replace(/&Eta;/g,"Η"),e=e.replace(/&Theta;/g,"Θ"),e=e.replace(/&Iota;/g,"Ι"),e=e.replace(/&Kappa;/g,"Κ"),e=e.replace(/&Lambda;/g,"Λ"),e=e.replace(/&Mu;/g,"Μ"),e=e.replace(/&Nu;/g,"Ν"),e=e.replace(/&Xi;/g,"Ν"),e=e.replace(/&Omicron;/g,"Ο"),e=e.replace(/&Pi;/g,"Π"),e=e.replace(/&Rho;/g,"Ρ"),e=e.replace(/&Sigma;/g,"Σ"),e=e.replace(/&Tau;/g,"Τ"),e=e.replace(/&Upsilon;/g,"Υ"),e=e.replace(/&Phi;/g,"Φ"),e=e.replace(/&Chi;/g,"Χ"),e=e.replace(/&Psi;/g,"Ψ"),e=e.replace(/&Omega;/g,"Ω"),e=e.replace(/&alpha;/g,"α"),e=e.replace(/&beta;/g,"β"),e=e.replace(/&gamma;/g,"γ"),e=e.replace(/&delta;/g,"δ"),e=e.replace(/&epsilon;/g,"ε"),e=e.replace(/&zeta;/g,"ζ"),e=e.replace(/&eta;/g,"η"),e=e.replace(/&theta;/g,"θ"),e=e.replace(/&iota;/g,"ι"),e=e.replace(/&kappa;/g,"κ"),e=e.replace(/&lambda;/g,"λ"),e=e.replace(/&mu;/g,"μ"),e=e.replace(/&nu;/g,"ν"),e=e.replace(/&xi;/g,"ξ"),e=e.replace(/&omicron;/g,"ο"),e=e.replace(/&pi;/g,"π"),e=e.replace(/&rho;/g,"ρ"),e=e.replace(/&sigmaf;/g,"ς"),e=e.replace(/&sigma;/g,"σ"),e=e.replace(/&tau;/g,"τ"),e=e.replace(/&upsilon;/g,"υ"),e=e.replace(/&phi;/g,"φ"),e=e.replace(/&chi;/g,"χ"),e=e.replace(/&psi;/g,"ψ"),e=e.replace(/&omega;/g,"ω"),e=e.replace(/&thetasym;/g,"ϑ"),e=e.replace(/&upsih;/g,"ϒ"),e=e.replace(/&piv;/g,"ϖ"),e=e.replace(/&middot;/g,"·")}function r(e){return e=e.replace(/&nbsp;/g," "),e=e.replace(/&quot;/g,"'"),e=e.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&#8226;/g,"•")}function l(e){return e=e.replace(/&OElig;/g,"Œ"),e=e.replace(/&oelig;/g,"œ"),e=e.replace(/&Scaron;/g,"Š"),e=e.replace(/&scaron;/g,"š"),e=e.replace(/&Yuml;/g,"Ÿ"),e=e.replace(/&fnof;/g,"ƒ"),e=e.replace(/&circ;/g,"ˆ"),e=e.replace(/&tilde;/g,"˜"),e=e.replace(/&ensp;/g,""),e=e.replace(/&emsp;/g,""),e=e.replace(/&thinsp;/g,""),e=e.replace(/&zwnj;/g,""),e=e.replace(/&zwj;/g,""),e=e.replace(/&lrm;/g,""),e=e.replace(/&rlm;/g,""),e=e.replace(/&ndash;/g,"–"),e=e.replace(/&mdash;/g,"—"),e=e.replace(/&lsquo;/g,"‘"),e=e.replace(/&rsquo;/g,"’"),e=e.replace(/&sbquo;/g,"‚"),e=e.replace(/&ldquo;/g,"“"),e=e.replace(/&rdquo;/g,"”"),e=e.replace(/&bdquo;/g,"„"),e=e.replace(/&dagger;/g,"†"),e=e.replace(/&Dagger;/g,"‡"),e=e.replace(/&bull;/g,"•"),e=e.replace(/&hellip;/g,"…"),e=e.replace(/&permil;/g,"‰"),e=e.replace(/&prime;/g,"′"),e=e.replace(/&Prime;/g,"″"),e=e.replace(/&lsaquo;/g,"‹"),e=e.replace(/&rsaquo;/g,"›"),e=e.replace(/&oline;/g,"‾"),e=e.replace(/&euro;/g,"€"),e=e.replace(/&trade;/g,"™"),e=e.replace(/&larr;/g,"←"),e=e.replace(/&uarr;/g,"↑"),e=e.replace(/&rarr;/g,"→"),e=e.replace(/&darr;/g,"↓"),e=e.replace(/&harr;/g,"↔"),e=e.replace(/&crarr;/g,"↵"),e=e.replace(/&lceil;/g,"⌈"),e=e.replace(/&rceil;/g,"⌉"),e=e.replace(/&lfloor;/g,"⌊"),e=e.replace(/&rfloor;/g,"⌋"),e=e.replace(/&loz;/g,"◊"),e=e.replace(/&spades;/g,"♠"),e=e.replace(/&clubs;/g,"♣"),e=e.replace(/&hearts;/g,"♥"),e=e.replace(/&diams;/g,"♦"),e=e.replace(/&#39;/g,"'")}function p(e){return e=e.replace(/\r\n/g,""),e=e.replace(/\n/g,""),e=e.replace(/code/g,"wxxxcode-style")}module.exports={strDiscode:function(c){return c=e(c),c=a(c),c=r(c),c=l(c),c=p(c)},urlToHttpUrl:function(e,a){return new RegExp("^//").test(e)&&(e=a+":"+e),e}}; 
 			}); 
		define("wxParse/wxParse.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function a(e){var t=this,a=e.target.dataset.src,i=e.target.dataset.from;void 0!==i&&i.length>0&&wx.previewImage({current:a,urls:t.data[i].imageUrls})}function i(e){var t=this,a=e.target.dataset.from,i=e.target.dataset.idx;void 0!==a&&a.length>0&&r(e,i,t,a)}function r(e,a,i,r){var d,o=i.data[r];if(o&&0!=o.images.length){var s=o.images,l=n(e.detail.width,e.detail.height,i,r),g=s[a].index,h=""+r,m=!0,u=!1,v=void 0;try{for(var f,w=g.split(".")[Symbol.iterator]();!(m=(f=w.next()).done);m=!0)h+=".nodes["+f.value+"]"}catch(e){u=!0,v=e}finally{try{!m&&w.return&&w.return()}finally{if(u)throw v}}var c=h+".width",x=h+".height";i.setData((d={},t(d,c,l.imageWidth),t(d,x,l.imageheight),d))}}function n(e,t,a,i){var r=0,n=0,d=0,o={},g=a.data[i].view.imagePadding;return r=s-2*g,l,e>r?(d=(n=r)*t/e,o.imageWidth=n,o.imageheight=d):(o.imageWidth=e,o.imageheight=t),o}var d=e(require("./showdown.js")),o=e(require("./html2json.js")),s=0,l=0;wx.getSystemInfo({success:function(e){s=e.windowWidth,l=e.windowHeight}}),module.exports={wxParse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wxParseData",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'<div class="color:red;">数据不能为空</div>',n=arguments[3],s=arguments[4],l=n,g={};if("html"==t)g=o.default.html2json(r,e);else if("md"==t||"markdown"==t){var h=(new d.default.Converter).makeHtml(r);g=o.default.html2json(h,e)}g.view={},g.view.imagePadding=0,void 0!==s&&(g.view.imagePadding=s);var m={};m[e]=g,l.setData(m),l.wxParseImgLoad=i,l.wxParseImgTap=a},wxParseTemArray:function(e,t,a,i){for(var r=[],n=i.data,d=null,o=0;o<a;o++){var s=n[t+o].nodes;r.push(s)}e=e||"wxParseTemArray",(d=JSON.parse('{"'+e+'":""}'))[e]=r,i.setData(d)},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",a=arguments[2];o.default.emojisInit(e,t,a)}}; 
 			}); 
		define("app.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var o=require("./lib/mta_analysis");App({onLaunch:function(e){console.log("[App onLaunch] options: ",e),o.App.init({appID:"500448841",eventID:"500465522"}),e.query.env&&"gamma"==e.query.env&&(console.log("true"),this.globalData.isGamma=!0),console.log("globalData: ",this.globalData)},onShow:function(o){console.log("[app onShow] options: ",o),o.scene&&1055==o.scene&&(console.log("scene:1055 删除sid"),wx.removeStorageSync("sid"),wx.removeStorageSync("sid_time"))},onError:function(o){console.log("[app.js onError] res: ",o)},getUserInfo:function(o){},globalData:{userInfo:null,loading:!1,isGamma:!1,data:{name:"微信买单小程序",version:"2017.12.28.19"},platform:"wxwork"===wx.getSystemInfoSync().environment?"wxwork":"wx",mall:{list:[],material_freight:0,invoice_freight:0,free_freight_fee:0,materialList:[]}}}); 
 			}); 	require("app.js");
 		__wxRoute = 'pages/entry/index';__wxRouteBegin = true; 	define("pages/entry/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t,a=e(require("../../login")),o=e(require("../../lib/util")),r=e(require("../../lib/request")),i=e(require("../../lib/wechat")),n=(e(require("../receipt/pos_order")),require("../../lib/mta_analysis")),s="",d=!1,l=!1,c="wxwork"!=getApp().globalData.platform;Page({data:{setText:"设置",mch_name:"",clerk_name:"",is_supervisor:!1,operaClass:"cell",showNewOrder:"display:none;",total_fee:"0.00",deal_count:0,order:{},showPromotion:!1,showMchSettle:!1,showSettleList:!1,showReward:!1,showMicropay:!1,showSum:!0,showTopBanner:!1,topBannerTxt:"",version:"",showHb:!1},closeHbDialog:function(){this.setData({showHb:!1})},clickTopBanner:function(){var e=this,t=t||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/redpoint/click";wx.navigateTo({url:"/pages/guide/01/detail"}),(0,r.default)({url:a,data:{sid:t,rid:"MoreHomePageTopTips",v:e.data.version},showLoading:!1,success:function(r){var i=r.data;0==i.errcode?e.setData({showTopBanner:!1,topBannerTxt:""}):o.default.report(a,t,i)},fail:function(){}})},getRedPointList:function(){var e=this,t=t||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/redpoint/list";(0,r.default)({url:a,data:{sid:t},showLoading:!1,success:function(r){var i=r.data;if(0==i.errcode){var n=i.data;if(n.length>0)for(var s=0;s<n.length;s++)if("MoreHomePageTopTips"==n[s].redpoint_id){e.setData({showTopBanner:c,topBannerTxt:n[s].optional_visual_params,version:n[s].version});break}}else o.default.report(a,t,i)},fail:function(){}})},getData:function(){var e=this,t=t||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/manage/home";(0,r.default)({url:a,data:{sid:t},showLoading:!1,success:function(r){var i=r.data;if(console.log("[entry/index] home:",i),0==i.errcode){var n=i.data;e.initData(n)}else wx.showModal({title:"提示",content:i.msg||"",showCancel:!1}),o.default.report(a,t,i)}})},initData:function(e){var t=this,a=e.extended_features,o=wx.getStorageSync("is_supervisor"),r="设置",s=!1,d=!1,u=!1,g=!1;if(t.setData({mch_name:e.mch_name,clerk_name:e.clerk_name,is_supervisor:e.emp_is_supervisor}),i.default.setStorage("is_supervisor",e.emp_is_supervisor).then().catch(function(){n.Event.stat("errCode",{msg:"entry_index_setStorage_issuper_fail"})}),i.default.setStorage("receive_notify",e.receive_notify).then().catch(function(){n.Event.stat("errCode",{msg:"entry_index_setStorage_receive_fail"})}),i.default.setStorage("single_channel_openstate",e.single_channel_openstate),"is_wework_merchant"in e&&i.default.setStorage("is_wework_merchant",e.is_wework_merchant),wx.setStorage({key:"username",data:e.username||"",fail:function(e){n.Event.stat("errCode",{msg:"entry_index_setStorage_username_fail"})}}),void 0===a)return!1;if(o){var f=new Date("2017-07-01").getTime(),_=e.boss_time_created||"";r="管理与设置",(a.indexOf("mch_settle")>-1||_-f>0)&&(d=!0),a.indexOf("owner_promotion")>-1&&(s=!0),a.indexOf("settle_list")>-1&&(u=!0)}a.indexOf("refund")>-1&&i.default.setStorage("refund","1"),a.indexOf("micropay")>-1&&(g=!0),a.indexOf("zzsv2_report_start")>-1&&i.default.setStorage("zzsv2_report_start","1"),t.setData({setText:r,showMchSettle:d,showPromotion:s&&c,showSettleList:u,showMicropay:g,showApply:c}),console.log(this.data),this.checkActClerkHb(),this.getHbData(),a.indexOf("get_order_interval")>-1&&(l=!0),t.stopPoll(),t.poll()},getSum:function(){var e=this,t=t||wx.getStorageSync("sid"),a=o.default.getFormatDate(new Date),i="https://payapp.weixin.qq.com/mdmgr/order/querydatestat";(0,r.default)({url:i,data:{sid:t,from_date_on:a,end_date:a,page_size:0},showLoading:!1,success:function(r){var n=r.data;if(0==n.errcode){if(n.data.sum_list.length>0){var s=n.data.sum_list[0];s.date==a&&e.setData({date:a,total_fee:o.default.formatFee(s.total_fee),deal_count:s.deal_count})}}else"4294967295"==n.errcode?e.setData({showSum:!1}):wx.showModal({title:"提示",content:n.msg||"",showCancel:!1}),o.default.report(i,t,n)}})},checkActClerkHb:function(){var e=this,t=t||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/acthongbao/whileorderhb";(0,r.default)({url:a,data:{sid:t},showLoading:!1,success:function(r){var i=r.data;0==i.errcode?i.data.iswhile&&c&&e.setData({showReward:!0}):o.default.report(a,t,i)}})},getHbData:function(){var e=this,t=t||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/acthongbao/getorderhb";(0,r.default)({url:a,data:{sid:t},showLoading:!1,success:function(r){var i=r.data;if(0==i.errcode){var n=i.data;n.no_open_packet&&n.no_open_packet.length>0&&e.setData({showHb:!0})}else o.default.report(a,t,i)}})},goRecordDetail:function(){i.default.setStorage("new_order_taped","1"),this.setData({showNewOrder:"display:none;"}),wx.navigateTo({url:"../record/detail?out_trade_no="+this.data.order.out_trade_no})},handleTap:function(e){var t=this,a=a||wx.getStorageSync("sid");if("market"==e.currentTarget.dataset.index&&wx.navigateToMiniProgram){var i="https://payapp.weixin.qq.com/mdmgr/promotion/getsession";(0,r.default)({url:i,data:{sid:a},success:function(e){var r=e.data;0==r.errcode?t.toMpCardWeApp(r.data):(wx.showModal({title:"提示",content:r.msg||""}),o.default.report(i,a,r))}})}else wx.navigateTo({url:"../setting/redirect?type=market&title=营销优惠"})},toMpCardWeApp:function(e){if(!e)return!1;var t=o.default.getQuery("session_key",e.url),a=o.default.getQuery("admin_id",e.url);console.log("session_key: "+t+", admin_id: "+a),wx.navigateToMiniProgram({appId:"wxde8cfd96bdf01892",extraData:{session_key:t,admin_id:a,mch_id:wx.getStorageSync("mch_id")||""},success:function(e){},fail:function(e){o.default.mtaErrReport({msg:"navigateToMiniProgram:"+e})}})},dealOrderData:function(e){var t=this,a="display:none;";if(!e||!e.orders||0==e.orders.length)return!1;var r=e.orders[0];r.total_fee=o.default.formatFee(r.total_fee),r.time=new Date(1e3*r.time_end).Format("yyyy-MM-dd hh:mm:ss"),r.buyer_headimgurl=r.buyer_headimgurl?r.buyer_headimgurl+"/96":"";var n=e.orders[0].out_trade_no||"",s=wx.getStorageSync("out_trade_no")||"",d=(new Date).getTime();if(""==s)i.default.setStorage("new_order_time",r.time_end),i.default.setStorage("out_trade_no",n),i.default.setStorage("new_order_taped","0"),a="display:none;";else if(n==s){var l=wx.getStorageSync("new_order_time")||"",c=wx.getStorageSync("new_order_taped")||"0";a=l&&d-1e3*l>36e5||"1"==c?"display:none;":"display:block;"}else t.getSum(),i.default.setStorage("new_order_time",r.time_end),i.default.setStorage("out_trade_no",n),i.default.setStorage("new_order_taped","0"),a=d-1e3*r.time_end>36e5?"display:none;":"display:block;";this.setData({showNewOrder:a,order:r})},getOrderList:function(){var e=this,t="https://payapp.weixin.qq.com/mdmgr/order/list",a=a||wx.getStorageSync("sid");(0,r.default)({url:t,data:{sid:a,page_size:1,from_date_on:0,shop_id:0},showLoading:!1,success:function(r){var i=r.data;0==i.errcode?e.dealOrderData(i.data):(e.stopPoll(),o.default.report(t,a,i))},fail:function(){}})},poll:function(){var e=this;if(!l)return!1;t=setInterval(function(){e.getOrderList()},5e3)},stopPoll:function(){t=clearInterval(t)},init:function(e){function t(){a.getData(),a.getSum(),a.getOrderList(),a.getRedPointList()}var a=this;e&&e.sid?(s=e.sid,t()):wx.getStorage({key:"sid",success:function(e){s=e.data,t()},fail:function(){n.Event.stat("errCode",{msg:"entry_getStorage_sid_fail"})}})},onShow:function(){var e=this;if(d)return!1;console.log("[entry/index] onShow. 后台切到前台，重新获取数据"),a.default.checkLogin(e.init),d=!1},onHide:function(){d=!1,this.stopPoll(),l=!1},onError:function(){d=!1,this.stopPoll(),l=!1},onUnload:function(){d=!1,this.stopPoll(),l=!1},onLoad:function(e){n.Page.init(),e.mch_id?a.default.checkLogin(this.init,e.mch_id):a.default.checkLogin(this.init),d=!0},onPullDownRefresh:function(){var e=this;e.getData(),e.getSum(),e.getOrderList(),wx.stopPullDownRefresh()}}); 
 			}); 	require("pages/entry/index.js");
 		__wxRoute = 'pages/record/index';__wxRouteBegin = true; 	define("pages/record/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login")),a=t(require("../../lib/util")),i=t(require("../../lib/wechat")),s=t(require("../../lib/request")),o=require("../../lib/mta_analysis"),r="",n=!1,d=!1,l=wx.getSystemInfoSync().windowWidth/750,h=Math.floor(102*l),c=Math.floor(154*l);Page({data:{is_supervisor:!1,single_channel_openstate:!1,clerk_emp_id:0,pageFail:{isShow:!1,text:""},isLoading:!0,selectedObj:{shop_id:0,shop_name:"全部门店",emp_id:0,clerk_name:""},shops:{value:0,list:[],objectList:[]},list:{page_number:0,page_size:20,shop_id:0,emp_id:0,from_date_on:0,shop_name:"全部门店",clerk_name:"",value:[]},showPicker:!1,showPickerDialog:!1,showNoMore:!1,toView:"",fix:-1,topfix:!0},findShopName:function(t){for(var e="",a=0;a<this.data.shops.objectList.length;a++)if(this.data.shops.objectList[a].shop_id==t){e=this.data.shops.objectList[a].shop_name;break}return e},bindPickerChange:function(t){console.log("[record] 门店切换 value: ",t.detail.value);var e=this.data.shops,a=this.data.list;e.value=t.detail.value,a.from_date_on=0,a.shop_id=this.data.shops.objectList[t.detail.value].shop_id,this.setData({shops:e,list:a,isLoading:!0}),this.getOrderList()},selectShop:function(t){var e=this,a=t.currentTarget.dataset.id,i=this.data.shops,s=i.objectList,o=this.data.selectedObj,r=this.data.list,n={},d=!1;o.shop_id=a,r.from_date_on=0;for(var l=0;l<s.length;l++)(n=s[l]).shop_id==a?(n.emp_id&&0!=n.emp_id&&r.emp_id==n.emp_id&&r.shop_id==a?(o.emp_id=n.emp_id,o.clerk_name=n.clerk_name,n.state=3,d=!0):(n.state=1,o.emp_id=0,o.clerk_name=""),o.shop_name=n.shop_name):(2==n.state&&setTimeout(function(){e.setData({toView:"id-"+o.shop_id})},300),n.state=0);this.setData({shops:i,selectedObj:o,dataList:r}),console.log("参数：",this.data),this.getClerkList(function(t){for(var o=0;o<s.length;o++)(n=s[o]).shop_id==a&&(n.clerks&&d||(n.clerks=t.clerks));e.setData({shops:i})})},openClerkPicker:function(t){for(var e=t.currentTarget.dataset.id,a=this.data.shops,i=a.objectList,s={},o=0;o<i.length;o++)(s=i[o]).shop_id==e?s.state=2:s.state=0;this.setData({shops:a})},selectClerk:function(t){var e=t.currentTarget.dataset.id,a=this.data.shops,i=a.objectList,s=this.data.selectedObj,o=this.data.list,r={},n=[];o.from_date_on=0;for(var d=0;d<i.length;d++)if(i[d].shop_id==s.shop_id){n=(r=i[d]).clerks;break}for(var l=0;l<n.length;l++)e==n[l].emp_id?n[l].selected?(n[l].selected=!1,s.clerk_name="",s.emp_id=0,r.emp_id=0,r.clerk_name=""):(n[l].selected=!0,s.clerk_name=n[l].clerk_name,s.emp_id=e,r.emp_id=e,r.clerk_name=n[l].clerk_name):n[l].selected=!1;this.setData({shops:a,selectedObj:s,dataList:o})},showPickerDialog:function(){this.setData({showPickerDialog:!0,showPicker:!0})},cancel:function(){var t=this;this.setData({showPicker:!1}),setTimeout(function(){t.setData({showPickerDialog:!1})},400)},confirm:function(){for(var t=this.data.shops,e=t.objectList,a=this.data.selectedObj,i=a.shop_id,s=this.data.list,o={},r=0;r<e.length;r++)(o=e[r]).shop_id==i?"2"==o.state&&a.clerk_name?o.state="3":o.state="1":o.state=0;s=Object.assign({},s,a),this.setData({shops:t,list:s}),console.log("confirm 参数：",this.data.list),this.getOrderList(),this.cancel()},getClerkList:function(t){var e="https://payapp.weixin.qq.com/mdmgr/clerk/list",i=i||wx.getStorageSync("sid"),o=this.data.selectedObj.shop_id;(0,s.default)({url:e,data:{sid:i,shop_id:o},showLoading:!1,success:function(s){var o=s.data;0==o.errcode?t(o.data):(wx.showModal({title:"提示",content:o.msg||"",showCancel:!1}),a.default.report(e,i,o))}})},initPreData:function(t,e){for(var a=0,i=void 0,s=0;s<e.value.length;s++)(i=e.value[s]).height=h+i.list.length*c,s>0&&(i.height+=e.value[s-1].height),i.total&&i.total.date&&t[a]&&i.total.date==t[a].date&&(i.total.textDate=this.textDatePre(i.total.date),i.total.total_fee=(t[a].total_fee/100).toFixed(2),++a);return console.log("data.list: ",e),e},initPre:function(t,e,i,o){var r=this.data.pageFail,n=this,d=this.data.list,l="https://payapp.weixin.qq.com/mdmgr/order/querydatestat",h=h||wx.getStorageSync("sid");(0,s.default)({url:l,data:{sid:h,from_date_on:t,end_date:e,page_size:i,shop_id:d.shop_id,emp_id:d.emp_id},showLoading:!1,success:function(t){var e=t.data;0==e.errcode?(r.isShow=!1,n.setData({isLoading:!1,list:n.initPreData(e.data.sum_list,o),pageFail:r})):("4294967295"==e.errcode?(r.isShow=!1,n.setData({isLoading:!1,list:o,pageFail:r})):(r.isShow=!0,r.text=t.data.msg+"，请下拉刷新重试",n.setData({pageFail:r})),a.default.report(l,h,e))}})},initShopsData:function(t){var e=this.data.shops,a=void 0;e.objectList=t,e.objectList.unshift({shop_id:0,shop_name:"全部门店",state:"1",toView:"id-0"}),e.list=[];for(var i=0;i<e.objectList.length;i++)(a=e.objectList[i]).shop_id>0&&(a.state=0),e.list.push(a.shop_name);this.setData({shops:e}),(this.data.single_channel_openstate||0==e.value&&e.list.length>2)&&(c=Math.floor(184*l)),console.log("initShopData shops: ",this.data.shops)},getShops:function(){var t=this,e=this.data.pageFail,i="https://payapp.weixin.qq.com/mdmgr/shop/list",r=r||wx.getStorageSync("sid");(0,s.default)({url:i,data:{sid:r},showLoading:!1,success:function(s){var n=s.data;e.isShow=!1,0==n.errcode?(t.setData({pageFail:e}),wx.setStorage({key:"shops",data:n.data.shops,fail:function(t){o.Event.stat("errCode",{msg:JSON.stringify(t)||"record_setStorage_shops_fail"})}}),t.initShopsData(n.data.shops)):(e.isShow=!0,e.text=s.data.msg+"，请下拉刷新重试。",t.setData({pageFail:e}),a.default.mtaErrReport({cgi:a.default.getShortUrl(i)+"_code:"+n.errcode+"_sid:"+r||"",code:n.errcode,msg:a.default.getShortUrl(i)+"_"+n.msg+"_sid:"+r||""}))}})},formatDate:function(t){var e=a.default.dateDetail(t);return e.y.toString()+e.m.toString()+e.d.toString()},textDatePre:function(t){var e=a.default.dataInit(t);return e.y+"年"+e.m+"月"+e.d+"日"},textDate:function(t){var e=a.default.dateDetail(t);return e.m.toString()+"-"+e.d.toString()+" "+e.hh.toString()+":"+e.mm.toString()},initListData:function(t,e){var a=this.data.list,i=void 0,s=0,o=0,r=0;e||(a.value=[]);var n={};if(t.length>0&&a.from_date_on==t[0].time_end&&a.value.length>0)for(var d=a.value[a.value.length-1],l=d.list.length-1;l>=0;l--){var h=d.list[l];if(h.time_end!==a.from_date_on)break;n[h.out_trade_no]=!0}for(var c=0;c<t.length;c++)if(i=t[c],!n.hasOwnProperty(i.out_trade_no))if(r=i.time_end,i.textDate=this.textDate(i.time_end),i.date=this.formatDate(i.time_end),i.buyer_headimgurl=""!=i.buyer_headimgurl?i.buyer_headimgurl+"/96":"",i.before_fee=i.promotion_fee?((i.promotion_fee+i.total_fee)/100).toFixed(2):null,i.total_fee=(i.total_fee/100).toFixed(2),i.shop_name=this.findShopName(i.shop_id),i.shop_buyer_count_show="",1==i.shop_buyer_count?i.shop_buyer_count_show="首次到店":0!=i.shop_buyer_count&&(i.shop_buyer_count_show="第"+i.shop_buyer_count+"次消费"),0!=a.value.length)if(a.value[a.value.length-1].total.date==i.date)a.value[a.value.length-1].list.push(i);else{var _={total:{date:i.date,textDate:this.textDatePre(i.date)},list:[i]};a.value.push(_)}else{var p={total:{date:i.date,textDate:this.textDatePre(i.date)},unique:i.date,list:[i]};a.value.push(p)}var g=!1;if(r>0?a.from_date_on=r:g=!0,console.log("[record/index] 处理后订单数据: ",a),this.setData({isLoading:!1,list:a,showNoMore:g}),0!=a.value.length){for(l=a.value.length-1;l>=0&&!a.value[l].total.total_fee;l--)s=parseInt(a.value[l].total.date);s>0&&(o=parseInt(a.value[a.value.length-1].total.date),console.log(s,o,0),this.initPre(s,o,0,a))}},getOrderList:function(t){var e=this.data.pageFail,i=this,o=this.data.list,r="https://payapp.weixin.qq.com/mdmgr/order/list",n=n||wx.getStorageSync("sid");d||(d=!0,(0,s.default)({url:r,data:{sid:n,page_size:o.page_size,from_date_on:o.from_date_on,shop_id:o.shop_id,emp_id:o.emp_id},showLoading:!1,success:function(s){var o=s.data;e.isShow=!1,d=!1,0==o.errcode?(i.setData({showNoMore:0==o.data.orders.length||!1,pageFail:e}),i.initListData(o.data.orders,t)):(e.isShow=!0,e.text=s.data.msg+"，请下拉刷新重试",i.setData({pageFail:e}),a.default.mtaErrReport({cgi:a.default.getShortUrl(r)+"_code:"+o.errcode+"_sid:"+n||"",code:o.errcode,msg:a.default.getShortUrl(r)+"_"+o.msg+"_sid:"+n||""}))}}))},onReachBottom:function(){this.getOrderList(!0)},initMsg:function(t){function e(){s.page_size=20,s.from_date_on=0,s.emp_id=0,a.setData({list:s}),a.getShops(),a.getOrderList(),console.log("initMsg 参数 ",a.data.list),i.default.hideLoading()}var a=this,s=this.data.list;this.data.selectedObj;t&&t.sid?(r=t.sid,e()):wx.getStorage({key:"sid",success:function(t){r=t.data,e()},fail:function(t){o.Event.stat("errCode",{msg:JSON.stringify(t)||"record_getStorage_sid_fail"})}})},onLoad:function(t){console.log("[record/index] onLoad options: ",t),o.Page.init();var a=this.data.pageFail;a.isShow=!1,n=!0,this.setData({single_channel_openstate:wx.getStorageSync("single_channel_openstate"),is_supervisor:wx.getStorageSync("is_supervisor"),pageFail:a}),t.mch_id?e.default.checkLogin(this.initMsg,t.mch_id):e.default.checkLogin(this.initMsg)},onShow:function(){var t=this.data.pageFail;if(t.isShow=!1,this.setData({pageFail:t}),n)return!1;console.log("[record/index] onShow. 后台切到前台，重新获取数据，刷新列表。"),e.default.checkLogin(this.initMsg)},onHide:function(){n=!1},onError:function(){n=!1},onUnload:function(){n=!1},onPullDownRefresh:function(){console.log("下拉刷新");var t=this.data.list;t.from_date_on=0,this.setData({list:t}),this.getOrderList(),wx.stopPullDownRefresh()},onPageScroll:function(t){var e=this,a=this.data.list.value;if(t.scrollTop>0){for(var i=0;i<a.length;i++)if(t.scrollTop<a[i].height){e.setData({fix:i});break}e.data.topfix||e.setData({topfix:!0})}else e.setData({fix:-1,topfix:!1})}}); 
 			}); 	require("pages/record/index.js");
 		__wxRoute = 'pages/record/detail';__wxRouteBegin = true; 	define("pages/record/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../lib/util")),a=e(require("../../login")),i=(e(require("../../lib/wechat")),e(require("../../lib/request"))),o=require("../../lib/mta_analysis"),r="",n=getApp();Page({data:{source:"",in_refund_gray_list:!1,is_Wx:!0,isLoading:!0,isToday:!1,is_supervisor:!1,showRefundDialog:!1,refund_remark:"",refundRemark:"",isValid:!0,inputLen:"",errMsg:"",head_img:"",nick:"",has_promotion:!1,total_fee:"",all_fee:"",promotion_fee:"",trade_state:"",remark:"",categoryname:"",time_end:"",transaction_id:"",out_trade_no:"",activity_list:[]},inputHandler:function(e){var t=e.detail.value+"",a=t.length,i=/[^a-zA-Z0-9\u4e00-\u9fa5]/g,o=!1,r="";a>10?r="备注长度最大值为10":t.match(i)?r="备注只支持中文、英文字母、数字":o=!0,this.setData({errMsg:r,isValid:o,refundRemark:t,inputLen:a+"/10"})},showRefund:function(){console.log("showRefund Dialog"),this.setData({showRefundDialog:!0})},hideRefund:function(){this.setData({errMsg:"",refundRemark:"",isValid:!0,showRefundDialog:!1})},doRefund:function(){var e=this,a="https://payapp.weixin.qq.com/mdmgr/refund/orderrefund",o=o||wx.getStorageSync("sid"),r=this.data.refundRemark;if(console.log(this.data.isValid),!this.data.isValid)return!1;e.hideRefund(),(0,i.default)({url:a,data:{sid:o,out_trade_no:this.data.out_trade_no,remark:r},showLoading:!1,success:function(i){var r=i.data;0==r.errcode?(wx.showToast({title:"已发起退款",icon:"success",duration:2e3}),e.setData({trade_state:"退款中"})):(wx.showModal({title:"提示",content:r.msg||""}),t.default.report(a,o,r))}})},tradeStatus:function(e){return{SUCCESS:"支付成功",REFUNDING:"退款中",REFUND:"已退款",REFUNDCLOSE:"退款关闭",CHANGE:"退款异常",NOTPAY:"未支付",CLOSED:"已关闭",REVOKED:"已撤销",USERPAYING:"用户支付中",PAYERROR:"支付失败"}[e]},resetActivityList:function(e){e=e||[];for(var t=[],a=0;a<e.length;a++){var i=e[a];"Activity"==i.type&&(i.name.indexOf("微信买单")>=0||i.name.indexOf("新春活动")>=0||i.name.indexOf("微信支付")>=0)&&(i.fee=(i.fee/100).toFixed(2),i.name.indexOf("微信支付")>=0?(i.extend="(立减金由微信支付提供)",i.text="周周升立减活动，已为顾客立减"+i.fee+"元"):i.text="已为顾客立减"+i.fee+"元(微信官方补贴)",t.push(i))}return t},getData:function(){var e=this,a="https://payapp.weixin.qq.com/mdmgr/order/detail",o=o||wx.getStorageSync("sid");(0,i.default)({url:a,data:{sid:o,otn:this.data.out_trade_no},success:function(i){var r=i.data;if(console.log("[record/detail] order/detail",r),0==r.errcode){var n=r.data;e.initData(n)}else wx.showModal({title:"提示",content:r.msg||""}),t.default.report(a,o,r)}})},init:function(e){var t=this;e&&e.sid?(r=e.sid,t.getData()):wx.getStorage({key:"sid",success:function(e){r=e.data,t.getData()},fail:function(e){o.Event.stat("errCode",{msg:JSON.stringify(e)||"record_getStorage_sid_fail"})}})},initData:function(e){var a=this,i=e.order;i.has_promotion&&(i.all_fee=i.total_fee+i.promotion_fee,i.all_fee=t.default.formatFee(i.all_fee),i.promotion_fee=t.default.formatFee(i.promotion_fee)),a.setData({isLoading:!1,isToday:new Date(1e3*i.time_end).toDateString()==(new Date).toDateString(),head_img:i.buyer_headimgurl?i.buyer_headimgurl+"/96":"",nick:i.buyer_nick||"",total_fee:t.default.formatFee(i.total_fee)||"",has_promotion:i.has_promotion||!1,all_fee:i.all_fee||"",promotion_fee:i.promotion_fee||"",trade_state:a.tradeStatus(i.trade_state)||"",remark:i.remark||"",refund_remark:i.refund_remark||"",categoryname:i.categoryname||"",time_end:new Date(1e3*i.time_end).Format("yyyy-MM-dd hh:mm:ss"),transaction_id:i.transaction_id||"",out_trade_no:a.data.out_trade_no||"",activity_list:a.resetActivityList(e.coupon_list)}),console.log("data: ",this.data),"set"==this.data.source&&"SUCCESS"==i.trade_state&&this.showRefund()},onLoad:function(e){o.Page.init(),console.log("[record/detail] onLoad options: ",e);this.setData({inputLen:"0/10",is_supervisor:wx.getStorageSync("is_supervisor")||!1,out_trade_no:e.out_trade_no||"",source:e.source||"",in_refund_gray_list:wx.getStorageSync("refund")||!1,is_Wx:"wxwork"!==n.globalData.platform}),e.mch_id?a.default.checkLogin(this.init,e.mch_id):a.default.checkLogin(this.init)},onPullDownRefresh:function(){console.log("下拉刷新"),this.getData(),wx.stopPullDownRefresh()}}); 
 			}); 	require("pages/record/detail.js");
 		__wxRoute = 'pages/settle/list';__wxRouteBegin = true; 	define("pages/settle/list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login.js")),a=t(require("../../lib/util")),i=t(require("../../lib/request")),n=t(require("../../lib/wechat")),o=require("../../lib/mta_analysis"),s="",r="",l="";Page({data:{isLoading:!0,date:"",renderList:[],showDialog:!1,showVerifyDialog:!1,bankNo:""},showExplain:function(){this.setData({showDialog:!0})},closeExplain:function(){this.setData({showDialog:!1})},initData:function(t){function e(t){return Number(t)>1e8?"-":t>0?(t/100).toFixed(2):"0.00"}var a=[],i=void 0;if(null!=t&&t.settle_list&&(a=t.settle_list),0==a.length)return this.setData({renderList:a}),!1;this.setData({bankNo:t.bank_card_id||""});for(var n=0;n<a.length;n++)(i=a[n]).date=(i.settled_time||"").split(" ")[0],i.settlement_amount=e(i.settlement_amount),1==i.receive_amount_error?i.receive_amount="-":i.receive_amount=e(i.receive_amount),i.refund_amount=e(i.refund_amount),i.income_fee_amount=e(i.income_fee_amount);console.log("list:",a),this.setData({renderList:a})},getData:function(){var t=this;t.getInitDate(),(0,i.default)({url:"https://payapp.weixin.qq.com/mdmgr/settle/settlelist",data:{sid:s||wx.getStorageSync("sid"),start_time:r,end_time:l,page_num:1},success:function(e){console.log("[settleList] return data: ",e);var a=e.data;0==a.errcode?t.initData(a.data):"0x10040020"==a.errcode?n.default.showModal({confirmText:"我知道了",content:"你未设置微信支付密码，暂时无法查看打款记录。你可在微信钱包中绑定银行卡，或者在“微信钱包右上角-支付管理-实名中心”完成实名后设置密码。",success:function(t){t.confirm&&wx.navigateBack({delta:1})}}):wx.showModal({title:"提示",content:a.msg||"",showCancel:!1})}})},getInitDate:function(){var t=new Date;r=a.default.getFormatDate(new Date(t.getTime()-2592e6)),l=a.default.getFormatDate(new Date(t.getTime()-864e5)),console.log("start_time: ",r),console.log("end_time: ",l)},init:function(t){var e=this;t&&t.sid?(s=t.sid,e.getData()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),s=t.data,e.getData()},fail:function(){o.Event.stat("errCode",{msg:"settle_getStorage_sid_fail"})}})},onLoad:function(t){o.Page.init(),console.log("[settle/list] options: ",t),t.mch_id?e.default.checkLogin(this.init,t.mch_id):e.default.checkLogin(this.init)}}); 
 			}); 	require("pages/settle/list.js");
 		__wxRoute = 'pages/settle/detail';__wxRouteBegin = true; 	define("pages/settle/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}e(require("../../lib/util"));var t=e(require("../../login")),i=require("../../lib/mta_analysis");Page({data:{date:"",settle:"",receive:"",refund:"",income:"",bankNo:""},init:function(e){console.log(e),this.setData({date:e.date,settle:0!=e.settle?e.settle:"0.00",receive:0!=e.receive?e.receive:"0.00",refund:0!=e.refund?e.refund:"0.00",income:0!=e.income?e.income:"0.00"})},onLoad:function(e){var n=this;i.Page.init(),console.log("[settle/detail] onLoad options: ",e),this.setData({bankNo:e.bankNo||""}),e.mch_id,t.default.checkLogin(function(){n.init(e)})}}); 
 			}); 	require("pages/settle/detail.js");
 		__wxRoute = 'pages/mch/index';__wxRouteBegin = true; 	define("pages/mch/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}e(require("../../login")),e(require("../../lib/wechat"));var t=e(require("../../lib/util")),a=e(require("../../lib/request")),i=require("../../lib/mta_analysis");getApp();Page({data:{pageStatus:{status:0,text:""},isLoading:!0,value:{}},selectMch:function(e){var s=e.currentTarget.dataset.id,r=e.currentTarget.dataset.name,o=wx.getStorageSync("sid"),n="https://payapp.weixin.qq.com/mdmgr/weapp/switchmerchant";console.log(s),console.log(r),(0,a.default)({url:n,data:{mch_id:s,sid:o},success:function(e){var a=e.data;console.log("[mch/index]switchmerchant success: ",a),0==a.errcode?(wx.setStorage({key:"is_supervisor",data:a.data.is_supervisor,fail:function(){i.Event.stat("errCode",{msg:"mch_index_setStorage_fail"})}}),wx.setStorage({key:"mch_id",data:s,fail:function(){i.Event.stat("errCode",{msg:"mch_index_setStorage_fail"})}}),wx.setStorage({key:"mch_name",data:r,fail:function(){i.Event.stat("errCode",{msg:"mch_index_setStorage_fail"})}}),wx.redirectTo({url:"../entry/index"})):(wx.showModal({title:"提示",content:a.msg||""}),t.default.mtaErrReport({cgi:t.default.getShortUrl(n)+"_code:"+a.errcode+"_sid:"+o||"",code:a.errcode,msg:t.default.getShortUrl(n)+"_"+a.msg+"_sid:"+o||""}))}})},pageTopTip:function(e,t){var a=this.data.pageStatus;a.status=e,a.text=t,this.setData({pageStatus:a})},init:function(){var e=wx.getStorageSync("mchList");console.log("[mch/index] mchList: ",e),this.setData({value:e,isLoading:!1}),wx.setStorage({key:"mch_len",data:void 0!==e.mch?e.mch.length:1,fail:function(){i.Event.stat("errCode",{msg:"mch_index_setStorage_mchlen_fail"})}})},onLoad:function(e){i.Page.init(),console.log("[mch/index] onLoad options: ",e),this.init()}}); 
 			}); 	require("pages/mch/index.js");
 		__wxRoute = 'pages/mch/reg';__wxRouteBegin = true; 	define("pages/mch/reg.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}e(require("../../lib/util"));var t=e(require("../../lib/wechat")),o=require("../../lib/mta_analysis"),a="wxwork"!=getApp().globalData.platform;Page({data:{option:"",pageStatus:{status:0,text:""},isLoading:!0,value:{},showRegBtn:a,regTitle:"欢迎使用微信买单",regContent:"微信买单是由微信支付面向商户推出的免开发收款工具，你可以通过微信买单生成并管理收款码，查看交易记录，配置运营活动。"},getRegUrl:function(){wx.request({url:"https://payapp.weixin.qq.com/mdmgr/weapp/jumptoh5",data:{jump_id:5,sid:wx.getStorageSync("sid")},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(e){var o=e.data;console.log(o),t.default.hideLoading(),0==o.errcode?wx.showModal({title:"获取成功",content:"请到微信支付公众号查看功能入口",showCancel:!1,confirmText:"知道了"}):wx.showModal({title:"提示",content:o.msg||"失败",showCancel:!1})},fail:function(e){console.log(e),t.default.hideLoading(),wx.showModal({title:"提示",content:"网络繁忙，请稍候重试",showCancel:!1})}})},onLoad:function(e){o.Page.init(),console.log("[mch/reg] onLoad options: ",e),a||this.setData({regTitle:"提示",regContent:"你还不是微信买单店员，请联系管理员将你设置为微信买单店员后再使用微信买单。"})}}); 
 			}); 	require("pages/mch/reg.js");
 		__wxRoute = 'pages/activity/index';__wxRouteBegin = true; 	define("pages/activity/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var s=t(require("../../login")),i=t(require("../../lib/util")),a=t(require("../../lib/request")),e=require("../../lib/mta_analysis"),n="";Page({data:{msgList:{},isLoading:!0},formatDate:function(t){var s=i.default.dateDetail(t);return s.y+"."+s.m+"."+s.d},cutTimeString:function(t){return t.split(" ")},initActivities:function(t){t&&t.length>0&&t.reverse();var s=this.data.msgList;s.activities=t;for(var i=0;i<s.activities.length;i++)s.activities[i].activity_start_time=this.formatDate(s.activities[i].activity_begin_time),s.activities[i].activity_end_time=this.formatDate(s.activities[i].activity_end_time);this.setData({isLoading:!1,msgList:s})},initSignups:function(t){var s=this.data.msgList,i=void 0;s.signups=t;for(var a={signup_running:{text:"接受报名中",class:"status-tips status-green"},signup_over:{text:"报名结束",class:"status-tips status-gray"},running_participated:{text:"活动进行中",class:"status-tips status-green"},running_unparticipated:{text:"报名失败",class:"status-tips status-red"},aduiting:{text:"资料审核中",class:"status-tips status-yellow"},rejected:{text:"审核未通过",class:"status-tips status-red"},passed:{text:"报名成功",class:"status-tips status-green"},not_yet_started:{text:"活动未开始",class:"status-tips status-yellow"},ended:{text:"活动已结束",class:"status-tips status-gray"},canceled:{text:"活动已结束",class:"status-tips status-gray"}},e=0;e<s.signups.length;e++)(i=s.signups[e]).activity_start_time=this.formatDate(i.activity_begin_time),i.activity_end_time=this.formatDate(i.activity_end_time),a.hasOwnProperty(i.status)?(i.status_text=a[i.status].text,i.status_class=a[i.status].class):(i.status_text=i.status,i.status_class="status-tips status-red");this.setData({isLoading:!1,msgList:s}),console.log("msgList: ",this.data.msgList)},initData:function(t){this.initSignups(t.signups),this.initActivities(t.activities)},getData:function(){var t=this,s=s||wx.getStorageSync("sid"),e="https://payapp.weixin.qq.com/mdmgr/activity/list";(0,a.default)({url:e,data:{sid:s},success:function(a){var n=a.data;console.log("json: ",n),0==n.errcode?t.initData(n.data):(wx.showModal({title:"提示",content:n.msg||"",showCancel:!1}),i.default.mtaErrReport({cgi:i.default.getShortUrl(e)+"_code:"+n.errcode+"_sid:"+s||"",code:n.errcode,msg:i.default.getShortUrl(e)+"_"+n.msg+"_sid:"+s||""}))}})},init:function(t){var s=this;t&&t.sid?(n=t.sid,s.getData()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),n=t.data,s.getData()},fail:function(){e.Event.stat("errCode",{msg:"activity_getStorage_sid_fail"})}})},onLoad:function(t){e.Page.init(),t.mch_id?s.default.checkLogin(this.init,t.mch_id):s.default.checkLogin(this.init)}}); 
 			}); 	require("pages/activity/index.js");
 		__wxRoute = 'pages/activity/apply';__wxRouteBegin = true; 	define("pages/activity/apply.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../login")),i=(e(require("../../lib/util")),e(require("../../lib/request"))),a=e(require("../../lib/wechat")),o=require("../../lib/mta_analysis"),s="";Page({data:{wxAccount:"***",activity_id:"",uploaded:!1,imgPreviewUrl:"",showDialog:!1,isCompleted:!1},imgPicker:function(){var e=this;wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.setData({imgPreviewUrl:t.tempFilePaths[0],uploaded:!0}),e.checkForm(),console.log(JSON.stringify(t))},fail:function(e){console.log("uploadFile fail:",e),wx.showModal({title:"提示",content:"上传图片失败，请重新选择图片上传。",showCancel:!1})}})},removeImg:function(){this.setData({imgPreviewUrl:"",uploaded:!1}),this.checkForm()},checkForm:function(){this.data.uploaded&&this.setData({isCompleted:!0})},handleBindtapSample:function(){this.setData({showDialog:!0})},handleBindtap_closeDialog:function(){this.setData({showDialog:!1})},submit:function(){var e=this,t=t||wx.getStorageSync("sid"),i=this.data.imgPreviewUrl;wx.uploadFile({url:"https://payapp.weixin.qq.com/mdmgr/activity/enroll",filePath:i,name:"shop_raw_picture",formData:{sid:t,activity_id:e.data.activity_id},success:function(e){wx.hideLoading&&wx.hideLoading(),console.log("uploadFile success: ",e);var t=JSON.parse(e.data);console.log("json: ",t),0==t.errcode?wx.showModal({title:"提示",content:"提交成功",success:function(){wx.redirectTo({url:"./index",success:function(){},fail:function(){}})}}):wx.showModal({title:"提示",content:t.msg||"上传图片失败，请重新选择图片上传。",showCancel:!1})},fail:function(e){wx.hideLoading&&wx.hideLoading(),console.log("uploadFile fail:",e),wx.showModal({title:"提示",content:"上传图片失败，请重新选择图片上传。",showCancel:!1})}})},getData:function(){var e=this,t=wx.getStorageSync("username")||"";if(t)return this.setData({wxAccount:t}),!1;var o=o||wx.getStorageSync("sid");(0,i.default)({url:"https://payapp.weixin.qq.com/mdmgr/manage/home",data:{sid:o},success:function(t){var i=t.data;0==i.errcode&&(e.setData({wxAccount:i.data.username}),"is_wework_merchant"in data&&a.default.setStorage("is_wework_merchant",data.is_wework_merchant))}})},init:function(e){var t=this;console.log("clerks/addClerk initMsg:",e),e&&e.sid?(s=e.sid,t.getData()):wx.getStorage({key:"sid",success:function(e){console.log(e.data),s=e.data,t.getData()},fail:function(){o.Event.stat("errCode",{msg:"activityApply_getStorage_sid_fail"})}})},onLoad:function(e){o.Page.init(),console.log("onLoad"),this.setData({activity_id:e.id}),console.log(this.data),t.default.checkLogin(this.init)}}); 
 			}); 	require("pages/activity/apply.js");
 		__wxRoute = 'pages/activity/detail';__wxRouteBegin = true; 	define("pages/activity/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var a,s=t(require("../../login")),i=t(require("../../lib/util")),r=t(require("../../lib/request")),n=require("../../lib/mta_analysis"),o=require("../../wxParse/wxParse.js"),u="";Page((a={data:{isLoading:!0,activity_id:"",msg:{},zzs:{},banner_img:"",icon_img:"",remarkClass:"remark",showZZS:"0",showEnroll:!1,showRemark:!1,showMaterial:!1,materiel:[],chart:[],showReport:!1},cutTimeString:function(t){return t.split(" ")},formatDate:function(t){var e=i.default.dataInit(t);return e.m+"月"+e.d+"日"},getSummaryList:function(){var t=this,e="https://payapp.weixin.qq.com/mdmgr/actmission/weeklysummarylist",a=a||wx.getStorageSync("sid");(0,r.default)({url:e,data:{activity_id:2432257,sid:a},showLoading:!1,success:function(s){var r=s.data;0==r.errcode?0==r.data.weeklyup_list.length&&t.setData({showReport:!1}):i.default.report(e,a,r)}})}},e(a,"formatDate",function(t){var e=i.default.dateDetail(t);return e.y+"."+e.m+"."+e.d}),e(a,"goReportList",function(){1==this.data.zzs.weekmis.length?wx.navigateTo({url:"./zzs_report?seq=1"}):wx.navigateTo({url:"./reportList?activity_id="+this.data.activity_id})}),e(a,"reEnroll",function(){var t=this;wx.redirectTo({url:"./apply?id="+t.data.activity_id})}),e(a,"initChartData",function(t){for(var e=Number(t),a=this.data.zzs,s=a.weekmis,i={},r=[{},{},{},{}],n=0;n<s.length;n++)if(1==s[n].status){i=s[n];break}if(0<=e&&e<=20)0==e?(i.nextRewardFee=0,r[0].yellowTips=1):(i.nextRewardFee=30,r[0].highlight=!0,r[0].greenTips="当前在此",r[1].yellowTips=21-e),r[0].fee=30,r[0].text="1~20笔",r[1].fee=60,r[1].text="21~40笔",r[2].fee=90,r[2].text="41~60笔",r[3].fee=120,r[3].text="61~80笔";else if(21<=e&&e<=6620){var o=Math.floor(e/20);e%20==0&&o--,i.nextRewardFee=30*(o+1),r[1].highlight=!0,r[1].greenTips="当前在此",r[2].yellowTips=20*(o+1)+1-e;for(var u=0;u<4;u++)r[u].text=20*(o-1)+1+"~"+20*o+"笔",r[u].fee=30*o,o++}else 6621<=e&&e<=6660&&(6621<=e&&e<=6640?(i.nextRewardFee=9960,r[2].highlight=!0,r[2].greenTips="当前在此",r[3].yellowTips=6641-e):6641<=e&&e<=6660&&(i.nextRewardFee=9990,r[3].highlight=!0,r[3].greenTips="当前在此"),r[0].fee=9900,r[0].text="6581~6600笔",r[1].fee=9930,r[1].text="6601~6620笔",r[2].fee=9960,r[2].text="6621~6640笔",r[3].fee=9990,r[3].text="6641~6660笔");this.setData({chart:r,zzs:a}),console.log("chart: ",r)}),e(a,"initZZSv2",function(t){var e=this,a=t.weekmis||[],s={},r=void 0,n={0:"第零周",1:"第一周",2:"第二周",3:"第三周",4:"第四周"};if(0==a.length){var o=new Date,u=o.getDay(),d=0!=u?u:7,_=24*(d-1)*3600*1e3,l=24*(7-d)*3600*1e3,c=new Date(o.getTime()-_),g=new Date(o.getTime()+l),m=c.getFullYear()+""+i.default.twoFixed(c.getMonth()+1)+i.default.twoFixed(c.getDate()),h=g.getFullYear()+""+i.default.twoFixed(g.getMonth()+1)+i.default.twoFixed(g.getDate());a.push({end_time:"0",event:"1",next_task_quota:"0",reward_end_time:"19700107",reward_quota:"0",reward_start_time:"0",start_time:"0",status:"2",task_quota:"0",week_seq:"0"}),a.push({current_order_cnt:"0",end_time:h,event:"2",next_task_quota:"0",reward_end_time:"20171125",reward_quota:"0",reward_start_time:"20171119",start_time:m,status:"1",task_quota:"0",week_seq:"1"})}var f=a[a.length-1];"20171210"==f.end_time&&a.length<5&&(f.week_seq="4",f.week="最后一周"),console.log("weeks: ",a),t.signupTime=s.start_time?e.formatDate(s.start_time):"";for(var w=0;w<a.length;w++)(s=a[w]).start_time=e.formatDate(s.start_time),s.end_time=e.formatDate(s.end_time),s.week="最后一周"!=s.week?n[s.week_seq]:s.week,1==s.status&&(r=s);t.showReport=this.data.showReport,a.reverse(),this.setData({zzs:t,showZZS:"2"}),r&&this.initChartData(r.current_order_cnt),console.log("data: ",this.data)}),e(a,"initZZS",function(t){var e=this,a=t.weekmis||[],s={},i={0:"第一周",1:"第二周",2:"第三周",3:"第四周",4:"第五周"};if(a.length<=0)return!1;t.signupTime=e.formatDate(a[0].start_time);for(var r=0;r<a.length;r++)(s=a[r]).start_time=e.formatDate(s.start_time),s.end_time=e.formatDate(s.end_time),s.week=i[r],s.task_cnt=s.current_order_cnt,s.task_quota=s.task_quota,s.next_task_quota=s.next_task_quota||0,s.width="width:"+s.task_cnt/s.task_quota*100+"%"||"width:0",s.next_task_quota>s.task_quota?s.increment="(提升"+Math.round((s.next_task_quota-s.task_quota)/s.task_quota*100)+"%)":s.increment="";a.reverse(),this.setData({zzs:t,showZZS:"1"}),console.log("data: ",this.data)}),e(a,"initData",function(t){var e=this,a=t,s={signup_running:{text:"接受报名中",class:"status-tips status-green"},signup_over:{text:"报名结束",class:"status-tips status-gray"},running_participated:{text:"活动进行中",class:"status-tips status-green"},running_unparticipated:{text:"报名失败",class:"status-tips status-red"},aduiting:{text:"资料审核中",class:"status-tips status-yellow"},rejected:{text:"审核未通过",class:"status-tips status-red"},passed:{text:"报名成功",class:"status-tips status-green"},not_yet_started:{text:"活动未开始",class:"status-tips status-yellow"},ended:{text:"活动已结束",class:"status-tips status-gray"},canceled:{text:"活动已结束",class:"status-tips status-gray"}};if(s.hasOwnProperty(a.status)?(a.status_text=s[a.status].text,a.status_class=s[a.status].class):(a.status_text=a.status,a.status_class="status-tips status-red"),a.activity_start_time=this.formatDate(a.activity_begin_time),a.activity_end_time=this.formatDate(a.activity_end_time),a.sign_up_start_time=this.formatDate(a.sign_up_begin_time),a.sign_up_end_time=this.formatDate(a.sign_up_end_time),console.log("d: ",a),void 0!==a.extra_conf){var i=a.extra_conf.explain||"",r=a.extra_conf.material||"",n=a.extra_conf.remark||"",u=!1,d=!1;if(a.extra_conf.banner_img&&e.setData({banner_img:a.extra_conf.banner_img,icon_img:a.extra_conf.icon_img}),i){var _=this;o.wxParse("explain","html",i,_,0)}if(n){var l=this;a.name.indexOf("周周升")>-1?"running_participated"!=a.status&&(u=!0):(o.wxParse("remark","html",n,l,0),"rejected"!=a.status&&"signup_running"!=a.status&&e.setData({remarkClass:"remark2"}),u=!0)}if(r){var c=this;o.wxParse("material","html",r,c,0),d=!0}this.setData({showRemark:u,showMaterial:d})}this.setData({isLoading:!1,msg:a}),t.mission&&("2260146"==this.data.activity_id?e.initZZS(JSON.parse(t.mission)):e.initZZSv2(JSON.parse(t.mission)))}),e(a,"getData",function(){var t=this,e=e||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/activity/status";(0,r.default)({url:a,data:{sid:e,activity_id:t.data.activity_id},success:function(s){var r=s.data;0==r.errcode?t.initData(r.data):(wx.showModal({title:"提示",content:r.msg||"",showCancel:!1}),i.default.mtaErrReport({cgi:i.default.getShortUrl(a)+"_code:"+r.errcode+"_sid:"+e||"",code:r.errcode,msg:i.default.getShortUrl(a)+"_"+r.msg+"_sid:"+e||""}))}})}),e(a,"init",function(t){var e=this;t&&t.sid?(u=t.sid,e.getSummaryList(),e.getData()):wx.getStorage({key:"sid",success:function(t){u=t.data,e.getSummaryList(),e.getData()},fail:function(){n.Event.stat("errCode",{msg:"activity_getStorage_sid_fail"})}})}),e(a,"onLoad",function(t){n.Page.init(),console.log("[activity/detail] onLoad options: "+JSON.stringify(t)),this.setData({activity_id:t.activity_id,showReport:"1"==wx.getStorageSync("zzsv2_report_start")}),t.mch_id?s.default.checkLogin(this.init,t.mch_id):s.default.checkLogin(this.init)}),a)); 
 			}); 	require("pages/activity/detail.js");
 		__wxRoute = 'pages/activity/zzs_report';__wxRouteBegin = true; 	define("pages/activity/zzs_report.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login")),a=t(require("../../lib/util")),i=t(require("../../lib/request")),n=t(require("../../lib/wechat")),o=require("../../lib/mta_analysis"),d=require("../../lib/wxcharts.js"),s="",r=null;Page({data:{isLoading:!0,seq:"1",mch_name:"",week:"",activity_time:"",trade_total:"",coupon_trade_total:"",coupon_minus_fee:"",isFinish:!1,cur_task:"",percentage:"",level:"",next_task:"",task2_add_percentage:"",task3_add_percentage:"",weekStr1:"",weekStr2:"",isLast:!1},initData:function(t){var e={1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"};console.log(t);for(var i=this,n=void 0,o=a.default.dataInit(t.activity_signup),d=a.default.dataInit(t.activity_begin),s=a.default.dataInit(t.activity_end),r=void 0,l=void 0,_=void 0,c=void 0,u=0;u<t.weeklyup_list.length;u++)if(t.weeklyup_list[u].week_seq==i.data.seq){n=t.weeklyup_list[u];break}var g=a.default.dataInit(n.start_date),m=a.default.dataInit(n.end_date),k=e[n.week_seq],p=e[n.week_seq+1]||"",f="【第"+k+"周】"+g.m+"月"+g.d+"日-"+m.m+"月"+m.d+"日",v="你于"+o.y+"年"+o.m+"月"+o.d+"日报名微信买单周周升立减活动，活动时间为"+d.y+"."+d.m+"."+d.d+"至"+s.y+"."+s.m+"."+s.d+"。";r=n.level1_coupon_trade_total>0?"上周享受立减1元共"+n.level1_coupon_trade_total+"笔":"",l=n.level2_coupon_trade_total>0?"，享受立减10元共"+n.level2_coupon_trade_total+"笔":"",_=n.level3_coupon_trade_total>0?"，享受立减100元共"+n.level3_coupon_trade_total+"笔":"",c=s==m,this.setData({mch_name:t.mch_name,week:f,activity_time:v,trade_total:n.trade_total,coupon_trade_total:n.coupon_trade_total,percentage:Math.round(n.coupon_trade_total/n.trade_total*100),coupon_minus_fee:(n.coupon_minus_fee/100).toFixed(2),level:r+l+_,task2_add_percentage:Math.round((n.next_task-n.cur_task)/n.cur_task*100)+"%"||"",task3_add_percentage:Math.round((n.aft_next_task-n.next_task)/n.next_task*100)+"%"||"",weekStr1:k,weekStr2:p,cur_task:n.cur_task,next_task:n.next_task,isLast:c,isLoading:!1}),console.log("data: ",this.data),this.paintRing({num1:n.coupon_trade_total,num2:n.trade_total-n.coupon_trade_total})},getData:function(){var t=this,e="https://payapp.weixin.qq.com/mdmgr/actmission/weeklysummarylist",o=o||wx.getStorageSync("sid");(0,i.default)({url:e,data:{activity_id:2432257,sid:o},success:function(i){var d=i.data;0==d.errcode?t.initData(d.data):(n.default.showModal({title:"提示",content:d.msg||""}),a.default.report(e,o,d))}})},paintRing:function(t){var e=320;try{e=wx.getSystemInfoSync().windowWidth}catch(t){console.error("getSystemInfoSync failed!")}(r=new d({animation:!1,canvasId:"ringCanvas",type:"ring",disablePieStroke:!0,width:e-130,height:210,dataLabel:!0,legend:!0,padding:0,extra:{ringWidth:12,pie:{offsetAngle:-90}},series:[{name:t.num2+"笔未享受立减",data:t.num2,stroke:!1,color:"#97d6a8"},{name:t.num1+"笔享受立减",data:t.num1,stroke:!1,color:"#52BB6E"}]})).addEventListener("renderComplete",function(){console.log("renderComplete")})},init:function(t){var e=this;console.log("clerks/addClerk initMsg:",t),t&&t.sid?(s=t.sid,e.getData()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),s=t.data,e.getData()},fail:function(){o.Event.stat("errCode",{msg:"actzzsreport_getStorage_sid_fail"})}})},onLoad:function(t){o.Page.init(),this.setData({seq:t.seq||"1"}),wx.setNavigationBarTitle({title:"活动效果分析"}),t.mch_id?e.default.checkLogin(this.init,t.mch_id):e.default.checkLogin(this.init)}}); 
 			}); 	require("pages/activity/zzs_report.js");
 		__wxRoute = 'pages/activity/reportList';__wxRouteBegin = true; 	define("pages/activity/reportList.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var i=t(require("../../login")),a=t(require("../../lib/util")),e=t(require("../../lib/request")),s=require("../../lib/mta_analysis"),n="";Page({data:{isLoading:!0,activity_id:"",list:[]},formatDate:function(t){var i=a.default.dateDetail(t);return i.y+"."+i.m+"."+i.d},initData:function(t){function i(t){var i=a.default.dataInit(t);return i.m+"月"+i.d+"日"}for(var e={1:"第一周",2:"第二周",3:"第三周",4:"第四周",5:"第五周",6:"第六周"},s=void 0,n=t.weeklyup_list,d=0;d<n.length;d++)(s=n[d]).start_date=i(s.start_date),s.end_date=i(s.end_date),s.week=e[s.week_seq];this.setData({list:n,isLoading:!1}),console.log("data: ",this.data)},getData:function(){var t=this,i="https://payapp.weixin.qq.com/mdmgr/actmission/weeklysummarylist",s=s||wx.getStorageSync("sid");(0,e.default)({url:i,data:{activity_id:2432257,sid:s},success:function(e){var n=e.data;0==n.errcode?1==n.data.weeklyup_list.length?wx.redirectTo({url:"./zzs_report?seq=1"}):t.initData(n.data):(wechat.showModal({title:"提示",content:n.msg||""}),a.default.report(i,s,n))}})},init:function(t){var i=this;t&&t.sid?(n=t.sid,i.getData()):wx.getStorage({key:"sid",success:function(t){n=t.data,i.getData()},fail:function(){s.Event.stat("errCode",{msg:"activity_getStorage_sid_fail"})}})},onLoad:function(t){s.Page.init(),console.log("[activity/reportList]"),this.setData({activity_id:t.activity_id}),wx.setNavigationBarTitle({title:"活动效果"}),t.mch_id?i.default.checkLogin(this.init,t.mch_id):i.default.checkLogin(this.init)}}); 
 			}); 	require("pages/activity/reportList.js");
 		__wxRoute = 'pages/dayReport/index';__wxRouteBegin = true; 	define("pages/dayReport/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var a=t(require("../../login.js")),e=t(require("../../lib/util")),i=t(require("../../lib/request")),r=require("../../lib/mta_analysis"),o=require("../../widgets/charts/date"),s=require("../../widgets/charts/bar-chart"),n=require("../../widgets/charts/pile-bar-chart"),d="",h=!1;Page({data:{isLoading:!0,date:"",weekDate:"",monthDate:"",type:"day",change:"false",list:[],pageFail:{isShow:!1,text:""},model:"list",chartUnit:"total_fee",dayCount:7,topLabel:!1,topTipsDate:"",topTipsValue:"",topTipsNewCustomer:"",topTipsOldCustomer:""},params:{todayTimeStamp:0},getPreMonthDate:function(t){var a=e.default.dataInit(t||e.default.getFormatDate()),i=new Date(a.y+"-"+a.m+"-"+a.d).getTime(),r=new Date(i).getDate(),o=new Date(i-864e5*r);return e.default.getFormatDate(o)},getPreWeekDate:function(t){var a=e.default.dataInit(t||e.default.getFormatDate()),i=new Date(a.y+"-"+a.m+"-"+a.d).getTime(),r=new Date(i).getDay(),o=new Date(i-864e5*r);return e.default.getFormatDate(o)},getRenderDate:function(t,a){var i=e.default.dataInit(t),r=this.data.type,o=void 0;if("day"==r)o=i.y+"年"+Number(i.m)+"月"+Number(i.d)+"日";else if("week"==r){var s=e.default.dataInit(a);o=i.y==s.y?i.y+"年"+Number(i.m)+"月"+Number(i.d)+"日 - "+Number(s.m)+"月"+Number(s.d)+"日":i.y+"年"+Number(i.m)+"月"+Number(i.d)+"日 - "+s.y+"年"+Number(s.m)+"月"+Number(s.d)+"日"}else o=i.y+"年"+Number(i.m)+"月";return o},formatData:function(t){var a=this.data.list||[],e=this.data.type,i=void 0,r=void 0,o=[];if(t.length<1)return this.setData({isLoading:!1}),!1;for(var s=0;s<t.length;s++)r=(i=t[s]).start_date||i.date,i.dateFormat="week"==e?this.getRenderDate(i.start_date.toString(),i.end_date.toString()):this.getRenderDate(r.toString()),i.total_fee=(i.total_fee/100).toFixed(2),i.avr_fee=(i.avr_fee/100).toFixed(2),i.timestamp=1e3*i.timestamp,o.push(i);this.data.change&&(a=[]),o.length>0&&a.length>0&&o[0].dateFormat==a[a.length-1].dateFormat&&o.splice(0,1),o=o.slice(0),a=a.concat(o),console.log("[dayReport] list:",a),this.setData({change:!1,isLoading:!1,list:a})},getData:function(t){var a=this,r=r||wx.getStorageSync("sid"),o=this.data.date?this.data.date:e.default.getFormatDate(),s=this.data.type,n="https://payapp.weixin.qq.com/mdmgr/order/getdaysumlist",d=30;"week"==s?(n="https://payapp.weixin.qq.com/mdmgr/order/getweeksum",o=this.data.weekDate,d=12):"month"==s&&(n="https://payapp.weixin.qq.com/mdmgr/order/getmonthsum",o=this.data.monthDate,d=12),(0,i.default)({url:n,data:{sid:r,from_date_on:o,page_size:d},showLoading:!1,success:function(i){var o=i.data;0==o.errcode?(a.formatData(o.data.sum_list),a.modifyStartDate(o.data.sum_list),"function"==typeof t&&t()):(wx.showModal({title:"提示",content:o.msg||"",showCancel:!1}),e.default.mtaErrReport({cgi:e.default.getShortUrl(n)+"_code:"+o.errcode+"_sid:"+r||"",code:o.errcode,msg:e.default.getShortUrl(n)+"_"+o.msg+"_sid:"+r||""}))}})},modifyStartDate:function(t){var a=this.data.type,e=void 0,i=t.length||0;if(i<=0)return!1;"day"==a?(e=t[i-1].date,this.setData({date:e})):"week"==a?(console.log(t[i-1]),e=this.getPreWeekDate(t[i-1].start_date.toString()),this.setData({weekDate:e})):(e=this.getPreMonthDate(t[i-1].start_date.toString()),this.setData({monthDate:e})),console.log("参数更新：",this.data)},onReachBottom:function(){this.getData()},handleBindTap:function(t){var a=t.currentTarget.dataset.id;if(a==this.data.type)return!1;this.setData({type:a}),console.log("type 改变: ",this.data.type),this.changeType()},changeType:function(){var t=this;this.setData({change:!0,date:e.default.getFormatDate(),weekDate:this.getPreWeekDate(),monthDate:this.getPreMonthDate()}),this.getData(function(){t.initChart()})},init:function(t){var a=this;console.log("record/index initMsg:",t),t&&t.sid?(d=t.sid,a.getData()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),d=t.data,a.getData()},fail:function(){r.Event.stat("errCode",{msg:"dayReportindex_getStorage_sid_fail"})}})},onHide:function(){h=!1},onError:function(){h=!1},onUnload:function(){h=!1},onShow:function(){var t=this;if(h)return!1;console.log("[dayReport/index] onShow. 后台切到前台，重新获取数据"),a.default.checkLogin(t.getData),h=!1},onLoad:function(t){r.Page.init(),console.log("[dayReport/index] options: ",t),this.setData({weekDate:this.getPreWeekDate(),monthDate:this.getPreMonthDate()}),t.mch_id?a.default.checkLogin(this.getData,t.mch_id):a.default.checkLogin(this.getData),this.params.todayTimeStamp=new Date((new Date).getFullYear()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getDate()+" 00:00:00").getTime()},bindtouchstart:function(t){this.barchart.touch(t)},bindtouchmove:function(t){this.barchart.move(t)},bindtouchend:function(t){var a=this,e=this.barchart.touchEnd(t);if(!e)return!1;if(!1===e.active)this.setData({topLabel:!1});else if("total_customer"==this.data.chartUnit)"day"==this.data.type&&e.data[0].timeStamp==this.params.todayTimeStamp||this.setData({topLabel:"total_customer",topTipsDate:o.topLabel(e.data[0].timeStamp,a.data.type),topTipsNewCustomer:e.data[1].value,topTipsOldCustomer:e.data[0].value});else{var i=e.data.timeStamp===this.params.todayTimeStamp,r="";"total_fee"==this.data.chartUnit?r=(i?"已":"共")+"收款 ￥"+e.data.value:"deal_count"==this.data.chartUnit?r=(i?"已":"共")+"收款 "+e.data.value+"笔":"avr_fee"==this.data.chartUnit&&(r="笔均 ￥"+e.data.value),this.setData({topLabel:"money",topTipsDate:o.topLabel(e.data.timeStamp,a.data.type),topTipsValue:r})}},drawBarChart:function(t){var a=this.barchart.draw(t).recommendHeight;this.setData({drawBarChartCanvasHeight:a+"px"})},drawPileBarChart:function(t){var a=this.barchart.draw(t).recommendHeight;this.setData({drawPileBarChartCanvasHeight:a+"px"})},changeModel:function(){var t=this;this.setData({model:"list"==t.data.model?"chart":"list"}),"chart"==this.data.model&&this.initChart()},changeChartUnit:function(t){this.setData({chartUnit:t.target.dataset.id,topLabel:!1}),this.initChart()},changeDayCount:function(t){this.setData({dayCount:t.target.dataset.id}),this.initChart()},initChart:function(){var t=this;if("total_customer"==this.data.chartUnit){this.barchart=new n(wx.createCanvasContext("chart-canvas"));var a=[];"day"==t.data.type?a=30==t.data.dayCount?t.fullfillPileBarChartData(30,6,1):t.fullfillPileBarChartData(7,1,1):"week"==t.data.type?a=t.fullfillPileBarChartData(12,4,7):"month"==t.data.type&&(a=t.fullfillPileBarChartData(12,1,30)),this.drawPileBarChart(this.barchart.setCfg(a)),"day"!=this.data.type&&this.setData({topLabel:"total_customer",topTipsDate:o.topLabel(a[a.length-1].timeStamp,t.data.type),topTipsNewCustomer:a[a.length-1].value[0],topTipsOldCustomer:a[a.length-1].value[1]})}else{this.barchart=new s(wx.createCanvasContext("chart-canvas"));var e=[];"day"==t.data.type?e=30==t.data.dayCount?t.fullfillBarchartData(30,6,1):t.fullfillBarchartData(7,1,1):"week"==t.data.type?e=t.fullfillBarchartData(12,4,7):"month"==t.data.type&&(e=t.fullfillBarchartData(12,1,30)),this.drawBarChart(this.barchart.setCfg(e));var i=e[e.length-1].timeStamp===this.params.todayTimeStamp,r="";"total_fee"==this.data.chartUnit?r=(i?"已":"共")+"收款 ￥"+e[e.length-1].topLabels:"deal_count"==this.data.chartUnit?r=(i?"已":"共")+"收款 "+e[e.length-1].topLabels+"笔":"avr_fee"==this.data.chartUnit&&(r="笔均 ￥"+e[e.length-1].topLabels),this.setData({topLabel:"money",topTipsDate:o.topLabel(e[e.length-1].timeStamp,t.data.type),topTipsValue:r})}},fullfillBarchartData:function(t,a){for(var e=this,i=[],r=o.getYesterdayTimestamp(e.data.type),s=0;s<t;s++){for(var n=!1,d=0;d<e.data.list.length;d++)if(e.data.list[d].timestamp==r){var h=e.data.list[d];i.unshift({topLabels:parseFloat(h[e.data.chartUnit]),bottomLabels:s%a==0?o.bottomLabel(r,e.data.type):"",timeStamp:r}),n=!0;break}n||i.unshift({topLabels:0,bottomLabels:s%a==0?o.bottomLabel(r,e.data.type):"",timeStamp:r}),r=o.getDateBack(r,e.data.type)}return i},fullfillPileBarChartData:function(t,a){for(var e=this,i=[],r=o.getYesterdayTimestamp(e.data.type),s=0;s<t;s++){for(var n=!1,d=0;d<e.data.list.length;d++)if(e.data.list[d].timestamp==r){var h=e.data.list[d];i.unshift({value:[parseInt(h.new_customer)||0,parseInt(h.old_customer)||0],label:s%a==0?o.bottomLabel(r,e.data.type):"",timeStamp:r}),n=!0;break}n||i.unshift({value:[0,0],label:s%a==0?o.bottomLabel(r,e.data.type):"",timeStamp:r}),r=o.getDateBack(r,e.data.type)}return i}}); 
 			}); 	require("pages/dayReport/index.js");
 		__wxRoute = 'pages/dayReport/detail';__wxRouteBegin = true; 	define("pages/dayReport/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login")),a=t(require("../../lib/util")),o=t(require("../../lib/request")),s=require("../../lib/mta_analysis"),i="";Page({data:{source:"",isLoading:!0,date:"",type:"day",info:{},pageFail:{isShow:!1,text:""},shoplist:[]},findShop:function(t){for(var e="",a=void 0,o=0;o<this.data.shoplist.length;o++)if((a=this.data.shoplist[o]).shop_id==t){e=a.shop_name;break}return e},formatDate:function(t,e){var o=a.default.dataInit(t),s=this.data.type,i=void 0;if("day"==s)i=o.y+"年"+Number(o.m)+"月"+Number(o.d)+"日";else if("week"==s){var r=a.default.dataInit(e);i=o.y+"年"+Number(o.m)+"月"+Number(o.d)+"日 - "+Number(r.m)+"月"+Number(r.d)+"日"}else i=o.y+"年"+Number(o.m)+"月";return i},formatData:function(t){if(console.log("info: ",t),1==t.shop.length){var e="shopDetail?shop_name="+this.findShop(t.shop[0].shop_id)+"&date="+(t.date||t.start_date)+"&id="+t.shop[0].shop_id+"&type="+this.data.type;console.log("url: ",e),wx.redirectTo({url:e,complete:function(t){console.log(t)}})}else{var a=t,o={};t.date?a.formatDate=this.formatDate(t.date.toString()):(a.formatDate=this.formatDate(t.start_date.toString(),t.end_date.toString()),a.date=t.start_date.toString()),a.total_pay_fee=a.total_pay_fee/100,a.avg_deal_fee=a.avg_deal_fee/100,a.lijian_fee=a.lijian_fee/100,a.kaquan_total_fee=(a.kaquan_fee+a.kaquan_pay_fee)/100,a.kaquan_fee=a.kaquan_fee/100,a.kaquan_pay_fee=a.kaquan_pay_fee/100,a.refund_fee=a.refund_fee/100;for(var s=0;s<a.shop.length;s++)(o=a.shop[s]).shop_name=this.findShop(o.shop_id),o.total_pay_fee=o.total_pay_fee/100;console.log("渲染数据：",a),this.setData({isLoading:!1,info:a})}},getData:function(){var t=this,e=this.data.type,s=t.data.date,i=i||wx.getStorageSync("sid"),r="https://payapp.weixin.qq.com/mdmgr/order/mchsummarydate";if("week"==e?r="https://payapp.weixin.qq.com/mdmgr/order/mchsummaryweek":"month"==e&&(r="https://payapp.weixin.qq.com/mdmgr/order/mchsummarymonth"),!s)return wx.showModal({title:"提示",content:"参数有误，请重新打开",showCancel:!1,success:function(t){console.log(JSON.stringify(t)),wx.switchTab({url:"../record/index"})}}),!1;(0,o.default)({url:r,data:{sid:i,date:s},showLoading:!1,success:function(e){var o=e.data;0==o.errcode?t.formatData(e.data.data):(wx.showModal({title:"提示",content:o.msg||"",showCancel:!1}),a.default.mtaErrReport({cgi:a.default.getShortUrl(r)+"_code:"+o.errcode+"_sid:"+i||"",code:o.errcode,msg:a.default.getShortUrl(r)+"_"+o.msg+"_sid:"+i||""}))}})},getShops:function(t){var e=this,i="https://payapp.weixin.qq.com/mdmgr/shop/list",r=r||wx.getStorageSync("sid");(0,o.default)({url:i,data:{sid:r},success:function(o){var d=o.data;0==d.errcode?(d.data.shops&&(wx.setStorage({key:"shops",data:d.data.shops,fail:function(){s.Event.stat("errCode",{msg:"dayreport_setStorage_shops_fail"})}}),e.setData({shoplist:d.data.shops})),t()):(wx.showModal({title:"提示",content:d.msg||"",showCancel:!1}),a.default.mtaErrReport({cgi:a.default.getShortUrl(i)+"_code:"+d.errcode+"_sid:"+r||"",code:d.errcode,msg:a.default.getShortUrl(i)+"_"+d.msg+"_sid:"+r||""}))}})},init:function(t){function e(){a.getShops(a.getData)}var a=this;console.log("opt: ",t),t&&t.sid?(i=t.sid,e()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),i=t.data,e()},fail:function(){s.Event.stat("errCode",{msg:"dayReport_getStorage_sid_fail"})}})},onLoad:function(t){console.log("[dayReport/detail] options: ",t),s.Page.init();var a=this;this.setData({date:t.date||"",type:t.type||"day",shoplist:wx.getStorageSync("shops")||""}),t.mch_id?(this.setData({source:"template"}),e.default.checkLogin(a.init,t.mch_id)):e.default.checkLogin(a.init)}}); 
 			}); 	require("pages/dayReport/detail.js");
 		__wxRoute = 'pages/dayReport/shopDetail';__wxRouteBegin = true; 	define("pages/dayReport/shopDetail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var a=e(require("../../login")),t=e(require("../../lib/util")),o=e(require("../../lib/request")),i=require("../../lib/mta_analysis");Page({data:{isLoading:!0,type:"day",date:"",shop_name:"",shop_id:"",info:{}},formatDate:function(e,a){var o=t.default.dataInit(e),i=this.data.type,r=void 0;if("day"==i)r=o.y+"年"+Number(o.m)+"月"+Number(o.d)+"日";else if("week"==i){var d=t.default.dataInit(a);r=o.y+"年"+Number(o.m)+"月"+Number(o.d)+"日 - "+Number(d.m)+"月"+Number(d.d)+"日"}else r=o.y+"年"+Number(o.m)+"月";return r},formatData:function(e){var a={};console.log("info: ",e);for(var t=0;t<e.shop.length;t++)if(e.shop[t].shop_id==this.data.shop_id){a=e.shop[t],console.log("dataInfo: ",a),e.date?a.formatDate=this.formatDate(e.date.toString()):a.formatDate=this.formatDate(e.start_date.toString(),e.end_date.toString()),a.total_pay_fee=a.total_pay_fee/100,a.avg_deal_fee=a.avg_deal_fee/100,a.lijian_fee=a.lijian_fee/100,a.kaquan_total_fee=(a.kaquan_fee+a.kaquan_pay_fee)/100,a.kaquan_pay_fee=a.kaquan_pay_fee/100,a.people_ratio=a.new_people/(a.new_people+a.regular_people)*100+"%",a.refund_fee=a.refund_fee/100;break}this.setData({isLoading:!1,info:a})},getData:function(){var e=this,a=this.data.type,i="https://payapp.weixin.qq.com/mdmgr/order/mchsummarydate";"week"==a?i="https://payapp.weixin.qq.com/mdmgr/order/mchsummaryweek":"month"==a&&(i="https://payapp.weixin.qq.com/mdmgr/order/mchsummarymonth"),(0,o.default)({url:i,data:{sid:wx.getStorageSync("sid"),date:this.data.date},showLoading:!1,success:function(o){var r=o.data;0==r.errcode?e.formatData(o.data.data):(wx.showToast({title:r.msg||"失败",icon:"fail",duration:1500}),t.default.mtaErrReport({cgi:i+":"+r.errcode,code:r.errcode,msg:"dayReport_shopDetail_getData_"+a+"_"+r.msg}))}})},onLoad:function(e){console.log("[shopDetail onLoad] options:",e),i.Page.init(),this.setData({date:e.date,type:e.type||"day",shop_id:e.id,shop_name:e.shop_name}),e.mch_id?a.default.checkLogin(this.getData,e.mch_id):a.default.checkLogin(this.getData)}}); 
 			}); 	require("pages/dayReport/shopDetail.js");
 		__wxRoute = 'pages/setting/index';__wxRouteBegin = true; 	define("pages/setting/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../login")),a=e(require("../../lib/util")),i=e(require("../../lib/request")),o=e(require("../../lib/wechat")),n=require("../../lib/mta_analysis"),s=getApp(),r={},l={},c="wxwork"!=s.globalData.platform;Page({data:{showRefundDialog:!1,mch_name:"",clerk_name:"",role:"",is_supervisor:"",is_Wx:c,isLoading:!0,isShowExit:!0,notify:0,showMchSettle:"",showSettleList:"",showVoiceSwitch:!1,showVerifyDialog:!1,showHelpCells:!0,showRefund:!1,tapType:""},closeRefundTips:function(){this.setData({showRefundDialog:!1}),wx.setStorageSync("scanRefundTip","1"),this.refund()},refund:function(){if(!wx.getStorageSync("scanRefundTip"))return this.setData({showRefundDialog:!0}),!1;var e=this,t="";wx.scanCode({success:function(a){a.errMsg&&"scanCode:ok"==a.errMsg&&(t=a.result,e.getOrderDetail(t,function(){var e="/pages/record/detail?source=set&out_trade_no="+a.result;wx.navigateTo({url:e})})),console.log("退款：",JSON.stringify(a))}})},getOrderDetail:function(e,t){var n="https://payapp.weixin.qq.com/mdmgr/order/detail",s=wx.getStorageSync("sid");(0,i.default)({url:n,data:{sid:s,otn:e},success:function(e){var i=e.data;if(console.log("[setting/index] order/detail",i),0==i.errcode){var r=i.data.order,l=new Date(1e3*r.time_end).toDateString()==(new Date).toDateString();r.time_end>0?l?"function"==typeof t&&t():o.default.showModal({title:"提示",content:"非当天交易，无法在移动端进行退款，建议您使用现金退款。"}):o.default.showModal({title:"提示",content:"无效退款码，请扫描顾客交易记录中商户单号条码，进行退款操作！"})}else wx.showModal({title:"提示",content:i.msg||""}),a.default.report(n,s,i)}})},goFeedBack:function(){wx.navigateToMiniProgram?wx.navigateToMiniProgram({appId:"wx8abaf00ee8c3202e",extraData:{id:"1926",customData:{clientInfo:l.clientInfo,clientVersion:l.clientVersion,os:l.os,osVersion:l.osVersion,customInfo:l.customInfo,data:l.data}},success:function(e){},fail:function(e){console.log(JSON.stringify(e))}}):wx.navigateTo({url:"../setting/redirect?type=feedback&title=建议反馈"})},handleTapExit:function(){wx.clearStorageSync(),wx.reLaunch?wx.reLaunch({url:"../entry/index"}):wx.showModal({title:"提示",content:"当前微信版本过低，请升级到最新微信版本。",showCancel:!1,confirmText:"知道了",success:function(){wx.switchTab({url:"../record/index"})}})},handleChangeNotify:function(e){var t=this,o=e.currentTarget.dataset.index,n=e.detail.value?1:0,s="https://payapp.weixin.qq.com/mdmgr/clerk/notification",r=wx.getStorageSync("sid");"master"==o?n=e.detail.value?1:0:"voice"==o&&(n=e.detail.value?1:2),(0,i.default)({url:s,data:{sid:r,receive_notify:n},success:function(e){var i=e.data;0==i.errcode?t.setData({isLoading:!1,notify:n}):a.default.report(s,r,i)}})},initData:function(e){var t=this,i=e.emp_is_supervisor,n=e.extended_features,s=!1,r=!1,d=!1,u=e.feedback_url;if(l.data=a.default.getQuery("data",u)||"",l.customInfo=a.default.getQuery("customInfo",u)||"",o.default.setStorage("feedback_data",l.data),o.default.setStorage("customInfo",l.customInfo),o.default.setStorage("single_channel_openstate",e.single_channel_openstate),"is_wework_merchant"in e&&o.default.setStorage("is_wework_merchant",e.is_wework_merchant),t.setData({mch_name:e.mch_name,clerk_name:e.clerk_name,role:i?"管理员":"店员",is_supervisor:i,single_channel_openstate:e.single_channel_openstate}),void 0===n)return!1;if(i){var f=new Date("2017-07-01").getTime(),g=e.boss_time_created||"";(n.indexOf("mch_settle")>-1||g-f>0)&&(s=!0),n.indexOf("settle_list")>-1&&(r=!0),n.indexOf("refund")>-1&&(d=!0,o.default.setStorage("refund","1"))}t.setData({showMchSettle:s,showSettleList:r&&c,showRefund:d})},getMchData:function(){var e=this,t=t||wx.getStorageSync("sid"),o="https://payapp.weixin.qq.com/mdmgr/manage/home";(0,i.default)({url:o,data:{sid:t},success:function(i){var n=i.data;if(console.log("[setting/index] homedata:",n),0==n.errcode){var s=n.data;e.initData(s)}else wx.showModal({title:"提示",content:n.msg||"",showCancel:!1}),a.default.mtaErrReport({cgi:a.default.getShortUrl(o)+"_code:"+n.errcode+"_sid:"+t||"",code:n.errcode,msg:a.default.getShortUrl(o)+"_"+n.msg+"_sid:"+t||""})}})},initFeedbackInfo:function(){wx.getSystemInfo({success:function(e){l.clientInfo=e.model,l.clientVersion=e.version,l.os=e.platform,l.osVersion=e.system}})},handletap:function(e){if(c){var t=this,a=e.currentTarget.dataset.id,i=void 0,o=void 0,n=!1;"mch_detail"==a?(o="mch_detail",i=wx.getStorageSync("verify_mchdetail")||""):"settle"==a&&(o="settle",i=wx.getStorageSync("verify_settle")||""),i?"mch_detail"==o?wx.navigateTo({url:"./mch_detail"}):wx.navigateTo({url:"../settle/list"}):n=!0,t.setData({showVerifyDialog:n,tapType:o})}},closeVerifyDialog:function(){"mch_detail"==this.data.tapType?(o.default.setStorage("verify_mchdetail","1"),wx.navigateTo({url:"./mch_detail"})):(o.default.setStorage("verify_settle","1"),wx.navigateTo({url:"../settle/list"})),this.setData({showVerifyDialog:!1})},cancelDialog:function(){this.setData({showVerifyDialog:!1})},init:function(e){if(!r)return!1;console.log(r),this.getMchData(),this.setData({mch_name:r.mch_name,clerk_name:r.clerk_name,role:"true"==r.is_supervisor?"管理员":"店员",is_supervisor:"true"==r.is_supervisor,isLoading:!1,notify:wx.getStorageSync("receive_notify"),showMchSettle:"true"==r.showMchSettle,showSettleList:"true"==r.showSettleList})},versionCompare:function(e,t){for(var a,i,o=e.split("."),n=t.split("."),s=Math.min(o.length,n.length),r=null,l=0;l<s;l++){if(a=Number(o[l]),i=Number(n[l]),a<i){r=-1;break}if(a>i){r=1;break}l===s-1&&a===i&&(r=0)}return r},onLoad:function(e){console.log("[setting/index] options: ",e);var a=this;wx.getSystemInfo({success:function(e){var t=e.version;console.log("version: ",t),(a.versionCompare(t,"6.5.13")>-1||!c)&&a.setData({showVoiceSwitch:!0})}}),n.Page.init(),r=e,this.initFeedbackInfo(),e.mch_id?t.default.checkLogin(this.init,e.mch_id):t.default.checkLogin(this.init),1==wx.getStorageSync("mch_len")&&this.setData({isShowExit:!1}),"wxwork"==s.globalData.platform&&this.setData({showHelpCells:!1,isShowExit:!1})}}); 
 			}); 	require("pages/setting/index.js");
 		__wxRoute = 'pages/setting/redirect';__wxRouteBegin = true; 	define("pages/setting/redirect.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login")),o=t(require("../../lib/util")),a=t(require("../../lib/wechat")),i=require("../../lib/mta_analysis"),n={market:"1",materiel:"2",feedback:"3",action:"4"};Page({data:{isShow:!1,type:"",title:"",content:"",buttonText:""},onLoad:function(t){var o=this;i.Page.init(),console.log("[setting/redirect] onLoad options: ",t),t.title&&wx.setNavigationBarTitle({title:""+t.title}),e.default.checkLogin(function(){o.init(t)})},init:function(t){wx.showLoading?wx.showLoading({title:"图片加载中"}):wx.showModal({title:"提示",content:"当前微信版本过低，请升级到最新微信版本。"}),this.getData(n[t.type])},getData:function(t){var e=this,i=wx.getStorageSync("sid"),n="https://payapp.weixin.qq.com/mdmgr/weapp/jumpdetail";console.log("id: ",t),wx.request({url:n,data:{jump_id:t,sid:i},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(d){var r=d.data;a.default.hideLoading(),0==r.errcode?e.setData({isShow:!0,type:t,title:r.data.title,content:r.data.description,buttonText:r.data.button_text}):(wx.showModal({title:"提示",content:d.data.msg||"",showCancel:!1}),o.default.mtaErrReport({cgi:o.default.getShortUrl(n)+"_code:"+r.errcode+"_sid:"+i||"",code:r.errcode,msg:o.default.getShortUrl(n)+"_"+r.msg+"_sid:"+i||""}))},fail:function(t){a.default.hideLoading(),wx.showModal({title:"提示",content:"网络繁忙，请稍候重试",showCancel:!1})}})},jumpH5:function(){var t=this.data.type,e=wx.getStorageSync("sid"),i="https://payapp.weixin.qq.com/mdmgr/weapp/jumptoh5";wx.request({url:i,data:{jump_id:t,sid:e},header:{"content-type":"application/x-www-form-urlencoded"},method:"POST",success:function(t){var n=t.data;a.default.hideLoading(),0==n.errcode?wx.showModal({title:"获取成功",content:"请到微信支付公众号查看功能入口",showCancel:!1,confirmText:"知道了"}):(wx.showModal({title:"提示",content:t.data.msg||"",showCancel:!1}),o.default.mtaErrReport({cgi:o.default.getShortUrl(i)+"_code:"+n.errcode+"_sid:"+e||"",code:n.errcode,msg:o.default.getShortUrl(i)+"_"+n.msg+"_sid:"+e||""}))},fail:function(t){a.default.hideLoading(),wx.showModal({title:"提示",content:"网络繁忙，请稍候重试",showCancel:!1})}})}}); 
 			}); 	require("pages/setting/redirect.js");
 		__wxRoute = 'pages/setting/mch_detail';__wxRouteBegin = true; 	define("pages/setting/mch_detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../login")),a=e(require("../../lib/util")),i=e(require("../../lib/request")),o=e(require("../../lib/wechat")),n=require("../../lib/mta_analysis"),c="",s={};Page({data:{mch:"",bank_card_id:"",bank_name:"",category_name:"",rate:"",settle_cycle:"",isLoading:!0,showVerifyDialog:!1},getData:function(){var e=this,t=t||wx.getStorageSync("sid"),n="https://payapp.weixin.qq.com/mdmgr/settle/mchdetail";(0,i.default)({url:n,data:{sid:t},success:function(i){var c=i.data;if(0==c.errcode){var s=c.data;e.setData({isLoading:!1,bank_card_id:s.bank_card_id,bank_name:s.bank_name,category_name:s.category_name,rate:s.rate,settle_cycle:s.settle_cycle,mch_code:s.mch_code})}else"0x10040020"==c.errcode?o.default.showModal({confirmText:"我知道了",content:"你未设置微信支付密码，暂时无法查看打款记录。你可在微信钱包中绑定银行卡，或者在“微信钱包右上角-支付管理-实名中心”完成实名后设置密码。",success:function(e){e.confirm&&wx.navigateBack({delta:1})}}):(wx.showModal({title:"提示",content:i.data.msg||"",showCancel:!1}),a.default.mtaErrReport({cgi:a.default.getShortUrl(n)+"_code:"+c.errcode+"_sid:"+t||"",code:c.errcode,msg:a.default.getShortUrl(n)+"_"+c.msg+"_sid:"+t||""}))}})},goFeedBack:function(){console.log(JSON.stringify(s)),wx.navigateToMiniProgram?wx.navigateToMiniProgram({appId:"wx8abaf00ee8c3202e",extraData:{id:"1926",customData:{clientInfo:s.clientInfo,clientVersion:s.clientVersion,os:s.os,osVersion:s.osVersion,customInfo:s.customInfo,data:s.data}},success:function(e){},fail:function(e){console.log(JSON.stringify(e))}}):wx.navigateTo({url:"../setting/redirect?type=feedback&title=建议反馈"})},initFeedbackInfo:function(){wx.getSystemInfo({success:function(e){s.clientInfo=e.model,s.clientVersion=e.version,s.os=e.platform,s.osVersion=e.system}}),s.data=wx.getStorageSync("feedback_data"),s.customInfo=wx.getStorageSync("customInfo"),console.log(s)},init:function(e){var t=this;e&&e.sid?(c=e.sid,t.getData()):wx.getStorage({key:"sid",success:function(e){console.log(e.data),c=e.data,t.getData()},fail:function(){n.Event.stat("errCode",{msg:"settle_getStorage_sid_fail"})}})},onLoad:function(e){n.Page.init(),wx.setNavigationBarTitle({title:"商户详情"}),this.setData({mch:wx.getStorageSync("mch_name")}),t.default.checkLogin(this.init),this.initFeedbackInfo()}}); 
 			}); 	require("pages/setting/mch_detail.js");
 		__wxRoute = 'pages/myStores/storeMsg';__wxRouteBegin = true; 	define("pages/myStores/storeMsg.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login")),a=t(require("../../lib/util")),s=t(require("../../lib/request")),i=t(require("../../lib/wechat")),n=require("../../lib/mta_analysis"),o=require("../../widgets/qr.js"),r="",l=!1;Page({data:{clerkData:{},clerk_count:"",is_supervisor:!1,mch_name:"",isLoading:!0,username:"",shop_id:"",shop_name:"",inputVal:"",showEditDialog:!1,max:15,inputLen:"",qrCodeUrl:"",isValid:!1,errMsg:"",single_channel_openstate:!1},editShopName:function(){console.log("show data: ",this.data),this.setData({showEditDialog:!0,errMsg:"",isValid:!0})},inputHandler:function(t){var e=t.detail.value+"",a=e.length,s=/[^a-zA-Z0-9()\u4e00-\u9fa5]/g,i=!1,n="";a>this.data.max?n="门店名称长度最大值为15":e.match(s)?n="门店名称只支持中文、英文字母、数字和圆括号":i=!0,console.log("输入内容：",e),this.setData({inputVal:e,errMsg:n,isValid:i,inputLen:a+"/15"})},cancel:function(){console.log("cancel data: ",this.data),this.setData({errMsg:"",isValid:!1,showEditDialog:!1})},confirm:function(){if(!this.data.isValid)return!1;this.setData({showEditDialog:!1}),console.log(this.data.inputVal);var t=this,e=e||wx.getStorageSync("sid"),n="https://payapp.weixin.qq.com/mdmgr/shop/modify";(0,s.default)({url:n,data:{shop_id:"storeName",shop_name:t.data.inputVal,sid:e},success:function(s){var o=s.data;0==o.errcode?t.setData({shop_name:t.data.inputVal}):(a.default.report(n,e,o),i.default.showModal({title:"提示",content:o.msg||"失败"}))}})},initQr:function(t){var e=this,a={context:wx.createContext(),width:200,height:200,string:t,color:"#000000"};wx.drawCanvas({canvasId:"qr",actions:o.draw(a).getActions()});var s={x:16,y:16,width:168,height:168,destWidth:168,destHeight:168,canvasId:"qr",success:function(t){e.setData({qrCodeUrl:t.tempFilePath})},fail:function(t){}},i=void 0,n=0,r=function(){var t=Object.assign({},s,{success:function(t){"canvasToTempFilePath:ok"==t.errMsg&&(i=clearInterval(i)),e.setData({qrCodeUrl:t.tempFilePath})},complete:function(t){"canvasToTempFilePath:ok"==t.errMsg?(i=clearInterval(i),console.log("suc time: ",100+50*n+"ms")):n++}});wx.canvasToTempFilePath(t)};setTimeout(function(){var t=Object.assign({},s,{complete:function(t){console.log("func1 "+JSON.stringify(t)),"canvasToTempFilePath:ok"==t.errMsg?console.log("suc time: 100ms"):i=setInterval(function(){r()},50)}});wx.canvasToTempFilePath(t)},100)},getStoreData:function(){var t=this,e=e||wx.getStorageSync("sid"),n="https://payapp.weixin.qq.com/mdmgr/shop/switch";(0,s.default)({url:n,data:{shop_id:t.data.shop_id,detail:1,sid:e},success:function(s){var o=s.data;0==o.errcode?(t.getClerkList(),wx.setStorage({key:"channel_url",data:o.data.default_channel_url}),t.initQr(o.data.default_channel_url),t.setData({clerk_count:o.data.clerk_count,isLoading:!1})):(i.default.showModal({title:"提示",content:o.msg||"失败"}),a.default.report(n,e,o))}})},getClerkList:function(){var t=this,e="https://payapp.weixin.qq.com/mdmgr/clerk/list",i=i||wx.getStorageSync("sid");(0,s.default)({url:e,data:{sid:i},success:function(s){var n=s.data;if(0==n.errcode){for(var o=void 0,r=0;r<n.data.clerks.length;r++)if((o=n.data.clerks[r]).wx_account==t.data.username){t.setData({clerkData:o});break}}else wx.showModal({title:"提示",content:n.msg||"",showCancel:!1}),a.default.report(e,i,n)}})},init:function(t){var e=this;t&&t.sid?(r=t.sid,e.getStoreData()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),r=t.data,e.getStoreData()},fail:function(){n.Event.stat("errCode",{msg:"storeMsg_getStorage_sid_fail"})}})},onLoad:function(t){n.Page.init(),console.log("[myStores/storeMsg] load options: ",t),this.setData({shop_name:t.shop_name,inputLen:t.shop_name.length+"/15",inputVal:t.shop_name,shop_id:t.shop_id,username:wx.getStorageSync("username")||"",is_supervisor:wx.getStorageSync("is_supervisor"),mch_name:wx.getStorageSync("mch_name")||"",single_channel_openstate:wx.getStorageSync("single_channel_openstate")||""}),e.default.checkLogin(this.init),l=!0},onShow:function(){if(console.log("[myStores/storeMsg] show"),l)return!1;this.getClerkList()},onHide:function(){l=!1},onError:function(){l=!1}}); 
 			}); 	require("pages/myStores/storeMsg.js");
 		__wxRoute = 'pages/myStores/addStore';__wxRouteBegin = true; 	define("pages/myStores/addStore.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var a=t(require("../../login")),e=t(require("../../lib/util")),s=t(require("../../lib/request")),i=t(require("../../lib/wechat")),n=require("../../lib/mta_analysis");getApp();Page({data:{pageFail:{isShow:!1,text:""},value:{storeName:"",storeId:""},setting:{storeName:{isNull:!1,classname:"frm_group",status:null,count:15,max:15}},btnFinish:{classname:"btn disabled"}},handleBindetap:function(t){var a=this,n=this.data.setting,o=this.data.btnFinish,r="https://payapp.weixin.qq.com/mdmgr/shop/add";if(console.log("[addStore] 提交"),!n.storeName.status||o.classname.indexOf("disabled")>-1)return!1;o.classname="btn disabled",this.setData({btnFinish:o}),wx.showLoading({title:"加载中",mask:!0}),(0,s.default)({url:r,data:{sid:wx.getStorageSync("sid"),shop_name:this.data.value.storeName},success:function(t){var s=t.data;i.default.hideLoading(),0==s.errcode?wx.redirectTo({url:"./storeMsg?shop_id="+s.data.shop_id+"&shop_name="+a.data.value.storeName}):(i.default.showModal({title:"提示",content:s.msg||"失败"}),e.default.report(r,sid,s))},fail:function(t){i.default.hideLoading(),wx.showModal({title:"提示",content:"网络繁忙，请稍候重试"})}}),this.setData({setting:n})},changeButtonStyle:function(){var t=this.data.setting.storeName.status,a=this.data.btnFinish;a.classname=t?"btn":"btn disabled",this.setData({btnFinish:a})},changeInputStyle:function(){var t=this.data.setting,a=t.storeName.count;a==t.storeName.max&&!this.data.value.storeName||a<0?(t.storeName.classname="frm_group fail",t.storeName.status=!1):(t.storeName.classname="frm_group",t.storeName.status=!0),this.setData({setting:t})},handleBindinput:function(t){var a,e=this.data.value,s=this.data.setting,i=/[^a-zA-Z0-9()\u4e00-\u9fa5]/g,n=s.storeName.max;if(e.storeName=a=t.detail.value,s.storeName.count=this.getCount(a),this.setData({value:e,setting:s}),n<a.length)return s.storeName.status=!1,this.setData({pageFail:{isShow:!0,text:"门店名称长度最大值为15"},setting:s}),{value:a.substr(0,n),cursor:n};a.match(i)?(s.storeName.status=!1,this.setData({pageFail:{isShow:!0,text:"门店名称只支持中文、英文字母、数字和圆括号"},setting:s})):this.setData({pageFail:{isShow:!1,text:""}}),this.changeInputStyle(),this.changeButtonStyle()},getCount:function(t){var a=this.data.setting;return a.storeName.max-t.length>=0?a.storeName.max-t.length:0},initData:function(){var t=this.data.setting,a=this.data.btnFinish;t.storeName.count=t.storeName.max,a.classname="btn disabled",this.setData({setting:t,btnFinish:a})},onShow:function(){console.log("[myStores/addStore] onShow")},onLoad:function(t){n.Page.init(),console.log("[myStores/addStore] onLoad"),a.default.checkLogin(this.initData)}}); 
 			}); 	require("pages/myStores/addStore.js");
 		__wxRoute = 'pages/myStores/saveQr';__wxRouteBegin = true; 	define("pages/myStores/saveQr.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var i=t(require("../../login")),e=t(require("../../lib/wechat")),n=require("../../lib/mta_analysis");getApp();Page({data:{qrUrl:"",minHeight:""},setMinHeight:function(){var t=380;try{t=1.35*(wx.getSystemInfoSync().windowWidth-40)}catch(t){}this.setData({minHeight:"min-height:"+t+"px"})},onLoad:function(t){n.Page.init(),console.log("[myStores/saveQr] onLoad options: ",t),this.setMinHeight(),i.default.checkLogin(this.init)},init:function(){this.setData({qrUrl:"https://payapp.weixin.qq.com/mdmgr/misc/getqrcode?width=800&height=800&sid="+wx.getStorageSync("sid")+"&t="+(new Date).getTime()}),wx.showLoading?wx.showLoading({title:"图片加载中"}):wx.showModal({title:"提示",content:"当前微信版本过低，请升级到最新微信版本。"})},imageOnLoad:function(t){e.default.hideLoading(),console.log("图片加载成功")},imageOnLoadError:function(t){e.default.hideLoading()},saveImg:function(){var t=this;wx.previewImage({current:"",urls:[t.data.qrUrl]})}}); 
 			}); 	require("pages/myStores/saveQr.js");
 		__wxRoute = 'pages/myStores/storeList';__wxRouteBegin = true; 	define("pages/myStores/storeList.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var i=t(require("../../login")),a=t(require("../../lib/util")),s=t(require("../../lib/request")),o=require("../../lib/mta_analysis");Page({data:{sid:"",is_supervisor:!1,pageStatus:{status:"",text:""},shop_limitation:10,isLoading:!0,list:[],emptyWrapStyle:"",hasLoad:!1},handleBindetap:function(t){if(this.data.list.length==this.data.shop_limitation)return wx.showModal({title:"提示",content:"已经达到最大门店数了",success:function(t){}}),console.log(this.data),!1;wx.navigateTo({url:"./addStore"})},initShopList:function(){var t=this,i=this.data.sid,o="https://payapp.weixin.qq.com/mdmgr/shop/list";(0,s.default)({url:o,data:{sid:i||wx.getStorageSync("sid")},success:function(s){var e=s.data;0==e.errcode?t.setData({shop_limitation:s.data.data.shop_limitation,list:s.data.data.shops,isLoading:!1}):(wx.showModal({title:"提示",content:e.msg||"",showCancel:!1}),a.default.report(o,i,e))}})},init:function(t){var i=this;t&&t.sid?(i.setData({sid:t.sid}),i.initShopList()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),i.setData({sid:t.data}),i.initShopList()},fail:function(){o.Event.stat("errCode",{msg:"storeList_getStorage_sid_fail"})}})},onShow:function(t){if(console.log("[myStores/storeList] onShow"),this.data.hasLoad)return!1;i.default.checkLogin(this.init)},onLoad:function(){o.Page.init(),console.log("[myStores/storeList] onLoad"),i.default.checkLogin(this.init),this.setData({hasLoad:!0,mch_name:wx.getStorageSync("mch_name"),is_supervisor:wx.getStorageSync("is_supervisor")})},onHide:function(){this.setData({hasLoad:!1})},onError:function(){this.setData({hasLoad:!1})}}); 
 			}); 	require("pages/myStores/storeList.js");
 		__wxRoute = 'pages/clerks/list';__wxRouteBegin = true; 	define("pages/clerks/list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../login")),a=e(require("../../lib/util")),i=e(require("../../lib/request")),n=require("../../lib/mta_analysis"),s=getApp(),o="",r=!1,c=[];Page({data:{is_supervisor:!1,setting:{isEdit:!1},isLoading:!0,list:[],username:"",adminObj:{},shop_id:0,shop_name:"",single_channel_openstate:0,isRealName:0,showAddMgr:!1,hasAdmin:!1,screenHeight:500,fix:!0},getScreenHeight:function(){var e=wx.getSystemInfoSync();this.setData({screenHeight:e.windowHeight||500})},getRect:function(){var e=this,t=!0;setTimeout(function(){wx.createSelectorQuery().select("#outer").boundingClientRect(function(a){console.log(a),a.height>e.data.screenHeight&&(t=!1),e.setData({fix:t,showAddMgr:!e.data.hasAdmin&&1==e.data.isRealName})}).exec()},500)},checkRealName:function(){var e=this,t="https://payapp.weixin.qq.com/qrpay/mchbind/checkifrealname",n=n||wx.getStorageSync("sid");"wxwork"!=s.globalData.platform&&(0,i.default)({url:t,data:{mch_id:wx.getStorageSync("mch_id"),sid:n},success:function(i){var s=i.data;0==s.errcode?e.setData({isRealName:s.data.isrealname}):a.default.report(t,n,s)}})},goClerkDetail:function(e){var t=e.currentTarget.dataset.index,a=this.data.list,i=this.data.is_supervisor,n=!!e.currentTarget.dataset.self,s=this.data.adminObj,o=void 0,r="./clerkDetail?shop_id="+this.data.shop_id+"&shop_name="+this.data.shop_name;if(!i&&!n)return!1;if(t==s.emp_id){if(!i)return!1;r+="&emp_id="+s.emp_id+"&headimgurl="+s.headimgurl+"&clerk_name="+s.clerk_name+"&clerk_is_super=1"}else for(var c=0;c<a.length;c++)if((o=a[c]).emp_id==t){r+="&emp_id="+o.emp_id+"&headimgurl="+o.headimgurl+"&clerk_name="+o.clerk_name+"&clerk_is_super=0";break}wx.navigateTo({url:r})},initData:function(e){var t=this,a=void 0,i=[],n={},s=!1;if(e)for(var o=0;o<e.length;o++)(a=e[o]).headimgurl=a.headimgurl?a.headimgurl+"/96":"",a.is_supervisor?(s=!0,n=this.data.adminObj,Object.assign(n,a)):("is_self"in a?a.isSelf=a.is_self:a.wx_account==t.data.username&&(a.isSelf=!0),i.push(a));else i=[];this.setData({hasAdmin:s,adminObj:n,list:i,isLoading:!1})},getClerkList:function(){var e=this,t="https://payapp.weixin.qq.com/mdmgr/clerk/list",n=n||wx.getStorageSync("sid");(0,i.default)({url:t,data:{sid:n},success:function(i){var s=i.data;0==s.errcode?e.initData(s.data.clerks):(wx.showModal({title:"提示",content:s.msg||"",showCancel:!1}),a.default.report(t,n,s)),e.getRect()}})},init:function(e){var t=this;console.log("[clerks/list] init:",e),e&&e.sid?(o=e.sid,t.getClerkList(),t.checkRealName()):wx.getStorage({key:"sid",success:function(e){console.log(e.data),o=e.data,t.getClerkList(),t.checkRealName()},fail:function(){n.Event.stat("errCode",{msg:"clerks_getStorage_sid_fail"})}})},onHide:function(){r=!1},onError:function(){r=!1},onShow:function(){if(r)return!1;console.log("[clerks/list] onShow. 后台切到前台，重新获取数据，刷新列表。"),t.default.checkLogin(this.init)},onAddClerkTap:function(){var e=this;"wxwork"==s.globalData.platform?wx.chooseWxworkContact({type:13,selected_vid:[],max_num:10,success:function(t){if(r=!0,console.log("[selected data]"+JSON.stringify(t)),t&&t.contacts.length>0){c=[];for(var a=0;a<t.contacts.length;a++)c.push(t.contacts[a].vid);setTimeout(function(){e.sendAddClerkReq(c)},800)}}}):wx.getStorageSync("is_wework_merchant")?wx.showModal({title:"提示",content:"您是企业微信商户，请打开企业微信，在工作台-微信买单中添加店员",showCancel:!1}):wx.navigateTo({url:"./addClerk"})},sendAddClerkReq:function(e){var a=this,n=n||wx.getStorageSync("sid");(0,i.default)({url:"https://payapp.weixin.qq.com/mdmgr/wework/batchaddclearks",data:{vids:e.join(","),sid:n},success:function(e){console.log("[batchaddclearks]"+JSON.stringify(e)),0==e.data.errcode?(t.default.checkLogin(a.init),setTimeout(function(){wx.showModal({title:"提示",content:"已成功添加店员",showCancel:!1})},10)):-2001==e.data.errcode?wx.showModal({title:"提示",content:"添加店员失败",showCancel:!1}):-2002==e.data.errcode&&wx.showModal({title:"提示",content:"部分选中的员工没绑定微信",showCancel:!1})}})},onLoad:function(e){n.Page.init(),e.mch_id?t.default.checkLogin(this.init,e.mch_id):t.default.checkLogin(this.init),r=!0,this.setData({username:wx.getStorageSync("username")||"",is_supervisor:wx.getStorageSync("is_supervisor"),clerk_name:wx.getStorageSync("clerk_name"),shop_id:e.shop_id||0,shop_name:e.shop_name,single_channel_openstate:wx.getStorageSync("single_channel_openstate")||""}),this.getScreenHeight()}}); 
 			}); 	require("pages/clerks/list.js");
 		__wxRoute = 'pages/clerks/addClerk';__wxRouteBegin = true; 	define("pages/clerks/addClerk.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login")),a=t(require("../../lib/util")),r=t(require("../../lib/request")),i=require("../../lib/mta_analysis"),o=require("../../widgets/qr"),n="";Page({data:{pageStatus:{status:"",text:""},qr:"",isLoading:!1},qrCallBack:function(t){var e=this;e.setData({qr:t.url});var a={context:wx.createContext(),width:280,height:280,string:e.data.qr,color:"#000000"};wx.drawCanvas({canvasId:"qr",actions:o.draw(a).getActions()})},initQr:function(){var t=this,e="https://payapp.weixin.qq.com/mdmgr/clerk/getbindkey",i=i||wx.getStorageSync("sid");(0,r.default)({url:e,data:{sid:i},success:function(r){var o=r.data;0==o.errcode?t.qrCallBack(o.data):(wx.showModal({title:"提示",content:o.msg||"",showCancel:!1}),a.default.mtaErrReport({cgi:a.default.getShortUrl(e)+"_code:"+o.errcode+"_sid:"+i||"",code:o.errcode,msg:a.default.getShortUrl(e)+"_"+o.msg+"_sid:"+i||""}))}})},init:function(t){var e=this;console.log("clerks/addClerk initMsg:",t),t&&t.sid?(n=t.sid,e.initQr()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),n=t.data,e.initQr()},fail:function(){i.Event.stat("errCode",{msg:"clerksAddclerk_getStorage_sid_fail"})}})},onShow:function(){console.log("[clerks/addClerk] onShow"),e.default.checkLogin(this.init)},onLoad:function(){i.Page.init(),console.log("[clerks/addClerk] onLoad")}}); 
 			}); 	require("pages/clerks/addClerk.js");
 		__wxRoute = 'pages/clerks/clerkDetail';__wxRouteBegin = true; 	define("pages/clerks/clerkDetail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../login")),a=e(require("../../lib/util")),n=e(require("../../lib/request")),i=e(require("../../lib/wechat")),s=require("../../lib/mta_analysis"),o=require("../../widgets/qr.js"),l="",c=!1;Page({data:{max:10,single_channel_openstate:!1,shop_id:0,shop_name:"",inputVal:"",emp_id:"",channel_id:"",channel_url:"",is_supervisor:!1,clerk_is_super:0,clerk_name:"",headimgurl:"",showRename:!1,inputLen:"0/10",errMsg:"",isValid:"",qrCodeUrl:"",showAction:!1,showActionDialog:!1},getData:function(){var e=this,t=t||wx.getStorageSync("sid"),i="https://payapp.weixin.qq.com/mdmgr/clerk/detail";(0,n.default)({url:i,data:{shop_id:this.data.shop_id,emp_id:this.data.emp_id,sid:t},success:function(n){var s=n.data;console.log("json: ",s),0==s.errcode?(e.setData({channel_id:s.data.clerk_detail[0].single_channel_id,channel_url:s.data.clerk_detail[0].single_channel_url}),e.initQr()):(wx.showModal({title:"提示",content:s.msg||"",showCancel:!1}),a.default.report(i,t,s))}})},initQr:function(){var e=this,t={context:wx.createContext(),width:200,height:200,string:this.data.channel_url,color:"#000000"};console.log("[clerks/clerkDetail] 二维码参数",JSON.stringify(t)),wx.drawCanvas({canvasId:"qr",actions:o.draw(t).getActions()});var a={x:16,y:16,width:168,height:168,destWidth:168,destHeight:168,canvasId:"qr",success:function(t){e.setData({qrCodeUrl:t.tempFilePath})},fail:function(e){}},n=void 0,i=0,s=function(){var t=Object.assign({},a,{success:function(t){"canvasToTempFilePath:ok"==t.errMsg&&(n=clearInterval(n)),e.setData({qrCodeUrl:t.tempFilePath})},complete:function(e){"canvasToTempFilePath:ok"==e.errMsg?n=clearInterval(n):(i++,console.log("func2 time: ",100+50*i+"ms"))}});wx.canvasToTempFilePath(t)};setTimeout(function(){var e=Object.assign({},a,{complete:function(e){console.log("func1 "+JSON.stringify(e)),"canvasToTempFilePath:ok"==e.errMsg?console.log("func1 time: 100ms"):n=setInterval(function(){s()},50)}});wx.canvasToTempFilePath(e)},100)},inputHandler:function(e){var t=e.detail.value+"",a=t.length,n=/[^a-zA-Z0-9()\u4e00-\u9fa5]/g,i=!1,s="";a>this.data.max?s="备注名称长度最大值为10":t.match(n)?s="门店名称只支持中文、英文字母、数字和圆括号":i=!0,this.setData({inputVal:t,errMsg:s,isValid:i,inputLen:a+"/10"})},rename:function(){console.log("rename"),this.setData({showRename:!0})},cancel:function(){this.setData({errMsg:"",isValid:!1,showRename:!1})},confirm:function(){if(!this.data.isValid)return!1;this.setData({showRename:!1});var e=this,t=t||wx.getStorageSync("sid"),s="https://payapp.weixin.qq.com/mdmgr/clerk/rename",o=this.data.emp_id;o||i.default.showModal({content:"emp_id为空"}),(0,n.default)({url:s,data:{name:e.data.inputVal,emp_id:o,sid:t},success:function(n){var o=n.data;0==o.errcode?e.setData({clerk_name:e.data.inputVal}):(a.default.report(s,t,o),i.default.showModal({title:"提示",content:o.msg||"失败"}))}})},showAction:function(e){console.log("showAction"),this.setData({showActionDialog:!0,showAction:!0})},closeAction:function(){var e=this;this.setData({showAction:!1}),setTimeout(function(){e.setData({showActionDialog:!1})},400)},deleteClerk:function(){var e=this,t=this.data.emp_id,s=s||wx.getStorageSync("sid"),o="https://payapp.weixin.qq.com/mdmgr/clerk/delete";this.closeAction(),(0,n.default)({url:o,data:{emp_id:t,sid:s},success:function(t){var n=t.data;0==n.errcode?i.default.showModal({content:"移除成功",success:function(){if(e.data.is_supervisor)wx.navigateBack({delta:1});else{var t=getCurrentPages();console.log("回退：",t.length-1-2),wx.navigateBack({delta:t.length-1-1})}}}):(wx.showModal({title:"提示",content:n.msg||"",showCancel:!1}),a.default.report(o,s,n))}})},getHomeInfo:function(){var e=this,t=t||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/manage/home";(0,n.default)({url:a,data:{sid:t},success:function(n){var s=n.data;if(console.log("[entry/index] json:",s),0==s.errcode){var o=s.data;e.setData({single_channel_openstate:o.single_channel_openstate}),"is_wework_merchant"in o&&i.default.setStorage("is_wework_merchant",o.is_wework_merchant)}else wx.showModal({title:"提示",content:s.msg||"",showCancel:!1}),e.report(a,t,s)}})},init:function(e){function t(){a.getData(),a.data.single_channel_openstate||a.getHomeInfo()}var a=this;console.log("[clerks/clerkDetail] init:",e),e&&e.sid?(l=e.sid,t()):wx.getStorage({key:"sid",success:function(e){console.log(e.data),l=e.data,t()},fail:function(){s.Event.stat("errCode",{msg:"clerks_getStorage_sid_fail"})}})},onShow:function(){},onHide:function(){c=!1},onError:function(){c=!1},onLoad:function(e){s.Page.init(),console.log("[clerks/clerkDetail] options:",e),wx.setNavigationBarTitle({title:"店员详情"}),c=!0;var a="";e.headimgurl&&(a=(a=e.headimgurl).indexOf("/96")<0?a+"/96":a),this.setData({shop_id:e.shop_id||0,shop_name:e.shop_name,emp_id:e.emp_id,is_supervisor:wx.getStorageSync("is_supervisor"),clerk_is_super:e.clerk_is_super||0,clerk_name:e.clerk_name,headimgurl:a,inputLen:e.clerk_name.length+"/10",single_channel_openstate:wx.getStorageSync("single_channel_openstate")||""}),e.mch_id?t.default.checkLogin(this.init,e.mch_id):t.default.checkLogin(this.init)}}); 
 			}); 	require("pages/clerks/clerkDetail.js");
 		__wxRoute = 'pages/clerks/saveQrcode';__wxRouteBegin = true; 	define("pages/clerks/saveQrcode.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function i(i){return i&&i.__esModule?i:{default:i}}var e=i(require("../../login")),t=i(require("../../lib/wechat")),n=require("../../lib/mta_analysis");getApp();Page({data:{emp_id:"",shop_id:"",channel_id:"",qrUrl:"",minHeight:""},setMinHeight:function(){var i=380;try{i=1.35*(wx.getSystemInfoSync().windowWidth-40)}catch(i){}this.setData({minHeight:"min-height:"+i+"px"})},onLoad:function(i){n.Page.init(),console.log("[clerks/saveQrcode] onLoad options: ",i),this.setData({channel_id:i.channel_id,shop_id:i.shop_id,emp_id:i.emp_id}),this.setMinHeight(),e.default.checkLogin(this.init)},init:function(){this.setData({qrUrl:"https://payapp.weixin.qq.com/mdmgr/misc/getsingleqrcode?width=800&height=800&sid="+wx.getStorageSync("sid")+"&emp_id="+this.data.emp_id+"&shop_id="+this.data.shop_id+"&channel_id="+this.data.channel_id+"&t="+(new Date).getTime()}),t.default.showLoading()},imageOnLoad:function(i){t.default.hideLoading(),console.log("图片加载成功")},imageOnLoadError:function(i){t.default.hideLoading()},saveImg:function(){var i=this;wx.previewImage({current:"",urls:[i.data.qrUrl]})}}); 
 			}); 	require("pages/clerks/saveQrcode.js");
 		__wxRoute = 'pages/clerks/getClerkCode';__wxRouteBegin = true; 	define("pages/clerks/getClerkCode.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var i=e(require("../../login")),t=e(require("../../lib/wechat")),a=e(require("../../lib/request")),s=require("../../lib/mta_analysis"),n="";Page(function(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}({data:{showRoute:!1,shop_id:"",shop_name:"",emp_id:"",clerk_name:"",clerk_is_super:0,headimgurl:""},open:function(){var e=this,i=i||wx.getStorageSync("sid");(0,a.default)({url:"https://payapp.weixin.qq.com/mdmgr/clerk/setchannelopenstate",data:{sid:i,singlechannel_open_state:1},success:function(i){var a=i.data;0==a.errcode?(e.setData({showRoute:!0}),t.default.setStorage("single_channel_openstate",!0)):wx.showModal({title:"提示",content:a.msg||"",showCancel:!1})}})},complete:function(){var e=this.data;e.shop_name?wx.redirectTo({url:"./clerkDetail?&emp_id="+e.emp_id+"&shop_id="+e.shop_id+"&shop_name="+e.shop_name+"&headimgurl="+e.headimgurl+"&clerk_name="+e.clerk_name+"&clerk_is_super="+e.clerk_is_super}):wx.navigateBack({delta:1})},init:function(e){var i=this;console.log("[clerks/getClerkCode] init:",e),e&&e.sid?(n=e.sid,i.getClerkList()):wx.getStorage({key:"sid",success:function(e){console.log(e.data),n=e.data,i.getClerkList()},fail:function(){s.Event.stat("errCode",{msg:""})}})},onLoad:function(e){s.Page.init(),console.log("[clerks/getClerkCode] onLoad options: ",e),i.default.checkLogin(this.init),e.shop_id&&this.setData({shop_id:e.shop_id||0,shop_name:e.shop_name,emp_id:e.emp_id,is_supervisor:wx.getStorageSync("is_supervisor"),clerk_is_super:e.clerk_is_super||0,clerk_name:e.clerk_name,headimgurl:e.headimgurl})}},"init",function(){t.default.showLoading()})); 
 			}); 	require("pages/clerks/getClerkCode.js");
 		__wxRoute = 'pages/clerks/setManager';__wxRouteBegin = true; 	define("pages/clerks/setManager.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../login")),a=e(require("../../lib/util")),i=e(require("../../lib/request")),r=(e(require("../../lib/wechat")),require("../../lib/mta_analysis")),s="",n="/pages/clerks/verify",o={268439806:"你填写的银行卡账号不正确，请重新填写",268439804:"网络异常，请重试",268439803:"验证码不正确，请重新填写",268439771:"你的银行卡输错次数已超限，请明天再试"};Page({data:{mch_name:"",state:"",isLoading:!0,errMsg:""},goRedirect:function(){wx.redirectTo({url:n})},goClerkList:function(){wx.navigateBack({delta:1})},getMchList:function(){var e=wx.getStorageSync("mch_id"),t="https://payapp.weixin.qq.com/qrpay/mchbind/querymchlist",r=r||wx.getStorageSync("sid");(0,i.default)({url:t,data:{sid:r},success:function(i){var s=i.data;if(0==s.errcode){var c=s.data.mch_list;if(!c||c.length<=0)return!1;for(var l=0;l<c.length;l++)c[l].mch_id==e&&(n="/pages/clerks/auth")}else{var g="";g=s.errcode in o?o[s.errcode]||"":s.msg||"",wx.showModal({title:"提示",content:g||"",showCancel:!1}),a.default.report(t,r,s)}}})},init:function(e){var t=this;console.log("[clerks/setManager] init:",e),e&&e.sid?(s=e.sid,t.getMchList()):wx.getStorage({key:"sid",success:function(e){console.log(e.data),s=e.data,t.getMchList()},fail:function(){r.Event.stat("errCode",{msg:"clerks_getStorage_sid_fail"})}})},onLoad:function(e){r.Page.init();var a="管理员说明",i=!0;e.state&&(a="成为管理员",i=!1),wx.setNavigationBarTitle({title:a}),this.setData({mch_name:wx.getStorageSync("mch_name"),showInfoPage:i,state:e.state||"",errMsg:decodeURI(e.msg||""),isLoading:!1}),console.log("[clerks/setManager] onLoad"),t.default.checkLogin(this.init)}}); 
 			}); 	require("pages/clerks/setManager.js");
 		__wxRoute = 'pages/clerks/auth';__wxRouteBegin = true; 	define("pages/clerks/auth.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=e(require("../../login")),i=e(require("../../lib/util")),a=e(require("../../lib/request")),r=(e(require("../../lib/wechat")),require("../../lib/mta_analysis")),n={268439806:"你填写的银行卡账号不正确，请重新填写",268439804:"网络异常，请重试",268439803:"验证码不正确，请重新填写",268439771:"你的银行卡输错次数已超限，请明天再试"},s="";Page({data:{mch_id:"",mch_name:"",username:""},confirm:function(){var e=this.data.mch_id,t="https://payapp.weixin.qq.com/qrpay/mchbind/confirmadmin",r=r||wx.getStorageSync("sid");(0,a.default)({url:t,data:{sid:r,mch_id:e,do_not_send_msg:"true"},success:function(e){var a=e.data;if(0==a.errcode)wx.redirectTo({url:"./setManager?state=success"});else{var s="";s=a.errcode in n?n[a.errcode]||"":a.msg||"",wx.redirectTo({url:"./setManager?state=fail&msg="+s}),i.default.report(t,r,a)}}})},init:function(e){console.log("[clerks/auth] init:",e),e&&e.sid?s=e.sid:wx.getStorage({key:"sid",success:function(e){console.log(e.data),s=e.data},fail:function(){r.Event.stat("errCode",{msg:"clerks_getStorage_sid_fail"})}})},onLoad:function(){r.Page.init(),wx.setNavigationBarTitle({title:"成为管理员"}),this.setData({mch_id:wx.getStorageSync("mch_id")||"",mch_name:wx.getStorageSync("mch_name")||"",username:wx.getStorageSync("username")||""}),t.default.checkLogin(this.init)}}); 
 			}); 	require("pages/clerks/auth.js");
 		__wxRoute = 'pages/clerks/verify';__wxRouteBegin = true; 	define("pages/clerks/verify.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e=t(require("../../login")),a=t(require("../../lib/util")),i=t(require("../../lib/request")),n=(t(require("../../lib/wechat")),require("../../lib/mta_analysis")),r="",s={268439806:"你填写的银行卡账号不正确，请重新填写",268439804:"网络异常，请重试",268439803:"验证码不正确，请重新填写",268439771:"你的银行卡输错次数已超限，请明天再试"};Page({data:{input_mchId:"",mch_id:"",bankName:"",mobile:"",input_card:"",input_sms:"",smsButtonTxt:"获取验证码",isLoading:!0,seconds:60,showSeconds:!0},inputCardHandler:function(t){var e=t.detail.value+"";this.setData({input_card:e.trim()})},inputSmsHandler:function(t){var e=t.detail.value+"";this.setData({input_sms:e.trim()})},count:function(){var t=void 0,e=this,a=!0;this.setData({seconds:60,showSeconds:a,smsButtonTxt:"重新发送"}),t=setInterval(function(){var i=e.data.seconds;0==i?(clearInterval(t),a=!1):i--,e.setData({showSeconds:a,seconds:i})},1e3)},errorHandler:function(t){var e="";e=t.errcode in s?s[t.errcode]||"":t.msg||"",wx.showModal({title:"提示",content:e||"",showCancel:!1})},getSms:function(t){var e=this,n="https://payapp.weixin.qq.com/qrpay/mchbind/sendmchsms",r=r||wx.getStorageSync("sid"),s=e.data.mch_id||"";console.log("获取验证码"),e.count(),(0,i.default)({url:n,data:{sid:r,mch_id:s},success:function(i){var s=i.data;0==s.errcode?"function"==typeof t&&t(s.data):(e.errorHandler(s),a.default.report(n,r,s))}})},bindMch:function(){var t=this,e="https://payapp.weixin.qq.com/qrpay/mchbind/bindmch",n=n||wx.getStorageSync("sid"),r=t.data.mch_id||"",s=t.data.input_sms||"",d=t.data.input_card;if(!r||!s||!d)return!1;(0,i.default)({url:e,data:{sid:n,mch_id:r,verify_code:s,account_no:d},success:function(i){var r=i.data;0==r.errcode?t.bindMd():(t.errorHandler(r),a.default.report(e,n,r))}})},bindMd:function(){var t=this,e="https://payapp.weixin.qq.com/qrpay/mchbind/confirmadmin",n=n||wx.getStorageSync("sid"),r=t.data.mch_id||"";if(!r)return!1;(0,i.default)({url:e,data:{sid:n,mch_id:r},success:function(t){var i=t.data;if(0==i.errcode)wx.redirectTo({url:"./setManager?state=success"});else{var r="";r=i.errcode in s?s[i.errcode]||"":i.msg||"",wx.redirectTo({url:"./setManager?state=fail&msg="+r}),a.default.report(e,n,i)}}})},getMchDetail:function(){var t=this,e="https://payapp.weixin.qq.com/qrpay/mchbind/querymchdetail",n=n||wx.getStorageSync("sid"),r=wx.getStorageSync("mch_id")||"";(0,i.default)({url:e,data:{sid:n,mch_id:r},success:function(i){var r=i.data;if(0==r.errcode){var s=r.data;t.setData({isLoading:!1,bankName:s.bank_name,mobile:s.mobile})}else t.errorHandler(r),a.default.report(e,n,r)}})},init:function(t){var e=this;t&&t.sid?(r=t.sid,e.getMchDetail()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),r=t.data,e.getMchDetail()},fail:function(){n.Event.stat("errCode",{msg:"clerks_getStorage_sid_fail"})}})},onLoad:function(){n.Page.init(),wx.setNavigationBarTitle({title:"成为管理员"}),this.setData({mch_id:wx.getStorageSync("mch_id")}),console.log("[clerks/setManager] onLoad"),e.default.checkLogin(this.init)}}); 
 			}); 	require("pages/clerks/verify.js");
 		__wxRoute = 'pages/preview/index';__wxRouteBegin = true; 	define("pages/preview/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var o=getApp();Page({data:{motto:"Hello World",userInfo:{}},bindViewTap:function(){wx.navigateTo({url:"../logs/logs"})},onLoad:function(){console.log("onLoad");var n=this;o.getUserInfo(function(o){n.setData({userInfo:o})})}}); 
 			}); 	require("pages/preview/index.js");
 		__wxRoute = 'pages/whatNews/list';__wxRouteBegin = true; 	define("pages/whatNews/list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../login")),e=require("../../lib/mta_analysis");Page({data:{list:[{title:"微信买单2.1.0主要更新",date:"2017年11月03日",url:"./2.1.0/detail"},{title:"微信买单2.0.3主要更新",date:"2017年10月16日",url:"./2.0.3/detail"},{title:"微信买单2.0.2主要更新",date:"2017年09月19日",url:"./2.0.2/detail"},{title:"微信买单2.0.1主要更新",date:"2017年08月21日",url:"./2.0.1/detail"},{title:"微信买单2.0.0主要更新",date:"2017年08月16日",url:"./2.0.0/detail"},{title:"微信买单1.2.0主要更新",date:"2017年03月14日",url:"./1.2.0/detail"},{title:"微信买单1.1.1主要更新",date:"2017年02月14日",url:"./1.1.1/detail"},{title:"微信买单1.1.0主要更新",date:"2017年01月18日",url:"./1.1.0/detail_000"}]},init:function(){console.log("whatNews list")},onLoad:function(i){console.log("[whatNews/list] data",this.data),e.Page.init(),i.mch_id?t.default.checkLogin(this.init,i.mch_id):t.default.checkLogin(this.init)}}); 
 			}); 	require("pages/whatNews/list.js");
 		__wxRoute = 'pages/whatNews/1.1.0/detail_000';__wxRouteBegin = true; 	define("pages/whatNews/1.1.0/detail_000.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../../lib/mta_analysis");Page({data:{},handletap:function(t){var p=["https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.1.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.2.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.3.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.4.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.5.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.6.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.7.png"],a=p[t.currentTarget.dataset.id-1];wx.previewImage({current:a,urls:p})},onLoad:function(){t.Page.init(),wx.setNavigationBarTitle({title:"功能更新"})},onShareAppMessage:function(){return{title:"微信买单1.1.0主要更新",path:"/pages/whatNews/1.1.0/detail_000"}}}); 
 			}); 	require("pages/whatNews/1.1.0/detail_000.js");
 		__wxRoute = 'pages/whatNews/1.1.1/detail';__wxRouteBegin = true; 	define("pages/whatNews/1.1.1/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../../lib/mta_analysis");Page({data:{},handletap:function(t){var a=["https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/2.1.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/2.2.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/2.3.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.6.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/1.7.png"],i=a[t.currentTarget.dataset.id-1];wx.previewImage({current:i,urls:a})},onLoad:function(){t.Page.init(),wx.setNavigationBarTitle({title:"功能更新"})},onShareAppMessage:function(){return{title:"微信买单1.1.1主要更新",path:"/pages/whatNews/1.1.1/detail"}}}); 
 			}); 	require("pages/whatNews/1.1.1/detail.js");
 		__wxRoute = 'pages/whatNews/1.2.0/detail';__wxRouteBegin = true; 	define("pages/whatNews/1.2.0/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../../lib/mta_analysis");Page({data:{},handletap:function(t){var a=["https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/3.1.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/3.2.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/3.3.png","https://wximg.gtimg.com/wechat_pay_mchapp/product/img/version/3.4.png"],i=a[t.currentTarget.dataset.id-1];wx.previewImage({current:i,urls:a})},onLoad:function(){t.Page.init(),wx.setNavigationBarTitle({title:"功能更新"})},onShareAppMessage:function(){return{title:"微信买单1.2.0主要更新",path:"/pages/whatNews/1.2.0/detail"}}}); 
 			}); 	require("pages/whatNews/1.2.0/detail.js");
 		__wxRoute = 'pages/whatNews/2.0.0/detail';__wxRouteBegin = true; 	define("pages/whatNews/2.0.0/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=require("../../../lib/mta_analysis");Page({data:{},handletap:function(a){var t=["https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.0-1.png","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.0-2.png"],e=t[a.currentTarget.dataset.id-1];wx.previewImage({current:e,urls:t})},onLoad:function(){a.Page.init(),wx.setNavigationBarTitle({title:"功能更新"})},onShareAppMessage:function(){return{title:"微信买单2.0.0主要更新",path:"/pages/whatNews/2.0.0/detail"}}}); 
 			}); 	require("pages/whatNews/2.0.0/detail.js");
 		__wxRoute = 'pages/whatNews/2.0.1/detail';__wxRouteBegin = true; 	define("pages/whatNews/2.0.1/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../login")),e=require("../../../lib/mta_analysis");Page({data:{},handletap:function(t){var e=["https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.1-1.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.1-2.png"],a=e[t.currentTarget.dataset.id-1];wx.previewImage({current:a,urls:e})},onLoad:function(a){e.Page.init(),wx.setNavigationBarTitle({title:"功能更新"}),a.mch_id?t.default.checkLogin(this.init,a.mch_id):t.default.checkLogin(this.init)},onShareAppMessage:function(){return{title:"微信买单2.0.1主要更新",path:"/pages/whatNews/2.0.1/detail"}}}); 
 			}); 	require("pages/whatNews/2.0.1/detail.js");
 		__wxRoute = 'pages/whatNews/2.0.2/detail';__wxRouteBegin = true; 	define("pages/whatNews/2.0.2/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../login")),a=require("../../../lib/mta_analysis");Page({data:{},handletap:function(t){var a=["https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/1.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/3.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/4.jpg"],e=a[t.currentTarget.dataset.id-1];wx.previewImage({current:e,urls:a})},onLoad:function(e){a.Page.init(),wx.setNavigationBarTitle({title:"功能更新"}),e.mch_id?t.default.checkLogin(this.init,e.mch_id):t.default.checkLogin(this.init)},onShareAppMessage:function(){return{title:"微信买单2.0.2主要更新",path:"/pages/whatNews/2.0.2/detail"}}}); 
 			}); 	require("pages/whatNews/2.0.2/detail.js");
 		__wxRoute = 'pages/whatNews/2.0.3/detail';__wxRouteBegin = true; 	define("pages/whatNews/2.0.3/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=function(t){return t&&t.__esModule?t:{default:t}}(require("../../../login")),a=require("../../../lib/mta_analysis");Page({data:{},handletap:function(t){var a=["https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.0.2-1.png","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.0.2-2.png","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.0.2-3.png","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.0.2-4.png","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.0.2-5.png","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.0.2-6.png","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.0.2/2.0.2-7.png"],p=a[t.currentTarget.dataset.id-1];wx.previewImage({current:p,urls:a})},init:function(){console.log("2.0.3 init")},onLoad:function(p){a.Page.init(),wx.setNavigationBarTitle({title:"功能更新"}),p.mch_id?t.default.checkLogin(this.init,p.mch_id):t.default.checkLogin(this.init)},onShareAppMessage:function(){return{title:"微信买单2.0.3主要更新",path:"/pages/whatNews/2.0.3/detail"}}}); 
 			}); 	require("pages/whatNews/2.0.3/detail.js");
 		__wxRoute = 'pages/whatNews/2.1.0/detail';__wxRouteBegin = true; 	define("pages/whatNews/2.1.0/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var p=function(p){return p&&p.__esModule?p:{default:p}}(require("../../../login")),t=require("../../../lib/mta_analysis");Page({data:{},handletap:function(p){var t=["https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/1.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/3.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/12.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/11.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/1.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/9.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/4.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/10.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/5.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/3.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/4.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/4.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/8.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/2.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/6.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/14.jpg","https://wx.gtimg.com/payapp/weapp/img/whatNews/2.1.0/15.jpg"],a=t[p.currentTarget.dataset.id-1];wx.previewImage({current:a,urls:t})},init:function(){console.log("2.0.3 init")},onLoad:function(a){t.Page.init(),wx.setNavigationBarTitle({title:"功能更新"}),a.mch_id?p.default.checkLogin(this.init,a.mch_id):p.default.checkLogin(this.init)},onShareAppMessage:function(){return{title:"微信买单2.1.0主要更新",path:"/pages/whatNews/2.1.0/detail"}}}); 
 			}); 	require("pages/whatNews/2.1.0/detail.js");
 		__wxRoute = 'pages/guide/list';__wxRouteBegin = true; 	define("pages/guide/list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";getApp();Page({data:{list:[{title:"如何开始收款",url:"./01/detail"},{title:"如何添加和管理多店员、多门店",url:"./02/detail"},{title:"如何开启和使用店员收款码",url:"./03/detail"},{title:"如何添加商家营销活动",url:"./04/detail"},{title:"如何免费参加微信支付官方活动",url:"./05/detail"},{title:"如何购买使用微信官方收款立牌、贴纸",url:"./06/detail"}]},onLoad:function(){console.log("[guide/list] data",this.data),wx.setNavigationBarTitle({title:"使用指引",success:function(){},complete:function(){}})},onShareAppMessage:function(){return{title:"微信买单使用指引",path:"/pages/guide/list"}}}); 
 			}); 	require("pages/guide/list.js");
 		__wxRoute = 'pages/guide/01/detail';__wxRouteBegin = true; 	define("pages/guide/01/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var p=require("../../../lib/mta_analysis");Page({data:{},handletap:function(p){var a=["https://wx.gtimg.com/payapp/weapp/img/guide/01_01_v2.gif","https://wx.gtimg.com/payapp/weapp/img/guide/01_02.png","https://wx.gtimg.com/payapp/weapp/img/guide/01_03.png","https://wx.gtimg.com/payapp/weapp/img/guide/01_06_v2.png","https://wx.gtimg.com/payapp/weapp/img/guide/01_05_v2.png","https://wx.gtimg.com/payapp/weapp/img/guide/01_04_v2.png","https://wx.gtimg.com/payapp/weapp/img/guide/01_07.png","https://wx.gtimg.com/payapp/weapp/img/guide/01_08.jpg"],g=a[p.currentTarget.dataset.id-1];wx.previewImage({current:g,urls:a})},onLoad:function(){p.Page.init(),wx.setNavigationBarTitle({title:"使用指引"})},onShareAppMessage:function(){return{title:"如何开始收款",path:"/pages/guide/01/detail"}}}); 
 			}); 	require("pages/guide/01/detail.js");
 		__wxRoute = 'pages/guide/02/detail';__wxRouteBegin = true; 	define("pages/guide/02/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var p=require("../../../lib/mta_analysis");Page({data:{},handletap:function(p){var a=["https://wx.gtimg.com/payapp/weapp/img/guide/02_01_v2.png","https://wx.gtimg.com/payapp/weapp/img/guide/02_02_v3.png","https://wx.gtimg.com/payapp/weapp/img/guide/02_addShop.gif","https://wx.gtimg.com/payapp/weapp/img/guide/02_04_v2.gif","https://wx.gtimg.com/payapp/weapp/img/guide/02_10_v3.gif","https://wx.gtimg.com/payapp/weapp/img/guide/02_addClerk.gif","https://wx.gtimg.com/payapp/weapp/img/guide/02_rm.gif"],t=a[p.currentTarget.dataset.id-1];wx.previewImage({current:t,urls:a})},onLoad:function(){p.Page.init(),wx.setNavigationBarTitle({title:"使用指引"})},onShareAppMessage:function(){return{title:"如何添加和管理多店员、多门店",path:"/pages/guide/02/detail"}}}); 
 			}); 	require("pages/guide/02/detail.js");
 		__wxRoute = 'pages/guide/03/detail';__wxRouteBegin = true; 	define("pages/guide/03/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../../lib/mta_analysis");Page({data:{},handletap:function(e){var a=["https://wx.gtimg.com/payapp/weapp/img/guide/02_clerkCode.gif","https://wx.gtimg.com/payapp/weapp/img/guide/02_clerkCodeRecord.gif"],t=a[e.currentTarget.dataset.id-1];wx.previewImage({current:t,urls:a})},onLoad:function(){e.Page.init(),wx.setNavigationBarTitle({title:"使用指引"})},onShareAppMessage:function(){return{title:"如何开启和使用店员收款码",path:"/pages/guide/03/detail"}}}); 
 			}); 	require("pages/guide/03/detail.js");
 		__wxRoute = 'pages/guide/04/detail';__wxRouteBegin = true; 	define("pages/guide/04/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=require("../../../lib/mta_analysis");Page({data:{},handletap:function(a){var t=["https://wx.gtimg.com/payapp/weapp/img/guide/03_01_v2.gif","https://wx.gtimg.com/payapp/weapp/img/guide/03_06.jpg"],e=t[a.currentTarget.dataset.id-1];wx.previewImage({current:e,urls:t})},onLoad:function(){a.Page.init(),wx.setNavigationBarTitle({title:"使用指引"})},onShareAppMessage:function(){return{title:"如何添加商家营销活动",path:"/pages/guide/04/detail"}}}); 
 			}); 	require("pages/guide/04/detail.js");
 		__wxRoute = 'pages/guide/05/detail';__wxRouteBegin = true; 	define("pages/guide/05/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=require("../../../lib/mta_analysis");Page({data:{},handletap:function(a){var t=["https://wx.gtimg.com/payapp/weapp/img/guide/04_01.png"],e=t[a.currentTarget.dataset.id-1];wx.previewImage({current:e,urls:t})},onLoad:function(){a.Page.init(),wx.setNavigationBarTitle({title:"使用指引"})},onShareAppMessage:function(){return{title:"如何免费参加微信支付官方活动",path:"/pages/guide/05/detail"}}}); 
 			}); 	require("pages/guide/05/detail.js");
 		__wxRoute = 'pages/guide/06/detail';__wxRouteBegin = true; 	define("pages/guide/06/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=require("../../../lib/mta_analysis");Page({data:{},handletap:function(a){var t=["https://wx.gtimg.com/payapp/weapp/img/guide/05_01.png","https://wx.gtimg.com/payapp/weapp/img/guide/05_02.png"],e=t[a.currentTarget.dataset.id-1];wx.previewImage({current:e,urls:t})},onLoad:function(){a.Page.init(),wx.setNavigationBarTitle({title:"使用指引"})},onShareAppMessage:function(){return{title:"如何购买使用微信官方收款立牌、贴纸",path:"/pages/guide/06/detail"}}}); 
 			}); 	require("pages/guide/06/detail.js");
 		__wxRoute = 'pages/mall/pages/myorderdetail/myorderdetail';__wxRouteBegin = true; 	define("pages/mall/pages/myorderdetail/myorderdetail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var i=getApp(),t=require("../../utils/weRequest.js"),a=(require("../../utils/status.js"),require("../../../../lib/mta_analysis"));Page({data:{apply_info:{},imgList:[],count:0,shipment_info:{},order_info:{}},onLoad:function(i){a.Page.init(),i.mch_id&&wx.setStorageSync("mch_id",i.mch_id),this.getData(i.id)},getData:function(a){var e=this;t.request({url:"order/detail",data:{order_id:a,who:"apply"},method:"POST",header:{"content-type":"application/json"},showLoading:!0,success:function(t){for(var a=[],n=0,o=0;o<t.material_info_list.length;o++)o<3&&a.push(t.material_info_list[o].material_icon),n+=t.material_info_list[o].sku_info.sku_num;e.setData({apply_info:t.apply_info,shipment_info:t.shipment_info,imgList:a,order_info:t.order_info,count:n}),i.globalData.mall.materialList=t.material_info_list}})}}); 
 			}); 	require("pages/mall/pages/myorderdetail/myorderdetail.js");
 		__wxRoute = 'pages/mall/pages/myorder/myorder';__wxRouteBegin = true; 	define("pages/mall/pages/myorder/myorder.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";getApp();var t=require("../../utils/weRequest.js"),a=require("../../utils/status.js"),e=require("../../../../lib/mta_analysis");Page({data:{list:[],page:1,total:0,isLoading:!1},onLoad:function(t){e.Page.init(),this.getData(1)},getData:function(e){var o=this;t.request({url:"order/list",showLoading:!0,method:"POST",header:{"content-type":"application/json"},beforeSend:function(){o.setData({isLoading:!0})},data:{who:"apply",page_num:e,page_size:10},complete:function(){o.setData({isLoading:!1})},success:function(t){t.order_list.map(function(t){t.order_state=a[t.order_state],t.total_fee=parseFloat(t.total_fee/100).toFixed(2)}),o.setData({list:o.data.list.concat(t.order_list),total:t.total_num,page:e+1})}})},goDetail:function(t){wx.navigateTo({url:"../myorderdetail/myorderdetail?id="+t.currentTarget.dataset.id})},onReachBottom:function(){10*(this.data.page-1)<this.data.total&&this.getData(this.data.page),console.log("reach bottom")}}); 
 			}); 	require("pages/mall/pages/myorder/myorder.js");
 		__wxRoute = 'pages/mall/pages/pay/pay';__wxRouteBegin = true; 	define("pages/mall/pages/pay/pay.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp(),a=require("../../utils/weRequest.js"),t=require("../../lib/midas.js"),s=require("../../../../lib/mta_analysis");Page({data:{canUseChooseAddress:wx.canIUse&&wx.canIUse("chooseAddress")&&"function"==typeof wx.chooseAddress,materialList:[],selectedCount:0,edit:0,hasAddress:!1,address:{receive_addr:"",receive_name:"",receive_province_name:"",receive_tel:""},needinvoice:!1,invoice:{invoice_tax_type:1,invoice_title:"",taxpayer_reg_no:""},party_nature:"",isPaying:!1,price:0,material_freight:0,invoice_freight:0,total_fee:0,showAddressPenal:!1,addressPenalValue:[0,0,0],gData:[]},onLoad:function(a){s.Page.init(),this.getAddress();var t=0,i=0,r=!1,d=e.globalData.mall.list.filter(function(e){return e.count>0});d.forEach(function(e){e.sku_list[0].hasOwnProperty("first_price")?(i+=e.sku_list[0].first_price,i+=e.sku_list[0].price*(e.count-1),e.sku_list[0].hasOwnProperty("is_first_freight_free")&&(r=e.sku_list[0].is_first_freight_free)):i+=e.sku_list[0].price*e.count,t+=e.count});var n;n=r?0:i>=e.globalData.mall.free_freight_fee?0:e.globalData.mall.material_freight,this.setData({materialList:d,selectedCount:t,price:i,material_freight:n,invoice_freight:e.globalData.mall.invoice_freight}),this.setData({total_fee:i+this.data.material_freight+parseFloat(this.data.needinvoice?this.data.invoice_freight:0)}),d.map(function(e){return e.sku_info=e.sku_list[0],e.sku_info.sku_num=e.count,e}),e.globalData.mall.materialList=d},getAddress:function(){var e=this;a.request({url:"apply/getaddress",showLoading:!0,success:function(a){var t=a.hasOwnProperty("receive_name"),s=Object.assign({},e.data.address,a);e.setData({address:s,hasAddress:t})}})},selectAddress:function(){var e=this;this.data.canUseChooseAddress?wx.chooseAddress({success:function(a){e.setData({address:{receive_addr:a.detailInfo,receive_name:a.userName,receive_province_name:a.provinceName+a.cityName+a.countyName,receive_tel:a.telNumber,receive_province_id:parseInt(a.nationalCode)},hasAddress:!0})},fail:function(){e.setData({edit:1})}}):this.setData({edit:1})},showAddressPanel:function(){var e=this;0===this.data.gData.length?a.request({url:"https://payapp.weixin.qq.com/wxmaterial/user/arealist",showLoading:!0,success:function(a){e.setData({showAddressPenal:!0,gData:a})}}):this.setData({showAddressPenal:!0})},selectArea:function(e){var a=e.detail.value;this.setData({addressPenalValue:a})},addressPenalConfirm:function(){var e=this;this.setData({"address.receive_province_name":e.data.gData[e.data.addressPenalValue[0]].label+" "+e.data.gData[e.data.addressPenalValue[0]].children[e.data.addressPenalValue[1]].label+" "+e.data.gData[e.data.addressPenalValue[0]].children[e.data.addressPenalValue[1]].children[e.data.addressPenalValue[2]].label,"address.receive_province_id":parseInt(e.data.gData[e.data.addressPenalValue[0]].value+e.data.gData[e.data.addressPenalValue[0]].children[e.data.addressPenalValue[1]].value+e.data.gData[e.data.addressPenalValue[0]].children[e.data.addressPenalValue[1]].children[e.data.addressPenalValue[2]].value),showAddressPenal:!1})},addressPenalCancel:function(){this.setData({showAddressPenal:!1})},checkUserName:function(e){this.setData({"address.receive_name":e.detail.value.trim()})},checkTelNumber:function(e){this.setData({"address.receive_tel":e.detail.value.trim()})},checkAddress:function(e){this.setData({"address.receive_addr":e.detail.value.trim()})},setAddress:function(){/^[\u4e00-\u9fa5|0-9|A-z|_-|\s]{1,32}$/.test(this.data.address.receive_name)?/^1(3|4|5|7|8)[0-9]\d{8}$/.test(this.data.address.receive_tel)?this.data.address.receive_province_id?/^[\u4e00-\u9fa5|0-9|A-z|_-|\s]{1,132}$/.test(this.data.address.receive_addr)?this.setData({edit:0,hasAddress:!0}):wx.showModal({title:"详细地址格式有误",content:"仅支持132个字符以内的中文、数字、字母或下划线",showCancel:!1}):wx.showModal({title:"请选择收货地址省市区",content:"收货地址不能为空",showCancel:!1}):wx.showModal({title:"联系电话格式有误",content:"请输入11位数字的真实手机号码",showCancel:!1}):wx.showModal({title:"收件人姓名格式有误",content:"仅支持32个字符以内的中文、数字、字母或下划线",showCancel:!1})},showInvoice:function(){var e=this;a.request({url:"apply/getuser",showLoading:!0,success:function(a){e.setData({edit:2,party_nature:a.party_nature})}})},invoiceChange:function(e){this.setData({needinvoice:"true"==e.detail.value}),this.setData({total_fee:this.data.price+this.data.material_freight+parseFloat(this.data.needinvoice?this.data.invoice_freight:0)})},checkInvoiceTitle:function(e){this.setData({"invoice.invoice_title":e.detail.value})},checkTaxpayerRegNo:function(e){this.setData({"invoice.taxpayer_reg_no":e.detail.value})},setInvoice:function(){if(this.data.needinvoice){if(!this.data.invoice.invoice_title)return wx.showModal({title:"请正确填写发票主体名称",showCancel:!1}),!1;if(2==this.data.party_nature&&!this.data.invoice.taxpayer_reg_no)return wx.showModal({title:"请正确填写发票纳税人标识号",showCancel:!1}),!1}this.setData({edit:0})},verify:function(){var e="";return""==this.data.address.receive_name.trim()?e="收货人姓名不能为空":this.data.address.receive_name.trim().length>32?e="收货人姓名字符过多，请重新输入":/^[\u4e00-\u9fa5|\u0021-\u007e|\uff01-\uff5e|\s]{1,32}$/.test(this.data.address.receive_name)?/^1(3|4|5|7|8)[0-9]\d{8}$/.test(this.data.address.receive_tel)?""==this.data.address.receive_addr.trim()?e="收货地址不能为空":""==this.data.address.receive_province_name.trim()?e="请选择收货地址所在地区":this.data.address.receive_addr.length>132?e="收货地址字符过多，请重新输入":/^[\u4e00-\u9fa5|\u0021-\u007e|\uff01-\uff5e|\s]{1,132}$/.test(this.data.address.receive_addr)?0==this.data.materialList.length&&(e="请先选择要购买的商品"):e="收货地址含有特殊字符，请重新输入":e="手机号码需为11位数字的真实号码":e="收货人姓名含有特殊字符，请重新输入",!e||(wx.showModal({title:"提示",content:e,showCancel:!1}),!1)},submit:function(){if(s.Event.stat("event",{pay:"true"}),this.data.isPaying)return!1;if(!this.verify())return!1;this.setData({isPaying:!0});for(var e=[],t=0;t<this.data.materialList.length;t++)e.push({sku_id:this.data.materialList[t].sku_list[0].sku_id,sku_num:this.data.materialList[t].count});var i={sku_list:e,receive_address:this.data.address,total_fee:this.data.total_fee};this.data.needinvoice&&(i.invoice=this.data.invoice);var r=this;a.request({url:"order/submit",data:i,method:"POST",header:{"content-type":"application/json"},showLoading:!0,success:function(e){r.pay(e)}})},pay:function(e){var a=this,s=e.orderid;delete e[s];var i=t.enterprise.init({env:e.sandbox?1:0,autoDestroy:!1});e.goodstokenurl=e.url_params,i.launchPay(e,function(e){0==e.resultCode?(t.enterprise.destroy(),a.next(s)):-2==e.resultCode||(wx.showModal({title:"支付失败",content:e.resultMsg||"请稍后重试",showCancel:!1}),console.error(e)),a.setData({isPaying:!1})})},next:function(e){wx.redirectTo({url:"../myorderdetail/myorderdetail?id="+e})}}); 
 			}); 	require("pages/mall/pages/pay/pay.js");
 		__wxRoute = 'pages/mall/pages/pay_list/pay_list';__wxRouteBegin = true; 	define("pages/mall/pages/pay_list/pay_list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),t=(require("../../utils/weRequest.js"),require("../../../../lib/mta_analysis"));Page({data:{materialList:[]},onLoad:function(i){t.Page.init(),this.setData({materialList:a.globalData.mall.materialList})}}); 
 			}); 	require("pages/mall/pages/pay_list/pay_list.js");
 		__wxRoute = 'pages/mall/pages/apply/apply';__wxRouteBegin = true; 	define("pages/mall/pages/apply/apply.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,a,i){return a in t?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,t}var a=getApp(),i=require("../../utils/weRequest.js"),e=require("../../../../lib/mta_analysis");Page({data:{materialList:[],price:0,allPrice:0,selectedCount:0},onLoad:function(t){e.Page.init(),this.getData()},getData:function(){var t=this;i.request({url:"apply/list",data:{version:a.globalData.data.version},showLoading:!0,success:function(i){t.setData({materialList:i.material_info_list.map(function(t){return t.count=0,t}),allPrice:i.material_freight}),t.updateCountFromApp(),a.globalData.mall.material_freight=i.material_freight,a.globalData.mall.invoice_freight=i.invoice_freight,a.globalData.mall.free_freight_fee=i.free_freight_fee}})},onShow:function(){this.updateCountFromApp()},onHide:function(){a.globalData.mall.list=this.data.materialList},updateCountFromApp:function(){var t=this.data.materialList.map(function(t){for(var i=0;i<a.globalData.mall.list.length;i++)t.material_id==a.globalData.mall.list[i].material_id&&(t.count=a.globalData.mall.list[i].count);return t});this.setData({materialList:t}),this.updatePriceAndCount()},findMaterial:function(t){for(var a=0,i=0,e=0,r=0;r<this.data.materialList.length;r++)this.data.materialList[r].material_id==t&&(a=this.data.materialList[r].count,i=r,e=this.data.materialList[r].sku_list[0].stock);return{index:i,count:a,stock:e}},add:function(a){var i=a.currentTarget.dataset.id,e=this.findMaterial(i);e.count<e.stock?(this.setData(t({},"materialList["+e.index+"].count",parseInt(e.count)+1)),this.updatePriceAndCount()):wx.showModal({title:"库存不足",showCancel:!1})},minus:function(a){var i=a.currentTarget.dataset.id,e=this.findMaterial(i);e.count>0&&(this.setData(t({},"materialList["+e.index+"].count",parseInt(e.count)-1)),this.updatePriceAndCount())},changeCount:function(a){var i=a.currentTarget.dataset.id,e=this.findMaterial(i);a.detail.value<e.stock?this.setData(t({},"materialList["+e.index+"].count",parseInt(a.detail.value))):(this.setData(t({},"materialList["+e.index+"].count",parseInt(e.stock))),wx.showModal({title:"库存不足",showCancel:!1})),this.updatePriceAndCount()},updatePriceAndCount:function(){var t=!1,i=0,e=0;this.data.materialList.filter(function(t){return t.count>0}).forEach(function(a){a.sku_list[0].hasOwnProperty("first_price")?(i+=a.sku_list[0].first_price,i+=a.sku_list[0].price*(a.count-1),a.sku_list[0].hasOwnProperty("is_first_freight_free")&&(t=a.sku_list[0].is_first_freight_free)):i+=a.sku_list[0].price*a.count,e+=a.count});var r;r=t||0===e?0:i>=a.globalData.mall.free_freight_fee?0:a.globalData.mall.material_freight;var n=i+r;this.setData({price:i,selectedCount:e,material_freight:r,allPrice:n})},next:function(){this.data.selectedCount>0&&wx.navigateTo({url:"../pay/pay"})}}); 
 			}); 	require("pages/mall/pages/apply/apply.js");
 		__wxRoute = 'pages/mall/pages/provision/provision';__wxRouteBegin = true; 	define("pages/mall/pages/provision/provision.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=require("../../../../lib/mta_analysis");Page({data:{},onLoad:function(i){a.Page.init()}}); 
 			}); 	require("pages/mall/pages/provision/provision.js");
 		__wxRoute = 'pages/mall/pages/apply_detail/apply_detail';__wxRouteBegin = true; 	define("pages/mall/pages/apply_detail/apply_detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=require("../../utils/weRequest.js"),e=require("../../../../lib/mta_analysis");Page({data:{material_id:null,detail:{},selectedCount:0},onLoad:function(t){e.Page.init(),this.setData({material_id:t.id}),this.getData()},onUnload:function(){for(var a=this,e=!0,i=0;i<t.globalData.mall.list.length;i++)t.globalData.mall.list[i].material_id==this.data.material_id&&(t.globalData.mall.list[i].count=a.data.detail.count,e=!1);e&&t.globalData.mall.list.push(a.data.detail)},getData:function(){var e=this;a.request({url:"apply/detail",method:"POST",data:{material_id:e.data.material_id},showLoading:!0,success:function(a){a.count=0;for(var i=0;i<t.globalData.mall.list.length;i++)t.globalData.mall.list[i].material_id==a.material_id&&(a.count=t.globalData.mall.list[i].count);e.setData({detail:a}),e.updateCount()}})},add:function(){var t=this;this.data.detail.count<this.data.detail.sku_list[0].stock?(this.setData({"detail.count":parseInt(t.data.detail.count)+1}),this.updateCount()):wx.showModal({title:"库存不足",showCancel:!1})},minus:function(){var t=this;this.data.detail.count>0&&(this.setData({"detail.count":parseInt(t.data.detail.count)-1}),this.updateCount())},changeCount:function(t){var a=this;t.detail.value<this.data.detail.sku_list[0].stock?this.setData({"detail.count":parseInt(t.detail.value)}):(this.setData({"detail.count":parseInt(a.data.detail.sku_list[0].stock)}),wx.showModal({title:"库存不足",showCancel:!1})),this.updateCount()},updateCount:function(){var a=this,e=0;t.globalData.mall.list.filter(function(t){return t.count>0}).forEach(function(t){t.material_id!=a.data.material_id&&(e+=t.count)}),e+=this.data.detail.count,this.setData({selectedCount:e})},goToPay:function(){this.data.selectedCount>0&&(e.Event.stat("event",{detail2pay:"true"}),wx.redirectTo({url:"../pay/pay"}))},onMore:function(){var t=[],a="navigateBack";"function"==typeof getCurrentPages&&(a=(t=getCurrentPages()).length>1&&"pages/mall/pages/apply/apply"===t[t.length-2].route?"navigateBack":"redirectTo"),"navigateBack"===a?wx.navigateBack():"redirectTo"===a&&wx.redirectTo({url:"../apply/apply"})}}); 
 			}); 	require("pages/mall/pages/apply_detail/apply_detail.js");
 		__wxRoute = 'pages/receipt/index';__wxRouteBegin = true; 	define("pages/receipt/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e(require("../../lib/util")),a=e(require("../../lib/request")),n=e(require("pos_order")),s=require("../../lib/mta_analysis");getApp();Page({data:{tips:{isShow:!1,text:""},pageDisabled:!1,maxFee:1e4,sid:"",shopChannel:[],selectedShop:{shop_id:0,shop_name:"请选择收款门店",channel_key:""},canSubmit:"disabled",usePromotion:!1,shopMode:{singleMode:"",multiMode:"hide"},mode:{normalMode:"",promotionMode:"hide"},promotionPanelClass:"animate-slide-up",promotionMaskClass:"animate-fade-in",showPromotionPanel:"hide",showCalculating:!1,shopListDisabled:!0,scanning:!1,fee:"",realFee:0,resultFee:"",resultFeeClass:"",defaultPromotions:[],promotions:[],selectedPromotion:{},promotion_id:""},showTips:function(e){var t=this;this.setData({tips:{isShow:!0,text:e}}),setTimeout(function(){t.setData({tips:{isShow:!1,text:""}})},2e3)},getSid:function(){var e=this,t=wx.getStorageSync("sid");return t&&t!==e.data.sid?(e.setData({sid:t}),t):e.data.sid},getPromotions:function(){var e=this,t="https://payapp.weixin.qq.com/mdmgr/promotion/get",n=e.getSid();return!!e.data.usePromotion&&(!!e.data.selectedShop.shop_id&&void(0,a.default)({url:t,data:{sid:n,shop_id:e.data.selectedShop.shop_id},showLoading:!1,success:function(a){var s=a.data;if(console.log("[promotion/get]",s),0==s.errcode){var i=s.data;if("string"==typeof s)return this.fail(a),!1;var r=i.promotions;if(r.length>0){var d=e.initPromotions(r,e.data.realFee);e.renderPromotions(d),e.switchMode("promotionMode",d)}else e.switchMode("normalMode",[])}else e.switchMode("normalMode",[]),o.default.mtaErrReport({cgi:t+":"+s.errcode+"sid:"+n||"",code:s.errcode,msg:"order_detail_"+s.msg})},fail:function(t){wx.showModal({title:"温馨提示",content:"暂时无法获取优惠信息，请稍后重试",cancelText:"知道了",confirmText:"重新加载",success:function(t){t.confirm?e.getPromotions():e.switchMode("normalMode")},fail:function(e){console.log("弹窗失败")}})}}))},switchMode:function(e,t){var o=this;"promotionMode"===e?o.setData({usePromotion:!0,promotion_id:"",fee:"",realFee:0,resultFee:"0.00",resultFeeClass:"disabled",canSubmit:"disabled",defaultPromotions:t,mode:{normalMode:"hide",promotionMode:""}}):o.setData({usePromotion:!1,promotion_id:"",canSubmit:"disabled",fee:"",realFee:0,resultFee:"0.00",resultFeeClass:"disabled",selectedPromotion:{},promotions:[],defaultPromotion:[],mode:{normalMode:"",promotionMode:"hide"}})},initPromotions:function(e,t){for(var o=[],a=0;a<e.length;a++){var n=e[a];n.available?n.available="":n.available="disabled",n.is_best=!!n.is_best,n.sub_txt=n.sub_txt||"",n.reduce_txt=n.reduce_txt||"",n.fee=n.fee||0,n.selected="",n.is_best?o.unshift(n):o.push(n)}var s={promotion_id:"",is_best:!1,available:"",txt:"不使用优惠",sub_txt:"",reduce_txt:"",selected:"",fee:t};return o.push(s),o},renderPromotions:function(e){var t=this;t.setSelectedPromotion(e[0]),t.setData({promotions:e})},setSelectedPromotion:function(e){var t=this;e.selected="selected";var a="";"disabled"!==e.available&&(a=e.promotion_id),console.log("selectedPromotion_id:"+e.promotion_id);var n=o.default.formatFee(e.fee),s="";0==e.fee&&(s="disabled"),t.setData({selectedPromotion:e,promotion_id:a,resultFee:n,resultFeeClass:s,showCalculating:!1})},selectPromotion:function(e){var t=this;console.log(e),console.log(e.target);var o=e.currentTarget.dataset.index;console.log(o);var a=t.data.promotions;if(a.length>o){if("disabled"===a[o].available)return!1;for(var n=0;n<a.length;n++)"selected"===(s=a[n]).selected&&(s.selected="");var s=a[o];s.selected="selected",t.setSelectedPromotion(a[o]),t.setData({promotions:a}),setTimeout(function(){t.closePromotionPanel()},100)}},changeDefaultPromotion:function(e){for(var t=this,o=0;o<t.data.defaultPromotions.length;o++){var a=t.data.defaultPromotions[o];a.fee=e,a.selected=""}},setWording:function(e){var t=this;if(t.data.showCalculating===e)return!0;var o=t.data.selectedPromotion;o.available="",t.setData({showCalculating:e,selectedPromotion:o})},getMatchPromotions:function(){var e=this,t="https://payapp.weixin.qq.com/mdmgr/promotion/match",n=e.getSid();if(!e.data.usePromotion)return!1;if(0===e.data.defaultPromotions.length)return!1;var s=e.data.realFee;return setTimeout(function(){if(s!==e.data.realFee)return!1;(0,a.default)({url:t,data:{sid:n,shop_id:e.data.selectedShop.shop_id,fee:s},showLoading:!1,success:function(a){if(e.data.realFee!==s)return!1;var i=a.data;if("string"==typeof i)return this.fail(a),!1;if(console.log("[promotion/get]",i),0===i.errcode){var r=i.data.promotions;if(r.length>0){var d=e.initPromotions(r,s);e.renderPromotions(d),e.setData({promotions:d})}else e.renderPromotions(e.data.defaultPromotions)}else e.renderPromotions(e.data.defaultPromotions),o.default.mtaErrReport({cgi:t+":"+i.errcode+"sid:"+n||"",code:i.errcode,msg:"order_detail_"+i.msg})},fail:function(t){if(e.data.realFee!==s)return!1;wx.showModal({title:"温馨提示",content:"暂时无法获取优惠信息，请稍后重试",cancelText:"知道了",confirmText:"重新计算",success:function(t){t.confirm?e.getMatchPromotions():e.renderPromotions(e.data.defaultPromotions)},fail:function(e){console.log("弹窗失败")}})},complete:function(t){if(e.data.realFee!==s)return!1}})},350),!1},closePromotionPanel:function(){this.setData({promotionPannelClass:"animate-slide-down",promotionMaskClass:"animate-fade-out",showPromotionPanel:"hide"})},showPromotionPanel:function(){var e=this;return"disabled"!==e.data.selectedPromotion.available&&(e.setData({showPromotionPanel:"",promotionMaskClass:"animate-fade-in",promotionPannelClass:"animate-slide-up"}),!1)},check:function(e){var t=this;return/^\d+(\.\d{1,2})?$/g.test(e)?!(0===(e=o.default.accMul(e,100))||e>Number(100*t.data.maxFee))&&(t.setData({realFee:e}),!0):(t.setData({realFee:0}),!1)},isShowButton:function(){var e=this,t=this.data.fee;e.check(t)?(e.setData({canSubmit:""}),e.data.usePromotion&&(e.changeDefaultPromotion(e.data.realFee),e.setWording(!0),e.getMatchPromotions())):(e.setData({canSubmit:"disabled"}),e.data.usePromotion&&e.data.defaultPromotions.length>0&&(e.changeDefaultPromotion(0),e.renderPromotions(e.data.defaultPromotions)))},getShopChannel:function(){var e=this;n.default.getStorage({key:"shop_channel",success:function(t){console.log("getShopChannel");var a=t.last_update_time,n=o.default.getTimeStamp();e.setShopChannel(t.shop_channel),n-a>60&&e.getShopChannelFromApi(e.checkShopChannel)},fail:function(t){e.getShopChannelFromApi(e.checkShopChannel)}})},setShopChannel:function(e){var t=this,o=t.data.selectedShop.shop_id;if(o){for(var a=!1,n=0;n<e.length;n++)e[n].shop_id===o&&(a=!0);a||(t.setData({selectedShop:{shop_id:0,shop_name:"请选择收款门店",channel_key:""}}),wx.removeStorage({key:"pos_selected_shop"}))}1===e.length?(t.setData({shopChannel:e,selectedShop:e[0],shopMode:{singleMode:"",multiMode:"hide"}}),wx.setStorage({key:"pos_selected_shop",data:t.data.selectedShop})):t.setData({shopChannel:e,shopMode:{singleMode:"hide",multiMode:""}})},getShopChannelFromApi:function(e){var t=this,n=t.getSid();(0,a.default)({url:"https://payapp.weixin.qq.com/mdmgr/pos/open",data:{sid:n},showLoading:!1,success:function(a){console.log(a);var n=a.data;if("string"==typeof n)return this.fail(a),!1;if(console.log("[pos/open] json:",n),0===n.errcode){var s=n.data;s.shop_channel.length>0&&(s.last_update_time=o.default.getTimeStamp(),t.setShopChannel(s.shop_channel),wx.setStorage({key:"shop_channel",data:s}))}else e()},fail:function(t){console.log("getShopChannelFromApi Err"),e()}})},checkShopChannel:function(){var e=this;0!==e.data.shopChannel.length||e.data.selectedShop.shop_id||(e.setData({pageDisabled:!0}),e.showTips("门店信息加载失败，请稍后重试"))},changeShop:function(e){var t=this,o=e.detail.value;if(t.data.shopChannel.length<=o)console.log("无效门店");else{if(t.data.selectedShop.shop_id===t.data.shopChannel[o].shop_id)return!1;t.setData({usePromotion:!1,selectedShop:t.data.shopChannel[o]}),console.log(t.data.selectedShop),wx.setStorage({key:"pos_selected_shop",data:t.data.selectedShop}),t.getPromotions()}},loadSelectedShop:function(e){var t=this;if(t.data.selectedShop.shop_id)return e(),!1;n.default.getStorage({key:"pos_selected_shop",success:function(o){t.setData({selectedShop:o}),e()}})},loadSid:function(e,t){var o=this;e&&e.sid?(o.setData({sid:e.sid}),t()):n.default.getStorage({key:"sid",success:function(e){console.log(e),o.setData({sid:e}),t()},fail:function(){t(),s.Event.stat("errCode",{msg:"receipt_getStorage_sid_fail"})}})},numberKeyTap:function(e){var t=this;if(!t.data.pageDisabled){var a=e.currentTarget.dataset.num,n=t.data.fee;if(n.indexOf(".")<0&&o.default.accMul(n,10)+Number(a)>t.data.maxFee)return t.showTips("单笔收款最高金额为"+t.data.maxFee+"元"),!1;if(0==n.length&&"."==a)a="0.";else{if("0"==n&&"0"==a)return!1;if(n.indexOf(".")>-1){if("."==a)return!1;if(2==n.split(".")[1].length)return!1}}return t.setData({fee:n+a}),t.isShowButton(),!1}},backspaceKeyTap:function(e){var t=this,o=t.data.fee;o.length>0&&(o=o.substring(0,o.length-1),t.setData({fee:o})),t.isShowButton()},confirmKeyTap:function(e){var t=this;return"disabled"!==t.data.canSubmit&&(t.data.selectedShop.shop_id?t.data.realFee>100*t.data.maxFee||t.data.realFee<=0?(t.showTips("无效金额："+t.data.fee),!1):!t.data.scanning&&(t.setData({scanning:!0}),void t.getTradeNo()):(t.showTips("请选择收款门店"),!1))},getTradeNo:function(){var e=this,o=e.getSid();(0,a.default)({url:"https://payapp.weixin.qq.com/mdmgr/pos/gettradeno",data:{sid:o,shop_id:e.data.selectedShop.shop_id,key:e.data.selectedShop.channel_key},showLoading:!1,success:function(o){var a=o.data;if("object"!==(void 0===a?"undefined":t(a)))return this.fail(o),!1;if(console.log("[pos/gettradeno]",a),0==a.errcode){var n=a.data;e.scanCode(n.trade_no)}else e.setData({scanning:!1})},fail:function(){e.setData({scanning:!1}),e.showTips("当前网络不可用，请检查你的网络设置")}})},scanCode:function(e){var t=this;wx.scanCode({onlyFromCamera:!0,success:function(o){console.log("二维码:",o.result),/^\d+$/g.test(o.result)?(console.log(t.data.realFee),t.pay(e,o.result)):t.showTips("请扫描微信支付付款码")},fail:function(){t.setData({scanning:!1}),console.log("扫码失败")}})},pay:function(e,t){var a=this,s=o.default.getTimeStamp();console.log("fddfd",a.data.realFee);var i={shop_id:a.data.selectedShop.shop_id,channel_key:a.data.selectedShop.channel_key,trade_no:e,auth_code:t,fee:a.data.realFee,promotion_id:a.data.promotion_id,time_start:s,trade_state:"SCANNED"};console.log("paying ......."),console.log("fee",a.data.realFee),n.default.saveOrder(i,function(){var e=Object.assign({},{sid:a.getSid(),action:"submit"},i);console.log(e),wx.navigateTo({url:"paying?"+o.default.encodeParam(e)})})},onShow:function(e){console.log("invoke onshow",this.data.scanning),this.data.scanning?this.setData({scanning:!1}):(this.setData({fee:"",realFee:0,resultFee:"",resultFeeClass:"",defaultPromotions:[],promotions:[],selectedPromotion:{},promotion_id:""}),this.getShopChannel())},onLoad:function(e){s.Page.init(),wx.setNavigationBarTitle({title:"扫码收款"}),this.loadSid(e,function(){}),this.loadSelectedShop(function(){})}}); 
 			}); 	require("pages/receipt/index.js");
 		__wxRoute = 'pages/receipt/fail';__wxRouteBegin = true; 	define("pages/receipt/fail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e){return e&&e.__esModule?e:{default:e}}(require("../../lib/request")),r=require("../../lib/mta_analysis");getApp();Page({data:{sid:"",trade_no:"",err_code:"",err_msg:"",trade_state:"",fee:0,err_tips:{title:"",err_msg:"",show_fresh_btn:!1}},toIndex:function(e){wx.navigateBack()},onLoad:function(e){r.Page.init(),console.log("[receipt/fail] onLoad options: ",e);var t=0;e.fee&&(t=parseInt(t)),this.setData({sid:e.sid,trade_no:e.trade_no,err_code:e.err_code,err_msg:decodeURIComponent(e.err_msg),trade_state:e.trade_state,fee:t}),this.showFailTips(this.data.trade_state,this.data.err_code,this.data.err_msg)},getSid:function(){var e=this,t=wx.getStorageSync("sid");return t&&t!=e.data.sid?(e.setData({sid:t}),t):e.data.sid},query:function(){var r=this,o=r.getSid();(0,t.default)({url:"https://payapp.weixin.qq.com/mdmgr/pos/queryorder",data:{sid:o,trade_no:r.data.trade_no},showLoading:!1,success:function(t){var o=t.data;if("object"!==(void 0===o?"undefined":e(o)))return this.fail(t),!1;if(console.log("[pos/query]",o),0===o.errcode){var s=o.data.order;if(console.log("result:",s),"SUCCESS"===s.pos_state){var a={trade_no:r.data.trade_no,fee:r.data.fee};wx.redirectTo({url:"succ?"+Util.encodeParam(a)})}else"FAIL"===s.pos_state&&r.showFailTips("FAIL",s.err_code,s.err_msg)}else 269877254!==o.errcode&&269877265!==o.errcode||r.showFailTips("FAIL","ORDER_NOT_FOUND","订单提交失败")},fail:function(e){}})},onPullDownRefresh:function(){console.log("下拉刷新"),wx.stopPullDownRefresh()},refresh:function(){this.query()},showFailTips:function(e,t,r){var o=this;console.log(e,t,r);var s={AUTHCODEEXPIRE:"付款码已失效，请用户刷新付款码后，重新扫码",QUERY_TIMEOUT:"网络超时，请刷新",ORDER_NOT_FOUND:"网络不稳定，请重试",MICROPAY_FAIL:"订单提交失败"},a="";a=s.hasOwnProperty(t)?s[t]:r,"SCANNED"==e?o.setData({err_tips:{title:"网络异常",err_msg:a,show_fresh_btn:!0}}):o.setData({err_tips:{title:"收款失败",err_msg:a+"("+t+")",show_fresh_btn:!1}})}}); 
 			}); 	require("pages/receipt/fail.js");
 		__wxRoute = 'pages/receipt/succ';__wxRouteBegin = true; 	define("pages/receipt/succ.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=function(e){return e&&e.__esModule?e:{default:e}}(require("../../lib/util")),t=require("../../lib/mta_analysis");Page({data:{trade_no:"",fee:""},toIndex:function(e){wx.navigateBack()},onLoad:function(a){t.Page.init(),console.log("[receipt/succ] onLoad options: ",a),this.setData({fee:e.default.formatFee(parseInt(a.fee)),trade_no:a.trade_no})}}); 
 			}); 	require("pages/receipt/succ.js");
 		__wxRoute = 'pages/receipt/paying';__wxRouteBegin = true; 	define("pages/receipt/paying.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=e(require("../../lib/util")),a=e(require("../../lib/request")),o=e(require("pos_order")),d=require("../../lib/mta_analysis");getApp();Page({data:{sid:"",timer:0,action:"",displayFee:"",order:{trade_no:"",auth_code:"",shop_id:0,channel_key:"",fee:0,promotion_id:"",time_start:0,trade_state:"",err_code:"",err_msg:""}},getSid:function(){var e=this,r=wx.getStorageSync("sid");return r&&r!=e.data.sid?(e.setData({sid:r}),r):e.data.sid},micropay:function(){var e=this,d=e.getSid();(0,a.default)({url:"https://payapp.weixin.qq.com/mdmgr/pos/micropay",data:{sid:d,shop_id:e.data.order.shop_id,key:e.data.order.channel_key,trade_no:e.data.order.trade_no,auth_code:e.data.order.auth_code,fee:e.data.order.fee,promotion_id:e.data.order.promotion_id},showLoading:!1,success:function(a){var i=a.data;if("object"!==(void 0===i?"undefined":r(i)))return this.fail(a),!1;if(console.log("[pos/micropay]",i),0===i.errcode){var n=i.data;e.parsePayResult(n)}else if(268700673===i.err_code)wx.showModal({title:"温馨提示",content:"优惠使用失败，请重新尝试",cancelText:"不使用优惠",confirmText:"重新尝试",success:function(r){if(r.confirm)e.micropay();else{var a=t.default.getTimeStamp(),d=Object.assign({},e.data().order,{promotion_id:"",time_start:a});o.default.saveOrder(d,function(){e.micropay()})}},fail:function(e){console.log("弹窗失败")}});else if(16793787===i.errcode)e.interValQuery();else{var s={sid:d,trade_no:e.data.order.trade_no,err_code:"MICROPAY_FAIL",err_msg:"订单提交失败"};wx.redirectTo({url:"fail?"+t.default.encodeParam(s)})}}})},query:function(){var e=this,d=e.getSid(),i=t.default.getTimeStamp();if(console.log(i),console.log(r(e.data.order.time_start)),e.data.order.time_start+63<i){e.clearTimer();var n={sid:d,trade_no:e.data.order.trade_no,trade_state:order.trade_state,err_code:"QUERY_TIMEOUT",err_msg:"系统超时未返回订单"};return wx.redirectTo({url:"fail?"+t.default.encodeParam(n)}),!1}(0,a.default)({url:"https://payapp.weixin.qq.com/mdmgr/pos/queryorder",data:{sid:d,trade_no:e.data.order.trade_no},showLoading:!1,success:function(a){var i=a.data;if("object"!==(void 0===i?"undefined":r(i)))return this.fail(a),!1;if(console.log("[pos/query]",i),0===i.errcode){var n=i.data;e.parsePayResult(n)}else if(269877254===i.errcode||269877265===i.errcode){o.default.delOrder();var s={sid:d,trade_no:e.data.order.trade_no,err_code:"ORDER_NOT_FOUND",err_msg:"订单提交失败"};wx.redirectTo({url:"fail?"+t.default.encodeParam(s)})}},fail:function(e){}})},interValQuery:function(){var e=this;if(0===e.data.timer){var r=setInterval(function(){e.query()},2e3);e.setData({timer:r})}},clearTimer:function(){var e=this;0!==e.data.timer&&(clearInterval(e.data.timer),e.setData({timer:0}))},parsePayResult:function(e){var r=this,a=e.order;if(console.log("result:",a),"SUCCESS"===a.pos_state){r.clearTimer();o={trade_no:r.data.order.trade_no,fee:r.data.order.fee};wx.redirectTo({url:"succ?"+t.default.encodeParam(o)})}else if("FAIL"===a.pos_state){r.clearTimer();var o={sid:r.getSid(),trade_no:r.data.order.trade_no,trade_state:"FAIL",err_code:a.err_code,err_msg:a.err_msg};wx.redirectTo({url:"fail?"+t.default.encodeParam(o)})}},onUnload:function(){this.clearTimer()},onLoad:function(e){d.Page.init(),console.log("[receipt/paying] onLoad options: ",e);var r=this;this.setData({sid:e.sid,action:e.action,displayFee:t.default.formatFee(e.fee),order:{trade_no:e.trade_no,shop_id:parseInt(e.shop_id),auth_code:e.auth_code,channel_key:e.channel_key,fee:e.fee,promotion_id:e.promotion_id,time_start:parseInt(e.time_start),trade_state:e.trade_state}}),"submit"===r.data.action?r.micropay():r.interValQuery()}}); 
 			}); 	require("pages/receipt/paying.js");
 		__wxRoute = 'pages/reward/list';__wxRouteBegin = true; 	define("pages/reward/list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var a=t(require("../../login")),e=t(require("../../lib/util")),i=(t(require("../../lib/wechat")),t(require("../../lib/request"))),s=require("../../lib/mta_analysis");getApp();Page({data:{sid:"",activity_id:12482950,source:"",isLoading:!0,goingList:[],historyList:[],tagStatusMap:{mission_running:{text:"任务进行中",class:"status-green"},hongbao_not_received:{text:"红包待领取",class:"status-green"},hongbao_received:{text:"红包已领取",class:"status-gray"},hb_outoflimit:{text:"红包已领取",class:"status-gray"},senttimes_err:{text:"红包待补发",class:"status-gray"},user_hasbeen_received:{text:"红包已领取",class:"status-gray"},hbstatus_stop:{text:"活动已结束",class:"status-gray"},company_hasbeen_received:{text:"红包已领取",class:"status-gray"},hbstatu_err:{text:"红包待领取",class:"status-green"}}},initData:function(t){var a=this,e=this.data.tagStatusMap[t.tag_status],i=(parseInt((new Date).getTime()/1e3),{name:"新商户首笔收款奖励",link:"../reward/detail?activity_id="+a.data.activity_id,icon_url:"http://wximg.gtimg.com/wechat_pay_mchapp/mdactivity/mission_demo7.png",start_time:"2017.7.31",end_time:"2017.9.30",tagStatus:e});a.setData({goingList:[{name:"店员红包奖励活动",link:"/pages/reward/detail",icon_url:"https://wx.gtimg.com/payapp/weapp/img/reward/clerkHb/icon.png?t=44",start_time:"",end_time:""}],historyList:[i]})},getData:function(){var t=this,a=this.data.sid,s="https://payapp.weixin.qq.com/mdmgr/actmission/checknewmchmission";(0,i.default)({url:s,data:{sid:a||wx.getStorageSync("sid"),activity_id:this.data.activity_id},success:function(i){var r=i.data;console.log(i),0==r.errcode?t.initData(r.data):(wx.showModal({title:"提示",content:r.msg||"",showCancel:!1}),e.default.mtaErrReport({cgi:e.default.getShortUrl(s)+"_code:"+r.errcode+"_sid:"+a||"",code:r.errcode,msg:e.default.getShortUrl(s)+"_"+r.msg+"_sid:"+a||""}))}})},init:function(t){var a=this;t&&t.sid?(a.setData({sid:t.sid}),this.getData()):wx.getStorage({key:"sid",success:function(t){console.log(t.data),a.setData({sid:t.data}),this.getData()},fail:function(){s.Event.stat("errCode",{msg:"record_getStorage_sid_fail"})}})},onLoad:function(t){console.log("[dayReport/detail] options: ",t),s.Page.init();var e=this;t.mch_id?(this.setData({source:"template"}),a.default.checkLogin(e.init,t.mch_id)):a.default.checkLogin(e.init)}}); 
 			}); 	require("pages/reward/list.js");
 		__wxRoute = 'pages/reward/detail';__wxRouteBegin = true; 	define("pages/reward/detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var e,a=t(require("../../login")),o=t(require("../../lib/util")),n=t(require("../../lib/request")),i=t(require("../../lib/wechat")),s=require("../../lib/mta_analysis"),r="";Page({data:{leftNumber:0,shopMap:{},list:[],packetList:[],openHbShopId:"",openHbNum:"0",params:{pageNumber:1,pageSize:5},no_quota:!1,showForbidden:!1,status:"",toView:"#"},checkErrorCode:function(t){"268701196"==t?this.setData({showForbidden:!0}):"268701194"==t&&this.setData({status:"end"})},clickPacket:function(t){if(!wx.canIUse("sendBizRedPacket"))return wx.showModal({title:"提示",content:"您的微信版本不支持领取此红包，请升级到最新版微信",showCancel:!1}),!1;var e=this,a=t.currentTarget.dataset.shop,s=t.currentTarget.dataset.num,r=r||wx.getStorageSync("sid"),c="https://payapp.weixin.qq.com/mdmgr/acthongbao/sendorderhb";this.setData({openHbShopId:a,openHbNum:s}),(0,n.default)({url:c,data:{sid:r,shop_id:a},showLoading:!1,success:function(t){var a=t.data;if(0==a.errcode){var n=a.data;e.openPacket(n)}else{var s=a.msg;"269877764"==a.errcode&&(s="此红包24小时未领取，已过期。"),e.checkErrorCode(a.errcode),i.default.showModal({title:"",content:s||"",confirmText:"知道了"}),e.stopPoll(),o.default.report(c,r,a)}}})},openPacket:function(t){var e=this,a={timeStamp:t.timestamp+"",nonceStr:t.noncestr,package:t.package,signType:"MD5",paySign:t.paysign,success:function(a){console.log(JSON.stringify(a)),e.updatePacketState(t.packetkey)},fail:function(t){console.log(JSON.stringify(t))}};e.stopPoll(),wx.sendBizRedPacket(a)},updatePacketState:function(t){var e=this,a=a||wx.getStorageSync("sid"),i="https://payapp.weixin.qq.com/mdmgr/acthongbao/updateorderhb";(0,n.default)({url:i,data:{sid:a,packetkey:t},showLoading:!1,success:function(t){var n=t.data;if(0==n.errcode){var s=n.data.state;s&&4==s&&function(){e.getOpenedHbList();var t=e.data.list,a=e.data.openHbShopId,o=e.data.openHbNum,n={},i=0;t:for(var s=0;s<t.length;s++)switch(function(s){if((n=t[s]).shop_id==a)return o!=i?(i++,"continue"):(n.showHb=1,e.setData({list:t}),console.log("添加动效：",s),setTimeout(function(){e.poll(),n.showHb=0,t.splice(s,1),e.setData({list:t}),console.log("红包隐藏：",e.data.list)},2e3),"break")}(s)){case"continue":continue;case"break":break t}}()}else e.checkErrorCode(n.errcode),e.stopPoll(),o.default.report(i,a,n)}})},formatDate:function(t){var e=o.default.dateDetail(t);return e.m.toString()+"-"+e.d.toString()+" "+e.hh.toString()+":"+e.mm.toString()},initList:function(t){for(var e=this,a=void 0,o=0,n=0;n<t.packetlist.length;n++)(function(t){return new Date(t).toDateString()===(new Date).toDateString()})(1e3*(a=t.packetlist[n]).time)&&o++,a.time=e.formatDate(a.time),a.account=a.account?(a.account/100).toFixed(2):0;this.setData({no_quota:o>=10,packetList:t.packetlist,total:t.total})},getOpenedHbList:function(){var t=this,e=e||wx.getStorageSync("sid"),a=this.data.params,s="https://payapp.weixin.qq.com/mdmgr/acthongbao/getorderhbflow";(0,n.default)({url:s,data:{pageIndex:a.pageNumber,pageSize:a.pageSize,sid:e},showLoading:!1,success:function(a){var n=a.data;if(0==n.errcode){var r=n.data;t.initList(r)}else t.checkErrorCode(n.errcode),i.default.showModal({title:"",content:n.msg||"",confirmText:"知道了"}),t.stopPoll(),o.default.report(s,e,n)}})},initData:function(t){var e=t.no_open_packet.concat(t.no_get_packet),a=[],o={},n=!1,i=!1,s="#";t.no_open_packet.length>0&&(n=!0);for(var r=0;r<e.length;r++)if(o=e[r],e.length>1&&(o.shop_name=this.data.shopMap[o.shop_id]||""),o.order_count>=0)o.status="no_get",o.heightStyle="height:"+100*(o.order_count/10).toFixed(2)+"%",o.unique=o.shop_name+"_"+r,a.push(o),o.order_count>0&&!i&&(i=!0,s=o.unique);else if(o.status="no_open",o.showHb=0,o.hbNum=0,o.unique=o.shop_name+"_"+r+"_0",a.push(o),o.packet_count>1)for(var c=0;c<o.packet_count-1;c++){var d={};d.shop_id=o.shop_id,d.shop_name=o.shop_name,d.status="no_open",d.showHb=0,d.hbNum=c+1,d.unique=o.shop_name+"_"+r+"_"+(c+1),a.push(d)}this.setData({list:a,leftNumber:t.total_packet_left,toView:n?"#":s})},getData:function(){var t=this,e=e||wx.getStorageSync("sid"),a="https://payapp.weixin.qq.com/mdmgr/acthongbao/getorderhb";(0,n.default)({url:a,data:{sid:e},showLoading:!1,success:function(n){var s=n.data;if(0==s.errcode){var r=s.data;t.initData(r)}else t.checkErrorCode(s.errcode),i.default.showModal({title:"",content:s.msg||"",confirmText:"知道了"}),t.stopPoll(),o.default.report(a,e,s)}})},poll:function(){var t=this;e=setInterval(function(){t.getData()},3e3)},stopPoll:function(){e=clearInterval(e)},initShopData:function(t){for(var e=t.shops,a=void 0,o={},n=0;n<e.length;n++)o[(a=e[n]).shop_id]=a.shop_name;this.setData({shopMap:o})},getShops:function(){var t=this,e="https://payapp.weixin.qq.com/mdmgr/shop/list",a=a||wx.getStorageSync("sid");(0,n.default)({url:e,data:{sid:a},showLoading:!1,success:function(n){var s=n.data;0==s.errcode?(t.initShopData(s.data),t.getData(),t.getOpenedHbList(),setTimeout(function(){t.poll()},3e3)):(i.default.showModal({title:"",content:s.msg||"",confirmText:"知道了"}),t.stopPoll(),o.default.report(e,a,s))}})},init:function(t){var e=this;t&&t.sid?(r=t.sid,e.getShops()):wx.getStorage({key:"sid",success:function(t){r=t.data,e.getShops()},fail:function(){s.Event.stat("errCode",{msg:"activity_getStorage_sid_fail"})}})},onHide:function(){this.stopPoll()},onError:function(){this.stopPoll()},onUnload:function(){this.stopPoll()},onLoad:function(t){s.Page.init(),console.log("[reward/detail onLoad]options: "+JSON.stringify(t)),t.mch_id?a.default.checkLogin(this.init,t.mch_id):a.default.checkLogin(this.init)}}); 
 			}); 	require("pages/reward/detail.js");
 		__wxRoute = 'pages/reward/clerkHbRecord';__wxRouteBegin = true; 	define("pages/reward/clerkHbRecord.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return t&&t.__esModule?t:{default:t}}var a=t(require("../../login")),e=t(require("../../lib/util")),i=t(require("../../lib/request")),s=require("../../lib/mta_analysis"),o="";Page({data:{isLoading:!0,total:0,list:[],params:{pageNumber:1,pageSize:20}},formatDate:function(t){var a=e.default.dateDetail(t);return a.m.toString()+"-"+a.d.toString()+" "+a.hh.toString()+":"+a.mm.toString()},initData:function(t,a){console.log(t);var e=this,i=this.data.list,s=this.data.params,o=[],n=void 0;s.pageNumber++;for(var r=0;r<t.packetlist.length;r++)(n=t.packetlist[r]).time=e.formatDate(n.time),n.account=n.account?(n.account/100).toFixed(2):0;console.log("isRefresh: ",a),console.log(t.packetlist),o=0==a?i.concat(t.packetlist):t.packetlist,this.setData({list:o,params:s,total:o.length,isLoading:!1,showNoMore:0==t.packetlist.length||!1})},getList:function(t){var a=this,s=s||wx.getStorageSync("sid"),o=this.data.params,n="https://payapp.weixin.qq.com/mdmgr/acthongbao/getorderhbflow";(0,i.default)({url:n,data:{pageIndex:o.pageNumber,pageSize:o.pageSize,sid:s},success:function(i){var o=i.data;if(console.log("[reward/clerkHbRecord] json:",o),0==o.errcode){var r=o.data;a.initData(r,t)}else wx.showModal({title:"提示",content:o.msg||"",showCancel:!1}),e.default.report(n,s,o)}})},onReachBottom:function(){var t=this.data.params;t.pageNumber++,this.setData({params:t}),this.getList(!1)},onPullDownRefresh:function(){console.log("下拉刷新");var t=this.data.params;t.pageNumber=1,this.setData({params:t}),this.getList(),wx.stopPullDownRefresh()},init:function(t){var a=this;t&&t.sid?(o=t.sid,a.getList()):wx.getStorage({key:"sid",success:function(t){o=t.data,a.getList()},fail:function(){s.Event.stat("errCode",{msg:"reward_getStorage_sid_fail"})}})},onLoad:function(t){s.Page.init(),console.log("options: "+JSON.stringify(t)),t.mch_id?a.default.checkLogin(this.init,t.mch_id):a.default.checkLogin(this.init)}}); 
 			}); 	require("pages/reward/clerkHbRecord.js");
 	